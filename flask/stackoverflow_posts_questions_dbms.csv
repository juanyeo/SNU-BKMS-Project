id,title,body,accepted_answer_id,answer_count,comment_count,community_owned_date,creation_date,favorite_count,last_activity_date,last_edit_date,last_editor_display_name,last_editor_user_id,owner_display_name,owner_user_id,parent_id,post_type_id,score,tags,view_count
70257495,PostgreSQL: How can I check if table was created `WITH OIDS`?,<p>I want to upgrade PostgreSQL database to new version of this database which doesn't support OIDS. Some of the tables was created with <code>WITH OIDS</code>. I think it was by <code>default_with_oids</code> setting. Is there information if table was created <code>WITH OIDS</code> in system schema tables <code>information_schema.*</code> or in system catalog tables <code>pg_*</code> or in other place?</p>,70257634,1,0,,2021. 12. 7 오전 9:15:24,,2021. 12. 7 오전 9:27:03,,,,,22595,,1,1,sql|postgresql,256
70081753,Check if value is not null and not empty in a select query,"<p>I have created a function in Postgresql and specified the returned type as <code>TABLE (id uuid, data boolean)</code>.</p>
<p>This is the code that I have tried:</p>
<pre><code>BEGIN
    RETURN QUERY SELECT table.id, (table.data &lt;&gt; '') as data FROM table;
END
</code></pre>
<p>But it will return NULL for &quot;data&quot; when data is NULL in the table. I was expecting it to return FALSE.</p>
<p>Data column is storing a JSON and I am trying to check if the stored value is not null and not empty</p>
<p>How can I make this code work?</p>",70082075,1,0,,2021. 11. 23 오후 1:27:41,,2021. 11. 25 오전 10:11:38,2021. 11. 25 오전 10:11:38,,11962796,,11962796,,1,0,postgresql,1540
70028788,Host for postgresql db hosted on GCloud,"<p>Given a postgresql database instance hosted in GCloud, I am not sure if the host to connect to it, e.g., by some SDK or app, is the public IP address, the connection name or the service account. Do some of you know?</p>
<p>FYI the patterns are: the IP address is the standard xxx.xxx.xxx.xxx, the connection name is project_id:region:user and the connection name is user@provider</p>
<p>Best regards,
Bruno Peixoto</p>",,0,0,,2021. 11. 19 오전 1:36:58,,2021. 11. 19 오전 1:36:58,,,,,17438258,,1,0,postgresql,6
70027637,Get rows from A table with multiple records where last record has a value of X,"<p>I have 2 tables in mariadb</p>
<p>Table 1
id,did,status</p>
<p>Table 2 id,did,status</p>
<p>Table 1 can contain multiple records with the same did</p>
<p>So first step is I am trying to consolidate this into 1 row with the status being the highest entered id</p>
<p>For example if we have the following 3 rows</p>
<p>0, 9923323344, -1</p>
<p>1, 9923323344, -1</p>
<p>2, 9923323344, 1</p>
<p>Then the row I would get back is</p>
<p>0, 9923323344, 1</p>
<p>My attempt at this is</p>
<pre class=""lang-mysql prettyprint-override""><code>SELECT * FROM Table1 WHERE EXISTS (SELECT * FROM Table1 WHERE carrier='2' ORDER BY id DESC) GROUP BY did
</code></pre>

<p>Which gives me back wrong results for a specific example I got back</p>
<p>0,2078009797, -1</p>
<p>When I was expecting</p>
<p>0,2078009797, 1</p>
<p>The second part of this is once I have a correct list I would then like to get all of the rows out of this list that have a status of -1</p>
<pre class=""lang-mysql prettyprint-override""><code>SELECT * FROM Table1 WHERE EXISTS (SELECT * FROM Table1 WHERE EXISTS (SELECT * FROM Table1 WHERE carrier='2' ORDER BY id DESC) GROUP BY did) AND status='-1'
</code></pre>

<p>This also returns incorrect results as I get the following back for a specific example</p>
<p>0,2078009797, -1</p>
<p>1,2078009797, -1</p>
<p>2,2078009797, -1</p>
<p>When I was expecting</p>
<p>0,2078009797, 1</p>
<p>And then finally the last part of this is to check the list from the last query against Table2 and see if there is any rows with a status!='-1' AND did=Table1.did</p>",,0,0,,2021. 11. 18 오후 10:38:10,,2021. 11. 18 오후 10:38:10,,,,,17358811,,1,1,mysql,7
70113318,Multiple MySQL authentification options,"<p>I, I was wondering if it was possible to use multiple authentification options on a MySQL user. I tried the following CREATE USER STATEMENTS:</p>
<pre><code>CREATE USER 'monmur'@'localhost' IDENTIFIED WITH mysql_native_password BY 'cegep2020', IDENTIFIED WITH caching_sha2_password BY 'cegep2020';

CREATE USER 'monmur'@'localhost' IDENTIFIED WITH mysql_native_password BY 'cegep2020' AND IDENTIFIED WITH caching_sha2_password BY 'cegep2020';
</code></pre>
<p>None of these queries ran successfully.</p>",,0,0,,2021. 11. 25 오후 3:01:44,,2021. 11. 25 오후 3:01:44,,,,,14228180,,1,0,mysql,8
70292467,"How do i change my camp ""Tipe_of_element"" with a condition","<p>I want my camp &quot;Tipe_of_element&quot; change with some conditions but i cant figure how to do it</p>
<pre class=""lang-sql prettyprint-override""><code>CREATE VIEW Pub_list (Nome ,Data, Tipe_of_element)
AS SELECT p.Nome, p.Data_de_publicacao, tipe
FROM publicacao p, edicao_de_periodico a, edicao_de_livro b, monografia c
WHERE tipo LIKE
CASE WHEN p.Id = a.Publicacao_Id THEN 
    Tipe_of_element=&quot;Tipo Periódico&quot; 
  ELSE WHEN p.Id = b.Publicacao_Id THEN
    Tipe_of_element=&quot;Tipo Livro&quot;
  ELSE WHEN p.Id = c.Publicacao_Id THEN
   Tipe_of_element=&quot;Tipo Monografia&quot;
   ELSE
   Tipe_of_element=&quot;n.a.&quot;
   END
</code></pre>",,0,0,,2021. 12. 9 오후 3:25:07,,2021. 12. 9 오후 3:25:07,,,,,15368906,,1,0,mysql,9
70243758,Multi-hop traverse for contact tracing considering descending temporal property values in Cypher,"<p>I am trying to do multi-hop contact tracing in a fictive location-based social network where people can make check-ins to places. I want to find people who make check-ins to a place where a proven infected user (130314) already made check-in. I want to continue the process down the path of check-ins to find out people in the path, but in a temporally ascending order. How can I write the query in a way that middle check-ins are temporally ascending (or descending). This is the code I wrote before and the result:</p>
<pre><code>match p=((up:User{un:&quot;130314&quot;})-[r:CHECKIN*1..6]-(uc:User))
WITH head(relationships(p))as rf,last(relationships(p))as rl,p
WHERE all(rm in relationships(p) 
WHERE  rm.time.day = 5 AND duration.inSeconds(rf.time, rm.time).seconds &lt;= 10800 AND rl.time &gt; rf.time AND NOT rm.time &lt; rf.time)
return p
</code></pre>
<p><a href=""https://i.stack.imgur.com/jc5nD.png"" rel=""nofollow noreferrer"">enter image description here</a></p>",,0,0,,2021. 12. 6 오전 10:07:21,,2021. 12. 6 오전 10:07:21,,,,,738506,,1,0,neo4j|cypher,11
70103094,Using json_build_object in PostgreSQL v14.x with the result of a SELECT statement,"<p>I'm trying to create a <code>VIEW</code> of a JSON object, with a varying number of key/value pairs, in PostgreSQL v14.x, from the results of a SELECT statement.</p>
<p>Using <code>json_agg</code> is returning an array of objects - a key of each rating possibility as they occur, and a value which is the count of all the ratings selected from a table of reviews. Instead of an array, I need an object that has multiple key/value pairs, where the value corresponds to the aggregated <code>count()</code> of the ratings column(s), grouped by product_id. Trying to reuse <code>json_build_object</code> isn't working as expected.</p>
<p>Using:</p>
<pre><code>CREATE VIEW reviews.meta AS
SELECT product_id, json_agg(json_build_object(reviews.list.rating, reviews.list.rating))
FROM reviews.list
GROUP BY reviews.list.product_id
ORDER BY product_id;
</code></pre>
<p>returns:</p>
<pre><code>product_id | reviews_count
---------------------------
         1 | [{&quot;5&quot; : 5}, {&quot;4&quot; : 4}]
         2 | [{&quot;4&quot; : 4}, {&quot;4&quot; : 4}, {&quot;3&quot; : 3}, {&quot;5&quot; : 5}, {&quot;2&quot; : 2}]
</code></pre>
<p>But I'm looking for:</p>
<pre><code>product_id | reviews_count
---------------------------
         1 | {&quot;5&quot; : 1, &quot;4&quot; : 1}
         2 | {&quot;4&quot; : 2, &quot;3&quot; : 1, &quot;5&quot; : 1, &quot;2&quot; : 1}
</code></pre>
<p>A dynamically created object:</p>
<ul>
<li>in rows by product_id</li>
<li><em>where the values are quantities</em> of Integer ratings (1-5) as they appear in the reviews.list table</li>
<li>in an object rather than an array of objects</li>
</ul>
<p>I am new to SQL / PL/pgSQL language.</p>",70103631,1,0,,2021. 11. 24 오후 9:20:56,,2021. 11. 26 오전 11:08:46,2021. 11. 26 오전 11:08:46,,472495,,17502028,,1,0,sql|postgresql,523
70252391,"Query to get all records, which have children, but only for which the user has permission to all children?","<p>Let say you have a set of tables like this, where you have <code>Warnings</code> which can be associated with multiple <code>Account</code> strings, and <code>Users</code> which can be permissioned to multiple <code>Account</code> strings. Now what we want to do is write a query that will return all <code>Warnings</code> for a <code>User</code>, but the <code>User</code> must have a <code>UserAccountPerms</code> for every <code>Account</code> associated with the user.</p>
<pre><code>CREATE TABLE Warnings (id integer, message varchar(10));
CREATE TABLE WarningAccounts (warning_id integer, account_name varchar(10), _starttime datetime, end_time datetime);
CREATE TABLE Users (id integer, login varchar(10));
CREATE TABLE UserAccountPerms (user_id integer, account_name varchar(10));
</code></pre>
<p>One idea we've had is to add a column <code>account_count</code> to the <code>Warnings</code> table and then you would have to run two queries, one which gets for each warning the count of accounts that the user has access to, and then joins that back to the <code>Warnings</code> table to see if the count is the same. Something like:</p>
<pre><code>SELECT *
FROM Warnings w
JOIN
(
    SELECT warning_id, IFNULL(COUNT(*),0) AS acct_perm_count
    FROM WarningAccounts wa LEFT JOIN UserAccountPerms uap ON wa.account_name = uap.account_name
    WHERE uap.user_id = X
    GROUP BY wa.warning_id
) wp ON w.warning_id = wp.warning_id
WHERE w.account_count = acct_perm_count
</code></pre>
<p>The biggest issue with this, is that as the tables get large, and you want to filter the <code>Warnings</code> by other columns, you end up having to copy the predicate into both parts of the statement, i.e.</p>
<pre><code>SELECT *
FROM Warnings w
JOIN
(
    SELECT warning_id, IFNULL(COUNT(*),0) AS acct_perm_count
    FROM Warnings w1 JOIN WarningAccounts wa ON w1.warning_id = wa.warning_id
    LEFT JOIN UserAccountPerms uap ON wa.account_name = uap.account_name
    WHERE 
      uap.user_id = X AND
      w1.start_time &gt; @start_time
    GROUP BY wa.warning_id
) wp ON w.warning_id = wp.warning_id
WHERE w.account_count = acct_perm_count AND
w.start_time &gt; @start_time;
</code></pre>
<p>Because if you don't, it means you are always calculating the permissions for every single <code>Warning</code> all of the time. Any thoughts on how to do this?</p>",,0,0,,2021. 12. 6 오후 9:49:10,,2021. 12. 6 오후 9:49:10,,,,,670446,,1,0,mysql,12
70168949,How to access dynamic dropdown in Python,"<p>I was doing a project which has three dropdown menu for company name,location and position and two date Picker in front end and data is store in Python list. How should I integrate it when user select specific options from dropdown menu the data should be filtered and displayed on html page in table format</p>",,0,0,,2021. 11. 30 오전 11:54:13,,2021. 11. 30 오전 11:54:13,,,,,17551742,,1,0,google-bigquery,13
70066231,"department table returns null values but I want only non-null department record, pls help :)","<p><a href=""https://i.stack.imgur.com/BFoGu.png"" rel=""nofollow noreferrer"">Obtain the department table where more than 38 employees work.</a></p>
<pre><code>select distinct department,(select count(employee_id)
                  from employees as e1
                  where e2.department= e1.department and 
                   department is not null
                  having count(employee_id) &gt; 38 )
from employees as e2;
</code></pre>",,1,0,,2021. 11. 22 오후 1:05:38,,2021. 11. 22 오후 1:55:32,,,,,17479171,,1,-2,postgresql,14
70202934,Aurora Postgres Global DB- how to code without using Temp tables,"<p>my org is migrating to postgres individual instances to global database in aws. I learnt there is a writer and reader instance. Some of my Pg sql statements are using temp tables, where i store data and reuse that.</p>
<p>My question is , after migration, if a user is reading from the READER instance of the global db, how do i handle the use case where i had to create the temp table.</p>
<p>current code</p>
<pre><code>do $$
begin
      create temp table x ( postid int);
     insert into x values (12);

   select * from tags where postid in (select postid from x);
end $$;
</code></pre>
<p>i am not clear how the new code style will be. I thought of writing a CTE. But i use my temp table in multiple places , i am not sure i can do that with CTE.  something like</p>
<pre><code>with CTE(postid)
 select postid from postl
select * from tags where postid in (select postid from cte);

select * from news where postid in (select postid from cte);
</code></pre>",,0,0,,2021. 12. 2 오후 4:14:32,,2021. 12. 2 오후 4:55:13,2021. 12. 2 오후 4:55:13,,330315,,3545750,,1,0,postgresql,14
70244361,"EER Diagram Error 1215, Forward engineer error","<p>Im using MySql Workbench, It somehow said &quot;Cannot add Foreign key Constraint&quot; When it was complete I used the forward engineering function to create a SQL file of my model: EER Diagram</p>
<p>I came to this error when I was going to forward engineer my EER Diagram, I am completely new to this, sorry if I'm being an idiot, and please help.</p>
<pre><code>    -- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema ddnpterm2proj
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ddnpterm2proj
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ddnpterm2proj` DEFAULT CHARACTER SET utf8 ;
USE `ddnpterm2proj` ;

-- -----------------------------------------------------
-- Table `ddnpterm2proj`.`admnemplogindet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ddnpterm2proj`.`admnemplogindet` (
  `EmpID` INT NOT NULL AUTO_INCREMENT,
  `AEFirstName` VARCHAR(45) NULL,
  `AELastName` VARCHAR(45) NULL,
  `AEAddress` VARCHAR(45) NULL,
  `AEPNumber` INT NULL,
  `AEUsername` VARCHAR(45) NULL,
  `AEPassword` VARCHAR(45) NULL,
  `AEEmail` VARCHAR(45) NULL,
  `AEUsertype` VARCHAR(45) NULL DEFAULT 'Employee',
  PRIMARY KEY (`EmpID`),
  INDEX `ADEFKeys_idx` (`AEUsername` ASC, `AEPassword` ASC, `AEEmail` ASC, `AEFirstName` ASC, `AELastName` ASC, `AEUsertype` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ddnpterm2proj`.`cuslogindet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ddnpterm2proj`.`cuslogindet` (
  `CusID` INT NOT NULL AUTO_INCREMENT,
  `CFirstName` VARCHAR(45) NULL,
  `CLastName` VARCHAR(45) NULL,
  `CAddress` VARCHAR(45) NULL,
  `CPNumber` INT NULL,
  `CUsername` VARCHAR(45) NULL,
  `CPassword` VARCHAR(45) NULL,
  `CEmail` VARCHAR(45) NULL,
  `CUsertype` VARCHAR(45) NULL DEFAULT 'Customer',
  PRIMARY KEY (`CusID`),
  INDEX `CFKeys_idx` (`CUsername` ASC, `CPassword` ASC, `CEmail` ASC, `CFirstName` ASC, `CLastName` ASC, `CUsertype` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ddnpterm2proj`.`itemstocks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ddnpterm2proj`.`itemstocks` (
  `StocksID` INT NOT NULL AUTO_INCREMENT,
  `ItemID` INT NOT NULL,
  `ItemName` VARCHAR(45) NULL,
  `ItemBrand` VARCHAR(45) NULL,
  `ItemType` VARCHAR(45) NULL DEFAULT 'Laptop',
  `ItemTotalQuantity` VARCHAR(45) NULL,
  PRIMARY KEY (`StocksID`, `ItemID`),
  INDEX `ISFKeys_idx` (`ItemName` ASC, `ItemBrand` ASC, `ItemType` ASC, `ItemTotalQuantity` ASC, `ItemID` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ddnpterm2proj`.`itemorders`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ddnpterm2proj`.`itemorders` (
  `OrderID` INT NOT NULL AUTO_INCREMENT,
  `CusFirstName` VARCHAR(45) NULL,
  `CusLastName` VARCHAR(45) NULL,
  `CusAddress` VARCHAR(45) NULL,
  `CusPNumber` VARCHAR(45) NULL,
  `ItemName` VARCHAR(45) NULL,
  `ItemBrand` VARCHAR(45) NULL,
  `ItemType` VARCHAR(45) NULL DEFAULT 'Laptop',
  `ItemTotal` VARCHAR(45) NULL,
  PRIMARY KEY (`OrderID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ddnpterm2proj`.`itemlist`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ddnpterm2proj`.`itemlist` (
  `ListNo` INT NOT NULL AUTO_INCREMENT,
  `ListItemID` INT NULL,
  `ListItemName` VARCHAR(45) NULL,
  `ListItemBrand` VARCHAR(45) NULL,
  `ItemType` VARCHAR(45) NULL,
  `ListItemTotal` VARCHAR(45) NULL,
  PRIMARY KEY (`ListNo`),
  INDEX `LFKeys_idx` (`ListItemID` ASC, `ListItemName` ASC, `ListItemBrand` ASC, `ItemType` ASC, `ListItemTotal` ASC),
  CONSTRAINT `FKeys`
    FOREIGN KEY (`ListItemID` , `ListItemName` , `ListItemBrand` , `ItemType` , `ListItemTotal`)
    REFERENCES `ddnpterm2proj`.`itemstocks` (`ItemID` , `ItemName` , `ItemBrand` , `ItemType` , `ItemTotalQuantity`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ddnpterm2proj`.`listofloggedinusers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ddnpterm2proj`.`listofloggedinusers` (
  `ListNo` INT NOT NULL AUTO_INCREMENT,
  `Username` VARCHAR(45) NULL,
  `Password` VARCHAR(45) NULL,
  `Email` VARCHAR(45) NULL,
  `FirstName` VARCHAR(45) NULL,
  `LastName` VARCHAR(45) NULL,
  `UserType` VARCHAR(45) NULL,
  PRIMARY KEY (`ListNo`),
  INDEX `LFKeyAdmin_idx` (`Username` ASC, `Password` ASC, `Email` ASC, `FirstName` ASC, `LastName` ASC, `UserType` ASC),
  CONSTRAINT `FKeyAdmin`
    FOREIGN KEY (`Username` , `Password` , `Email` , `FirstName` , `LastName` , `UserType`)
    REFERENCES `ddnpterm2proj`.`admnemplogindet` (`AEUsername` , `AEPassword` , `AEEmail` , `AEFirstName` , `AELastName` , `AEUsertype`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FkeyCustomer`
    FOREIGN KEY (`Username` , `Password` , `Email` , `FirstName` , `LastName` , `UserType`)
    REFERENCES `ddnpterm2proj`.`cuslogindet` (`CUsername` , `CPassword` , `CEmail` , `CFirstName` , `CLastName` , `CUsertype`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
</code></pre>",,0,0,,2021. 12. 6 오전 10:55:46,,2021. 12. 6 오전 10:55:46,,,,,17602301,,1,0,mysql,15
70369754,Pivoting a table of unique column values based on column string?,"<p>Not sure how else to phrase the post title, but I have a table of data like:</p>
<pre><code>ID1   F1   F2   F3
X1 Enabled Disabled Disabled
X2 Disabled Enabled Enabled
</code></pre>
<p>I'd like to get it into the form of:</p>
<pre><code>ID1  Fields
X1  F1
X2  F2
X2  F3
</code></pre>
<p>Originally I had a form of something like</p>
<p><code>SELECT ID1, CONCAT_WS(',', IF(F1='Enabled','F1',NULL), IF(F2='Enabled','F2',NULL), ...)</code></p>
<p>But I found out that mysql doesn't have a string_split() function natively built in to break up the concatenated stuff into an array and just copy the ID1 field downwards.</p>
<p>I've tried using a <code>CASE WHEN</code> here, but it doesn't seem appropriate since I don't want to overwrite the value based on a match, I just want all of the fields. I feel like I'm missing a relatively simple operation that's right in front of me. Any suggestions?</p>",70370120,1,0,,2021. 12. 15 오후 8:11:35,,2022. 3. 4 오전 10:15:40,,,,,1337901,,1,0,mysql,15
70107340,"It is necessary to extract data from multiple tables in multiple databases and turn them into a large table for query use, requiring real-time data","<p>It is necessary to extract data from multiple tables in multiple databases and turn them into a large table for query use, requiring real-time data
Is there a more reasonable solution
statistical query</p>",,0,0,,2021. 11. 25 오전 7:39:45,,2021. 11. 25 오전 7:39:45,,,,,12484639,,1,0,mysql,16
70030689,Neo4j Returning Nodes Instead of Relations,"<p>In this Neo4j query, I want to return only relation and that only specific relation called &quot;Permission&quot;. So how can I filter it and get the expected answer?</p>
<pre><code>MATCH (end:Directory) WHERE end.name = &quot;dir1.5&quot; 
WITH shortestPath((start)-[*]-&gt;(end)) AS p
RETURN p
ORDER BY length(p)
</code></pre>",,1,0,,2021. 11. 19 오전 6:27:48,,2021. 11. 19 오전 10:46:11,2021. 11. 19 오전 10:46:11,,1734996,,17151630,,1,0,neo4j|cypher,17
70193267,Neo4j proper indexes for query,"<p>The next query in a large database takes almost a minute.</p>
<pre><code>MATCH (p1:Politician)-[r1:mentioned_by]-&gt;(c:Channel {name: &quot;TN&quot;})&lt;-[r2:mentioned_by {video_id: r1.video_id}]-(p2:Politician)
    WHERE p1.fullname &lt; p2.fullname 
    WITH DISTINCT p1.fullname AS x, p2.fullname AS y
    RETURN COUNT(*) AS rows
</code></pre>
<p>I have added an index over the name property from the Channel nodes and saved with that at least 10 seconds, but all in all the query takes like 50 seconds which is a lot.
Any suggestion over which index to create?</p>",,1,0,,2021. 12. 2 오전 1:40:17,,2021. 12. 2 오전 6:09:47,,,,,13191080,,1,0,neo4j,17
70251343,Need help solving Transaction issue using MySQL,"<p>I' m pretty new in programming so I'm trying to learn more and get use to it.
I need to join my Registration database with the login using transaction so that when the client register, s/he info such as email and password get saved in Login database. I used email as reference in Registration database. I don't really know where I am missing. Any help that will solve my issue is welcome. thanks
Here is my code.</p>
<p>server:</p>
<pre><code>register.beginTransaction(function (err) {
    if (err) {
      throw err;
    }
    register.query(
      &quot;INSERT INTO Registration.User(firstName,lastName, email) VALUES(?,?,?)&quot;,
      [firstName, lastName, email],
      function (err, result) {
        if (err) {
          register.rollback(function () {
            throw err;
          });
        }

        //let log = result.insertId;

        register.query(
          &quot;INSERT INTO Registration.login(hash,email) VALUE(?,?)&quot;,
          [hash, email],
          function (err, result) {
            if (err) {
              register.rollback(function () {
                throw err;
              });
            }
            register.commit(function (err) {
              if (err) {
                register.rollback(function () {
                  throw err;
                });
              }
              console.log(&quot;Transaction Complete.&quot;);
              register.end();
            });
          }
        );
      }
    );
  });
</code></pre>
<p>enter code here</p>
<p>register form:</p>
<pre><code>onSubmit = () =&gt; {
    console.log(this.state);
    fetch(&quot;http://localhost:3001/register&quot;, {
      method: &quot;post&quot;,
      headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
      body: JSON.stringify({
        firstName: this.state.firstName,
        lastName: this.state.lastName,
        email: this.state.email,
        password: this.state.password,
      }),
    })
      .then(async (response) =&gt; {
        console.log(response);
        if (response.status === 200) {
          this.setState({ redirect: true }, () =&gt; {
            this.props.setIsSigin(true);
          });
        }
        if (response.status === 400) {
          const msg = await response.json();
          this.setState({ errorMassage: msg });
        }
      })
      .catch((e) =&gt; {
        console.log(e);
      });
  };
</code></pre>
<p>here is the error massage :</p>
<pre><code>Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/Parser.js:437
      throw err; // Rethrow non-MySQL errors
      ^

ReferenceError: hash is not defined
    at Query.&lt;anonymous&gt; (/Users/aboulayetchakoura/enrollment_app/Back_end/index.js:208:12)
    at Query.&lt;anonymous&gt; (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/Connection.js:526:10)
    at Query._callback (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/Connection.js:488:16)
    at Query.Sequence.end (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/sequences/Sequence.js:83:24)
    at Query._handleFinalResultPacket (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/sequences/Query.js:149:8)
    at Query.OkPacket (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/sequences/Query.js:74:10)
    at Protocol._parsePacket (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/Protocol.js:291:23)
    at Parser._parsePacket (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/Parser.js:433:10)
    at Parser.write (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/Parser.js:43:10)
    at Protocol.write (/Users/aboulayetchakoura/enrollment_app/node_modules/mysql/lib/protocol/Protocol.js:38:16)
[nodemon] app crashed - waiting for file changes before starting...

</code></pre>",,0,0,,2021. 12. 6 오후 8:10:17,,2021. 12. 6 오후 8:10:17,,,,,10451165,,1,0,mysql,17
70256144,How to combine datas with same column and ignore null values in mysql,"<p>I'm just going to ask how to query combine datas with same column and ignore all null values</p>
<p>actual table:</p>
<pre><code> id |   first_name  |   last name  |    age   |   unique_id 
  1 |      Doe      |              |          |         111
  2 |               |     John     |          |         111
  3 |               |              |     32   |         111
  4 |      Reeves   |              |          |         222
  5 |               |      Keanu   |          |         222
</code></pre>
<p>wanted query result :</p>
<pre><code>      first_name  |   last name  |    age   |   unique_id 
          Doe     |     John     |     32   |      111
          Keanu   |     Reeves   |          |      222
  
</code></pre>
<p>Thanks!!</p>",70256162,1,0,,2021. 12. 7 오전 7:10:34,,2021. 12. 7 오전 7:23:41,2021. 12. 7 오전 7:23:41,,17611263,,17611263,,1,0,mysql,17
70279638,Running a median aggregate over jsonb and grouping by day/month/year etc,"<p>I'm trying to figure out how to run a median/percentile aggregation over some jsonb, grouped by a truncated date (which is currently an epoch) e.g. by day/month/year.</p>
<pre><code>CREATE TABLE datatbl (id serial primary key, json_data jsonb, timestamp_epoch bigint);

INSERT INTO datatbl (json_data, timestamp_epoch) VALUES 
    ('{&quot;value&quot;: 1.2}'::jsonb,1638985100),
    ('{&quot;value&quot;: 5.3}'::jsonb,1636393100),
    ('{&quot;value&quot;: 2.2}'::jsonb,1638985100),
    ('{&quot;value&quot;: 8.4}'::jsonb,1633714700),
    ('{&quot;value&quot;: 4.2}'::jsonb,1636393100),
    ('{&quot;value&quot;: 5.4}'::jsonb,1636393100),
    ('{&quot;value&quot;: 1.4}'::jsonb,1638985100),
    ('{&quot;value&quot;: 9.8}'::jsonb,1638985100),
    ('{&quot;value&quot;: 3.3}'::jsonb,1633714700),
    ('{&quot;value&quot;: 1.9}'::jsonb,1636393100);
</code></pre>
<p>I've figured out how to truncate the epoch and group the results by month</p>
<pre><code>SELECT
    DATE_TRUNC('month', to_timestamp (timestamp_epoch)) AS month, json_data-&gt;&gt;'value' AS val
FROM datatbl 
GROUP BY month, val
ORDER BY month ASC;
</code></pre>
<p>But can't figure out how to run percentile_disc(0.5) to get the median of each group.</p>
<p>Any help appreciated!!</p>",70280188,1,0,,2021. 12. 8 오후 5:58:05,,2021. 12. 8 오후 6:55:40,,,,,8052916,,1,0,postgresql,17
70071796,Permission denied after security permission give for everyone postgresql,"<p>I was reading answers about permission denied problems inside terminal when trying to copy data from table and send it to .csv file in postgresl. My problem still occurs even after I change target file(.csv) properties to everyone with read and write checked. I wonder if you have any other suggestions or things that would be useful for me? Could this also be related, because I can't get inside psql with only command <code>psql</code> bcs it starts asking for password of my windows User?</p>",,0,0,,2021. 11. 22 오후 8:08:48,,2021. 11. 22 오후 8:08:48,,,,,15500827,,1,0,postgresql,18
70107505,Displaying a Variable within a DIV message,"<ul>
<li>I'm trying to display a stored variable in a div statement</li>
<li>The quotes are cancelling the PHP so I cant echo results in the message</li>
<li>I have a form that submits a member_ID and returns whether or not they have an executive position. If they do have an executive position, a message is displayed along with their corresponding position.</li>
</ul>
<pre><code>&lt;?php
// sets the default blank variables
$results = $message =  $status = $position = &quot;&quot;;

// imports the PHP connection file
require_once(&quot;db.php&quot;);

$query =
 &quot;SELECT m.member_id
FROM member m&quot;; 
 
$stmt = $conn-&gt;query($query);


foreach ($stmt as $row) { 
  $status .= &quot;&lt;option value='{$row[&quot;member_id&quot;]}'&gt;{$row[&quot;member_id&quot;]} &lt;/option&gt;&quot;;
}


if (isset($_POST[&quot;submit&quot;])) {

    $query = 
    &quot;SELECT m.member_id, e.position_name, e.description
    FROM member m
    INNER JOIN executive e ON m.member_id = e.member_id
    where m.member_id = ?&quot;;
    
  $stmt = $conn-&gt;prepare($query);
  
   $stmt-&gt;execute([$_POST[&quot;member-id&quot;]]);
  
      if ($stmt-&gt;rowCount() &gt; 0) {

    $query =
     &quot;SELECT m.member_id, position_name, description
    FROM member m
    INNER JOIN executive e ON m.member_id = e.member_id&quot;; 

    $stmt = $conn-&gt;prepare($query);

    $stmt-&gt;execute([ $_POST[&quot;member-id&quot;]]); 
        
        $row = $stmt-&gt;fetch();
        $position = $row[&quot;position_name&quot;];
        
</code></pre>
<p><strong>HERE is where I'm trying to display the variable</strong></p>
<pre><code>    $message .= &quot;&lt;div class='alert alert-success'&gt;This Member is an executive and their role is &lt;?php echo $position; ?&gt;&lt;/div&gt;&quot;;
      } else {
            $message .= &quot;&lt;div class='alert alert-danger'&gt;This Member is not an executive &lt;/div&gt;&quot;;
      }
    }
// closes the connection
$conn = null; 
?&gt;

&lt;!-- begins the HTML code --&gt;
&lt;!doctype html&gt;
&lt;!-- begins the HTML code --&gt;
&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;center&gt;Which Members Are Executives&lt;/center&gt;&lt;/h1&gt; 
    &lt;div class=&quot;container&quot;&gt;
      &lt;form method=&quot;post&quot; class=&quot;mb-3&quot;&gt;
        &lt;div class=&quot;form-group&quot;&gt;
          &lt;label&gt;Member ID: &lt;/label&gt;
          &lt;select class=&quot;form-control&quot; name=&quot;member-id&quot;&gt;&lt;?php echo $status; ?&gt;&lt;/select&gt;
        &lt;/div&gt;
          &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; name=&quot;submit&quot;&gt;Submit&lt;/button&gt;
          &lt;/form&gt;
        &lt;?php echo $message; ?&gt;
      &lt;/body&gt;
    &lt;/html&gt;
</code></pre>
<p>Any help is greatly appreciated.</p>",,0,0,,2021. 11. 25 오전 7:52:54,,2021. 11. 27 오전 8:04:21,2021. 11. 27 오전 8:04:21,,17243522,,17243522,,1,0,mysql,18
70273742,Why does adding new properties to the graph style sheet not work in Neo4j?,"<p>The Developer guide for <a href=""https://neo4j.com/developer/neo4j-browser/#browser-styling"" rel=""nofollow noreferrer"" title=""Neo4j Browser User Interface Guide - Developer Guides"">Neo4j Browser User Interface</a> says that I can run <code>:style</code>, export it, modify it and drag it back to change the style. I try changing the default border width, and adding two new properties for nodes: <code>text-align</code> and <code>shape</code>, as explained in <a href=""https://www.w3.org/2001/11/IsaViz/gss/gssmanual.html#styles"" rel=""nofollow noreferrer"" title=""IsaViz/GSS User Manual - Graph Stylesheets"">Graph Stylesheets</a>:</p>
<pre class=""lang-css prettyprint-override""><code>node {
  diameter: 50px;
  color: #A5ABB6;
  border-color: #9AA1AC;
  border-width: 10px;
  text-color-internal: #FFFFFF;
  font-size: 10px;
  text-align: &quot;below&quot;;
  shape: regtangle;
}
</code></pre>
<p>But only the border width changes. Why does the rest not work?</p>",71953188,1,0,,2021. 12. 8 오전 10:49:30,,2022. 4. 21 오후 1:41:00,,,,,3416774,,1,0,neo4j,18
70028923,How to display the different column data into one column,"<p>I was wondering if there is any way that we rearrange this</p>
<pre class=""lang-html prettyprint-override""><code>level_1|level_2|level_3|level_4|
-------+-------+-------+-------+
    432|    554|       |       |
    432|   1150|   1442|       |
</code></pre>

<p>To DISPLAY like this:</p>
<pre class=""lang-html prettyprint-override""><code>level_1|level_2|
-------+-------+
    432|    554| 
    432|   1150|  
    432|   1442|
</code></pre>",,0,0,,2021. 11. 19 오전 1:56:29,,2021. 11. 19 오전 2:04:14,,,,,2320808,,1,0,mysql,19
70315803,I am trying to do some query in psql. but I faced this issue. I want to optimize it a little bit. Anyone to help me?,"<pre><code>SELECT year, 
(SELECT name FROM users WHERE users.id=packages.id_user_sender) as sender, 
(SELECT name FROM users WHERE users.id=packages.id_user_receiver) as receiver
FROM packages
WHERE (color='blue' or year=2015) and 
(id_user_sender, id_user_receiver) NOT IN 
(SELECT id FROM users WHERE address='Taiwan')
ORDER BY year DESC, sender DESC;
</code></pre>
<p>I want to do something like this but it doesn't work. so I had to write it like this.</p>
<pre><code>SELECT year, 
(SELECT name FROM users WHERE users.id=packages.id_user_sender) as sender, 
(SELECT name FROM users WHERE users.id=packages.id_user_receiver) as receiver
FROM packages
WHERE (color='blue' or year=2015) and 
id_user_sender NOT IN 
(SELECT id FROM users WHERE address='Taiwan') and
id_user_receiver NOT IN 
(SELECT id FROM users WHERE address='Taiwan')
ORDER BY year DESC, sender DESC;
</code></pre>
<p>In short, I want to combine these lines into one. How can I do this?</p>
<pre><code>id_user_sender NOT IN 
(SELECT id FROM users WHERE address='Taiwan') and
id_user_receiver NOT IN 
(SELECT id FROM users WHERE address='Taiwan')
</code></pre>",70316531,1,0,,2021. 12. 11 오후 2:04:20,,2021. 12. 11 오후 3:39:52,2021. 12. 11 오후 3:37:39,,330315,,13258404,,1,-1,sql|postgresql,19
70363607,Find number of matches for substring inside a GROUP_CONCAT in MYSQL,"<p>I have a query with a Group_Concat that returns a set of comma separated numbers. I want to count how many instances of <code>0,0</code> are in the group_concat.</p>
<p>e.g. <code>1,2,0,1</code> should return <code>0</code></p>
<p><code>1,2,0,0,3,0</code> should return <code>1</code></p>
<p><code>1,2,0,0,0,6</code> should return <code>2</code></p>
<p><code>1,2,0,0,0,6,0,0,1,0</code> should return <code>3</code></p>
<p>How would I go about doing this?</p>",70363734,1,0,,2021. 12. 15 오후 12:20:56,,2021. 12. 15 오후 12:31:29,,,,,5438343,,1,0,mysql,19
70072340,I'm getting same values on this query using CASE WHEN,"<p>i'm very new on mysql and i'm trying to get some values on this query using the CASE WHEN validation</p>
<pre><code>SELECT u.id, u.username as &quot;Nombre&quot;, 
       tm.name as &quot;Facturable&quot;, 
  CASE tm.name      
  WHEN tm.name = &quot;facturable_actividad&quot; and tm.value= 1 then SUM(TIMESTAMPDIFF(MINUTE,t.start_time, t.end_time)) END AS &quot;HH&quot;,
       tm.name as &quot;No facturable&quot;,
  CASE tm.name
  WHEN &quot;facturable_actividad&quot; AND tm.value= 0 THEN SUM(TIMESTAMPDIFF(MINUTE,t.start_time, t.end_time)) END as &quot;NO HH&quot;
FROM  kimai2_users u
JOIN kimai2_timesheet t
ON u.id = t.user
JOIN kimai2_timesheet_meta tm
ON t.id = tm.timesheet_id
GROUP BY t.user; 
</code></pre>
<p>Basically i'm saying that i want to create a new row called &quot;<strong>HH</strong>&quot; and inside it i say if &quot;<strong>facturable_actividad</strong>&quot; is 1 then do a sum a get X result. Else i have other row &quot;<strong>NO HH</strong>&quot; where i do the same but &quot;<strong>facturable_actividad</strong>&quot; is 0.</p>
<p>I get this:</p>
<p><a href=""https://i.stack.imgur.com/zoq7p.png"" rel=""nofollow noreferrer"">query result</a></p>
<p>As you can see i get the same values for <strong>HH</strong> and <strong>NO HH</strong> (hh means billable), the <strong>NO HH</strong> should be much less than HH and not the same !</p>",,1,0,,2021. 11. 22 오후 9:04:31,,2021. 11. 22 오후 9:55:43,,,,,17482520,,1,0,mysql,20
70075423,Total comment count between threads with multiple joins,"<p>I'm trying to come up with a query that will return a list of threads between two users and the total number of comments in that thread - through multiple joins.</p>
<p>Looking at <a href=""http://sqlfiddle.com/#!17/fe01cf8/1"" rel=""nofollow noreferrer"">this sqlfiddle</a> I'm not getting the results I'm expecting. I want to return a list of suppliers that submitted a response to a request on an order (the threads) and the total number of comments in that thread.  If there are no comments between a supplier and a buyer it should return 0 for the comments.</p>
<p>Expected Result:</p>
<pre><code>order_id | supplier_id | buyer_id | comment_count
---------+-------------+----------+---------------
1        | 1           | 2        | 4
2        | 3           | 4        | 5
2        | 5           | 2        | 0
</code></pre>
<p>Actual Result:</p>
<pre><code>order_id | supplier_id | buyer_id | comment_count
---------+-------------+----------+--------------
1        | 1           | 2        | 4
1        | 3           | 2        | 4
2        | 1           | 4        | 5
2        | 3           | 4        | 5
2        | 5           | 2        | 5
</code></pre>
<p>Any help would be greatly appreciated.</p>",,0,0,,2021. 11. 23 오전 4:28:13,,2021. 11. 23 오전 4:28:13,,,,,1960118,,1,1,sql|postgresql,20
70218695,im trying to create a foreign key with my sql but i keep having in a error,"<p>i have two table one has a primary key called idHotel i am making a second table and im trying to declare a foreign key which has idHotel reference
this my code what wrong with it</p>
<pre><code>CREATE TABLE Evaluation(
DateEval date ,
Idhotel int  ,
NoteAccueil int,
NoteRest int,
NoteExtra int ,
FOREIGN key Idhotel REFERENCES hotel(Idhotel)
</code></pre>
<p>)</p>
<p>in case you want the reference table code here it is</p>
<p><a href=""https://i.stack.imgur.com/hf80d.png"" rel=""nofollow noreferrer"">refrence table</a></p>",70218792,1,0,,2021. 12. 3 오후 5:50:44,,2021. 12. 3 오후 6:01:06,2021. 12. 3 오후 6:01:06,,5389997,,15611437,,1,-1,mysql,20
70340994,regexp_substr equivalent in postgresql,"<p>I have this code in oracle PLSQL:</p>
<pre><code>select * from con_transaccioncabecera c
where c.cab_estadocon in
(select regexp_substr('S-C-I-A','[^-]+',1,level) from dual
connect by regexp_substr('S-C-I-A','[^-]+',1,level) is not NULL)
</code></pre>
<p>I typed the string 'S-C-I-A', but actually, there would go a variable.</p>
<p>I need an equivalent in plpgsql.</p>",70341310,1,0,,2021. 12. 13 오후 9:14:43,,2021. 12. 14 오전 7:18:17,2021. 12. 13 오후 9:43:33,,330315,,15311842,,1,0,sql|postgresql,276
70072899,Separating comma rows,"<p>I came across this link. a very good way to seperate comma joined tags
<a href=""https://stackoverflow.com/questions/26215324/mysql-php-select-count-of-distinct-values-from-comma-separated-data-tags"">MySql PHP select count of distinct values from comma separated data (tags)</a></p>
<p>I have been able to convert it to PostgreSql and actually get the data
<a href=""http://sqlfiddle.com/#!17/c0535/1"" rel=""nofollow noreferrer"">http://sqlfiddle.com/#!17/c0535/1</a></p>
<p>The issue is in query 2 and how to get the order ids to match with the accompanying rows</p>
<p>The extras is 16 rows while orderid is 14 rows</p>
<p>Any help</p>",,0,0,,2021. 11. 22 오후 10:01:36,,2021. 11. 22 오후 10:01:36,,,,,17436197,,1,0,postgresql,21
70208612,how to fix the SQL Error [1093] and Error [1064]?,"<p>I am getting this error</p>
<pre><code>SQL Error [1093] [HY000]: You can't specify target table 'id_card' for update in FROM clause
</code></pre>
<p>for my this query</p>
<pre><code>update id_card set id_card_status= 'ACTIVE' where code in (select code from ID_CARD ic
left join PROJECT p on p.PROJECT_code=ic.project   and ic.VERSION =p.current_id_card_version 
where ic.project_type in (670 ,671 ,672 ,673) and ic.id_card_status ='DRAFT')
</code></pre>
<p>After searching here I rewrite the query like this</p>
<pre><code>update id_card as table_1, (select code from ID_CARD ic
left join PROJECT p on p.PROJECT_code=ic.project   and ic.VERSION =p.current_id_card_version 
 ) as table_2  
where table_1.code = table_2.code 
and table_1.project_type in (670 ,671 ,672 ,673) 
and table_1.id_card_status ='DRAFT'
Set table_1.id_card_status = 'ACTIVE'
</code></pre>
<p>But I got another error</p>
<pre><code> SQL Error [1064] [42000]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL 
    server version for the right syntax to use near 'where table_1.code = table_2.code 
        and table_1.project_type in (670 ,671 ,672 ,' at line 4
</code></pre>
<p>How can I re-write this  ?</p>",70208765,1,0,,2021. 12. 3 오전 1:54:00,,2021. 12. 3 오전 2:20:26,,,,,2320808,,1,1,mysql,21
70213941,"Questions regarding Sql count, join, percentage","<p>I have two tables, cloths &amp; shoes. what i am trying to do is extract data from cloths &amp; shoes then count total before calculate percentage.
here is my code.</p>
<pre><code>select cloths.id 
       shoes.id
       count(*) cloths.id, shoes.id as total,
       SUM(total) * 100.0 / SUM(SUM(total)) OVER () AS Percentage
from cloths inner join shoes
on cloths.id = shoes.id 
order by cloths.id
group by cloths.id, shoes.id
</code></pre>
<p>however, i keep getting syntax error at or near &quot;group&quot;. I tried different solutions, it won't work. I appreciate if someone can help me. Thanks!</p>",,1,0,,2021. 12. 3 오전 11:57:55,,2021. 12. 3 오후 12:19:39,,,,,17579796,,1,0,postgresql,21
70363048,TRUNCATE locked by Select pg_proc,"<p>The TRUNCATE of a table does not pass because of the following lock:</p>
<pre><code>TRUNCATE TABLE &quot;public&quot;.&quot;xxxxx&quot; | SELECT DISTINCT x.oid,x.* FROM pg_catalog.pg_proc x 
WHERE x.proname ILIKE X 
AND x.proname NOT LIKE '\_%' 
AND x.pronamespace IN (Y,Z) 
ORDER BY x.proname 
LIMIT 10
</code></pre>
<p>Thank You for your help
Best Regards,</p>",,1,0,,2021. 12. 15 오전 11:39:10,,2021. 12. 21 오후 4:17:52,2021. 12. 21 오후 4:17:52,,9477038,,17682968,,1,0,postgresql,21
70373594,how to query select from distinct from purchase_order_id column and get order by latest version,"<p>I have table like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>purchase_order_id</th>
<th>version</th>
<th>remarks</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>24</td>
<td>1</td>
<td>new</td>
<td>edit</td>
</tr>
<tr>
<td>2</td>
<td>24</td>
<td>2</td>
<td>update</td>
<td>edit</td>
</tr>
<tr>
<td>3</td>
<td>25</td>
<td>1</td>
<td>new</td>
<td>confirm</td>
</tr>
<tr>
<td>4</td>
<td>24</td>
<td>3</td>
<td>update</td>
<td>confirm</td>
</tr>
</tbody>
</table>
</div>
<p>my propose is how to select query for first makesure purchase order id it is distinct and then version it is getting the latest version.
so the propose data is is like this :</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>purchase_order_id</th>
<th>version</th>
<th>remarks</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>25</td>
<td>1</td>
<td>new</td>
<td>confirm</td>
</tr>
<tr>
<td>4</td>
<td>24</td>
<td>3</td>
<td>update</td>
<td>confirm</td>
</tr>
</tbody>
</table>
</div>",70373618,1,0,,2021. 12. 16 오전 3:44:49,,2021. 12. 16 오전 5:46:19,2021. 12. 16 오전 5:46:19,,20845,,17443634,,1,0,sql|postgresql,21
70080423,Left Join using parameter not using table,"<p>I need to give some Explanation to my junior about using Left Join between 2 Table. ( i just have 2 years exp on programing).</p>
<p>He using  join query using input parameter to generate report. the parameter is <code>v_workflow_id</code></p>
<p>Here my junior query:</p>
<pre><code>Select A.* , B.some_column 
FROM workflow.flows_nodes a
left join workflow.flows_edges e on (e.fle_flh_id=v_workflow_id and e.fle_edges_target = 'start' ) 
where a.fln_flh_id = v_workflow_id  and a.fln_nodes_id='start'
</code></pre>
<p>this is my query</p>
<pre><code>Select A.* , B.some_column  
FROM workflow.flows_nodes a
left join workflow.flows_edges e on (e.fle_flh_id=a.fln_flh_id and e.fle_edges_target = a.fln_nodes_id )
where a.fln_flh_id = v_workflow_id and a.fln_nodes_id='start'
</code></pre>
<p>i am trying to explaining to my junior about this left join between 2 table using my query.
he argue about the same result and more easy to debug. but the performance is dull.</p>
<p>Please help me to give my junior good evidance or explanation with some trusted source.
since i trying using query plan doesnt work because we using minimum data.
Thank You</p>",,0,0,,2021. 11. 23 오전 11:51:43,,2021. 11. 23 오전 11:51:43,,,,,3698988,,1,0,postgresql,22
70136208,How to list rows with duplicate columns,"<p>I have a table with the fields <code>id, name, birthday, clinic</code>:</p>
<pre><code>id | name | birthday   | clinic
 1 | mary | 2020-01-01 | clin 1
 2 | mary | 2020-01-01 | clin 1
 3 | mary | 2020-01-01 | clin 2
 4 | john | 2021-01-01 | clin 1
 5 | pete | 2020-01-05 | clin 1
 6 | pete | 2020-01-05 | clin 2
 7 | pete | 2020-01-05 | clin 3
</code></pre>
<p>I want to get all records with <code>name, birthday</code> duplicate like:</p>
<pre><code>id | name | birthday   | clinic
 1 | mary | 2020-01-01 | clin 1
 2 | mary | 2020-01-01 | clin 1
 3 | mary | 2020-01-01 | clin 2
 5 | pete | 2020-01-05 | clin 1
 6 | pete | 2020-01-05 | clin 2
 7 | pete | 2020-01-05 | clin 3
</code></pre>
<p>Mary and Pete have more than one record with same name and birthday</p>",70136250,3,0,,2021. 11. 27 오후 3:35:45,1,2021. 11. 27 오후 3:41:34,,,,,6814841,,1,-1,postgresql,22
70166562,search from table with minimum value,"<p>i have this</p>
<pre><code>      select distinct bedroom_count, bathroom_count , min(monthly_rent) from property_units pu  where property_id = 522 
                                        and  bedroom_count &gt;= 1                                 
                                        and monthly_rent &gt;= 2700 
                                        and monthly_rent &lt;=5000  

                                        order  by bedroom_count , monthly_rent
</code></pre>
<p>this is my table</p>
<p><a href=""https://i.stack.imgur.com/oBLz6.jpg"" rel=""nofollow noreferrer"">enter image description here</a></p>
<p>when I say bedroom count &gt;=1 then min price is in row where bedroom count is 2 but I have bedroom with 1 which is minimum ,I want to give priority to bed I mean if write bedroom 2 then it can have bedroom counts starting from 5 which is minimum value then I need to calc min price from rows where bed is 5 for example</p>
<p>okay sorry guys I solved this is answer in case someone needs it</p>
<pre><code>     select  bedroom_count, bathroom_count , monthly_rent ,property_id 
                                        from (select distinct bedroom_count,bathroom_count,monthly_rent,property_id, FIRST_VALUE(bedroom_count) OVER(ORDER BY bedroom_count) priority_bedroom
                                        from property_units pu where pu.property_id = 522 and pu.removed =false and pu.bedroom_count&gt;=1) dd 
                                        where  bedroom_count &gt;=1 and bedroom_count&lt;= priority_bedroom 
                                        
</code></pre>",,0,0,,2021. 11. 30 오전 8:50:30,1,2021. 11. 30 오전 9:29:29,2021. 11. 30 오전 9:29:29,,15258123,,15258123,,1,0,postgresql,22
70190330,In Postgres 10 how to roll multiple matching rows into a single row,"<p>Using Postgres 10</p>
<p>I created simple example to try and demonstrate I have table1, and table 2, table 2 has fk into table1, so in example below rows 1,2,3 from table 2 link to 1 in table 1, and row 4 links to 2, and rows 5,6,7 from table 2 link to 3 in table 1</p>
<p>table1</p>
<pre><code>pk     name
-----------------
1    | fred
2    | jane
3    | tom
</code></pre>
<p>table2</p>
<pre><code>pk   fk   name
-----------------------
1  | 1  | blue
2  | 1  | yellow
3  | 1  | green
4  | 2  | red
5  | 3  | green
6  | 3  | yellow
7  | 3  | blue
</code></pre>
<p>What I would like to do is roll the value of table2 into one row get to the following result (or similar) so that I have one row with all the values</p>
<pre><code>fred blueyellowgreen
jane red
tom  blueyellowgreen
</code></pre>
<p>the reason is I need to find where there are two sets of rows in table 2 with the same value, I can order by value to get the same order.</p>",,1,0,,2021. 12. 1 오후 7:42:34,,2021. 12. 1 오후 8:02:39,,,,,1480018,,1,0,sql|postgresql,22
70194197,Counting the number rows returned in Group by,"<p>The task was to group it by member_id and to filter it out, by selecting only the member_id where there is at least one slot booked. I expected the result as 30. But it's printing 30 member_id individually. What is I am doing wrong?</p>
<pre><code>select
    count(*)
from
    cd.members as mem
    inner join cd.bookings as bks on mem.memid = bks.memid
group by
    mem.memid
having
    sum(slots) &gt;= 1
</code></pre>",,1,0,,2021. 12. 2 오전 4:26:45,,2021. 12. 2 오전 4:41:39,,,,,13803023,,1,0,sql|postgresql,22
70228018,SQL model follows to retrieve previous notifications,"<p>These are my tables:</p>
<pre><code>Author
author_id text

Client
client_id text

Post
author_id text
post_id text

Follow
client_id text
author_id text
</code></pre>
<p>I am having trouble modeling the follow table to achieve the following:</p>
<p>1)Client can fetch all the posts from authors which he is currently following</p>
<p>2)Client can follow then unfollow then follow and so on...</p>
<p>3)Whenever an author adds a post, clients receive a notification for the post(this is done through another service(firebase) which doesn't provide a way to fetch previous notifications)</p>
<p>4)Client can fetch all previous notifications he received(i'm having trouble with this point)</p>
<p>Does anybody have an idea how to model my tables to be able to query for the last point.
Thank you</p>",,1,0,,2021. 12. 4 오후 5:44:24,,2021. 12. 4 오후 6:25:22,,,,,7622155,,1,0,sql|postgresql,22
70284723,Unable to fulltext search Cypher from Node.js driver,"<p>I created a fulltext search index on <code>USER</code> nodes with their <code>name</code> and <code>userName</code> properties with the following query:</p>
<pre><code>CREATE FULLTEXT INDEX userSearch FOR (n:USER) ON EACH [n.name, n.userName]
</code></pre>
<p>However, I am unable to get my queries to return anything but <code>undefined</code> in the Node.js driver. What is strange is that the same query will return the expected (and correct) result in my open browser session.</p>
<p>The search query is this:</p>
<pre><code>CALL db.index.fulltext.queryNodes(&quot;userSearch&quot;, $searchTerm) YIELD node, score
RETURN node, score
</code></pre>
<p>Again, this works in the browser but does not work when called from Node.js. I'm not getting any errors or anything--the result of the query is just undefined.</p>
<p>My two theories:</p>
<ol>
<li>Is there an install missing here (that the browser has?) Do I need to install <code>Lucene</code> or <code>Apache</code>?</li>
<li>Does the index somehow need to take time to update? I created it only a short while ago and with the browser.</li>
</ol>",,0,0,,2021. 12. 9 오전 4:28:23,,2021. 12. 9 오전 4:28:23,,,,,15578536,,1,0,neo4j|cypher,22
70376812,get user list along with database granted list - PostgreSQL,"<p>We have 3 columns <code> db_name , user_id, user_role</code></p>
<p>We want user list along with their roles assigned and database name on which they have access granted.</p>
<p>output should be like below</p>
<p><code>user_id | user_role | datname(dbname)</code></p>
<p>I don't see any table so that I can join . I checked pg_roles/pg_user but we get only user list and their assigned role but not database name. also checked pg_database but no luck</p>
<p>Thanks</p>",,0,0,,2021. 12. 16 오전 9:41:10,,2021. 12. 16 오전 9:41:10,,,,,9736587,,1,0,postgresql,22
70243680,Should I trust my LDBC results on neo4j? Error recording runtime - reported value exceeds maximum allowed. Time reported as maximum,"<p>I am trying to run the LDBC Benchmark (SF100) on an experimental JVM, but when I am trying to use some really big numbers</p>
<ul>
<li>operation_count=168649</li>
<li>ldbc.snb.interactive.LdbcQuery5_freq=78</li>
<li>ldbc.snb.interactive.LdbcQuery5_enable=true</li>
<li>all LdbcShortQueries &amp; LdbcUpdates activated</li>
</ul>
<p>I am getting the following Error after the 1:30h</p>
<blockquote>
<p>OperationTypeMetricsManager  Error recording runtime - reported value exceeds maximum allowed. Time reported as maximum.</p>
</blockquote>
<p>as you can se bellow and my question is, should i trust my results??</p>
<pre><code>WorkloadStatusThread  2021/12/05 07:17:50 +0000 Runtime [01:31:32.558 (h:m:s.ms)], Operations [168,478], Last [03:33.770 (m:s.ms)], Throughput (Total) [30.67] (Last 6s) [0.00]
WorkloadStatusThread  2021/12/05 07:17:52 +0000 Runtime [01:31:34.658 (h:m:s.ms)], Operations [168,478], Last [03:35.870 (m:s.ms)], Throughput (Total) [30.66] (Last 6s) [0.00]
OperationTypeMetricsManager  Error recording runtime - reported value exceeds maximum allowed. Time reported as maximum.
Reported: 5496558196323 NANOSECONDS / 01:31:36.558.196 (h:m:s.ms.us)
For: LdbcQuery5
Maximum: 5400000000000 NANOSECONDS / 01:30:00.000.000 (h:m:s.ms.us)
WorkloadStatusThread  2021/12/05 07:17:54 +0000 Runtime [01:31:36.758 (h:m:s.ms)], Operations [168,479], Last [00:00.200 (m:s.ms)], Throughput (Total) [30.65] (Last 6s) [0.16]
WorkloadStatusThread  2021/12/05 07:17:57 +0000 Runtime [01:31:38.859 (h:m:s.ms)], Operations [168,479], Last [00:02.301 (m:s.ms)], Throughput (Total) [30.64] (Last 6s) [0.16]
(...)
WorkloadStatusThread  2021/12/05 07:48:15 +0000 Runtime [02:01:57.788 (h:m:s.ms)], Operations [168,480], Last [01:51.845 (m:s.ms)], Throughput (Total) [23.02] (Last 6s) [0.00]
WorkloadStatusThread  2021/12/05 07:48:18 +0000 Runtime [02:01:59.888 (h:m:s.ms)], Operations [168,480], Last [01:53.945 (m:s.ms)], Throughput (Total) [23.02] (Last 6s) [0.00]
OperationTypeMetricsManager  Error recording runtime - reported value exceeds maximum allowed. Time reported as maximum.
Reported: 7320169171975 NANOSECONDS / 02:02:00.169.171 (h:m:s.ms.us)
For: LdbcQuery5
Maximum: 5400000000000 NANOSECONDS / 01:30:00.000.000 (h:m:s.ms.us)
WorkloadStatusThread  2021/12/05 07:48:20 +0000 Runtime [02:02:01.989 (h:m:s.ms)], Operations [168,481], Last [00:01.819 (m:s.ms)], Throughput (Total) [23.01] (Last 6s) [0.16]
WorkloadStatusThread  2021/12/05 07:48:22 +0000 Runtime [02:02:04.089 (h:m:s.ms)], Operations [168,481], Last [00:03.919 (m:s.ms)], Throughput (Total) [23.00] (Last 6s) [0.16]
WorkloadStatusThread  2021/12/05 07:48:24 +0000 Runtime [02:02:06.190 (h:m:s.ms)], Operations [168,481], Last [00:06.020 (m:s.ms)], Throughput (Total) [23.00] (Last 6s) [0.16]
(...)
WorkloadStatusThread  2021/12/05 07:51:18 +0000 Runtime [02:05:00.520 (h:m:s.ms)], Operations [168,481], Last [03:00.350 (m:s.ms)], Throughput (Total) [22.46] (Last 6s) [0.00]
WorkloadStatusThread  2021/12/05 07:51:20 +0000 Runtime [02:05:02.620 (h:m:s.ms)], Operations [168,481], Last [03:02.450 (m:s.ms)], Throughput (Total) [22.46] (Last 6s) [0.00]
OperationTypeMetricsManager  Error recording runtime - reported value exceeds maximum allowed. Time reported as maximum.
Reported: 7503992312806 NANOSECONDS / 02:05:03.992.312 (h:m:s.ms.us)
For: LdbcQuery5
Maximum: 5400000000000 NANOSECONDS / 01:30:00.000.000 (h:m:s.ms.us)
WorkloadStatusThread  2021/12/05 07:51:22 +0000 Runtime [02:05:04.721 (h:m:s.ms)], Operations [168,482], Last [00:00.728 (m:s.ms)], Throughput (Total) [22.45] (Last 6s) [0.16]
WorkloadStatusThread  2021/12/05 07:51:25 +0000 Runtime [02:05:06.821 (h:m:s.ms)], Operations [168,482], Last [00:02.828 (m:s.ms)], Throughput (Total) [22.44] (Last 6s) [0.16]

etc...
</code></pre>",,0,0,,2021. 12. 6 오전 10:01:16,,2021. 12. 6 오전 10:01:16,,,,,14249187,,1,0,neo4j|cypher,23
70267391,MYSQL Query to display meta values in a row,"<p>I'm looking for a more efficient way to write this query which displays meta values for an order in a single row. I can't think of a solution myself but before I redesign the database I wanted to see if anyone has any ideas to avoid 11 INNER JOINs. Here is my query which currently takes 20 seconds to load a single result (which is obviously not practical):</p>
<pre><code>SELECT 
o1.order_id, 
o1.order_status AS 'Order Status', 
m3.meta_value AS 'UOP Order Status', 
m4.meta_value AS 'UOP Registration Date', 
m5.meta_value AS 'UOP Banner Registration', 
m6.meta_value AS 'UOP Banner Date',
m7.meta_value AS 'Course Completion Date',
m8.meta_value AS 'Course Grade',
m9.meta_value AS 'Grade Submission Date',
m1.meta_value AS 'First Name', 
m2.meta_value AS 'Last Name', 
o1.order_date AS 'Order Date', 
m10.meta_value, 
m11.meta_value,
o1.partner_id AS 'Source'
FROM partner_orders o1
INNER JOIN partner_order_meta m1
 ON (o1.order_id = m1.order_id)
INNER JOIN partner_order_meta m2
 ON (o1.order_id = m2.order_id)
INNER JOIN partner_order_meta m3
 ON (o1.order_id = m3.order_id)
INNER JOIN partner_order_meta m4
 ON (o1.order_id = m4.order_id)
INNER JOIN partner_order_meta m5
 ON (o1.order_id = m5.order_id)
INNER JOIN partner_order_meta m6
 ON (o1.order_id = m6.order_id)
INNER JOIN partner_order_meta m7
 ON (o1.order_id = m7.order_id)
INNER JOIN partner_order_meta m8
 ON (o1.order_id = m8.order_id)
INNER JOIN partner_order_meta m9
 ON (o1.order_id = m9.order_id)
INNER JOIN partner_order_meta m10
 ON (o1.order_id = m10.order_id)
INNER JOIN partner_order_meta m11
 ON (o1.order_id = m11.order_id)
WHERE m1.meta_key = 'First Name' AND m2.meta_key = 'Last Name' AND m3.meta_key = 'uop_order_status' AND m4.meta_key = 'uop_registration_date' AND m5.meta_key = 'uop_banner_registration' AND m6.meta_key = 'uop_banner_registration_date' AND m7.meta_key = 'course_completion_date' AND m8.meta_key = 'course_grade' AND m9.meta_key = 'grade_submission_date' AND m10.meta_key = 'Course Number' AND m11.meta_key = 'Course Title';
</code></pre>",70267505,1,0,,2021. 12. 7 오후 9:55:01,,2021. 12. 7 오후 10:06:02,,,,,17619465,,1,0,mysql,23
70271967,MYSQL - Subquery returns more than 1 row - how to duplicate row with same userId?,"<p>Here is my subQuery, I cannot understand the error : 1242 - Subquery returns more than 1 row</p>
<pre><code>SELECT DISTINCT u.id as userId,  
  (
                SELECT a10.description 
                FROM Export exp 
                INNER JOIN Account a10 ON (a10.id = exp.accountId)
                WHERE exp.isActive = 1 
                AND exp.platformId = 14
            ) as structur
            FROM User u
            LEFT JOIN AccountUser au ON au.userId = u.id and au.isDefault = 1
            LEFT JOIN Account a ON a.id = au.accountId
            WHERE u.id &gt; 0
            ORDER BY u.id ASC
            LIMIT 10
</code></pre>
<p>ERROR : 1242 - Subquery returns more than 1 row</p>
<pre><code>SELECT DISTINCT u.id as userId,  
  (
                SELECT a10.description 
                FROM Export exp
</code></pre>
<p>Thank you for your help</p>",70272022,1,0,,2021. 12. 8 오전 8:30:32,,2021. 12. 8 오전 8:35:00,,,,,8764155,,1,1,mysql,23
70357943,Statistic of sales per day in the last 30 day,"<p>I have a quest that is about doing a statistic of the sales per day in the last 30 day...i've found a way to only show the last month:</p>
<pre><code>SELECT * 
FROM purchase
WHERE date &gt;= date('01-05-2021', current_date - interval '1 month')
  and date &lt; date('01-05-2021', current_date)
</code></pre>
<p>the columns in purchase are just id, value, date, cashier and store id what do you think is the best way to do this?
i have this and i don't know way it is not working...i'm new in postgresql so please don't be offended by this</p>",,1,0,,2021. 12. 15 오전 2:56:07,,2021. 12. 15 오전 3:12:02,,,,user17654992,,,1,0,sql|postgresql,23
70308545,Neo4j and CVE-2021-44228,"<p>Is Neo4j impacted by CVE-2021-44228? Which versions of Neo4j are concerned?</p>
<p>Is it possible to mitigate the vulnerability by setting the log4j2.formatMsgNoLookups parameter as described in this <a href=""https://www.randori.com/blog/cve-2021-44228/"" rel=""nofollow noreferrer"">post</a>?</p>",70318996,1,0,,2021. 12. 10 오후 5:50:58,,2021. 12. 14 오후 6:01:32,,,,,4228896,,1,0,neo4j,279
70075805,Postgres how to loop xmlelement,"<p>How can i loop the ServiceID in below SQL ? Below SQL only able to return 1 row instead of multiple ServiceID with masslineinfo ?</p>
<pre class=""lang-sql prettyprint-override""><code>select '&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;'|| xmlconcat(
xmlelement(name Interface,xmlconcat('&lt;ReasonCode&gt;CREBFM&lt;/ReasonCode&gt;',
    xmlelement(name ChangeConfiguration,                  
        xmlconcat(
            '&lt;MassRequestDetails&gt;&lt;DynamicProperty value=&quot;DYN_PROPERTY_ PO ID reference&quot; name=&quot;EpcTargetOfferID&quot;/&gt;&lt;/MassRequestDetails&gt;',
            xmlelement(name MassLineInfo, 
                xmlelement(name ServiceID,  SUBSTR(MSISDN, 4)  )
    ))
 )
)))
 from mxsrpt_astro_order a;
</code></pre>
<pre><code>    &lt;masslineinfo&gt;
        &lt;serviceid&gt;4577875&lt;/serviceid&gt;
    &lt;/masslineinfo&gt;
    &lt;masslineinfo&gt;
        &lt;serviceid&gt;12345&lt;/serviceid&gt;
    &lt;/masslineinfo&gt;
</code></pre>
<p>Thanks.</p>",,0,0,,2021. 11. 23 오전 5:27:06,,2021. 11. 23 오전 6:39:33,2021. 11. 23 오전 6:39:33,,330315,,17485008,,1,0,postgresql,24
70251727,Neo4j- typical query - returning a node with the most appearances,"<p>I have to make a query that returns me a club or clubs, where play the most amount of players that are not representing the country, from where the club is.</p>
<p>My query works fine, but I want to filter, so my result is ONLY clubs that size is the most.</p>
<p>As for now the biggest size is 4, and I have 4 clubs that have 4 players which were supposed to be there.</p>
<p>The only thing comes to my mind to filter it out was by using <code>LIMIT 1</code> in the end, but then, I cut out three clubs, that also fill the predicate.</p>
<pre><code>MATCH (c: Club)&lt;-[r: PLAYS_FOR]-(p: Player)-[r2: REPRESENTS]-&gt;(n: NationalTeam)
WHERE c.country&lt;&gt;n.country
WITH c,collect(p.name) as list_players,n.country as country,size(collect(p.name)) as size
RETURN c,list_players,country,size ORDER BY size DESC LIMIT 1
</code></pre>
<p>edit:</p>
<p>I managed to do something like this, don't know if it's optimal, but it is working:</p>
<pre><code>MATCH (c: Club)&lt;-[r: PLAYS_FOR]-(p: Player)-[r2: REPRESENTS]-&gt;(n: NationalTeam)
WHERE c.country&lt;&gt;n.country
WITH c,collect(p.name) as list_players,n.country as country,size(collect(p.name)) as size
WITH c,list_players,country,size ORDER BY size DESC LIMIT 1
WITH size
MATCH (c: Club)&lt;-[r: PLAYS_FOR]-(p: Player)-[r2: REPRESENTS]-&gt;(n: NationalTeam)
WHERE c.country&lt;&gt;n.country
WITH size,c,collect(p.name) as list_players,n.country as country,size(collect(p.name)) as size2 WHERE size(collect(p.name)) = size
RETURN c,list_players,country,size
</code></pre>",,1,0,,2021. 12. 6 오후 8:44:00,,2021. 12. 7 오전 1:49:25,2021. 12. 6 오후 9:21:08,,15795704,,15795704,,1,0,neo4j,24
70121113,Postgres: Transform Continous Rows Into a Discrete Rows,"<p>I'm not sure wether the title is correct . I've spent some time to find the best title suited for this case.</p>
<p>Let say. I have data in this format:</p>
<pre><code>| room |     changes      |   created_at    |
|------|------------------|-----------------|
| A    | [free, occupied] | 2021-11-1 18:00 |
| B    | [free, occupied] | 2021-11-1 20:30 |
| B    | [occupied, free] | 2021-11-1 23:30 |
| A    | [occupied, free] | 2021-11-2 00:15 |
| B    | [free, occupied] | 2021-11-2 01:00 |
</code></pre>
<p>The output required will be</p>
<pre><code>+------+----------+-----------------+
| room | occupied |   Period        |
+------+----------+-----------------+
| A    | NO       | 2021-11-1 18:00 |
| B    | NO       | 2021-11-1 18:00 |
| A    | NO       | 2021-11-1 19:00 |
| B    | NO       | 2021-11-1 19:00 |
| A    | YES      | 2021-11-1 20:00 |
| B    | NO       | 2021-11-1 20:00 |
| A    | YES      | 2021-11-1 21:00 |
| B    | NO       | 2021-11-1 21:00 |
| A    | YES      | 2021-11-1 22:00 |
| B    | NO       | 2021-11-1 22:00 |
| A    | YES      | 2021-11-1 23:00 |
| B    | YES      | 2021-11-1 23:00 |
| A    | YES      | 2021-11-2 00:00 |
| B    | YES      | 2021-11-2 00:00 |
| A    | NO       | 2021-11-2 01:00 |
| B    | YES      | 2021-11-2 01:00 |
| A    | NO       | 2021-11-2 02:00 |
| B    | YES      | 2021-11-2 02:00 |
+------+----------+-----------------+
</code></pre>
<p>The output generated using this logic:</p>
<ul>
<li>When during that period. the room is changed to <code>occupied</code>. results.occupied will be <code>YES</code></li>
<li>when during that period. no changes, the change is taken from the previous change.</li>
<li>When during that period. the room is changed from <code>occupied</code> to <code>free</code>. The next period (next row) results.&quot;occupied&quot; will be <code>NO</code></li>
</ul>",,1,0,,2021. 11. 26 오전 7:57:29,,2021. 11. 26 오후 5:47:19,2021. 11. 26 오후 5:47:19,,3034747,,3034747,,1,0,postgresql,25
70177997,MySql Retail Stores Inventory record,"<p>I am wanting to create a database for a retail chain. I have created a database with the following tables:</p>
<pre><code>+---------------------+
| Tables_in_RetailInc |
+---------------------+
| manufacturer        |
| products            |
| sales               |
| shipments           |
| stores              |
| warehouses          |
+---------------------+
</code></pre>
<p>I am wanting to have add annual inventories for each store and warehouse in the database. This inventory needs to include the date, location, quantity of products. However I am not sure how to properly go about this. I have tried looking for examples online yet found nothing helpful to me.</p>
<p>I have made a simple inventory table:</p>
<pre><code>+------------+-------------+------+-----+---------+-------+
| Field      | Type        | Null | Key | Default | Extra |
+------------+-------------+------+-----+---------+-------+
| pro_no     | int         | NO   | PRI | NULL    |       |
| quantity   | int         | NO   |     | NULL    |       |
| name       | varchar(20) | NO   |     | NULL    |       |
| in_stock   | boolean     | NO   |     | NULL    |       |
+------------+-------------+------+-----+---------+-------+
</code></pre>
<p>Another issue is I want to create a function that determines the closest warehouse to a store for a given product. I am not also sure how to go about this either. I have seen some people use actual coordinates for this.</p>
<p>Any help with the conception of the design will be much appreciated.</p>",,0,0,,2021. 12. 1 오전 1:11:56,,2021. 12. 1 오전 1:11:56,,,,,14873552,,1,0,mysql,25
70282264,Neo4J 4.3 upgrade issue,"<p>We have migrated our application to Java 11 and Neo4j to 4.3</p>
<p>While executing below query we are getting issue.</p>
<p><strong>Query:</strong></p>
<pre>WHERE ALL(pn in nodes(p) where ANY (p in pn.latest WHERE p in [2,11])) return *
</pre>
<p><strong>Error Message:</strong></p>
<pre><code>Failed rewriting FilterScope(Variable(p),Some(In(Variable(p),ListLiteral(List(ExplicitParameter(2,Any), SignedDecimalIntegerLiteral(11))))))
Tried using children: PathExpression(NodePathStep(Variable(n),SingleRelationshipPathStep(Variable(  UNNAMED0),INCOMING,Some(Variable(r)),NilPathStep))),Some(In(PathExpression(NodePathStep(Variable(n),SingleRelationshipPathStep(Variable(  UNNAMED0),INCOMING,Some(Variable(r)),NilPathStep))),ListLiteral(List(ExplicitParameter(2,Any), SignedDecimalIntegerLiteral(11)))))
</code></pre>
<p><strong>I have also tried to execute above query on Neo4j desktop but still getting same issue. We have all required jars in database plugin including compatible apoc plugin too.</strong></p>",,0,0,,2021. 12. 8 오후 10:03:18,,2021. 12. 12 오전 10:10:37,2021. 12. 12 오전 10:10:37,,132270,,17630126,,1,0,neo4j,25
70063217,How can I get data in the form I need?,"<p>I have a Nodejs server and I am using PostgreSQL, the database structure is shown below.</p>
<p>I have a request:</p>
<pre><code>with tests(q, o) as (
   select q.question, json_agg(json_build_object('id', o.id, 'option', o.option, 'is_answer', o.is_answer, 'test_id', t.id)) 
   from tests t join quests q on t.id = q.test_id join options o on q.id = o.quest_id 
   where t.course_id = '${courseId}'
   group by q.question
)
select json_build_object('lessons', 
     (select json_agg(json_build_object('id', l.id, 'lesson_text', l.lesson_text,'chapter', l.chapter, 'position', l.position)) from lessons l where l.course_id = '${courseId}'),
     'tests',
     (select json_agg(json_build_object('quest', t.q, 'options', t.o)) from tests t)
)
</code></pre>
<p>Which returns data in the form:</p>
<pre><code>{
  lessons: [{chapter, id, lesson_text, position},{chapter, id, lesson_text, position}...],
  tests: [{options: [{id, option, is_answer, test_id}...] quest},{options: [{id, option, is_answer, test_id}...] quest}...]
}
</code></pre>
<p>How can I convert the data to this view:</p>
<pre><code>{
  lessons: [ {chapter, id, lesson_text, position},{chapter, id, lesson_text, position}... ],
  tests: [ {chapter,time,position, quests: [ {quest, options: [{id, option, is_answer,test_id}...]} ]}... ]
}
</code></pre>
<p>My database structure:</p>
<p><a href=""https://i.stack.imgur.com/XcdLj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/XcdLj.png"" alt=""database structure"" /></a></p>",,0,0,,2021. 11. 22 오전 9:03:20,,2021. 11. 22 오전 9:27:32,2021. 11. 22 오전 9:27:32,,15425246,,15425246,,1,0,sql|postgresql,26
70230356,"function or extension to convert text representation of numbers (one, two and a half) to actual numbers?","<p>I'm working with PostgreSQL 14.1 and I would like to know if there is some kind of extension, function, or any neat way to convert text representation of numbers to actual numbers.</p>
<p>which means to convert <code>two and a half</code> to <code>2.5</code> or <code>twenty two</code> to <code>22</code></p>
<p>any ideas ?</p>",,0,0,,2021. 12. 4 오후 11:35:14,1,2021. 12. 4 오후 11:35:14,,,,,80932,,1,0,postgresql,26
70347804,Problem Linking Bigquery with Google Sheet file: I can only read the first sheet,"<p>In Bigquery Console I created a new external table that is linked to a Google Sheet file.</p>
<p>Even if I choose the proper sheet's link there is no way I can pull that information into my table: I can only reach the first one.</p>
<p>I am creating my file choosing 'Drive' as a Source and copying everything that comes next to my FILE_ID:</p>
<p><a href=""https://docs.google.com/spreadsheets/d/FILE_ID/edit#gid=SHEET_ID"" rel=""nofollow noreferrer"">https://docs.google.com/spreadsheets/d/FILE_ID/edit#gid=SHEET_ID</a></p>
<p>With this example I would introduce something like this: FILE_ID/edit#gid=SHEET_ID</p>
<p>But I can't get the specified sheet I need.</p>
<p>Am I doing something wrong here?</p>",,1,0,,2021. 12. 14 오전 11:02:57,,2021. 12. 21 오전 1:24:41,2021. 12. 21 오전 1:24:41,,1458413,,16682039,,1,0,google-bigquery,26
70174463,StackOverflow Public Dataset is Old?,"<p>Is the public dataset on BigQuery for StackOverflow no longer being maintained?  I'm trying to search for tags used in 2020-2021, but when I write a very simple query, I get no results?</p>
<p>For example,</p>
<pre><code>tags, creation_date FROM `bigquery-public-data.stackoverflow.stackoverflow_posts` where  creation_date &gt; timestamp(&quot;2018-1-1&quot;) LIMIT 1000
</code></pre>
<p>Returns no rows.</p>
<p>It looks like there are no posts in the dataset from 2018 onwards?  Or am I doing something wrong?</p>",,1,0,,2021. 11. 30 오후 6:39:52,,2021. 12. 1 오전 5:31:08,,,,,17555121,,1,0,google-bigquery,27
70203313,MySQL pivoting column names based on column values?,"<p>I have a table of data like:</p>
<pre><code>ID1   F1.   F2.   F3
X1. Enabled. Disabled. Disabled
X2. Disabled. Enabled. Enabled. 
</code></pre>
<p>I'd like to get it into the form of:</p>
<pre><code>ID1  Fields
X1.  F1
X2.  F2,F3
</code></pre>
<p>But I'm having writers block on how to approach the problem. Is this something a pivot would help with? Self-joining the table? I've tried some group_concat() aggregations on if() statements to no avail, similarly with grouping on case whens.</p>",70203396,1,0,,2021. 12. 2 오후 4:40:24,,2021. 12. 2 오후 4:45:57,,,,,1337901,,1,2,mysql,27
70311478,GROUP BY a value that is not part of the query's filter,"<p>I have a table with information from email marketing campaigns. On that table (you can see the schema <a href=""https://stackoverflow.com/questions/70309288/pivoting-columns-from-struct-type-complex-schema/70310677"">here</a>) I have several different columns about the users who received this campaign. One of the most important columns from this table is properties.status, because it's where I can get information about user's interactions with our campaigns.</p>
<p>So, for example, if the email has been sent to the user, a row is created on that table and the value for the &quot;properties.status&quot; column is &quot;enqueued&quot;. If the user opens the email, another row is created but the value now is &quot;opened&quot;. If they click, value for properties.status is &quot;clicked&quot;, etc.</p>
<p>I am trying to generate a query that will have as the output the total number of people who have opened and clicked on every campaign that we sent.</p>
<p>I did manage to pivot &quot;Opened&quot; and &quot;Clicked&quot;, as you can see <a href=""https://stackoverflow.com/questions/70309288/pivoting-columns-from-struct-type-complex-schema/70310677"">here</a>. But now I have a new challenge.</p>
<p>I want to group everything by the month where the emails were sent, so basically having an output:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Month*</th>
<th>Campaign_Name</th>
<th>Subject</th>
<th>Opened</th>
<th>Clicked</th>
</tr>
</thead>
</table>
</div>
<ul>
<li>Month would be (MONTH FROM timestamp AT TIME ZONE &quot;UTC&quot;)</li>
</ul>
<p>What's being challenged for my is that I want to group the timestamp column when the campaign.status was delivered, but &quot;opened&quot; and &quot;clicked&quot; are other values for properties.status.</p>
<p>I tried to do:</p>
<pre><code>WITH
  ORCTOR AS (
  SELECT
    *
  FROM (
    SELECT
      internal_customer_id,
      properties.campaign_name,
      properties.Subject,
      properties.Status
    FROM
      `project-id.exp_1ddb4cbe_fc04_11ea_9874_06183dd6fcf3_views.campaign` ) PIVOT (COUNT(DISTINCT internal_customer_id ) FOR Status IN ('opened',
        'clicked')))
SELECT
  CONCAT( EXTRACT (MONTH
    FROM
      timestamp AT TIME ZONE &quot;UTC&quot;), &quot;/&quot;, EXTRACT (YEAR
    FROM
      timestamp AT TIME ZONE &quot;UTC&quot;) ) AS Sent,
  properties.campaign_name, opened, clicked
FROM
  `project-id.exp_1ddb4cbe_fc04_11ea_9874_06183dd6fcf3_views.campaign`
WHERE
  properties.status = &quot;enqueued&quot;
</code></pre>
<p>But then I get:
Unrecognized name: opened at [20:29]</p>",70311559,1,0,,2021. 12. 10 오후 11:38:24,,2021. 12. 13 오전 2:41:48,2021. 12. 13 오전 2:41:48,,14733669,,15219726,,1,0,google-bigquery,27
70207577,PostgreSQL query for tvshows with multiple genres,"<p>I'm trying to create a database of tvshows that I have personally watched.</p>
<p>I have 3 tables:
tvshow_list: id, title, episodes, year</p>
<p>genres: id, genre name</p>
<p>genres_in_tvshows: genreid, tvshow id</p>
<p>I want to have a list which would show the tvshow id, title, episodes, and the genres. I cannot find a psql query that shows me how to 1. &quot;group_concat&quot; the genres so more than one shows and 2. join the tables</p>",,1,0,,2021. 12. 2 오후 11:08:53,,2021. 12. 5 오후 9:47:06,,,,,17575725,,1,0,postgresql,28
70248462,How to select specific fields from pivot table that matches exact values,"<p>I have 3 tables</p>
<ul>
<li>conversations - I save basic information about the conversation</li>
<li>users - Infor about user</li>
<li>conversation_users - table that saves information about which user belongs to which conversation</li>
</ul>
<p>In my case user &quot;1&quot; wants to get a conversation between him and users: 3, 4, 5. So I'm trying to fetch conversation_id = 12. First I need to find all conversations user &quot;1&quot; belongs to, that is conversation_id &quot;1&quot; and &quot;12&quot;.</p>
<p>Next I'm executing <code>SELECT * FROM conversations_users WHERE conversation_id in (1,12)</code>. How do I pick rows marked in red rectangle?</p>
<p><a href=""https://i.stack.imgur.com/vQlR0.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/vQlR0.png"" alt=""enter image description here"" /></a></p>",,1,0,,2021. 12. 6 오후 4:13:16,,2021. 12. 6 오후 5:07:50,,,,,1860890,,1,0,mysql,28
70253240,Postgresql - selecting from one partition is much slower then selecting from another,"<p>I have a simple table</p>
<pre><code>CREATE TABLE public.&quot;ToProcessVideoIds&quot; (
&quot;Id&quot; text NOT NULL,
&quot;IsProcessed&quot; bool NOT NULL,
CONSTRAINT &quot;PK_ToProcessVideoIdsPartitioned&quot; PRIMARY KEY (&quot;Id&quot;, &quot;IsProcessed&quot;)
)
PARTITION BY LIST (&quot;IsProcessed&quot;);
</code></pre>
<p>with two partitions by a boolean field <code>IsProcessed</code>.</p>
<pre><code>CREATE TABLE public.&quot;ToProcessVideoIds_processed&quot; PARTITION OF public.ToProcessVideoIds 
FOR VALUES IN (true);


CREATE TABLE public.&quot;ToProcessVideoIds_unprocessed&quot; PARTITION OF 
public.ToProcessVideoIds FOR VALUES IN (false);
</code></pre>
<p>when I filter by <code>IsProcessed</code> (or when I select directly from partition) it's much faster for <code>processed</code> partition 0.06ms vs 27ms</p>
<pre><code>explain (ANALYZE, TIMING, COSTS, BUFFERS, VERBOSE)    select &quot;Id&quot; from &quot;ToProcessVideoIds_unprocessed&quot; limit 50;
Limit  (cost=0.00..0.81 rows=50 width=12) (actual time=27.350..27.358 rows=50 loops=1)
  Output: &quot;Id&quot;
  Buffers: shared hit=7265
  -&gt;  Seq Scan on public.&quot;ToProcessVideoIds_unprocessed&quot;  (cost=0.00..317346.99 rows=19697899 width=12) (actual time=27.349..27.353 rows=50 loops=1)
        Output: &quot;Id&quot;
        Buffers: shared hit=7265
Planning Time: 0.044 ms
Execution Time: 27.373 ms
</code></pre>
<p>_</p>
<pre><code>explain (ANALYZE, TIMING, COSTS, BUFFERS, VERBOSE)    select &quot;Id&quot; from &quot;ToProcessVideoIds_processed&quot; limit 50;
Limit  (cost=0.00..0.77 rows=50 width=12) (actual time=0.040..0.049 rows=50 loops=1)
  Output: &quot;Id&quot;
  Buffers: shared hit=1
  -&gt;  Seq Scan on public.&quot;ToProcessVideoIds_processed&quot;  (cost=0.00..294045.98 rows=19038398 width=12) (actual time=0.040..0.044 rows=50 loops=1)
        Output: &quot;Id&quot;
        Buffers: shared hit=1
Planning Time: 0.030 ms
Execution Time: 0.059 ms
</code></pre>
<p>Did I configure something incorrectly? Is there a way to select from _unrpocessed partition with the same performance?</p>
<p>Records are updated all the time (unprocessed become processed) - could this affect anything?</p>
<p>There is roughly the same amount of data in both partitions.</p>",,1,0,,2021. 12. 6 오후 11:33:08,,2021. 12. 6 오후 11:39:07,,,,,2606389,,1,1,postgresql,28
70255823,Should I not install MYSQL community server in my device that has my own application running and sell that device without exposing my source code?,"<p>I have a device which I am plannig to sell along with my application.
My application is a mysql client.
Also, I have installed mysql server in my device.
My application which is a mysql client interacts with this mysql server I have installed in my device.</p>
<p>Mysql - community version
Version - 8.0.27</p>
<p>As per the licensing can I have this without exposing my application's source code to the person I sell? Each one interprets this GPL v2 in their own way. Please help me with this.</p>",,2,0,,2021. 12. 7 오전 6:36:12,,2021. 12. 7 오전 6:54:44,,,,,8164763,,1,0,mysql,28
70276789,Creating a function which returns a table where different columns come from different tables,"<p>I would like to write a function in <code>Postgresql</code> with 2 parameters which returns a table. This table will have two columns (<code>column1</code> and <code>column2</code>), and for each of these columns I would need to get information from a column coming from another table (<code>table1</code> or <code>table2</code>) according to the parameters of the function (<code>param1</code> and <code>param2</code>). Something like this:</p>
<pre><code>CREATE FUNCTION trial(param1 VARCHAR(50), param2 VARCHAR(50))
RETURNS TABLE (
    column1 VARCHAR(50),
    column2 VARCHAR(50)

AS $$
    BEGIN 
    RETURN QUERY 
        SELECT c1 as column1 FROM table1 WHERE column1 = param1;
        SELECT c2 as column2 FROM table2 WHERE column2 = param2;
    END;    
$$LANGUAGE plpgsql;
</code></pre>
<p>My problem is that if I run this function with the two parameters, for example</p>
<pre><code>SELECT trial('car', 'house');
</code></pre>
<p>or</p>
<pre><code>SELECT * FROM trial('car', 'house');
</code></pre>
<p>I get an error like this:</p>
<pre><code>ERROR:  structure of query does not match function result type
DETAIL:  Number of returned columns (1) does not match expected column count (2).
</code></pre>
<p>I can imagine that the problem is the way I do the QUERY, but I can't find the proper manner to do it. How can I query from 2 tables to fill my column1 and column2, if the two tables from which I want to query have nothing in common and I can't do a JOIN?</p>
<p>Thanks a lot in advance!</p>
<p>Sergio</p>",,1,0,,2021. 12. 8 오후 2:37:45,,2021. 12. 8 오후 3:12:40,2021. 12. 8 오후 2:41:46,,990750,,17626612,,1,2,sql|postgresql,28
70353121,How to show all dates on a PSQL running sum in a timeframe,"<p>I am doing this running sum using PSQL where I would like to get daily totals of users subscribed to a service. With my current query, I get the cumulative sum in dates where clients are subscribed, but I can't get to see the values of the dates where new clients are not being subscribed. I will like to have a list of all dates with the corresponding total of clients subscribed every day as shown in the example below</p>
<pre><code>with data as (select
  date_trunc('day', userstatuslog.modified) as modified_date, 
  user.status,
  count(1)
from userstatuslog
 join user on user.id = userstatuslog.id

where 
  user.status = 'Traveling' and     
  user.type = 'II' or 
  user.type = 'III'
group by
  1, 2
)

select
  modified_date,
  sum(count) over (order by modified_date asc rows between unbounded preceding and current row)
from data
order by
  modified_date desc
</code></pre>
<p>Current Result:</p>
<p><a href=""https://i.stack.imgur.com/MtY16.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/MtY16.png"" alt=""enter image description here"" /></a></p>
<p>Expected Result:</p>
<p><a href=""https://i.stack.imgur.com/dOKtn.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dOKtn.png"" alt=""enter image description here"" /></a></p>",,1,0,,2021. 12. 14 오후 5:25:52,,2021. 12. 15 오전 6:40:31,2021. 12. 14 오후 5:30:57,,330315,,12474157,,1,0,sql|postgresql,28
70317687,Ensure an a timestamp column (event) is happening X times during Y period,"<p>Fiddle in this <a href=""https://www.db-fiddle.com/f/8STbBxhQi72W65g59L1ccn/0"" rel=""nofollow noreferrer"">link</a>.</p>
<p>I have a table with user_id and action_time:
<strong>Schema (PostgreSQL v13)</strong></p>
<pre><code>CREATE TABLE actions(
  action_time timestamp,
  user_id int
  );
  
insert into actions values ('2015-01-20 01:00',1);
insert into actions values ('2015-01-01 01:00',1);
insert into actions values ('2015-01-10 01:00',1);
insert into actions values ('2015-01-12 01:00',1);
insert into actions values ('2015-01-16 01:00',1);
insert into actions values ('2015-01-23 01:00',1);
insert into actions values ('2015-02-20 01:00',1);
insert into actions values ('2015-03-20 01:00',1);
insert into actions values ('2015-05-20 01:00',1);
insert into actions values ('2015-06-20 01:00',1);
insert into actions values ('2015-01-20 01:00',2);
insert into actions values ('2015-03-20 01:00',2);
insert into actions values ('2015-04-20 01:00',2);
insert into actions values ('2015-05-20 01:00',2);
insert into actions values ('2015-05-21 01:00',2);
insert into actions values ('2015-05-21 01:00',2);
insert into actions values ('2015-05-23 01:00',2);
</code></pre>
<p>I want to check if a user has done at least one action every month for 6 months.</p>
<p>By using this I get how many actions a user has done every month:</p>
<pre><code>SELECT date_trunc('month',action_time) AS month_parth, user_id,COUNT(*) AS 
monthly_actions FROM actions
GROUP BY month_parth,user_id
ORDER BY user_id,month_parth ASC;
</code></pre>
<p>And obtain the following:</p>
<p><strong>Query #1</strong></p>
<pre><code>SELECT date_trunc('month',action_time) AS month_parth, user_id,COUNT(*) AS monthly_actions FROM actions
GROUP BY month_parth,user_id
ORDER BY user_id,month_parth ASC;
</code></pre>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>month_parth</th>
<th>user_id</th>
<th>monthly_actions</th>
</tr>
</thead>
<tbody>
<tr>
<td>2015-01-01T00:00:00.000Z</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>2015-02-01T00:00:00.000Z</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2015-03-01T00:00:00.000Z</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2015-05-01T00:00:00.000Z</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2015-06-01T00:00:00.000Z</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2015-01-01T00:00:00.000Z</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2015-03-01T00:00:00.000Z</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2015-04-01T00:00:00.000Z</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2015-05-01T00:00:00.000Z</td>
<td>2</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>The user_id 1 has clearly at least one action per month (peaking at 6 on January), but the 2 has some gaps.</p>
<p>I am not sure how to go here, if I would need to do a new query grouping and using HAVING or how to move next.</p>
<p>The desired result could be a simple dummy column with TRUE/FALSE for the users that have at least one action per month during 6 months.</p>",70318618,2,0,,2021. 12. 11 오후 6:02:33,,2021. 12. 11 오후 8:21:44,,,,,5549744,,1,0,postgresql,29
70342875,postgres parallel udf over whole column/s with rest api call,"<h2>Goal</h2>
<p>I'm trying to get postgres to parallel process a REST API call across a whole column of data (~20 million rows).</p>
<h2>First Attempt</h2>
<p>a UDF to be called on the column, like so:</p>
<pre><code>select col1, public.py_pgrest(col1) as enriched_data
from my_table
</code></pre>
<p>based on <a href=""https://stackoverflow.com/a/58426222/3517025"">this SO answer</a> I'm thinking (code's got kinks, don't grock):</p>
<pre class=""lang-sql prettyprint-override""><code>CREATE OR REPLACE FUNCTION public.py_pgrest(data_to_enrich text)
 RETURNS text
 LANGUAGE plpython2u
AS $function$
    import urllib2
    from urllib2 import Request, urlopen, URLError, HTTPError

    uri = &quot;http://enrichment.api/q=&quot; + data_to_enrich
    req = Request(uri)
    
    try:
        enriched_data = json.loads(urlopen(req).read()).get('my_enrichment_field')
    except HTTPError as e:
        return e
    except URLError as e:
        if hasattr(e, 'reason'):
            return e.reason
        elif hasattr(e, 'code'):
            return e.code
        else:
            return e
    return enriched_data
$function$
PARALLEL SAFE;
</code></pre>
<h2>Problem</h2>
<p>Even though the function is marked <code>PARALLEL SAFE</code>, this only helps for the query planner to allocate multiple workers to it and then gather the results.</p>
<h1>Question</h1>
<p><strong>Is there some pattern that allows me to parallelize the UDF within each worker?</strong></p>
<p>a tentative and coarse python example - just to illustrate the intent (based on <a href=""https://stackoverflow.com/a/53022415/3517025"">this SO answer</a>):</p>
<pre class=""lang-py prettyprint-override""><code>async def parallel_rest_calls():
    async with aiohttp.ClientSession() as session:
        tasks = []
        for row in column:
            tasks.append(call_rest_api(session=session, data=row, **kwargs))

        enriched_data_col = await asyncio.gather(*tasks, return_exceptions=True)
        return enriched_data_col
</code></pre>
<p>Granted, the python example still needs to map the input row to the correct output, but you get the gist, it's about <strong>utilizing the IO time to make more calls</strong>.</p>",,0,0,,2021. 12. 14 오전 1:42:29,,2021. 12. 14 오전 1:42:29,,,,,3517025,,1,0,postgresql,29
70122911,Fetch users who read the bible yesterday but not today in mysql,"<p>Hello I want to fetch users who read the chapter yesterday but not today. i have one table called user_bible_trackings that is below.</p>
<pre><code> user_id     date_read
   2          2021-11-25
   2          2021-11-26
   1          2021-11-22
   1          2021-11-23
   3          2021-11-25
</code></pre>
<p>My expected output is like below:-</p>
<pre><code>user_id
  3
</code></pre>
<p>I have tried below query</p>
<pre><code>SELECT DISTINCT(user_id) FROM `user_bible_trackings` 
WHERE  date_read = '2021-11-25' and date_read != '2021-11-26'
</code></pre>
<p>But its coming wrong output. Can anyone tell me what i am doing wrong</p>",70122970,1,0,,2021. 11. 26 오전 10:26:16,,2021. 11. 26 오전 10:37:38,,,,,11839651,,1,1,mysql,30
70149210,find row by one of group_concat value,"<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">id_potensi</th>
<th style=""text-align: right;"">merek_list</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">23</td>
<td style=""text-align: right;"">19</td>
</tr>
<tr>
<td style=""text-align: left;"">30</td>
<td style=""text-align: right;"">7,11</td>
</tr>
<tr>
<td style=""text-align: left;"">93</td>
<td style=""text-align: right;"">25</td>
</tr>
<tr>
<td style=""text-align: left;"">103</td>
<td style=""text-align: right;"">25,39</td>
</tr>
<tr>
<td style=""text-align: left;"">104</td>
<td style=""text-align: right;"">25</td>
</tr>
</tbody>
</table>
</div>
<p>i have result like above table by joining two tables with this queries.</p>
<pre><code>SELECT data_potensi.id as id_potensi, GROUP_CONCAT(DISTINCT merek_on_data_potensi.merek SEPARATOR &quot;, &quot;) AS merek_list
from`data_potensi` INNER JOIN merek_on_data_potensi ON merek_on_data_potensi.data_potensi = data_potensi.id 
GROUP by data_potensi.id
</code></pre>
<p>when i add where clause like this:</p>
<pre><code>SELECT data_potensi.id as id_potensi, GROUP_CONCAT(DISTINCT merek_on_data_potensi.merek SEPARATOR &quot;, &quot;) AS merek_list
from`data_potensi` INNER JOIN merek_on_data_potensi ON merek_on_data_potensi.data_potensi = data_potensi.id
where merek_on_data_potensi.merek = 25
GROUP by data_potensi.id
</code></pre>
<p>this is happen.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">id_potensi</th>
<th style=""text-align: right;"">merek_list</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">93</td>
<td style=""text-align: right;"">25</td>
</tr>
<tr>
<td style=""text-align: left;"">103</td>
<td style=""text-align: right;"">25</td>
</tr>
<tr>
<td style=""text-align: left;"">104</td>
<td style=""text-align: right;"">25</td>
</tr>
</tbody>
</table>
</div>
<p>how can i achieve result like below table?</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">id_potensi</th>
<th style=""text-align: right;"">merek_list</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">93</td>
<td style=""text-align: right;"">25</td>
</tr>
<tr>
<td style=""text-align: left;"">103</td>
<td style=""text-align: right;"">25,39</td>
</tr>
<tr>
<td style=""text-align: left;"">104</td>
<td style=""text-align: right;"">25</td>
</tr>
</tbody>
</table>
</div>
<p>this is my main table and relation defenition.</p>
<pre><code>CREATE TABLE `data_potensi` (
  `id` mediumint unsigned NOT NULL AUTO_INCREMENT,
  `organisasi` smallint unsigned NOT NULL,
  `jenis_alat_produksi` tinyint unsigned NOT NULL,
  `kapasitas_terpasang` mediumint unsigned NOT NULL,
  `jumlah` tinyint unsigned NOT NULL,
  `kapasitas_terpakai` decimal(4,2) unsigned NOT NULL,
  `tahun_operasi` year NOT NULL,
  `kondisi` smallint unsigned NOT NULL,
  `keterangan` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `data_potensi_organisasi_foreign` (`organisasi`),
  KEY `data_potensi_jenis_alat_produksi_foreign` (`jenis_alat_produksi`),
  KEY `data_potensi_kondisi_foreign` (`kondisi`),
  CONSTRAINT `data_potensi_jenis_alat_produksi_foreign` FOREIGN KEY (`jenis_alat_produksi`) REFERENCES `jenis_alat_produksi` (`id`),
  CONSTRAINT `data_potensi_kondisi_foreign` FOREIGN KEY (`kondisi`) REFERENCES `kondisi` (`id`),
  CONSTRAINT `data_potensi_organisasi_foreign` FOREIGN KEY (`organisasi`) REFERENCES `organisasi` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8mb3

CREATE TABLE `merek_on_data_potensi` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `data_potensi` mediumint unsigned NOT NULL,
  `merek` smallint unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `merek_on_data_potensi_data_potensi_foreign` (`data_potensi`),
  KEY `merek_on_data_potensi_merek_foreign` (`merek`),
  CONSTRAINT `merek_on_data_potensi_data_potensi_foreign` FOREIGN KEY (`data_potensi`) REFERENCES `data_potensi` (`id`),
  CONSTRAINT `merek_on_data_potensi_merek_foreign` FOREIGN KEY (`merek`) REFERENCES `merek` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=utf8mb3
</code></pre>",,0,0,,2021. 11. 29 오전 2:39:07,,2021. 11. 29 오전 7:31:18,2021. 11. 29 오전 7:31:18,,15299116,,15299116,,1,0,mysql,30
70214900,Postgres query to count only the last three records to each customer without to check the date,"<p>I'm trying to get a  PostgreSQL query where i need to check only the last three records to each customer and count how many records each costumer had with value = 0.</p>
<p>Example:
Table of Customers:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Key</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>John</td>
</tr>
<tr>
<td>2</td>
<td>Peter</td>
</tr>
<tr>
<td>3</td>
<td>Mike</td>
</tr>
</tbody>
</table>
</div><div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>key</th>
<th>Date</th>
<th>Customer</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2012-02-07</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>2012-02-08</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>2012-02-09</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>2012-03-07</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>2012-04-07</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>2012-07-09</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>2012-04-08</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>8</td>
<td>2012-04-08</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>9</td>
<td>2012-04-09</td>
<td>3</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<p>I need it:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Costumer</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>After to get this result i need to take only the customers with count &gt;= 3</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Costumer</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>I tried to do it using Rank() function but no way..
Any suggestion?</p>",,1,0,,2021. 12. 3 오후 1:14:10,,2021. 12. 3 오후 1:49:17,2021. 12. 3 오후 1:17:10,,330315,,3027248,,1,0,postgresql,30
70293094,Selecting random rows and order by ID,"<p>Here is the code I tried to select 6 random entries from database and it works fine.</p>
<pre><code>$sql=&quot;SELECT * 
      FROM tbl_all_ads 
      WHERE status='online' 
      AND brand='$brand' 
      ORDER BY RAND()  
      LIMIT 6&quot;;
</code></pre>
<p>But I need these randomly select values to order by id, ASC or DESC order. Here id,  is auto increment integer.
Please help me to solve this problem.</p>",70293302,1,0,,2021. 12. 9 오후 4:10:10,,2021. 12. 9 오후 4:24:06,2021. 12. 9 오후 4:15:24,,16461952,,2985971,,1,-1,mysql,30
70326887,MySQL query to find Instructor with min pay along with course,"<p>I have a table called instructor with <code>ID, prof_id, course and pay</code> attributes. I want to query each professor with the minimum pay per course along with the course.</p>
<p>This is what I have but it doesn't seem to work.</p>
<pre><code>SELECT prof_id, course, min(pay) as min_pay 
FROM instructor
GROUP BY prof_id;
</code></pre>
<p>the above query returns each <code>prof_id</code> with the min <code>pay</code> but the entire <code>course</code> column have the same course name (whichever course  is on the first row)</p>
<p>I also tried grouping by prof_id and course but it doesn't seem to do work either. My guess is the issue is in the group by.</p>
<p><a href=""https://i.stack.imgur.com/miH8d.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/miH8d.png"" alt=""enter image description here"" /></a></p>
<p>Note: I am new to DB. So if this is a stupid question to ask I apologize in advance.</p>",,1,0,,2021. 12. 12 오후 7:18:45,,2021. 12. 12 오후 7:37:44,2021. 12. 12 오후 7:37:44,,5389997,,13831328,,1,-1,mysql,30
70196366,Neo4j Is there a way to list running cypher queries in server?,"<p>I am using community edition 4.3.3. I started a long-time running query (graphsage training) from browser. Then my browser closed. When I am checking with &quot;top&quot; and &quot;htop&quot;, process is still running. It is good, but there is way list running queries in the server ?</p>
<p>In addition is it possible to see query history ?</p>",,2,0,,2021. 12. 2 오전 8:41:12,,2021. 12. 2 오전 10:55:16,2021. 12. 2 오전 8:48:20,,17487331,,12176602,,1,0,neo4j|cypher,31
70300519,Is there a way where I can filter/get in between dates when in MYSQL IN Clause that handles multiple columns?,"<p>So recently I have discovered that using the <code>In</code> Clause In <code>MYSQL 5.7</code>, allows me to extract specific data base on multiple columns.</p>
<pre><code>SELECT * FROM `Schema`.`Table` where (`ID`,`Code`) IN ((1,'AE'),(2,'AD'));
</code></pre>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>ID</th>
<th>Code</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>AE</td>
<td>2021-01-01</td>
</tr>
<tr>
<td>1</td>
<td>AE</td>
<td>2021-01-02</td>
</tr>
<tr>
<td>1</td>
<td>AE</td>
<td>2021-01-03</td>
</tr>
<tr>
<td>1</td>
<td>AE</td>
<td>2021-01-04</td>
</tr>
<tr>
<td>2</td>
<td>AD</td>
<td>2021-01-01</td>
</tr>
<tr>
<td>2</td>
<td>AD</td>
<td>2021-01-02</td>
</tr>
<tr>
<td>2</td>
<td>AD</td>
<td>2021-01-03</td>
</tr>
<tr>
<td>2</td>
<td>AD</td>
<td>2021-01-04</td>
</tr>
</tbody>
</table>
</div>
<p>This is amazing, But if I want to include an additional column for a particular range of Dates, it does not work. Here is the following query I have attempted.</p>
<pre><code>SELECT * FROM `Schema`.`Table` WHERE (`ID`,`Code`,`Date`) 
IN ((1,'AE', BETWEEN '2021-01-01' AND '2021-01-03'),(2,'AD',BETWEEN '2021-01-02' AND '2021-01-04'));
</code></pre>
<p>I could use Union ALL to merge the unique Data on the <code>ID</code> and <code>Code</code> and have the separate Date Range. But I am just wondering if my approach for the syntax is wrong, or even if there is a better way to approach this.</p>
<p>Thank you in advance</p>",70300560,2,0,,2021. 12. 10 오전 6:23:52,,2021. 12. 10 오전 7:51:34,,,,,7455982,,1,1,mysql,31
70303982,"So I have different columns cn_ref_no,date,expiry,amount,cn_commission,cn_amount_tag,bill_ref_no,bill_commission,bill_amount_tag","<p>So I have table with columns</p>
<p>The code I am using is</p>
<pre><code>select distinct(a.cn_ref_no),a.cn_commission,a.cn_tag,b.b_ref,b.b_commission,b.b_tag,c.d_ref,c.d_tag,c.d_commission
from cn_table a
left join bill_table b
on a.cn_ref=b.our_lc_ref

left join disc_table c
on a.cn_ref=c.our_lc_ref
</code></pre>
<p>The table</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">cn_ref_no</th>
<th style=""text-align: left;"">cn_commission</th>
<th style=""text-align: right;"">cn_tag</th>
<th>b_ref</th>
<th>b_commission</th>
<th>b_tag</th>
<th>d_ref</th>
<th>d_tag</th>
<th>d_commission</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>20</td>
<td>BILL_EXC</td>
<td>D001</td>
<td>DISC_SWF</td>
<td>20</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>20</td>
<td>BILL_EXC</td>
<td>D001</td>
<td>DISC_ADV</td>
<td>30</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>20</td>
<td>BILL_EXC</td>
<td>D001</td>
<td>DISC_CNF</td>
<td>50</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>35</td>
<td>BILL_ADV</td>
<td>D001</td>
<td>DISC_SWF</td>
<td>20</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>35</td>
<td>BILL_ADV</td>
<td>D001</td>
<td>DISC_ADV</td>
<td>30</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>35</td>
<td>BILL_ADV</td>
<td>D001</td>
<td>DISC_CNF</td>
<td>50</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>40</td>
<td>BILL_SWF</td>
<td>D001</td>
<td>DISC_SWF</td>
<td>20</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>40</td>
<td>BILL_SWF</td>
<td>D001</td>
<td>DISC_ADV</td>
<td>30</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>40</td>
<td>BILL_SWF</td>
<td>D001</td>
<td>DISC_CNF</td>
<td>50</td>
</tr>
</tbody>
</table>
</div>
<p>There are many differents records like this, this is one example.</p>
<p>What I want is data in this format</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">cn_ref_no</th>
<th style=""text-align: left;"">cn_commission</th>
<th style=""text-align: right;"">cn_tag</th>
<th>b_ref</th>
<th>b_commission</th>
<th>b_tag</th>
<th>d_ref</th>
<th>d_tag</th>
<th>d_commission</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>20</td>
<td>BILL_EXC</td>
<td>D001</td>
<td>DISC_SWF</td>
<td>20</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>35</td>
<td>BILL_ADV</td>
<td>D001</td>
<td>DISC_ADV</td>
<td>30</td>
</tr>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>40</td>
<td>BILL_SWF</td>
<td>D001</td>
<td>DISC_CNF</td>
<td>50</td>
</tr>
</tbody>
</table>
</div>
<p>Or the records in a single row like this if possible</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">cn_ref_no</th>
<th style=""text-align: left;"">cn_commission</th>
<th style=""text-align: right;"">cn_tag</th>
<th>b_ref</th>
<th>b_commission</th>
<th>b_tag</th>
<th>d_ref</th>
<th>d_tag</th>
<th>d_commission</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">CN001</td>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">CN_CNF</td>
<td>B001</td>
<td>20 35 40</td>
<td>BILL_EXC BILL_ADV BILL_SWF</td>
<td>D001</td>
<td>DISC_SWF DISC_ADV DISC_CNF</td>
<td>20 30 50</td>
</tr>
</tbody>
</table>
</div>",70304027,2,0,,2021. 12. 10 오전 11:41:48,,2021. 12. 10 오후 12:16:16,,,,,16703348,,1,-1,mysql,31
70359582,Query for Joining two tables to get result from 2nd table in reference,"<p>I have two tables Order and Transaction</p>
<p><strong>Order</strong> Table</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>OrderId</th>
<th>TransId</th>
<th>OrderDate</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>54</td>
<td>11551</td>
<td>01-12-2021</td>
</tr>
<tr>
<td>2</td>
<td>55</td>
<td>11552</td>
<td>02-12-2021</td>
</tr>
<tr>
<td>3</td>
<td>56</td>
<td>11553</td>
<td>02-12-2021</td>
</tr>
<tr>
<td>4</td>
<td>57</td>
<td>11554</td>
<td>05-12-2021</td>
</tr>
<tr>
<td>5</td>
<td>58</td>
<td>11555</td>
<td>08-12-2021</td>
</tr>
<tr>
<td>6</td>
<td>59</td>
<td>11556</td>
<td>09-12-2021</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Transaction</strong> Table</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>TransId</th>
<th>OrderId</th>
<th>PaymentMethod</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11551-1</td>
<td>54</td>
<td>Cash</td>
<td>1000</td>
</tr>
<tr>
<td>2</td>
<td>11552-1</td>
<td>55</td>
<td>Cash</td>
<td>500</td>
</tr>
<tr>
<td>3</td>
<td>11552-2</td>
<td>55</td>
<td>Card</td>
<td>200</td>
</tr>
<tr>
<td>4</td>
<td>11553-1</td>
<td>56</td>
<td>Cash</td>
<td>500</td>
</tr>
<tr>
<td>5</td>
<td>11553-2</td>
<td>56</td>
<td>Card</td>
<td>200</td>
</tr>
<tr>
<td>6</td>
<td>11553-3</td>
<td>56</td>
<td>UPI</td>
<td>100</td>
</tr>
</tbody>
</table>
</div>
<p>Here we have 3 Transaction methods Cash, Card and UPI.</p>
<p>I want to get total <em>Amount</em> collected using <strong>Cash</strong> as <em>PaymentMethod</em> done for  period  01-12-2021 to 08-12-2021 in orderDate of Order Table</p>",70359682,1,0,,2021. 12. 15 오전 7:04:03,,2021. 12. 15 오후 12:35:52,2021. 12. 15 오후 12:35:52,,1839439,,14279873,,1,-1,mysql,31
70118125,how to have a repeating calculation in a POSTGRES select query?,"<p>So part of my query is like this</p>
<pre class=""lang-sql prettyprint-override""><code>select 
   column_a,
   0.75 * power(0.93, (0.1428 * column_b))
</code></pre>
<p>let's say <code>column_b</code> has the value of <code>3</code>
is there a way to represent this line <code>0.75 * power(0.93, (0.1428 * column_b))</code>  as this?</p>
<pre><code>0.75 * power(0.93, (0.1428 * 3)) + 0.75 * power(0.93, (0.1428 * 2)) + 0.75 * power(0.93, (0.1428 * 1))
</code></pre>
<p>Basically, for what ever value column_b has, the function repeats.  Is there a way to represent this in Postgres sql?</p>",70118380,1,0,,2021. 11. 25 오후 11:07:40,,2021. 11. 25 오후 11:59:17,,,,,433073,,1,0,sql|postgresql,32
70167107,can't create / write to file '. \ digit2 \ client708.frm' (errcode: 2),"<p>windows10 professional
mysql 3.23
delphi 7</p>
<p>With a delphi7 executable and a mysql database 3.23
i get this error when i create a mysql table
from code:</p>
<p>can't create / write to file '. \ digit2 \ client708.frm' (errcode: 2)</p>
<p>the error is no longer reported if I reboot
system but apparently recurs
occasional.
Anyone know anything about it?</p>",,0,0,,2021. 11. 30 오전 9:35:22,,2021. 11. 30 오전 9:35:22,,,,,17550619,,1,0,mysql,32
70356638,Search for more than one column in the same query,"<p>So I have a task to basically just by typing the first letter of the name or type on a table(product), show all the names that start with that letter or types that start with that letter.
Now the problem is: i dont know how to do it for the two columns(name, type)
basically all i have is this but i need to do the same for type in the same query. how tho?</p>
<pre><code>SELECT id, type, name,price FROM product where name like 'cok%'
</code></pre>",,2,0,,2021. 12. 14 오후 11:09:08,,2021. 12. 15 오전 12:07:11,2021. 12. 15 오전 12:07:11,,2946773,user17654992,,,1,1,sql|postgresql,32
70058273,Sales amounts of the top n selling vendors by month with other fields in bigquery,"<p>i have a table in bigquery like this (260000 rows):</p>
<pre><code>vendor  date                  item_price    discount_price
x       2021-07-08 23:41:10   451,5         0  
y       2021-06-14 10:22:10   41,7          0
z       2020-01-03 13:41:12   74            4
s       2020-04-12 01:14:58   88            12
....
</code></pre>
<p>exactly what I want is to group this data by month and find the sum of the sales of only the top 20 vendors in that month. Expected output:</p>
<pre><code>month     vendor_name(top20)  sum_of_vendor's_sales  sum_of_vendor's_discount   item_count(sold)
2020-01   x1                  10857                  250                        150
2020-01   x2                  9685                   410                        50
2020-01   x3                  3574                   140                        45
....
2021 01   x20                 700                    15                         20

2020-02   y1                  7421                   280                        120
2020-02   y2                  6500                   250                        40
2020-02   y3                  4500                   200                        70
.....
2020-02   y20                 900                    70                         30
</code></pre>
<p>i tried this (<a href=""https://stackoverflow.com/a/69861592/17334324"">source here</a>). But The desired output could not be obtained.</p>
<pre><code>select month, 
  (select sum(sum) from t.top_20_vendors) as sum_of_only_top20_vendor_sales
from (
  select 
    format_datetime('%Y%m', date) month, 
    approx_top_sum(vendor, item_price, 20) top_20_vendors,count(item_price) as count_of_items,sum(discount_price)
  from my_table
  group by month
) t

</code></pre>",70058879,1,0,,2021. 11. 21 오후 8:21:06,,2021. 11. 21 오후 9:50:10,,,,,17334324,,1,0,google-bigquery,33
70097418,How to get previous row with certain parameters,"<p>I have a pretty complicated question (At least for myself)
I have an SQL request that returns me the following table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>ID</th>
<th>Date</th>
<th>Description</th>
<th>rn</th>
</tr>
</thead>
<tbody>
<tr>
<td>534</td>
<td>2021-01-01 4:03:14</td>
<td>NEW</td>
<td>1</td>
</tr>
<tr>
<td>534</td>
<td>2021-01-01 4:03:24</td>
<td>Payment</td>
<td>2</td>
</tr>
<tr>
<td>534</td>
<td>2021-01-01 4:04:14</td>
<td>Accepted</td>
<td>3</td>
</tr>
<tr>
<td>534</td>
<td>2021-01-01 4:05:23</td>
<td>Support</td>
<td>4</td>
</tr>
<tr>
<td>534</td>
<td>2021-01-01 4:05:32</td>
<td>Cancelled</td>
<td>5</td>
</tr>
<tr>
<td>632</td>
<td>2021-01-01 4:03:36</td>
<td>NEW</td>
<td>1</td>
</tr>
<tr>
<td>632</td>
<td>2021-01-01 4:04:12</td>
<td>Payment</td>
<td>2</td>
</tr>
<tr>
<td>632</td>
<td>2021-01-01 4:06:28</td>
<td>Support</td>
<td>3</td>
</tr>
<tr>
<td>632</td>
<td>2021-01-01 4:11:23</td>
<td>Cancelled</td>
<td>4</td>
</tr>
<tr>
<td>844</td>
<td>2021-01-01 5:03:36</td>
<td>NEW</td>
<td>1</td>
</tr>
<tr>
<td>844</td>
<td>2021-01-01 5:04:12</td>
<td>Payment</td>
<td>2</td>
</tr>
<tr>
<td>844</td>
<td>2021-01-01 5:06:28</td>
<td>Accepted</td>
<td>3</td>
</tr>
<tr>
<td>844</td>
<td>2021-01-01 5:11:23</td>
<td>Cancelled</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>What I need to do is to find those IDs that have <strong>Description: Cancelled</strong>, then get the previous description of the same ID.
But if previous <strong>Description: Support</strong> then I need to go to the next one.
To make it clear, here is the example of the output that I need:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>ID</th>
<th>Date</th>
<th>Description</th>
<th>rn</th>
</tr>
</thead>
<tbody>
<tr>
<td>534</td>
<td>2021-01-01 4:04:14</td>
<td>Accepted</td>
<td>3</td>
</tr>
<tr>
<td>632</td>
<td>2021-01-01 4:04:12</td>
<td>Payment</td>
<td>2</td>
</tr>
<tr>
<td>844</td>
<td>2021-01-01 5:06:28</td>
<td>Accepted</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>",70098087,1,0,,2021. 11. 24 오후 1:59:12,,2021. 11. 24 오후 2:42:26,2021. 11. 24 오후 2:15:04,,466862,,16390428,,1,0,sql|postgresql,33
70102888,How to find coherent datetime ranges in postgresql,"<p>My Data consists of rows containing a Length/Duration in Minutes, a Begin &amp; EndTime. The precision is 1min (or larger).</p>
<p>the table looks something like that:</p>
<pre><code>CREATE TABLE public.&quot;TimeSeries&quot; (
    &quot;Id&quot; uuid NOT NULL,
    &quot;BeginTime&quot; timestamptz NOT NULL,
    &quot;EndTime&quot; timestamptz NOT NULL DEFAULT '0001-01-01 00:00:00' :: timestamp without time zone,
    &quot;LengthMin&quot; int4 NOT NULL
);

INSERT INTO public.&quot;TimeSeries&quot; (&quot;Id&quot;,&quot;BeginTime&quot;,&quot;LengthMin&quot;,&quot;EndTime&quot;) VALUES
     ('ecabcd8d-3129-4128-b126-a4e1abcd49c9'::uuid,'2021-11-16 11:45:00.000',1,'2021-11-16 11:46:00.000'),
     ('e5abcd70-5125-412b-9128-93ecabcdcba9'::uuid,'2021-11-16 11:46:00.000',1,'2021-11-16 11:47:00.000'),
     ('03abcdb8-8129-4124-b126-f5bbabcd7157'::uuid,'2021-11-16 11:47:00.000',1,'2021-11-16 11:48:00.000'),
     ('54abcdcc-6129-4126-912b-34b2abcde19a'::uuid,'2021-11-16 11:50:00.000',1,'2021-11-16 11:51:00.000'),
     ('77abcd28-212f-4122-912f-5060abcd2aa0'::uuid,'2021-11-16 11:51:00.000',1,'2021-11-16 11:52:00.000'),
     ('8babcdd1-f12a-4124-9128-2529abcda136'::uuid,'2021-11-16 11:52:00.000',1,'2021-11-16 11:53:00.000'),
     ('8aabcd94-9129-4121-b12c-1ebfabcd06b8'::uuid,'2021-11-16 12:35:00.000',1,'2021-11-16 12:36:00.000'),
     ('96abcd04-b12e-4122-b12b-4dc2abcdcee4'::uuid,'2021-11-16 12:40:00.000',1,'2021-11-16 12:41:00.000'),
     ('42abcd4a-f129-412c-9124-41b3abcd3ca3'::uuid,'2021-11-16 12:44:00.000',1,'2021-11-16 12:45:00.000'),
     ('beabcd8f-c12f-4126-a12b-0a37abcdd0bb'::uuid,'2021-11-16 12:49:00.000',1,'2021-11-16 12:50:00.000'),
     ('b8abcd79-d12c-4120-912f-754fabcdd220'::uuid,'2021-11-16 12:50:00.000',1,'2021-11-16 12:51:00.000'),
     ('c3abcd08-e121-4127-b125-4e70abcd5756'::uuid,'2021-11-16 12:59:00.000',1,'2021-11-16 13:00:00.000'),
     ('65abcdbe-7121-412a-a12c-1f68abcd94eb'::uuid,'2021-11-16 13:00:00.000',1,'2021-11-16 13:01:00.000'),
     ('f5abcd38-9122-412c-b12f-957fabcd79b5'::uuid,'2021-11-16 13:05:00.000',1,'2021-11-16 13:06:00.000');
</code></pre>
<p>The code I came up with looks something like that:
( <a href=""http://www.sqlfiddle.com/#!17/fdda3/1"" rel=""nofollow noreferrer"">http://www.sqlfiddle.com/#!17/fdda3/1</a> )</p>
<pre><code>SELECT
    &quot;BeginTime&quot; = lag(&quot;EndTime&quot;) OVER (
        ORDER BY
            &quot;BeginTime&quot;
    ) AS &quot;isInSeries&quot;,
    *
FROM
    &quot;TimeSeries&quot;
WHERE
    &quot;LengthMin&quot; = 1
ORDER BY
    &quot;BeginTime&quot;
</code></pre>
<p>The result:</p>
<pre><code> 
    | isInSeries |                                   Id |            BeginTime |              EndTime | LengthMin |
    |------------|--------------------------------------|----------------------|----------------------|-----------|
    |     (null) | ecabcd8d-3129-4128-b126-a4e1abcd49c9 | 2021-11-16T11:45:00Z | 2021-11-16T11:46:00Z |         1 |
    |       true | e5abcd70-5125-412b-9128-93ecabcdcba9 | 2021-11-16T11:46:00Z | 2021-11-16T11:47:00Z |         1 |
    |       true | 03abcdb8-8129-4124-b126-f5bbabcd7157 | 2021-11-16T11:47:00Z | 2021-11-16T11:48:00Z |         1 |
    |      false | 54abcdcc-6129-4126-912b-34b2abcde19a | 2021-11-16T11:50:00Z | 2021-11-16T11:51:00Z |         1 |
    |       true | 77abcd28-212f-4122-912f-5060abcd2aa0 | 2021-11-16T11:51:00Z | 2021-11-16T11:52:00Z |         1 |
    |       true | 8babcdd1-f12a-4124-9128-2529abcda136 | 2021-11-16T11:52:00Z | 2021-11-16T11:53:00Z |         1 |
    |      false | 8aabcd94-9129-4121-b12c-1ebfabcd06b8 | 2021-11-16T12:35:00Z | 2021-11-16T12:36:00Z |         1 |
    |      false | 96abcd04-b12e-4122-b12b-4dc2abcdcee4 | 2021-11-16T12:40:00Z | 2021-11-16T12:41:00Z |         1 |
    |      false | 42abcd4a-f129-412c-9124-41b3abcd3ca3 | 2021-11-16T12:44:00Z | 2021-11-16T12:45:00Z |         1 |
    |      false | beabcd8f-c12f-4126-a12b-0a37abcdd0bb | 2021-11-16T12:49:00Z | 2021-11-16T12:50:00Z |         1 |
    |       true | b8abcd79-d12c-4120-912f-754fabcdd220 | 2021-11-16T12:50:00Z | 2021-11-16T12:51:00Z |         1 |
    |      false | c3abcd08-e121-4127-b125-4e70abcd5756 | 2021-11-16T12:59:00Z | 2021-11-16T13:00:00Z |         1 |
    |       true | 65abcdbe-7121-412a-a12c-1f68abcd94eb | 2021-11-16T13:00:00Z | 2021-11-16T13:01:00Z |         1 |
    |      false | f5abcd38-9122-412c-b12f-957fabcd79b5 | 2021-11-16T13:05:00Z | 2021-11-16T13:06:00Z |         1 |
</code></pre>
<p>I'm trying to compare <code>BeginTime = lag(EndTime)</code> however then I am not able to connect rows which are in the same series. Then I just know that the row before is in the same series.</p>
<p>The expected result should look something like this:</p>
<pre><code>|          SeriesBegin | cnt |                  min |                  max |            delta |
|----------------------|-----|----------------------|----------------------|------------------|
| 2021-11-16T11:45:00Z |   3 | 2021-11-16T11:45:00Z | 2021-11-16T11:48:00Z | 3 mins 0.00 secs |
| 2021-11-16T11:50:00Z |   3 | 2021-11-16T11:50:00Z | 2021-11-16T11:53:00Z | 3 mins 0.00 secs |
| 2021-11-16T12:35:00Z |   1 | 2021-11-16T12:35:00Z | 2021-11-16T12:36:00Z | 1 mins 0.00 secs |
| 2021-11-16T12:40:00Z |   1 | 2021-11-16T12:40:00Z | 2021-11-16T12:41:00Z | 1 mins 0.00 secs |
| 2021-11-16T12:44:00Z |   1 | 2021-11-16T12:44:00Z | 2021-11-16T12:45:00Z | 1 mins 0.00 secs |
| 2021-11-16T12:49:00Z |   2 | 2021-11-16T12:49:00Z | 2021-11-16T12:51:00Z | 2 mins 0.00 secs |
| 2021-11-16T12:59:00Z |   2 | 2021-11-16T12:59:00Z | 2021-11-16T13:01:00Z | 2 mins 0.00 secs |
| 2021-11-16T13:05:00Z |   1 | 2021-11-16T13:05:00Z | 2021-11-16T13:06:00Z | 1 mins 0.00 secs |
</code></pre>",70103331,1,0,,2021. 11. 24 오후 9:02:07,,2021. 11. 24 오후 9:47:16,,,,,2298744,,1,0,sql|postgresql,33
70187485,Foreign key constraint : alternative for one to one relation with split tables,"<p>For tables like this:</p>
<p>Book</p>
<pre><code>| id | type
+----+--------
| 1  | audio
| 2  | paper

PK id SEQUENCE
</code></pre>
<p>AudioBook</p>
<pre><code>| book_id | type
+---------+-----------
| 1       | audio

FK book_id references Book
FK constraint book_id + type references Book
</code></pre>
<p>PaperBook</p>
<pre><code>| book_id | type
+---------+--------
| 2       | paper

FK book_id references Book
FK constraint book_id + type references Book
</code></pre>
<p>Is there other way to ensure that <code>PaperBook</code> and <code>AudioBook</code> will not have same <code>book_id</code> without <code>type</code> column on them (remove <code>FK constraint book_id + type references Book</code> and type on childs?</p>
<hr />
<p>Example without fk constraint where AudioBook and PaperBook can have <code>book_id=1</code> at the same time:</p>
<p>Book</p>
<pre><code>| id | type
+----+--------
| 1  | audio
| 2  | paper

PK id SEQUENCE
</code></pre>
<p>AudioBook</p>
<pre><code>| book_id 
+---------
| 1       

FK book_id references Book
</code></pre>
<p>PaperBook</p>
<pre><code>| book_id 
+---------
| 2       

FK book_id references Book
</code></pre>",70187707,1,0,,2021. 12. 1 오후 4:05:39,,2021. 12. 1 오후 4:46:56,2021. 12. 1 오후 4:22:54,,10188661,,10188661,,1,0,sql|postgresql,33
70248573,Extending primary table rows based on joined table ids from LEFT JOIN,"<p>I need to write query where i need to find devices that fit in specific coordinates, and then extend the results with some devices that are in the same groups as the one that are visible on the map.</p>
<p>The part where i can find the devices and their fitting groups is an easy task where i just perform a left join on both tables like this:</p>
<pre><code>SELECT * 
FROM device 
LEFT JOIN group
ON device.group_id = group.id
WHERE geo_location &amp;&amp; ST_MakeEnvelope(10, 30, 30, 50)
</code></pre>
<p>But i'm not sure what is the efficient way to add devices to the result that belong to groups of visible devices.</p>
<p>One idea was to select distinct groups from the illustrated query and then again query the device table for the ones that fit in those groups, but it seems to me that this is not the right way.</p>
<p>Any opinion and help is appreciated.</p>",70248698,2,0,,2021. 12. 6 오후 4:21:50,,2021. 12. 6 오후 4:36:36,,,,,7836937,,1,0,sql|postgresql,33
70281600,How to sort by values in a column based on identifiers in a different column in sql,"<p>This would be our input:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>NAME</th>
<th>YEAR</th>
<th>VALUES</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>2001</td>
<td>10</td>
</tr>
<tr>
<td>A</td>
<td>2000</td>
<td>5</td>
</tr>
<tr>
<td>A</td>
<td>TOTAL</td>
<td>15</td>
</tr>
<tr>
<td>B</td>
<td>2010</td>
<td>3</td>
</tr>
<tr>
<td>B</td>
<td>2011</td>
<td>7</td>
</tr>
<tr>
<td>B</td>
<td>TOTAL</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>We have to sort this table by ascending values of 'TOTAL' and then by ascending values of YEAR within the same NAME.</p>
<p>This would be our output:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>NAME</th>
<th>YEAR</th>
<th>VALUES</th>
</tr>
</thead>
<tbody>
<tr>
<td>B</td>
<td>2010</td>
<td>3</td>
</tr>
<tr>
<td>B</td>
<td>2011</td>
<td>7</td>
</tr>
<tr>
<td>B</td>
<td>TOTAL</td>
<td>10</td>
</tr>
<tr>
<td>A</td>
<td>2000</td>
<td>5</td>
</tr>
<tr>
<td>A</td>
<td>2001</td>
<td>10</td>
</tr>
<tr>
<td>A</td>
<td>TOTAL</td>
<td>15</td>
</tr>
</tbody>
</table>
</div>",,1,0,,2021. 12. 8 오후 8:55:28,,2021. 12. 8 오후 9:03:16,,,,,14693337,,1,0,sql|postgresql,33
70305279,Find nearest prior row with specific condition,"<p>Let's say I have the following table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>column B</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>value A</td>
</tr>
<tr>
<td>2</td>
<td>value B</td>
</tr>
<tr>
<td>3</td>
<td>value D</td>
</tr>
<tr>
<td>4</td>
<td>value C</td>
</tr>
<tr>
<td>5</td>
<td>value D</td>
</tr>
<tr>
<td>6</td>
<td>value D</td>
</tr>
<tr>
<td>7</td>
<td>value D</td>
</tr>
<tr>
<td>8</td>
<td>value E</td>
</tr>
<tr>
<td>9</td>
<td>value F</td>
</tr>
<tr>
<td>10</td>
<td>value D</td>
</tr>
</tbody>
</table>
</div>
<p>For each row with value D, I need to find the nearest above row with a value different than D. So what I need is:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>nearest row id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>null</td>
</tr>
<tr>
<td>2</td>
<td>null</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>null</td>
</tr>
<tr>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>6</td>
<td>4</td>
</tr>
<tr>
<td>7</td>
<td>4</td>
</tr>
<tr>
<td>8</td>
<td>null</td>
</tr>
<tr>
<td>9</td>
<td>null</td>
</tr>
<tr>
<td>10</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
<p>How can  I achieve this in PostreSQL?</p>",70305481,1,0,,2021. 12. 10 오후 1:30:04,,2021. 12. 12 오후 6:19:33,2021. 12. 12 오후 6:19:33,,87015,,5247803,,1,0,sql|postgresql,33
70056755,I can not convert the data to the required form,"<p>Hi hi I have a Nodejs server and I am using PostgreSQL, the bottom part of my database.
How can I select data and represent it like this (in one sql query):</p>
<pre><code> {lessons: ['lesson1','lesson2'], tests: [{quest:'quest_name',options:['opt1','opt2']}]} 
</code></pre>
<p>I wrote a request but it is far from what I need:</p>
<pre><code>SELECT tests.id, 
       chapter, 
       time, 
       ARRAY_AGG(quests.question) AS questions, 
       ARRAY_AGG(options.option) AS quest_options 
FROM tests 
LEFT JOIN quests ON tests.id = quests.test_id 
LEFT JOIN options ON quests.id = options.quest_id 
WHERE tests.course_id = '${courseId}' 
GROUP BY tests.id
</code></pre>
<p><a href=""https://i.stack.imgur.com/QCyQm.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/QCyQm.png"" alt=""database structure"" /></a></p>",70057011,1,0,,2021. 11. 21 오후 5:03:34,,2021. 11. 21 오후 5:33:44,2021. 11. 21 오후 5:09:59,,16461952,,15425246,,1,2,sql|postgresql,34
70094882,PostgreSQL array_agg returns null if first param is null,"<p>I would like to aggregate data into 1 field.
So I have a query like this:</p>
<pre><code>SELECT 
t.userId,
array_agg(t.column1 || ';' || t.column2) as aggregated        
FROM
mytable t
GROUP BY
t.userId
</code></pre>
<p>However if t.column1 is null, and t.column2 is not null, then i get a NULL returned. I would like to return something like this:</p>
<blockquote>
<p>column1;column2 OR null;column2 OR column1;null</p>
</blockquote>
<p>How could I do this with array_agg?</p>",70094915,1,0,,2021. 11. 24 오전 10:59:24,,2021. 11. 24 오전 11:01:43,,,,,1009698,,1,0,sql|postgresql,34
70098346,How to select rows where the condition where all rows are being extracted for a given condition?,"<p>I have this table</p>
<pre><code>CREATE TABLE fruits 
(
    id SERIAL,
    name VARCHAR
);
</code></pre>
<p>with these entries</p>
<pre><code>INSERT INTO fruits(name) 
VALUES('Orange');
INSERT INTO fruits(name) 
VALUES('Ananas');
INSERT INTO fruits(name) 
VALUES(null);
</code></pre>
<p>When I try to to select all rows that not equal to 'Ananas' by querying</p>
<pre><code>select * 
from fruits 
where name &lt;&gt; 'Ananas'
</code></pre>
<p>I get these rows:</p>
<pre><code>id  name
-----------
1   Orange
</code></pre>
<p>What I would have expected was this</p>
<pre><code>id  name
-----------
1   Orange
3   null
</code></pre>
<p>How do I ensure that all rows that fulfills the condition gets selected?</p>
<p>Example in dbfiddle:
<a href=""https://dbfiddle.uk/?rdbms=postgres_11&amp;fiddle=a963d39df0466701b0a96b20db8461e6"" rel=""nofollow noreferrer"">https://dbfiddle.uk/?rdbms=postgres_11&amp;fiddle=a963d39df0466701b0a96b20db8461e6</a></p>",70098380,1,0,,2021. 11. 24 오후 3:00:16,,2021. 12. 1 오후 4:58:03,2021. 12. 1 오후 4:58:03,,13302,,7400630,,1,1,postgresql,35
70321000,Is there a way to retrieve the latest of the first `status` value from the table?,"<p>I have been trying to write a query that returns the <code>latest</code> of the first status matching record with the query itself. Let's say I have the table records below, I would like to retrieve the <code>APP_ID</code> and the <code>INSERTED_AT</code> columns where the <code>STATUS</code> should be the first of <code>Offer Sent</code> that occurs after the latest <code>Selectable</code> status and if there are any <code>Offer Declined</code> should ignore it.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">ID</th>
<th style=""text-align: left;"">APP_ID</th>
<th style=""text-align: left;"">INSERTED_AT</th>
<th style=""text-align: left;"">UPDATED_AT</th>
<th style=""text-align: left;"">STATUS</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-13 20:57:30.000 +0530</td>
<td style=""text-align: left;"">2021-05-13 20:57:30.000 +0530</td>
<td style=""text-align: left;"">Selectable</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-13 20:57:58.000 +0530</td>
<td style=""text-align: left;"">2021-05-13 20:57:58.000 +0530</td>
<td style=""text-align: left;"">Selectable</td>
</tr>
<tr>
<td style=""text-align: left;"">3</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-14 18:40:08.000 +0530</td>
<td style=""text-align: left;"">2021-05-14 18:40:08.000 +0530</td>
<td style=""text-align: left;"">Offer Eligible</td>
</tr>
<tr>
<td style=""text-align: left;"">4</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-14 18:40:14.000 +0530</td>
<td style=""text-align: left;"">2021-05-14 18:40:14.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">5</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-15 18:57:50.000 +0530</td>
<td style=""text-align: left;"">2021-05-15 18:57:50.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">6</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-15 20:44:29.000 +0530</td>
<td style=""text-align: left;"">2021-05-15 20:44:29.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">7</td>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-17 22:45:13.000 +0530</td>
<td style=""text-align: left;"">2021-05-17 22:45:13.000 +0530</td>
<td style=""text-align: left;"">Offer Accepted</td>
</tr>
<tr>
<td style=""text-align: left;"">8</td>
<td style=""text-align: left;"">110011</td>
<td style=""text-align: left;"">2021-05-13 20:57:30.000 +0530</td>
<td style=""text-align: left;"">2021-05-13 20:57:30.000 +0530</td>
<td style=""text-align: left;"">Selectable</td>
</tr>
<tr>
<td style=""text-align: left;"">9</td>
<td style=""text-align: left;"">110011</td>
<td style=""text-align: left;"">2021-05-13 20:57:58.000 +0530</td>
<td style=""text-align: left;"">2021-05-13 20:57:58.000 +0530</td>
<td style=""text-align: left;"">Offer Eligible</td>
</tr>
<tr>
<td style=""text-align: left;"">10</td>
<td style=""text-align: left;"">110011</td>
<td style=""text-align: left;"">2021-06-14 18:40:08.000 +0530</td>
<td style=""text-align: left;"">2021-05-14 18:40:08.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">11</td>
<td style=""text-align: left;"">300110</td>
<td style=""text-align: left;"">2021-05-14 18:40:14.000 +0530</td>
<td style=""text-align: left;"">2021-05-14 18:40:14.000 +0530</td>
<td style=""text-align: left;"">Selectable</td>
</tr>
<tr>
<td style=""text-align: left;"">12</td>
<td style=""text-align: left;"">300110</td>
<td style=""text-align: left;"">2021-05-15 18:57:50.000 +0530</td>
<td style=""text-align: left;"">2021-05-15 18:57:50.000 +0530</td>
<td style=""text-align: left;"">Offer Eligible</td>
</tr>
<tr>
<td style=""text-align: left;"">13</td>
<td style=""text-align: left;"">300110</td>
<td style=""text-align: left;"">2021-05-15 20:44:29.000 +0530</td>
<td style=""text-align: left;"">2021-05-15 20:44:29.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">14</td>
<td style=""text-align: left;"">300110</td>
<td style=""text-align: left;"">2021-05-17 22:45:13.000 +0530</td>
<td style=""text-align: left;"">2021-05-17 22:45:13.000 +0530</td>
<td style=""text-align: left;"">Offer Declined</td>
</tr>
</tbody>
</table>
</div>
<p>Here are the expected results I am looking for</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">APP_ID</th>
<th style=""text-align: left;"">INSERTED_AT</th>
<th style=""text-align: left;"">STATUS</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">209377</td>
<td style=""text-align: left;"">2021-05-14 18:40:14.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">110011</td>
<td style=""text-align: left;"">2021-05-14 18:40:08.000 +0530</td>
<td style=""text-align: left;"">Offer Sent</td>
</tr>
<tr>
<td style=""text-align: left;"">300110</td>
<td style=""text-align: left;"">nil</td>
<td style=""text-align: left;"">Offer Declined</td>
</tr>
</tbody>
</table>
</div>",,1,0,,2021. 12. 12 오전 4:47:18,,2021. 12. 12 오전 10:32:18,2021. 12. 12 오전 10:32:18,,330315,,4792785,,1,0,sql|postgresql,35
70073812,Group cases when group exists partially,"<p>How to add the non existing group to a case, which exists within a different date range.</p>
<p>Data:</p>
<pre><code>ID GROUP_ID  DATE_FROM    DATE_TO      DATE_NEW_FROM   DATE_NEW_TO  CASE_ID_GROUP  NEW_ID
1    1       2019-10-05   2019-11-02   2019-10-05      2019-11-02   AAX2           AAX2
1   null     null         null         2019-10-22      2019-10-26   null           AAX3
1   null     null         null         2019-10-24      2019-10-29   null           AAX4
1    2       2018-05-05   2018-05-10   2018-05-05      2018-05-10   CCA2           CCA2
1    3       2020-05-20   2020-06-15   2020-05-20      2020-06-15   BBA1           BBA1
1   null     null         null         2020-05-25      2020-05-29   null           BBA2
2   and so on...
</code></pre>
<p>Desired output:</p>
<pre><code>ID GROUP_ID   DATE_NEW_FROM   DATE_NEW_TO  NEW_ID
1    1        2019-10-05      2019-11-02   AAX2
1    1        2019-10-22      2019-10-26   AAX3
1    1        2019-10-24      2019-10-29   AAX4
1    2        2018-05-05      2018-05-10   CCA2
1    3        2020-05-20      2020-06-15   BBA1
1    3        2020-05-25      2020-05-29   BBA2
2 and so on...
</code></pre>
<p>When <strong>DATE_NEW_FROM BETWEEN DATE_FROM and DATE_TO THEN GROUP_ID</strong>, but my date_from and date_to are null. So i dont know how to add it to the desired GROUP_ID.</p>",70084728,2,0,,2021. 11. 22 오후 11:58:00,,2021. 11. 24 오전 12:17:21,,,,,13906135,,1,1,sql|postgresql,36
70153350,How to show the start and end of actions in different columns,"<p>Every N seconds, data about the user's state is written to the table. For example,</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>USER_ID</th>
<th>STATE_ID</th>
<th>DATE_TIME_STATE</th>
</tr>
</thead>
<tbody>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:17:34</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:17:40</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:18:00</td>
</tr>
<tr>
<td>5555</td>
<td>2</td>
<td>2021-11-28 22:18:04</td>
</tr>
<tr>
<td>5555</td>
<td>2</td>
<td>2021-11-28 22:18:30</td>
</tr>
<tr>
<td>5555</td>
<td>2</td>
<td>2021-11-28 22:18:45</td>
</tr>
<tr>
<td>5555</td>
<td>2</td>
<td>2021-11-28 22:18:50</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:19:00</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:19:18</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:19:40</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:19:55</td>
</tr>
</tbody>
</table>
</div>
<p>How to show start and end of state in different columns.
Anything like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>USER_ID</th>
<th>STATE_ID</th>
<th>START_DATE_TIME_STATE</th>
<th>END_DATE_TIME_STATE</th>
</tr>
</thead>
<tbody>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:17:34</td>
<td>2021-11-28 22:18:00</td>
</tr>
<tr>
<td>5555</td>
<td>2</td>
<td>2021-11-28 22:17:40</td>
<td>2021-11-28 22:18:50</td>
</tr>
<tr>
<td>5555</td>
<td>1</td>
<td>2021-11-28 22:19:00</td>
<td>2021-11-28 22:19:55</td>
</tr>
</tbody>
</table>
</div>",,2,0,,2021. 11. 29 오전 10:48:54,,2021. 11. 29 오후 1:19:44,2021. 11. 29 오전 11:28:34,,330315,,14552795,,1,1,sql|postgresql,36
70318098,"How do I see the transaction amounts, sum of total amount for a particular account number in the Hedera_etl on Big query?","<p>I want to Query the Hedera-ETL public dataset :
So far I have this but it doesn't return any results: SELECT h.amount FROM <code>hedera-etl.mainnet.transactions</code>,unnest(transactionRecord.transferList.accountAmounts) as h where  transaction.body.nodeAccountID.accountNum = 27500
The following is the schema:
<a href=""https://i.stack.imgur.com/qObTL.png"" rel=""nofollow noreferrer"">schema of hedera-etl</a></p>
<p><a href=""https://i.stack.imgur.com/lfxrD.png"" rel=""nofollow noreferrer""></a></p>
<p><a href=""https://i.stack.imgur.com/wOPhK.png"" rel=""nofollow noreferrer""></a></p>",,1,0,,2021. 12. 11 오후 6:49:59,,2021. 12. 11 오후 7:13:04,,,,,17653746,,1,0,google-bigquery,36
70374976,Select specific rows which has several attributes in another table,"<p>I have 2 tables:</p>
<p>TABLE: occupiedrooms</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>name</th>
<th>branchNo</th>
<th>roomNo</th>
</tr>
</thead>
<tbody>
<tr>
<td>abc</td>
<td>2</td>
<td>100</td>
</tr>
<tr>
<td>cba</td>
<td>1</td>
<td>100</td>
</tr>
<tr>
<td>aaa</td>
<td>2</td>
<td>101</td>
</tr>
</tbody>
</table>
</div>
<p>TABLE: allrooms</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>roomNo</th>
<th>branchNo</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>1</td>
</tr>
<tr>
<td>100</td>
<td>2</td>
</tr>
<tr>
<td>101</td>
<td>1</td>
</tr>
<tr>
<td>101</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<p>And i want to get all rooms that are NOT occupied. I'ved tried</p>
<pre><code>select * from allrooms where allrooms.roomNo not in (select roomNo from occupiedrooms)
</code></pre>
<p>but then it turns out that it will disregard room 101 branch 1 because its room number exists in occupiedrooms. <p>
How can I query these tables to get all non-occupied rooms?</p>",70375001,1,0,,2021. 12. 16 오전 6:53:56,,2021. 12. 16 오전 7:35:40,2021. 12. 16 오전 7:35:40,,1213708,,12192681,,1,0,mysql,36
70091749,BigQuery - quoting strings produced unexpected results,"<p>I am running the following query:</p>
<pre><code>select concat('{','&quot;name&quot;',':', chr(34), str,
              chr(34), ', ','&quot;type&quot;',':','&quot;string&quot;','},') jsonl
from (select 'part_number' as str)
</code></pre>
<p>which results in:</p>
<p><a href=""https://i.stack.imgur.com/q1q2j.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/q1q2j.png"" alt=""enter image description here"" /></a></p>
<p>and this is the expected results.</p>
<p>But when I save the results to a csv file,
the results look different.</p>
<p>The issue is with the extra double quotation mark that is surrounding each element.</p>
<p><a href=""https://i.stack.imgur.com/owRt4.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/owRt4.png"" alt=""enter image description here"" /></a></p>
<p>Any idea what is causing this discrepancy.</p>
<p>btw, my local machine is running Windows 11.</p>",,1,0,,2021. 11. 24 오전 6:50:01,,2021. 11. 24 오전 7:09:36,,,,,3972214,,1,0,google-bigquery,37
70263679,Does postgres optimize same expressions in CASE,"<p>I want to get the number from text column of a database (for example the next text is <code>'Test 900 test'</code>)</p>
<pre><code>select substring('Test 900 g' from '[0-9]+\.?[0-9]*')
</code></pre>
<p>The in-text number can be float (from 0 to 1) or integer (&gt;100) and I want to cast it to the single float format with <code>CASE</code> the following way</p>
<pre><code>select case when substring('Test 900 g' from '[0-9]+\.?[0-9]*')::numeric &gt;= 100 
                 then substring('Test 900 g' from '[0-9]+\.?[0-9]*')::numeric / 10000
            else substring('Test 900 g' from '[0-9]+\.?[0-9]*')::numeric
       end as single_format
</code></pre>
<p>Will Postgres recalculate the substring value every time in this <code>CASE</code> construction or will this expression be optimized and calculated only one time for each row?</p>",,1,0,,2021. 12. 7 오후 4:28:17,,2021. 12. 7 오후 6:07:45,,,,,14530714,,1,0,postgresql,37
70118310,How to verify permission to update a specific column was granted?,"<p>I have the executed following change:</p>
<pre class=""lang-sql prettyprint-override""><code>grant update(speaker) on api.teams to anon;
</code></pre>
<p>How can I use a select statement to verify this change was made?</p>
<p>I can't see the entry in <code>information_schema.table_privileges</code>.</p>",70120406,1,0,,2021. 11. 25 오후 11:40:03,,2021. 11. 26 오전 11:09:21,2021. 11. 26 오전 11:09:21,,732262,,732262,,1,0,postgresql,38
70144036,Creating a table with values from a WITH Query,"<p>i want to create a table with specific values.</p>
<p><code>Something like this</code>:</p>
<pre><code>SELECT * FROM (VALUES ('Data1', 'one'), ('Data2', 'two') ) AS t (&quot;ColumnName1&quot;,&quot;ColumnName2&quot;);
</code></pre>
<p>But instead of using manual values, i want to use values from a <strong>WITH</strong> QUERY</p>
<p><code>Like this</code>:</p>
<pre><code>WITH Test AS 
(
Select table1.id FROM table1
)

SELECT * FROM (VALUES ('Data1', Test.id), ('Data2', Test.id) ) AS t (&quot;ColumnName1&quot;,&quot;ColumnName2&quot;);
</code></pre>
<p><strong>How do I access the data from the WITH query?</strong></p>",70144279,2,0,,2021. 11. 28 오후 1:51:38,,2021. 11. 28 오후 2:20:51,,,,,13052273,,1,1,sql|postgresql,38
70146079,"Count removes all but one value, instead of showing one of each value, and distinct replaces names with '0'","<p>I want to show how many films each actor has played (sakila db on MySQL)</p>
<pre><code>select distinct (a.first_name + ' ' + a.last_name as &quot;Actor Full Name&quot;),
       count(distinct(fa.film_id))
from actor a join film_actor fa
on a.actor_id = fa.actor_id;
</code></pre>",,1,0,,2021. 11. 28 오후 5:58:46,,2021. 11. 28 오후 6:24:49,2021. 11. 28 오후 6:24:49,,10498828,,16412649,,1,-1,mysql,38
70218959,How to join attributes to a many-to-many tables keys?,"<p>I currently have a table called borders which functions as a many-to-many relation for two country-entities:</p>
<pre><code>CREATE TABLE borders
(
    Country1 VARCHAR(4),
    Country2 VARCHAR(4),
    Length DECIMAL 
        CHECK (Length &gt; 0),

    CONSTRAINT BorderKey PRIMARY KEY (Country1,Country2) 
);
</code></pre>
<p>Where each tuple in the table looks something like:</p>
<pre><code>|      country1       |    country2    |    length      |
|---------------------|----------------|----------------|
|          AL         |       MK       |     3271       |
|          GR         |       TR       |     1712       |
</code></pre>
<p>Now I would like to create a query that projects a table where you can also see the GDP for both of these countries, gathered from the Economy table which looks like:</p>
<pre><code>CREATE TABLE Economy
(
    Country VARCHAR(4) CONSTRAINT EconomyKey PRIMARY KEY,
    GDP DECIMAL CONSTRAINT EconomyGDP
        CHECK (GDP &gt;= 0)
);
</code></pre>
<p>The resulting table should look something like:</p>
<pre><code>|      country1       |    country2    |      GDP1      |      GDP2      |     length      |
|---------------------|----------------|----------------|----------------|------------------
|          AL         |       MK       |       428      |       734      |       3271      |
|          GR         |       TR       |       300      |       823      |       1712      |
</code></pre>
<p>Where GDP1 corresponds to country1 and GDP2 corresponds to country2.</p>",70219052,1,0,,2021. 12. 3 오후 6:14:06,,2021. 12. 3 오후 8:27:49,2021. 12. 3 오후 8:27:49,,330315,,15907567,,1,1,sql|postgresql,38
70341960,SQL - 10 Recent placed orders,"<p>I struggle a little with the interpretation of this question. (I am a noob in sql).
This is the
<a href=""https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all"" rel=""nofollow noreferrer"">Database</a> I will be using.</p>
<p>I struggle with the interpretation of this question (yet very simple).</p>
<p>question:
<em>Write an sql statement that retrieves order number, customer number and customer name for the 10 most recently placed order</em></p>
<pre><code>select o.orderID,c.customerID,c.customerName
from customers c
join orders o
order by orderdate desc LIMIT 10
</code></pre>
<p>Is your interpretation similar? if not, what is your interpretation?</p>",70342047,1,0,,2021. 12. 13 오후 11:07:36,,2021. 12. 13 오후 11:22:26,,,,,17474631,,1,0,mysql,38
70112328,BigQuery - Where a database object is being used,"<p>I am looking for a programmable way to find out where a database object like table, function or stored procedure is referenced from other database objects.</p>
<p>For example, where the function &quot;x&quot; is being used.</p>
<p>The answer could be that it is being used in
View &quot;a&quot;, Stored procedure &quot;b&quot; and function &quot;c&quot;.</p>",,0,0,,2021. 11. 25 오후 1:55:06,,2021. 11. 25 오후 1:55:06,,,,,3972214,,1,0,google-bigquery,39
70135508,Strip empty lines with mysql and regex,"<p>I'm importing a mysql table and a field has text with many blank lines.</p>
<p>I would like to use a regex to strip the blank lines.</p>
<p>A regex I found on SO would be something like this: '/^\s*$(?:\r\n?|\n)/gm'.</p>
<p>Then, I used:</p>
<pre><code>SELECT REGEXP_REPLACE (description, '/^\s*$(?:\r\n?|\n)/gm','') as mycol FROM tableA. 
</code></pre>
<p>But it does not work.
I think I'm getting it wrong on how to use regexp_replace.</p>",,1,0,,2021. 11. 27 오후 2:07:41,,2021. 11. 27 오후 10:38:58,,,,,4536580,,1,1,mysql,39
70161844,transpose table on PostgreSQL leads to invalid source data SQL statement error,"<p>I am trying to use the <code>crosstab</code> function to transpose (pivot) a table. But I receive an Error:</p>
<pre><code>ERROR:  invalid source data SQL statement
DETAIL:  The provided SQL must return 3 columns: rowid, category, and values.
</code></pre>
<p>sample data and query:</p>
<pre><code>create table installs (
    install_id integer not null unique generated by default as identity primary key,
    platform text,
    install_timestamp timestamp
);

insert into installs values (default, 'iOS', '2021-11-29 16:09:54');
insert into installs values (default, 'Android', '2021-11-29 16:09:00');
insert into installs values (default, 'iOS', '2021-11-29 16:18:43');
insert into installs values (default, 'Android', '2021-11-30 15:34:30');
insert into installs values (default, 'Android', '2021-12-01 02:24:45');

select *
from crosstab ('
    select
        platform,
        count(install_id) as Unique_installs
    from installs
    group by 1
    ') as ct (&quot;Android&quot; text, &quot;iOS&quot; text);
</code></pre>",,0,0,,2021. 11. 29 오후 10:01:21,,2021. 11. 29 오후 10:01:21,,,,,1103911,,1,0,postgresql,39
70173047,MySQL GROUP BY - get SUM of few grouped values,"<p>I have a simple db where I have users and every user have 'country', for ex:</p>
<pre><code>Dmitry - US
Ann - US
John - UK
Roman - Japan
Mila - China
Jane - Australia
</code></pre>
<p>I want to get count of very country users, BUT I need to get TOP 3 countries users counts (US, UK, Japan for example), and all other countries users count should be summarized together as &quot;Rest&quot;. How to do this?</p>
<p>So in my example this should give me this result from SQL:</p>
<pre><code>US = 2
UK = 1
Japan = 1
Rest = 2
</code></pre>
<p><strong>If I will make regular SQL:</strong></p>
<pre><code>SELECT count(userid) FROM users GROUP BY country
</code></pre>
<p>I will get results for every country, but I need only TOP 3 and all others count as &quot;Rest&quot; in results. Thanks!</p>
<p>P.S.: I tried to create SQLFiddle for this, but their website is down right now and I can't use it.</p>",70173369,1,0,,2021. 11. 30 오후 4:49:23,,2021. 11. 30 오후 5:09:47,,,,,815193,,1,1,mysql,39
70189582,Cypher only return nodes where connected nodes don't contain a substring on a property,"<p>I can't quite figure out the syntax on something in Cypher. I want to return papers only where none of the authors work at a certain place.</p>
<p>Something like this</p>
<pre><code>MATCH (p:Paper)&lt;-[:AUTHOR_OF]-(authors)
WHERE NOT (p)&lt;-[:AUTHOR_OF]-(authors).institute CONTAINS &quot;SomeInstituteName&quot;
RETURN p, authors
</code></pre>
<p>Unfortunately this throws an error.</p>
<p>I also tried this:</p>
<pre><code>MATCH (p:Paper)&lt;-[:AUTHOR_OF]-(authors)
WHERE NOT authors.institute CONTAINS &quot;SomeInstituteName&quot;
RETURN p, authors
</code></pre>
<p>This doesn't work either as it just returns all the papers and filters out authors that work at some institute. I'd like to only return papers where not even one author works at 'SomeInstituteName'</p>",70190790,1,0,,2021. 12. 1 오후 6:38:50,,2021. 12. 1 오후 8:24:42,,,,,11571390,,1,0,neo4j|cypher,39
70275830,Postgres: grouping array by common element,"<p>I have a table containing an id and an array of related id</p>
<pre><code> id  | related_id  
-----+-------------
 712 | {1116}
 837 | {1116,1127}
1116 | {712,837}
1127 | {837}
</code></pre>
<p>I want to group / merge all related id having a common element</p>
<pre><code> id  | related_id  |      full_ids       
-----+-------------+---------------------
 712 | {1116}      | {712,1116,837,1127}
 837 | {1116,1127} | {837,1116,712,1127}
1116 | {712,837}   | {712,1116,837,1127}
1127 | {837}       | {1127,837,1116,712}
</code></pre>
<p>I try to do it with a recursive SQL but for now some row have missing element</p>
<pre><code> WITH RECURSIVE 
 un AS (SELECT id,unnest(related_id) as parent FROM my_table),
 rec (id) as
 (
   SELECT id,parent,array[id] as ids from un
     UNION ALL
   SELECT rec.id,un.parent,ids || un.id FROM rec JOIN un ON rec.parent = un.id where un.id &lt;&gt; all(ids)
 ),
 j AS (SELECT distinct on (id) ids,id FROM rec order by id, cardinality(ids) desc)                                                           
 SELECT ops.*,j.ids as full_ids FROM my_table ops LEFT JOIN j ON ops.id=j.id;
</code></pre>
<p>Result of this query</p>
<pre><code>  id  | related_id  |      full_ids       
------+-------------+---------------------
  712 | {1116}      | {712,1116,837,1127}
  837 | {1116,1127} | {837,1116,712}
 1116 | {712,837}   | {1116,837,1127}
 1127 | {837}       | {1127,837,1116,712}
</code></pre>
<p>What I am missing ?</p>",70276543,1,0,,2021. 12. 8 오후 1:28:39,,2021. 12. 8 오후 2:20:24,2021. 12. 8 오후 1:38:42,,4320288,,4320288,,1,1,postgresql,39
70060741,"How to create, update or delete according to values in a collection in neo4j?","<p>In neo4j, I have relationship <code>IS_SIMILAR</code> with property <code>similarity</code> in database, and I have a collection <code>collect([node_n, node_m, new_similarity]) AS similarity_table</code> contains new information. I want to:</p>
<ol>
<li>if relationship <code>(node_n)-[r:IS_SIMILAR]-(node_m)</code> <strong>exists</strong> and <code>[node_n, node_m, new_similarity &gt;= 0.5]</code> in <code>similarity_table</code>, only <strong>UPDATE</strong> the value of <code>r.similarity</code> to <code>new_similarity</code></li>
<li>if relationship <code>(node_n)-[r:IS_SIMILAR]-(node_m)</code> <strong>exists</strong> and <code>[node_n, node_m, new_similarity &lt; 0.5]</code> in <code>similarity_table</code>, <strong>DELETE</strong> <code>r</code> (because node_n and node_m are no longer similar)</li>
<li>if relationship <code>(node_n)-[r:IS_SIMILAR]-(node_m)</code> <strong>does not exist</strong> and <code>[node_n, node_m, new_similarity &gt;= 0.5]</code> in <code>similarity_table</code>, <strong>CREATE</strong> <code>(node_n)-[r:IS_SIMILAR]-(node_m)</code> with <code>SET r.similarity = new_similarity</code></li>
<li>if relationship <code>(node_n)-[r:IS_SIMILAR]-(node_m)</code> <strong>does not exist</strong> and <code>[node_n, node_m, new_similarity &lt; 0.5]</code> in <code>similarity_table</code>, do nothing</li>
</ol>
<p>With <code>MERGE</code> I can handle 1+3+4 (by only processing <code>new_similarity &gt;= 0.5</code> part):</p>
<pre><code>... # calculate similarity and build n, m, new_similarity list
WITH collect([node_n, node_m, new_similarity]) AS sim_table
WITH [val IN sim_table WHERE val[2] &gt;= 0.5] AS similarity_table
UNWIND similarity_table AS s
WITH s[0] AS n, s[1] AS m, s[2] AS sim
MERGE (n)-[r:IS_SIMILAR_TO]-&gt;(m)
SET r.similarity = sim
</code></pre>
<p>But can I combine all these conditional actions (CREATE, UPDATE, DELETE) in one Cypher?</p>",70092488,1,0,,2021. 11. 22 오전 3:56:15,,2021. 11. 24 오전 8:01:24,2021. 11. 22 오전 4:01:17,,13079995,,13079995,,1,0,neo4j|cypher,40
70254277,List all users in PostgreSQL and identify non ad user,"<p>I wanted to list all users in postgreSQL and I would like to identify the users which are not linked to Active Directory.</p>
<p>select * from pg_user;</p>
<p>Above lists all users. I am trying to set up an alert when other dbas create an user which are not part of Active Directory and notify me.</p>
<p>I am looking for a solution.</p>",,1,0,,2021. 12. 7 오전 2:36:42,,2021. 12. 7 오전 4:15:54,,,,,8390923,,1,-1,postgresql,40
70269304,How do I set up default access privileges when creating new database in PostgreSQL?,"<p>I am trying to create default access privileges so all databases created in the cluster will only give connection privileges to 3 pre-existing roles and superusers.</p>
<p>I have modified template1 access privileges.  Now, I am creating a new database but its not inheriting the access privileges (test_db2).</p>
<p><a href=""https://i.stack.imgur.com/oPUc6.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/oPUc6.png"" alt=""list of databases"" /></a></p>
<p>Am I just missing the right command line?</p>
<pre><code>postgres=# CREATE DATABASE test_db2 TEMPLATE template1; 
</code></pre>",,0,0,,2021. 12. 8 오전 2:44:54,,2021. 12. 8 오전 2:44:54,,,,,10773468,,1,0,postgresql,40
70295914,Neo4j- finding person whose mother doesn't have siblings and father has siblings,"<p>I have a weird problem with my query. If I write something like this:</p>
<pre><code>MATCH (parentOfMother: Person_kol)--&gt;(mother: Person_kol)-[:MOTHER]-&gt;(p: Person_kol)&lt;-[:FATHER]-(father: Person_kol)&lt;--(parentOfFather)--&gt;(:Person_kol) WHERE NOT (:Person_kol)&lt;--(parentOfMother)--&gt;(mother)
RETURN distinct(p.idPerson)
</code></pre>
<p>It gives me a person, whose mother's mother doesn't have any kids except the person's mother, but person's mother's father has a lot of kids.</p>
<p>The query works fine if I write it like this:</p>
<pre><code>MATCH (mother: Person_kol)-[:MOTHER]-&gt;(p: Person_kol)&lt;-[:FATHER]-(father: Person_kol)&lt;--(parentOfFather)--&gt;(:Person_kol) WHERE NOT (mother: Person_kol)&lt;--()--&gt;()
RETURN distinct(p.idPerson)
</code></pre>
<p>Why is it? I don't see any particular difference in queries.</p>",,1,0,,2021. 12. 9 오후 7:52:43,,2021. 12. 10 오후 12:46:55,,,,,15795704,,1,0,neo4j|cypher,40
70337298,postgresql combine 2 select from 2 different tables,"<p>Hello i need to run a query with 2 select statements, one with an avg calculation and grouped by name and the other select, looking for that name in other table, and get some columns and do a JOIN to merge both and only left one column &quot;name&quot; on it.</p>
<p>The first table its this:</p>
<pre><code>+------+-------------+-----------+-----------+
| Name |    Time     | LowPrice  | HighPrice |
+------+-------------+-----------+-----------+
| #AAA | 12/13/2021  |    383.12 |     393.9 |
| #BBB | 12/13/2021  |   1110.34 |    1114.1 |
+------+-------------+-----------+-----------+
</code></pre>
<p>The second table its like this:</p>
<pre><code>+------+-------+----------+
| Name | digit | currency |
+------+-------+----------+
| #AAA |    2  | USD      |
| #BBB |     1 |  EUR     |
+------+-------+----------+
</code></pre>
<p>The final query should return something like this:</p>
<pre><code>+------+-------------+-----------+-----------+-------+----------+
| Name |    Time     | LowPrice  | HighPrice | digit | currency |
+------+-------------+-----------+-----------+-------+----------+
| #AAA | 12/13/2021  |    383.12 |     393.9 |     2 | USD      |
| #BBB | 12/13/2021  |   1110.34 |    1114.1 |     1 | EUR      |
+------+-------------+-----------+-----------+-------+----------+
</code></pre>
<p>I know this query should be something like this:</p>
<pre><code>SELECT *
FROM  (
    SELECT name, date_trunc('day', &quot;Time&quot;), avg(&quot;LowPrice&quot;), avg(&quot;HighPrice&quot;)
    FROM   sometable
    GROUP BY &quot;name&quot;, date_trunc('day', &quot;Time&quot;
    ) t
CROSS JOIN (
    SELECT name, digit, currrency
    FROM   othertable
    GROUP BY &quot;name&quot;
    ) m
</code></pre>
<p>but doesnt work, thanks for your heads up and help me to debug this</p>",70337535,1,0,,2021. 12. 13 오후 3:45:42,,2021. 12. 13 오후 4:15:38,,,,,11913941,,1,0,sql|postgresql,40
70111108,Select first value then fill with null for unique id,"<p>I'm using a Postgres database.</p>
<p>I've been trying to resolve this for hours and read dozens of topics with no result yet</p>
<p>Since I don't know how to explain my issue with words, here is what I need by example :</p>
<p>My query is</p>
<pre class=""lang-sql prettyprint-override""><code>select distinct chiffre_affaires.contrat_pentete_id,
       chiffre_affaires.chiffre_affaires_id,
       chiffre_affaires.chiffre_affaires_montant_total
from chiffre_affaires;
</code></pre>
<p>Current output :</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">contrat_pentete_id</th>
<th style=""text-align: left;"">chiffre_affaires_id</th>
<th style=""text-align: left;"">chiffre_affaires_montant_total</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">3</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">4</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">5</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">6</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">7</td>
<td style=""text-align: left;"">90</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">8</td>
<td style=""text-align: left;"">90</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">9</td>
<td style=""text-align: left;"">90</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">10</td>
<td style=""text-align: left;"">90</td>
</tr>
</tbody>
</table>
</div>
<p>Expected output :</p>
<blockquote>
<p>null values can be replaced by 0, both null or 0 would work</p>
</blockquote>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">contrat_pentete_id</th>
<th style=""text-align: left;"">chiffre_affaires_id</th>
<th style=""text-align: left;"">chiffre_affaires_montant_total</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">111.7848</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">3</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">4</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">5</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: left;"">6</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">7</td>
<td style=""text-align: left;"">90</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">8</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">9</td>
<td style=""text-align: left;"">null</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: left;"">10</td>
<td style=""text-align: left;"">null</td>
</tr>
</tbody>
</table>
</div>
<p>Thank you in advance for any help !</p>",70122542,2,0,,2021. 11. 25 오후 12:25:55,,2021. 11. 26 오전 9:58:55,,,,,14183088,,1,0,sql|postgresql,41
70140436,Replacing int value with null,"<p>When I have an <code>int</code> column and most of the data is a number, but I have a few where there is no data and I am trying to fill it in with a <code>null</code>. how do you go about this? (In summary a <code>null</code> value in place of an <code>int</code>).</p>
<pre><code>CREATE TABLE EmployeeSalary
(EmployeeID int,
JobTitle varchar(50),
YearsOfService int,
Salary int
);


INSERT INTO EmployeeSalary VALUES
(101, 'Manager', 20, 80000),
(102, 'Desk Clerk', 5, 30000),
(103, 'Maintanence', 10, 60000),
(104, 'Sales', 'null', 'null'),
(105, 'Operations Manager', 'null', 'null')
;
</code></pre>",,3,0,,2021. 11. 28 오전 3:21:38,,2021. 11. 28 오후 11:41:28,2021. 11. 28 오후 11:41:28,,3585796,,15837467,,1,0,mysql,41
70263338,How to combine query from last 1 hour with max time for each id?,"<p>I have a PostgreSQL database with time series data. To check if the data quality especially whether the sensors are writing to the database I implemented a SQL view which gives me the average of the last hour and I can see the data with this code:</p>
<pre><code>SELECT avg(value) AS avg,
       location
       name
FROM measurement
WHERE datetime &gt;= (now() - '01:00:00'::interval)
GROUP BY location, name
</code></pre>
<p>The time serie data table looks like this:</p>
<pre><code>    datetime                    value   location   name
0    2018-01-01 13:35:00+01:00   0.22    HLN    NO2
1    2018-01-01 13:35:00+01:00   0.31    HLN    CO
2    2018-01-01 13:35:00+01:00   1.15    HLN    NO
3    2018-01-01 13:40:00+01:00   1.80    AIS    NO2
4    2018-01-01 13:40:00+01:00   2.60    AIS    CO
5    2018-01-01 13:40:00+01:00   2.30    AIS    NO
6    2018-01-01 13:45:00+01:00   2.25    HLN    NO2
7    2018-01-02 13:45:00+01:00   2.14    HLN    CO
8    2018-01-02 13:45:00+01:00   2.96    HLN    NO
9    2018-01-02 14:35:00+01:00   0.76    HLN    NO2
10   2018-01-02 14:35:00+01:00   0.80    HLN    CO
11   2018-01-02 14:35:00+01:00   1.19    HLN    NO
12   2018-01-02 14:40:00+01:00   1.10    AIS    NO2
13   2018-01-02 14:40:00+01:00   2.87    AIS    CO
14   2018-01-02 14:40:00+01:00   2.80    AIS    NO
15   2018-01-02 14:45:00+01:00   3.06    HLN    NO2
16   2018-01-02 13:45:00+01:00   2.86    HLN    CO
17   2018-01-02 13:45:00+01:00   2.22    HLN    NO

</code></pre>
<p>Since I have a huge database and some sensors stopped writing data 2 weeks ago, from time to time I check the <code>MAX(datetime)</code> for each location to see which one sent the last time the data.</p>
<p>Now my question is, can I expand my sql query to also include the max time for each location?</p>
<p>I know for example from the initial view that 2 sensors don't send data to the database, since they are not visible in the last hour of the data and I know from the <code>MAX(datetime)</code> that they stopped 2 weeks ago to send data.</p>",70265371,1,0,,2021. 12. 7 오후 4:04:07,,2021. 12. 7 오후 6:39:09,2021. 12. 7 오후 4:09:30,,16511234,,16511234,,1,0,sql|postgresql,41
70120960,Calculate the increase in new positive cases in SQL,"<p>Currently I have a table called test:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>test_date</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2021-11-25</td>
<td>positive</td>
</tr>
<tr>
<td>2</td>
<td>2021-11-25</td>
<td>positive</td>
</tr>
<tr>
<td>3</td>
<td>2021-11-25</td>
<td>positive</td>
</tr>
<tr>
<td>4</td>
<td>2021-11-26</td>
<td>negative</td>
</tr>
<tr>
<td>5</td>
<td>2021-11-26</td>
<td>positive</td>
</tr>
</tbody>
</table>
</div>
<p>How could I get the increase in new positive cases on 2021-11-26 compared to 2021-11-25. The result should show a single number indicating the increment. If there are few new positive cases than yesterday, this number should be negative.</p>
<p>Expected results:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>increment</th>
</tr>
</thead>
<tbody>
<tr>
<td>-2</td>
</tr>
</tbody>
</table>
</div>
<p>explanation: 1 - 3 = -2</p>",70121048,2,0,,2021. 11. 26 오전 7:40:37,,2021. 11. 26 오전 8:00:12,2021. 11. 26 오전 7:48:00,,10138734,,16551110,,1,0,mysql,42
70164726,Generate N Records,"<p>Is there a faster way to do something like this? Maybe using <code>generate_series</code>?</p>
<pre><code>INSERT INTO users (email)
VALUES
  ('user1@domain.com'),
  ('user2@domain.com'),
  ('user3@domain.com')
</code></pre>
<p>Is it possible to also easily add a relation for a profile?</p>
<pre><code>INSERT INTO profiles (user_id)
SELECT id FROM users WHERE email='user1@domain.com'

INSERT INTO profiles (user_id)
SELECT id FROM users WHERE email='user2@domain.com'

INSERT INTO profiles (user_id)
SELECT id FROM users WHERE email='user3@domain.com'
</code></pre>",70164757,2,0,,2021. 11. 30 오전 5:28:13,,2021. 11. 30 오전 6:34:08,2021. 11. 30 오전 6:26:07,,148390,,148390,,1,0,postgresql,42
70043831,Changing a value in a column to another from the same column,"<p>I have a table named titles with 3 columns named titleID, price, and pubDate</p>
<p>I've been trying to change the price of a row to the same price as the row with the most recent pubDate</p>
<p>I have</p>
<pre><code>UPDATE titles t
INNER JOIN titles t2
ON t.titleID = t2.titleID
SET
    t.price = (
        /*Returns the price of the titleID with the most recent date in pubID*/
        SELECT t3.price FROM titles t3
        ORDER BY t.pubDate DESC LIMIT 1)
WHERE t.titleID = 1001
</code></pre>
<p>The error I am getting is</p>
<pre><code>Error Code: 1053. You can't specify target table t for update in FROM clause
</code></pre>
<p>How can I correctly change a value to a value from the same column</p>",70053356,3,0,,2021. 11. 20 오전 6:48:52,,2021. 11. 21 오전 9:43:36,,,,,10485812,,1,3,mysql,43
70093187,What happend to 'GEN_CLUST_INDEX ' when we create a new Secondary or Clustered index on an table?,"<p>I created a table that has no <strong>CLUSTERED_INDEX</strong>.</p>
<p>Reference to <a href=""https://dev.mysql.com/doc/refman/5.7/en/innodb-index-types.html"" rel=""nofollow noreferrer"">documentation</a>.I get a default clustered index which named '<strong>GEN_CLUST_INDEX</strong>'.</p>
<p>I wonder what will happened to <strong>GEN_CLUST_INDEX</strong> if I create new <strong>Clustered</strong> or <strong>Secendary</strong> index on the table.</p>",,0,0,,2021. 11. 24 오전 8:58:52,,2021. 11. 24 오전 8:58:52,,,,,17496172,,1,0,mysql,43
70098538,how to change string into operator logical in query postgresql,"<p>I have a condition where I must save operator like 'AND' and 'OR' in my table.</p>
<pre><code>id | name | upper | lower | operator
1  | limit | 10    | 1    | 'AND'
</code></pre>
<p>how do I can use that operator like usual from column table ? thank you</p>",,1,0,,2021. 11. 24 오후 3:13:03,,2021. 11. 25 오후 1:44:52,,,,,11081924,,1,0,postgresql,43
70235710,Returning cousins in Neo4j problem with WHERE,"<p>I have to make a Cypher query which is supposed to return cousins of a person (brothers, sisters, kids of brothers/sisters). It works almost fine, but the problem is that when I want to filter out the kids of the person (27003) <code>(precious)</code> writing <code>WHERE p2.personId&lt;&gt;27003</code> it also removes the mother of the person <code>(missing)</code>.</p>
<p>What have I done wrong here?</p>
<p>My cypher query:</p>
<pre><code>MATCH (p: Person_kol)&lt;-[]-(parent: Person_kol) WHERE p.idPerson=27003
WITH p,parent
MATCH (p3: Person_kol)&lt;-[]-(p2: Person_kol)&lt;-[]-(parent: Person_kol)
WHERE p2.idPerson&lt;&gt;27003
RETURN p,parent,p3,p2
</code></pre>
<p>My first match just returns the person of given id with his/her parent.</p>
<p>Second match just searches for brothers/sisters and his/her kids (I know that p2 also includes the person of id=27003 and his/her kids, that's why I want to filter them out, but my &quot;WHERE&quot; also removes the mother of the person (2nd picture)</p>
<p>Pictures:</p>
<ol>
<li>(without WHERE clause)</li>
</ol>
<p><img src=""https://i.imgur.com/M8UMXt3.png"" alt=""text"" /></p>
<ol start=""2"">
<li>(with WHERE)</li>
</ol>
<p><img src=""https://i.imgur.com/DGyyY1C.png"" alt=""text"" /></p>",70239765,1,0,,2021. 12. 5 오후 3:20:51,,2022. 1. 27 오후 9:07:30,2022. 1. 27 오후 9:07:30,,13302,,15795704,,1,0,neo4j|cypher,43
70371764,Writing a query that finds other users who have the same band in their favorite bands list and then listing the other users favorite bands,"<p>I'm having trouble trying to write a query that is able to find other users who have the same band in their list of favorite bands as user1 and then listing the other users' other favorite bands.</p>
<p>So if user1 is John Smith, I'm trying to find other users who also like the same bands he likes and then list the other bands the other users like.</p>
<p>This is the query that I have written.</p>
<pre><code>SELECT DISTINCT U.user_name, B.bname FROM bands B
JOIN favorites F ON B.bid = F.bid
JOIN users U ON F.uid = U.uid
WHERE B.bname IN (
    SELECT B.bname
    FROM favorites F
    JOIN bands B ON F.fav_band = B.bname
    WHERE F.uid = 1);
</code></pre>
<p>The results I want would be the other bands that Jane Doe likes besides Seputura (because her and John Smith share that in common. But the results I'm getting is:</p>
<p><a href=""https://i.stack.imgur.com/IIWg4.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/IIWg4.jpg"" alt=""enter image description here"" /></a></p>
<p>I'm not too sure what to fix in my query to get the results desired. Would appreciate any help, thanks.</p>
<p>And these are the tables with data:</p>
<pre><code>CREATE TABLE Bands (
    bid INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    bname CHAR(20) NOT NULL
);

INSERT INTO Bands (bname) VALUES ('Seputura'), ('Death'), ('Muddy Waters'), ('Led Zeppelin'), ('The Guess Who');
INSERT INTO Bands (bname) VALUES ('The Hu'), ('Huun-Huur-Tu'), ('Paul Pena'), ('Battuvshin'), ('Sade');
INSERT INTO Bands (bname) VALUES ('Mozart'), ('Tchaikovsky'), ('Twisted Sister'), ('Testament'), ('Tengger Cavalry');

CREATE TABLE users (
    uid INT NOT NULL AUTO_INCREMENT,
    user_name CHAR(50) NOT NULL,
    country CHAR(50) NOT NULL,
    PRIMARY KEY (uid)
);

INSERT INTO users (uid, user_name, country) VALUES (DEFAULT, 'John Smith', 'United States');
INSERT INTO users (uid, user_name, country) VALUES (DEFAULT, 'Jane Doe', 'England');
INSERT INTO users (uid, user_name, country) VALUES (DEFAULT, 'Michael Hill', 'Russia');
INSERT INTO users (uid, user_name, country) VALUES (DEFAULT, 'Michelle Green', 'Brazil');

CREATE TABLE favorites (
    uid INT NOT NULL,
    bid INT NOT NULL,
    fav_band CHAR(50) NOT NULL,
    PRIMARY KEY (uid, bid),
    FOREIGN KEY (uid) REFERENCES users(uid),
    FOREIGN KEY (bid) REFERENCES bands(bid)
);

INSERT INTO favorites (uid, bid, fav_band) VALUES (1, 1, 'Seputura');
INSERT INTO favorites (uid, bid, fav_band) VALUES (1, 4, 'Led Zeppelin');
INSERT INTO favorites (uid, bid, fav_band) VALUES (1, 9, 'Battuvshin');

INSERT INTO favorites (uid, bid, fav_band) VALUES (2, 1, 'Seputura');
INSERT INTO favorites (uid, bid, fav_band) VALUES (2, 5, 'The Guess Who');
INSERT INTO favorites (uid, bid, fav_band) VALUES (2, 10, 'Sade');
INSERT INTO favorites (uid, bid, fav_band) VALUES (2, 11, 'Mozart');

INSERT INTO favorites (uid, bid, fav_band) VALUES (3, 5, 'The Guess Who');
INSERT INTO favorites (uid, bid, fav_band) VALUES (3, 8, 'Paul Pena');

INSERT INTO favorites (uid, bid, fav_band) VALUES (4, 5, 'The Guess Who');
INSERT INTO favorites (uid, bid, fav_band) VALUES (4, 12, 'Tchaikovsky');
INSERT INTO favorites (uid, bid, fav_band) VALUES (4, 15, 'Tengger Cavalry');
</code></pre>",,2,0,,2021. 12. 16 오전 12:01:52,,2021. 12. 17 오후 1:05:05,,,,,15278145,,1,0,mysql,43
70116669,In MySQL how do I get the total number of components if one column is related to another?,"<p>I have a few machines reporting status on hardware components. not all machines have the same amount of hardware components. I need to know the total number of components of all the machines.</p>
<p>I'm using this query</p>
<pre><code>SELECT
    time AS &quot;time&quot;,
    machine_id,
    hw_id
FROM 
    hardware
WHERE
    $__unixEpochFilter(time) AND
    component = 'gpu'
ORDER BY 
    time
</code></pre>
<p><a href=""https://i.stack.imgur.com/owyn3.png"" rel=""nofollow noreferrer"">enter image description here</a></p>
<p>In this case, there are 9 components in total</p>",70116776,2,0,,2021. 11. 25 오후 8:02:17,,2021. 12. 24 오전 8:51:15,2021. 12. 24 오전 8:51:15,,13302,,8378497,,1,-1,mysql,44
70140619,How to left outer join and insert new data at the same time into a mysql table,"<p>I want to insert in new data at same time and merged with outer left join values from another table. I have tried by creating the values first and merge by using union for the selection of two columns which is left outer joined to the table. What other ways can I merge left outer join and newly created values into the table?</p>
<pre><code>INSERT INTO Dessert(pie, strawberry)
VALUES('chocolate', '5')
UNION
SELECT cream, iceCream, null
FROM Craving
LEFT JOIN Dessert
ON Craving.cream = Dessert.cream AND Craving.iceCream = Dessert.iceCream
</code></pre>
<p>The table I am trying to create</p>
<pre><code>Dessert                             Craving 
cream iceCream pie strawberry       cream iceCream    
</code></pre>",70140817,1,0,,2021. 11. 28 오전 4:18:51,,2021. 11. 28 오전 9:26:43,2021. 11. 28 오전 9:26:43,,13996343,,13996343,,1,0,mysql,44
70324984,MySQL trying to count from two columns,"<p>I’m new at this so I’m having a hard time solving this problem, I’ve searched high and low but I can’t seem to find an answer.</p>
<p>This is how my tables look:</p>
<p><strong>Table artist</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Columns</th>
<th>Constraints</th>
</tr>
</thead>
<tbody>
<tr>
<td>Artist_id</td>
<td>PK</td>
</tr>
<tr>
<td>Name</td>
<td>-</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Table song</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Columns</th>
<th>Constraints</th>
</tr>
</thead>
<tbody>
<tr>
<td>Song_id</td>
<td>PK</td>
</tr>
<tr>
<td>Title</td>
<td>-</td>
</tr>
<tr>
<td>artist_id</td>
<td>FK</td>
</tr>
<tr>
<td>co_artist_id</td>
<td>FK</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Table top_list</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Columns</th>
<th>Constraints</th>
</tr>
</thead>
<tbody>
<tr>
<td>Id</td>
<td>PK FK</td>
</tr>
</tbody>
</table>
</div>
<p>I’ve made two foreign keys in the song table to the same primary key (<code>artist_id</code>). And also made a foreign key in <code>top_list</code> with <code>song_id</code></p>
<p>My query is:</p>
<pre><code>SELECT a.name Artist, COUNT(*) 
FROM top_list tl
INNER JOIN song s ON tl.id = s.song_id
INNER JOIN artist a ON s.artist_id = a.artist_id
GROUP BY a.name
ORDER BY COUNT(*) DESC;
LIMIT 1;
</code></pre>
<p>I want to count both the artist and the co-artist. ATM it only counts <code>song.artist_id</code> and not <code>song.co_artist_id</code></p>",70325407,1,0,,2021. 12. 12 오후 3:32:42,,2021. 12. 12 오후 8:57:22,2021. 12. 12 오후 8:57:22,,7024049,,17658785,,1,1,mysql,44
70312859,If record exists INSERT from the next row (Sql),"<p>I have imported a <code>.csv</code> file into my database table.</p>
<p>It has three columns, for example</p>
<pre><code>(numbers, first_name, last_name)
</code></pre>
<p><code>numbers</code> column's rows start from 1 to 200.</p>
<p>Now, I want to import a new <code>.csv</code> file into that same table. I will do it every day. Each time rows start from 1 to some number.</p>
<p>New <code>.csv</code> file's &quot;numbers&quot; values start at 1 and go to 500.</p>
<p>When I import the new <code>.csv</code> file, it needs to continue from 201. It shouldn't update or delete old rows. Vice versa, it needs to continue rows from 201.</p>
<p>How can I do it? Please help me.</p>",70314462,1,0,,2021. 12. 11 오전 5:34:14,,2021. 12. 11 오전 10:44:31,2021. 12. 11 오전 10:25:27,,330315,,17649921,,1,0,sql|postgresql,45
70366959,Use many call apoc.do.when,"<p>I want to create movie node and create a relation between movie and genre from a csv</p>
<p>CSV file:
id|title|release|action|adventure|animation|childrens|comedy|crime|documentary|drama|fantasy|film-Noir|horror|musical|mystery|romance|sci-Fi|thriller|war|western
1|Toy Story (1995)|01-Jan-1995|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0
2|GoldenEye (1995)|01-Jan-1995|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0
3|Four Rooms (1995)|01-Jan-1995|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0</p>
<p>My cypher query</p>
<pre><code>LOAD CSV WITH HEADERS FROM 'https://www.dropbox.com/s/yho5i7kqocpkh9r/u.item.csv?dl=1' AS line FIELDTERMINATOR '|'
CREATE (n:Movie {id: toInteger(line.id),title: line.title, release: date(line.date)})
WITH line,n
CALL apoc.do.when(toInteger(line.action) = 1, 'MATCH(g:Genre) WHERE g.id = 1 MERGE ($n)-[IS]-&gt;(g)','', {n:n})
CALL apoc.do.when(toInteger(line.adventure) = 1, 'MATCH(g:Genre) WHERE g.id = 2 MERGE ($n)-[IS]-&gt;(g)','', {n:n})
....
</code></pre>
<p>For each genre (action, adventure,....) if the movie's genre is equal 1, I create a relation between genre node and movie node</p>
<p>Could you help me ?</p>",70368313,1,0,,2021. 12. 15 오후 4:17:14,,2021. 12. 15 오후 6:59:17,,,,,9047788,,1,0,neo4j|cypher,45
70039546,SQL nested select where condition is met or if row not in table,"<p>The title is not clear as I don't know how to express the problem in one sentence.</p>
<p>I have a table named companies, looks like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Symbol (PK)</th>
<th>Exchange (PK)</th>
</tr>
</thead>
<tbody>
<tr>
<td>TSLA</td>
<td>NASDAQ</td>
</tr>
<tr>
<td>AMZN</td>
<td>NASDAQ</td>
</tr>
<tr>
<td>MCSFT</td>
<td>NASDAQ</td>
</tr>
</tbody>
</table>
</div>
<p>And then I have a table where I record the last crawl operations I made.
The idea is having a script that can restart crawling everyday without recrawling companies that have been done.</p>
<p>Crawl_Settings</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Symbol (PK/FK on companies)</th>
<th>Exchange(PK/FK)</th>
<th>Last crawl date</th>
<th>Number of articles crawled</th>
</tr>
</thead>
<tbody>
<tr>
<td>TSLA</td>
<td>NASDAQ</td>
<td>19/11/2021</td>
<td>20</td>
</tr>
<tr>
<td>AMZN</td>
<td>NASDAQ</td>
<td>12/11/2021</td>
<td>20</td>
</tr>
</tbody>
</table>
</div>
<p>I thought about making a query that would get me all the companies that have a last crawl date that is not today.</p>
<pre><code>Select * from companies where symbol,exchange in (
  select symbol,exchange from crawl_settings where date != today
)
</code></pre>
<p>I think that this query will work, but won't get me the  companies that have never been crawled.
Expected result:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Symbol (PK)</th>
<th>Exchange (PK)</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMZN</td>
<td>NASDAQ</td>
</tr>
<tr>
<td>MCSFT</td>
<td>NASDAQ</td>
</tr>
</tbody>
</table>
</div>
<p>explanation: AMZN has an old crawl date, MCSFT has never been crawled.</p>
<p>Actual result:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Symbol (PK)</th>
<th>Exchange (PK)</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMZN</td>
<td>NASDAQ</td>
</tr>
</tbody>
</table>
</div>",70039723,3,0,,2021. 11. 19 오후 6:46:04,,2021. 11. 20 오전 5:25:58,2021. 11. 19 오후 6:47:49,,6436191,,11235680,,1,0,sql|postgresql,46
70148848,How to select full month calendar with attendance condition in MySQL?,"<p>Good day! I tried searching this problem all over stack overflow but I cant find the right keyword to search, I guess its better to ask you guys for help.</p>
<p>I am trying to create an attendance history that is base on two tables:</p>
<ol>
<li>attendance table</li>
<li>calendar_dimension table</li>
</ol>
<p>attendance table has data like below</p>
<pre><code>|  idnumber   |   punchin   |   punhout   |  date_created  |
+-------------+-------------+-------------+----------------+
|   0002      |    7:30:00  |   16:00:00  |   2021-11-27   |
|   0003      |    7:30:00  |   16:00:00  |   2021-11-27   |
|   0004      |    7:30:00  |   16:00:00  |   2021-11-27   |


|   0002      |    7:30:00  |   16:00:00  |   2021-11-28   |
|   0003      |    7:30:00  |   16:00:00  |   2021-11-28   |
|   0004      |    7:30:00  |   16:00:00  |   2021-11-28   |

|   0001      |    7:30:00  |   16:00:00  |   2021-11-29   |
|   0002      |    7:30:00  |   16:00:00  |   2021-11-29   |
|   0003      |    7:30:00  |   16:00:00  |   2021-11-29   |
|   0004      |    7:30:00  |   16:00:00  |   2021-11-29   |
</code></pre>
<p>and calendar_dimension is just a basic table with dates, like so:</p>
<p>Please note that is a full month calendar:</p>
<pre><code>|    date     |   datestatus  |
+-------------+---------------+
| 2021-11- 1  to  2021-11-25  |
| 2021-11-26  |   Holiday     |
| 2021-11-27  |               |
| 2021-11-28  |               |
| 2021-11-29  |               |
| 2021-11-30  |               |
</code></pre>
<p>What I have done so far is by joing calendar_dimension and attendance table.</p>
<p>Now, I have something like this: e.g. for 00001, which is working on my end:</p>
<pre><code>|  idnumber   |   punchin   |   punhout   |  date_created  |
+-------------+-------------+-------------+----------------+
|   0001      |    7:30:00  |   16:00:00  |   2021-11-29   |
</code></pre>
<p>And for 0002:</p>
<pre><code>|  idnumber   |   punchin   |   punhout   |  date_created  |   Status   |
+-------------+-------------+-------------+----------------+------------+
|   0001      |    7:30:00  |   16:00:00  |   2021-11-27   |  Present   |
|   0001      |    7:30:00  |   16:00:00  |   2021-11-28   |  Present   |
|   0001      |    7:30:00  |   16:00:00  |   2021-11-29   |  Present   |
</code></pre>
<p>I want my history table looks like this by employee:</p>
<pre><code>|  idnumber   |   punchin   |   punhout   |  date_created  |   Status   |
+-------------+-------------+-------------+----------------+------------+
|                      2021-11-1 to 2021-11-25                          |
|   0001      |    7:30:00  |   16:00:00  |   2021-11-26   |  Holiday   |
|   0001      |    7:30:00  |   16:00:00  |   2021-11-27   |  Absent    |
|   0001      |    7:30:00  |   16:00:00  |   2021-11-28   |  Absent    |
|   0001      |    7:30:00  |   16:00:00  |   2021-11-29   |  Present   |
</code></pre>
<p>the 30th of November will be displayed tomorrow.</p>
<p>is there other way to make this possible? Thanks</p>",70148911,1,0,,2021. 11. 29 오전 1:17:29,,2021. 11. 29 오전 1:50:03,,,,,11016349,,1,0,mysql,46
70116493,How to check col before insert values in Sql?,"<p>Hello this is my first question here, im new to php / mysql , im creating some functions to return/add values in a table.</p>
<p>I have a table called <code>combo_votes</code>, i'll use this for store user ratings votes for my other table: <code>combos</code>.</p>
<p>The logic is when a user send a rating, this take the actual combo_id (inside <code>combos</code>, already have it), take user email, and compare it inside <code>combo_votes</code>. If not exists, then insert a new entry on table for count a new vote.</p>
<p>I search and found this 2 ways:</p>
<pre><code>INSERT INTO `combo_votes` (`combo_id`, `user_name`, `user_email`, `user_photo`,`user_ip`,
`is_true`) values ($comboId, $userName, $userEmail, $userPhoto, $userIp,
$isTrue) ON DUPLICATE KEY UPDATE `is_true` = $vote_value_true_or_false;


update combo_votes set is_true=`$isTrue` where combo_id=$comboId and user_email=$userEmail
IF @@ROWCOUNT=0
   insert into combo_votes(is_true, combo_id, user_name, user_email, user_photo, user_ip) values(`$isTrue` , `$comboId` , `$userName` , `$userEmail` , `$userPhoto` ,`$userIp`);
</code></pre>
<p>These 2 ways dont work with me! I'm using phpMyAdmin, on a shared host;</p>
<p>SOME CODES :</p>
<pre><code>//save post
$combos-&gt;saveCombo($userName, $userEmail, $userPhoto, $userIp, $comboWeapon, $comboInputs, $comboDifficulty, $comboDescription, $comboTrue, $comboStatus, $comboVideo);

// get last id inserted post &lt; this return the last ID inserted BY THE USER RIGHT?? I think y...
$comboId = mysqli_insert_id($connection-&gt;getConn());

// add a new vote entry, for who post the combo with id .
$combos-&gt;updateComboVotes($comboId, $userName, $userEmail, $userPhoto, $userIp, $comboDifficulty, $comboTrue);

// user saves a post (game combo) on db
public function saveCombo($userName, $userEmail, $userPhoto, $userIp, $comboWeapon, $comboInputs, $comboDifficulty, $comboDescription, $comboTrue, $comboStatus, $comboVideo)
    {
        $sql = &quot;INSERT INTO combos (user_name, user_email, user_photo, user_ip, combo_weapon, combo_inputs, combo_description, combo_status, combo_video)
            VALUES ('$userName', '$userEmail', '$userPhoto', '$userIp', '$comboWeapon', '$comboInputs', '$comboDescription', '$comboStatus', '$comboVideo')&quot;;
        $this-&gt;db-&gt;insertQuery($sql);

        return true;
    }

    // i execute this for add a entry on combo_votes for who posted the combo
public function updateComboVotes($comboId, $userName, $userEmail, $userPhoto, $userIp, $comboDifficulty, $comboTrue)
    {
        $sql = &quot;INSERT INTO combo_votes (combo_id, user_name, user_email, user_photo, user_ip, is_true, combo_difficulty)
            VALUES ('$comboId', '$userName', '$userEmail', '$userPhoto', '$userIp', '$comboTrue', '$comboDifficulty')&quot;;
        $this-&gt;db-&gt;insertQuery($sql);

        return true;
    }
</code></pre>",,0,0,,2021. 11. 25 오후 7:40:16,,2021. 11. 30 오후 4:28:47,2021. 11. 30 오후 4:28:47,,1223293,,17510430,,1,0,mysql,47
70153686,SQL Fetch batch query for an array of elements,"<p>I currently have a query that checks if a row exists based on some fields. I wonder how can I do the same query for a batch or an array of items. This is the current query:</p>
<pre><code>SELECT id, subcustomer, uuid
  FROM customer
  WHERE (uuid = :Uuid AND is_deleted = false)
  OR (id = :Id AND subcustomer = :subCustomer AND is_deleted = false)
</code></pre>
<p>I am currently iterating an array and doing this query for each element:</p>
<pre><code>customers.filter {
  val row = fetchSingleRow(
      ctx, getExistingRowsSql, mapOf(
      &quot;Id&quot; to it[&quot;Id&quot;],
      &quot;Uuid&quot; to it[&quot;Uuid&quot;],
      &quot;subCustomer&quot; to it[&quot;subCustomer&quot;]
  ))
  val newCustomer = row.isNullOrEmpty()
  if (!newCustomer) update(ctx, updateSql, it)
  newCustomer
}
</code></pre>
<p>That means if I have an array with 100 items it will do a fetch query 100 times. I would like to avoid that and do a batch call where I could check for all 100 items immediately which ones exist in the table.
How can I do such query?</p>",,0,0,,2021. 11. 29 오전 11:13:14,,2021. 11. 29 오전 11:13:14,,,,,7071069,,1,0,sql|postgresql,47
70157570,Cypher query to check locations and sublocations,"<p>I have Profile node which may be linked to Location node via :LOCATED_IN relationship.
In turn, Location represents unlimited composite structure of nested Location nodes linked with :CONTAINS relationships between them.</p>
<p>I need to find all Profiles which linked to specified location IDs or their parent locations on unlimited levels.</p>
<p>I'm trying to create such Cypher query but it doesn't work as expected. This is what I have so far:</p>
<pre><code>MATCH (d:Profile)-[:LOCATED_IN]-(l:Location) 
OPTIONAL MATCH (pl:Location)-[:CONTAINS*]-&gt;(l) 
WHERE any(x IN l.id WHERE x IN [100,34]) OR any(x IN pl.id WHERE x IN [100,34]) 
RETURN d;
</code></pre>
<p>What am I doing wrong and how to fix it?</p>",70158293,2,0,,2021. 11. 29 오후 3:58:25,,2021. 11. 29 오후 8:42:03,,,,,1219755,,1,0,neo4j|cypher,47
70221170,Dynamic/Customized Week Number,"<p>Let us say there is a table which stores data for student's attendance for classes. The student only need to attend each class once weekly. Hinging on the <strong><em>days_diff</em></strong> column, we decide which weeks the student should get credited for. As usual, each week has 7 days and the end of the week (in days) is divisible by 7. There is a different case for Week 3 in my scenario, whenever the <strong>week_3</strong> is attended, the week ends at that attendance date and <strong>week_4</strong> is started the next day.</p>
<p>I am using postgreSQL 11.4!</p>
<pre><code>select * from students_data
</code></pre>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>student_name</th>
<th>class_subject</th>
<th>registration_date</th>
<th>attendance_date</th>
<th>days_diff</th>
<th>week_num</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-10-18</td>
<td>3</td>
<td>week_1</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-10-24</td>
<td>9</td>
<td>week_2</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-11-01</td>
<td>17</td>
<td>week_3</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-11-10</td>
<td>26</td>
<td>week_4</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-11-20</td>
<td>36</td>
<td>week_6</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-10-25</td>
<td>5</td>
<td>week_1</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-02</td>
<td>13</td>
<td>week_2</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-08</td>
<td>19</td>
<td>week_3</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-23</td>
<td>34</td>
<td>week_5</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-30</td>
<td>41</td>
<td>week_6</td>
</tr>
</tbody>
</table>
</div>
<p>Desired Week Breakdown:</p>
<pre><code>student    days_in_week      week_number
Frank         1-7               week_1
Frank         8-14              week_2
Frank        15-17              week_3     &lt;-----week_3 shakes up the week breakdown
Frank        18-24              week_4
Frank        25-31              week_5........
Danny         1-7               week_1
Danny         8-14              week_2
Danny        15-19              week_3     &lt;----week_3 shakes up the week breakdown
Danny        20-26              week_4
Danny        27-33              week_5........
</code></pre>
<p>Requested: <strong>new_week_num</strong> column</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>student_name</th>
<th>class_subject</th>
<th>registration_date</th>
<th>attendance_date</th>
<th>days_diff</th>
<th>week_num</th>
<th>new_week_num</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-10-18</td>
<td>3</td>
<td>week_1</td>
<td>week_1</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-10-24</td>
<td>9</td>
<td>week_2</td>
<td>week_2</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-11-01</td>
<td>17</td>
<td>week_3</td>
<td>week_3</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-11-10</td>
<td>26</td>
<td>week_4</td>
<td>week_5</td>
</tr>
<tr>
<td>Frank</td>
<td>Chemistry</td>
<td>2021-10-15</td>
<td>2021-11-20</td>
<td>36</td>
<td>week_6</td>
<td>week_7</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-10-25</td>
<td>5</td>
<td>week_1</td>
<td>week_1</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-02</td>
<td>13</td>
<td>week_2</td>
<td>week_2</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-08</td>
<td>19</td>
<td>week_3</td>
<td>week_3</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-23</td>
<td>34</td>
<td>week_5</td>
<td>week_6</td>
</tr>
<tr>
<td>Danny</td>
<td>Physics</td>
<td>2021-10-20</td>
<td>2021-11-30</td>
<td>41</td>
<td>week_6</td>
<td>week_7</td>
</tr>
</tbody>
</table>
</div>",70221498,1,0,,2021. 12. 3 오후 10:06:24,,2021. 12. 4 오전 8:19:48,,,,,7044005,,1,0,sql|postgresql,47
70280828,Is there a way to have a column reference one of two columns on seperate tables?,"<p>I am creating a system that has <code>Posts</code> and <code>Comments</code>. The <code>Posts</code> reference to a <code>Location</code> as seen below.</p>
<pre><code>CREATE SEQUENCE IF NOT EXISTS reference_id;
   ...

CREATE TABLE Posts 
(
    id BIGINT DEFAULT nextval('reference_id') PRIMARY KEY,
    username INTEGER
        REFERENCES Users,
    location_id INTEGER
        REFERENCES Locations,
    created_at timestamp DEFAULT current_timestamp,
    subject TEXT,
    body text NOT NULL
);

CREATE TABLE Comments 
(
    id BIGINT DEFAULT nextval('reference_id') PRIMARY KEY,
    username INTEGER
        REFERENCES Users,
    reference_id INTEGER
        REFERENCES Posts,
    created_at timestamp DEFAULT current_timestamp,
    body text NOT NULL
);
</code></pre>
<p>I have created a sequence so that both <code>Posts</code> and <code>Comments</code> can share a set of ids, so they are all unique. But now, I need the <code>Comments</code> to reference either a <code>Post</code> <em><strong>OR</strong></em> another <code>Comment</code>. Like</p>
<pre><code>reference_id INTEGER
        REFERENCES Posts OR Comments,
</code></pre>
<p>I'm thinking I might have to create a third table, but even that seems... obscure to me. Every time I think about it, it seems I'm stuck in some sort of recursive loop of &quot;well, this comment is a child level which will link to posts, and then I need a grandchild level comment that references just child level comments, and then I need a great-grandchild level comment...&quot;</p>
<p>Is there a way to do this? Preferably without a third table, but whatever works, I'll take.</p>",,1,0,,2021. 12. 8 오후 7:41:08,,2021. 12. 8 오후 8:52:32,2021. 12. 8 오후 8:52:32,,13302,,15709786,,1,1,sql|postgresql,47
70297087,"Select between dates, but ignoring year. Problems when filtering over year end","<p>I have a table with birthdays:</p>
<pre><code>CREATE TABLE birthdays
    (`name` varchar(10), `day` datetime)
;
    
INSERT INTO birthdays
    (`name`, `day`)
VALUES
    ('Joe', '2000-03-18'),
    ('Mike', '2000-12-23'),
    ('Albert', '2000-02-15');
</code></pre>
<p>I want to find all person with birthday inside a given interval. It works fine, when my two dates are in the same year:</p>
<pre><code>SELECT * 
FROM birthdays 
WHERE DATE_FORMAT(day, &quot;%m-%d&quot;) BETWEEN DATE_FORMAT('2021-12-01',&quot;%m-%d&quot;) AND DATE_FORMAT('2021-12-31',&quot;%m-%d&quot;);
</code></pre>
<p>But the moment I filter between two dates over year end, I get nothing. I tried two approaches: DATE_FORMAR and DAYOFYEAR, with the same result:</p>
<pre><code>SELECT * 
FROM birthdays 
WHERE DATE_FORMAT(day, &quot;%m-%d&quot;) BETWEEN DATE_FORMAT('2021-11-28',&quot;%m-%d&quot;) AND DATE_FORMAT('2022-01-01',&quot;%m-%d&quot;);

SELECT * 
FROM birthdays
WHERE DAYOFYEAR(day) BETWEEN DAYOFYEAR('2021-11-28') AND DAYOFYEAR('2022-01-01')
</code></pre>
<p>Here is a <a href=""http://sqlfiddle.com/#!9/cdb0bb/5"" rel=""nofollow noreferrer"">SQL Fiddle</a> with the problem.</p>",70297886,2,0,,2021. 12. 9 오후 9:43:05,,2021. 12. 10 오전 8:55:50,,,,,9229931,,1,1,mysql,47
70299767,CONTAINS with boundary across multiple words in Neo4j,"<p>I'm trying to do a CONTAINS with boundaries across MULTIPLE words in neo4j. Any advice?</p>
<p>EQUIVALENT OF:</p>
<pre><code>MATCH (a)-[:REL]-&gt;(b)
WHERE b.whole CONTAINS a.part
RETURN a.part, b.whole
</code></pre>
<p>Would return:<br>
&quot;Peter&quot;,&quot;Peter Andrew Morrison&quot;<br>
&quot;Andrew&quot;,&quot;Peter Andrew Morrison&quot;<br>
&quot;Sarah Morgan&quot;,&quot;Sarah Morgan Wilkerson&quot;<br>
<br>
Would not return <br>
&quot;Pete&quot;,&quot;Peter Andrew Morrison&quot;<br>
&quot;Pete Andrew&quot;,&quot;Peter Andrew Morrison&quot;<br>
&quot;Sara&quot;,&quot;Sarah Morgan Wilkerson&quot;<br>
<br>
Is regex the way to go? If so, how do you add the a.part in regex? I tried</p>
<pre><code>WHERE b.whole=~'.*'+a.part+'.*'
</code></pre>
<p>but that returns an error.</p>
<p>Or should I splice b.whole into a list and do b.part in list?</p>
<pre><code>WITH b, a, split(b.whole, ' ') as list 
WHERE a.part in list
</code></pre>
<p>But this only allows one word at a time and I need multiple word matches... any thoughts? <br>TIA!!!</p>",,1,0,,2021. 12. 10 오전 4:29:53,,2021. 12. 10 오후 4:47:56,,,,,10768865,,1,1,neo4j,47
70247947,Insert a value into a serialized field on table1 then inserting that serialized value into table2 when there are unique constraints,"<p>These are my tables:</p>
<pre><code>CREATE TABLE networks
(
    network_id SERIAL UNIQUE PRIMARY KEY,
    network_name TEXT NOT NULL UNIQUE
);

CREATE TABLE addresses
(
    address_id SERIAL UNIQUE NOT NULL,
    network_id integer REFERENCES networks (network_id),
    address    TEXT   NOT NULL UNIQUE,
    PRIMARY KEY (address_id, network_id)
);
</code></pre>
<p>I'm trying to insert a value into <code>networks</code> and then insert the auto-generated <code>network_id</code> into another table.</p>
<p>This query works for values that don't exist in <code>networks</code> and does what I'm looking for:</p>
<pre><code>WITH par_key AS (
    INSERT INTO networks (network_name) VALUES ('ethereum')
    RETURNING network_id
)
INSERT INTO addresses (network_id, address)
VALUES (
    (select par_key.network_id from par_key),
    'address1'
)
</code></pre>
<p>However, this query results in a duplicate error:</p>
<pre><code>WITH par_key AS (
    INSERT INTO networks (network_name) VALUES ('ethereum')
    RETURNING network_id
)
INSERT INTO addresses (network_id, address)
VALUES (
    (select par_key.network_id from par_key),
    'address2'
)
</code></pre>
<pre class=""lang-none prettyprint-override""><code>ERROR:  duplicate key value violates unique constraint &quot;networks_token_name_key&quot;
DETAIL:  Key (network_name)=(ethereum) already exists.
</code></pre>
<p>I'd like the query to execute on <code>addresses</code> with the <code>network_id</code> if the value already exists in <code>networks</code>.</p>
<p>Edit: had to rename <code>token_name</code> in the above table to <code>network_name</code>.</p>",70248221,1,0,,2021. 12. 6 오후 3:33:37,,2021. 12. 6 오후 4:27:30,2021. 12. 6 오후 4:27:30,,17604329,,17604329,,1,0,sql|postgresql,48
70209040,How to add create_time in Postgresql like Mysql?,"<p>How to add create_time in Postgresql like Mysql as below?</p>
<pre class=""lang-sql prettyprint-override""><code>ALTER TABLE table_name
ADD COLUMN create_time datetime NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'create_time' ;
</code></pre>
<p>Thanks so much for any advice</p>",70209104,1,0,,2021. 12. 3 오전 3:07:46,,2021. 12. 3 오전 3:17:07,,,,,14114923,,1,0,postgresql,49
70332598,Count Unique Data With Minimum Date Postgres,"<p>I got a problem while trying to count data in my table.</p>
<p>for example my table look like this:</p>
<pre><code>table = test
id       | transaction_date
1        | '2021-10-01 00:00:00'
2        | '2021-10-01 00:00:00'
3        | '2021-10-02 00:00:00'
4        | '2021-10-03 00:00:00'
5        | '2021-10-04 00:00:00'
6        | '2021-10-05 00:00:00'
7        | '2021-10-06 00:00:00'

1        | '2021-11-01 00:00:00'
2        | '2021-11-01 00:00:00'
3        | '2021-11-02 00:00:00'

1        | '2021-12-01 00:00:00'
2        | '2021-12-01 00:00:00'
3        | '2021-12-02 00:00:00'
4        | '2021-12-03 00:00:00'
8        | '2021-12-04 00:00:00'
8        | '2021-12-05 00:00:00'
9        | '2021-12-06 00:00:00'
9        | '2021-12-07 00:00:00'
</code></pre>
<p>I tried to use this query</p>
<pre><code>WITH first_transaction_AS (SELECT MIN(transaction_date), id FROM test),
previous_month AS (SELECT DISTINCT idFROM test 
WHERE transaction_date &gt;= date_trunc('month', transaction_date)-interval '1 month' 
AND transaction_date &lt; date_trunc('month', transaction_date)

-- WHERE clause for previous month will be dynamic

SELECT date_trunc('month', transaction_date), COUNT(DISTINCT id)
FROM test 
WHERE test.id NOT IN (SELECT id FROM previous_month) AND transaction_date NOT IN (SELECT min FROM first_transaction)
</code></pre>
<p>I wanted to achieve a aggregate query where:
Count ID Where ID has Transaction this month AND ID Without Transaction Last Month AND It's not the ID's First Transaction</p>
<p>The current problem is, ID 8 and 9 Will still be count Because they has a transaction after their first transaction in the same month.</p>
<p>So what i aim for the result is:</p>
<pre><code>    Date                    |         Count
  2021-12-01 00:00:00       |           1  (4)
</code></pre>",70333745,1,0,,2021. 12. 13 오전 9:42:33,,2021. 12. 14 오전 7:15:15,2021. 12. 13 오후 12:06:06,,10253649,,10253649,,1,1,sql|postgresql,49
70324166,How to count users group by time interval,"<p>I have a table with user id and created_at of type timestamp, I want to count how many users have created their account in 3 hours interval for a given day. so far I have created this query but I'm not able to get the count for each three hours</p>
<pre><code>with time_cte AS (
    SELECT time_sample from
            generate_series('2021-12-01'::date, '2021-12-01'::date + interval '1 day', interval '3 hour')
                as time_sample
) SELECT time_sample, count(u.id) FROM time_cte
    join users u ON u.created_at::date = '2021-12-01'::date
                                       GROUP BY time_sample;
</code></pre>
<p>I am able to get series and count but they are total users count for that day</p>
<p>The output I got</p>
<pre class=""lang-none prettyprint-override""><code>time_sample                count
2021-12-01 00:00:00.000000, 4
2021-12-01 03:00:00.000000, 4
2021-12-01 06:00:00.000000, 4
2021-12-01 09:00:00.000000, 4
2021-12-01 12:00:00.000000, 4
2021-12-01 15:00:00.000000, 4
2021-12-01 18:00:00.000000, 4
2021-12-01 21:00:00.000000, 4
2021-12-02 00:00:00.000000, 4
</code></pre>
<p>The output I expect is</p>
<pre class=""lang-none prettyprint-override""><code>time_sample                count
2021-12-01 00:00:00.000000, 0
2021-12-01 03:00:00.000000, 0
2021-12-01 06:00:00.000000, 3
2021-12-01 09:00:00.000000, 1
2021-12-01 12:00:00.000000, 0
2021-12-01 15:00:00.000000, 0
2021-12-01 18:00:00.000000, 0
2021-12-01 21:00:00.000000, 0
2021-12-02 00:00:00.000000, 0
</code></pre>",,1,0,,2021. 12. 12 오후 1:51:19,,2021. 12. 12 오후 3:35:00,2021. 12. 12 오후 3:23:07,,330315,,14117547,,1,1,sql|postgresql,50
70135343,Changing the same column type in all tables in PostgreSQL. The column contains the data,"<p>The schema name is postgre_x_schema and the column name is y_column.
Column type is numeric, data available(1 and 0 ).
I will convert the column and set to boolean (1 = 'TRUE' and 0='FALSE) '.
But how can I do this on all tables.</p>
<p>*300 tables have the same column and in data.</p>",,1,0,,2021. 11. 27 오후 1:45:40,,2021. 11. 27 오후 2:00:51,,,,,17524315,,1,0,postgresql,51
70332547,What is the most powerful way to import data into a Neo4J database?,"<p>I have 150 Mysql tables of about 3M rows with just over 200 columns per row at the moment (the number will only increase),
I would like to transfer my tables to a single Neo4J database with each field being a node,
so with the numbers above it would be :</p>
<ul>
<li>150 =&gt; number of tables</li>
<li>3M =&gt; number of rows</li>
<li>200 =&gt; number of fields</li>
<li>10 =&gt; number of possible values in each field on average</li>
</ul>
<p>so (150 * 3000000) + (200 * 10)= 450'002'000 nodes approximately</p>
<p>Which method will be the most appropriate for importing so many nodes and relationships?
knowing that there are 6 specific nodes that serve as unique identifiers and that must therefore be merged to avoid duplicates.</p>
<p>I think the MATCH is extremely heavy so I guess it should be avoided as much as possible, do you think it will be useful to use a method to know if the node exists other than asking Neo4J (for example a MongoDB) in order to avoid a MATCH, is a good idea?</p>
<p>Thank you in advance.</p>",,2,0,,2021. 12. 13 오전 9:39:30,,2021. 12. 13 오후 7:54:37,,,,,4827509,,1,0,neo4j,51
70217246,Optimize query with IN clause for one-to-many association,"<p>Currently having 2 tables</p>
<ol>
<li>Users -&gt; <em>1 million records</em></li>
<li>Requests -&gt; <em>10 millions records</em></li>
</ol>
<p>A <code>User</code> has many <code>Requests</code>. I'm fetching all the users alongside with <strong>their last created</strong> <code>Request</code> with by something like the following query:</p>
<pre><code>SELECT *
FROM users AS u
INNER JOIN requests AS r
ON u.id = r.user_id
WHERE r.id IN (
    SELECT MAX(r.id)
    FROM users u
    INNER JOIN requests r ON r.user_id = u.id
    GROUP BY u.id
);
</code></pre>
<p>which does work, but with very very poor performance (&gt; 7 sec). I understand the reason why and i'm trying to find a solution for that, even if i have to modify the schema.</p>
<p><strong>Note:</strong> <code>Requests</code> table consists of <code>Boolean</code> columns, and I'm not quite sure if indexing will help here.</p>",70217329,1,0,,2021. 12. 3 오후 4:02:10,,2021. 12. 3 오후 4:07:10,,,,,4394221,,1,0,sql|postgresql,53
70060538,Will importing a database mysqldump that excludes a table from source preserve the table in destination?,"<p>Moving a database (<code>db1</code>) from one server to the next and there was one table (<code>big_table</code>) that was so large it took longer to import into the destination than our preferred maintenance window so we kept the application communicating with the source database server while the destination continued to import.</p>
<p>Now we want to redo the process to get what has changed in two steps:</p>
<ol>
<li>dump all tables from source except the <code>big_table</code> and make sure we don't overwrite or drop the very large table already in the destination when we import</li>
<li>dump the new/updated records from the <code>big_table</code> since the last timestamp and import those delta records into the existing destination <code>db.big_table</code></li>
</ol>
<p>For the first step, will this work to preserve <code>db1</code> and <code>db.big_table</code> in the destination while recreating all other tables?</p>
<pre class=""lang-sh prettyprint-override""><code>mysqldump -h host1 db1 --ignore-table=db1.big_table --no-create-db | mysql -h host2 db1
</code></pre>
<p>For the second step, if I know there are no updates and only new records in <code>big_table</code> since a known timestamp, will this work do that?</p>
<pre class=""lang-sh prettyprint-override""><code>mysqldump -h host1 db1 big_table --no-create-info --where &quot;timestamp &gt; '${LAST_EXPORTED_TIMESTAMP}'&quot; | mysql -h host2 db1
</code></pre>
<p>I am trying to understand if each of these &quot;patch&quot; attempts of changes in source since the first import into destination doesn't try to drop/create <code>db1</code> or <code>db1.big_table</code> but instead just captures and imports all tables except <code>big_table</code> and only new records in <code>big_table</code> since a known timestamp.</p>
<p>Is there a better way to do this than I've drafted?</p>",70146019,3,0,,2021. 11. 22 오전 3:16:27,,2021. 11. 28 오후 6:24:45,2021. 11. 28 오후 5:52:57,,56082,,56082,,1,0,mysql,55
70190367,Having issues with bigquery connector for power bi,"<p>I have a PowerBi desktop model connected to BigQuery I've been updating it for a while but since yesterday upon pressing the refresh button it keeps loading but never finishes the refresh process.</p>
<p>The average refresh time used to be around 3-4 minutes, also I have another PowerBi model connected to BigQuery but it won't refresh either, I thought there was something wrong with BigQuery but it's working.</p>
<p><a href=""https://i.stack.imgur.com/mOuDH.png"" rel=""nofollow noreferrer""></a></p>
<p>Thanks for your help</p>",,0,0,,2021. 12. 1 오후 7:44:47,,2021. 12. 1 오후 7:44:47,,,,,17565312,,1,0,google-bigquery,55
70368164,"How am I misusing the null-coalescing operator? Is this evaluating ""null"" correctly? I want it to show as 'Unknown' if it is null","<p>this is my code</p>
<p>I want the age column to display as Unknown if it is NULL. However, it is not accepting my COALESCE part  after the DATE_PART subtraction</p>
<p>SELECT</p>
<p>COALESCE(DATE_PART('year', death::date) - DATE_PART('year', birth::date), 'Unknown') AS age,</p>
<p>FROM emperors
ORDER BY name ASC</p>
<p>DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type double precision: &quot;Unknown&quot;
LINE 5: ...', death::date) - DATE_PART('year', birth::date), 'Unknown')...</p>",70368261,1,0,,2021. 12. 15 오후 5:48:48,,2021. 12. 15 오후 5:56:31,,,,,17685634,,1,1,postgresql,55
70314877,BigQuery user-defined function in JavaScript does not prune partitions,"<p>I have a BigQuery table that I'd like to partition by low-cardinality string column. That's not possible, so I have to hash strings into integer and partition by integer. I made a very naive hashing algorithm that converts those strings into integers between 0 and 100.</p>
<p>So far so good, I made a new table partitioned by this new integer field which is simply a function of another field. Now I can query this table by partitioned integer field and greatly reduce traffic. Cool! But I really want to query by the string field, so I made a user-defined function that basically does the hashing so I can write queries like this:</p>
<pre><code>SELECT * FROM `partitioned_table` WHERE partitioned_int_field = HashOf(&quot;abc&quot;)
</code></pre>
<p>Which is essentially the same as this, but more performant:</p>
<pre><code>SELECT * FROM `partitioned_table` WHERE unpartitioned_string_field = &quot;abc&quot;
</code></pre>
<p>Now the problem is, if I create user-defined function <code>HashOf</code> as SQL (just naive case-when, for example) it works just fine, the traffic reduces as expected. However, if I create the function as JavaScript (which is preferable here), then it has no effect on the traffic. The query works, but requires full table scan. Both SQL and JavaScript versions return exactly the same result, but JavaScript version doesn't prune partitions it seems like.</p>
<p>Am I missing something? Why JavaScript user-defined function does not prune partitions even though it returns the correct integer value for partitioned field?</p>",70317341,1,0,,2021. 12. 11 오전 11:50:15,,2021. 12. 11 오후 9:48:51,2021. 12. 11 오후 9:48:51,,5221944,,1837084,,1,0,google-bigquery,56
70358301,Default users for MySQL 8 installation on Linux,"<p>A fresh install of MySQL 8 on Linux yields the following default users for us:</p>
<pre><code>debian-sys-maint
mysql.infoschema
mysql.session
mysql.sys
root
</code></pre>
<p>After creating our own users, with the correct privileges, we are thinking of deleting all the users, other than root (i.e. <code>debian-sys-maint, mysql.infoschema, mysql.session and mysql.sys</code>).</p>
<hr />
<p><strong>Q)</strong> Is it okay to delete the default users, other than root, or will there be any unexpected surprises if we do that?</p>",70358403,1,0,,2021. 12. 15 오전 4:02:55,,2021. 12. 15 오전 4:35:18,,,,,5651468,,1,0,mysql,56
70036765,How to keep objects in node Neo4j,"<p>I have array of objects with this structure</p>
<pre><code>[{
 name:'here is name, which can have  punctuation marks ',
 value: 'here will be text '
},
{
 name:'here is name, which can have  punctuation marks ',
 value: 'here will be text '
}]
</code></pre>
<p>I am trying to find the best way to keep it in neo4j node. Since later I am going to search, filter ... on this data I don't want to keep hole object as string. Creating property by name object.name is not possible because I have punctuation marks. The ideal way would be to keep it as property, because I am going to use this data as property of node, but removing punctuation marks from name is not an option too.
Probably I could keep them in array</p>
<pre><code>['here is the name', ' and the second element of array is the text']
</code></pre>
<p>In this case the problem will be to give correct name to the property, which will have this array.
Another option could be to keep all data in list like this</p>
<pre><code>tabs: ['first name - first value', ' second name - second value']
</code></pre>
<p>but to search later I will need to use regex inside the list. this doesn't seem flexible.
So what would be the best way ?
Thank you in advance!</p>",70062586,2,0,,2021. 11. 19 오후 2:56:53,,2021. 11. 22 오전 11:48:35,,,,,6687545,,1,0,neo4j|cypher,57
70291205,"Finding duplicate records posted within a lapse of time, in PostgreSQL","<p>I'm trying to find duplicate rows in a large database (300,000 records). Here's an example of how it looks:</p>
<pre><code>| id |   title |    thedate |
|----|---------|------------|
|  1 | Title 1 | 2021-01-01 |
|  2 | Title 2 | 2020-12-24 |
|  3 | Title 3 | 2021-02-14 |
|  4 | Title 2 | 2021-05-01 |
|  5 | Title 1 | 2021-01-13 |
</code></pre>
<p>I found this excellent (i.e. fast) answer here: <a href=""https://stackoverflow.com/questions/14471179/find-duplicate-rows-with-postgresql/14471928#14471928"">Find duplicate rows with PostgreSQL</a></p>
<pre><code>-- adapted from @MatthewJ answering in https://stackoverflow.com/questions/14471179/find-duplicate-rows-with-postgresql/14471928#14471928
select * from (
  SELECT id, title, TO_DATE(thedate,'YYYY-MM-DD'),
  ROW_NUMBER() OVER(PARTITION BY title ORDER BY id asc) AS Row
  FROM table1
) dups
where 
dups.Row &gt; 1
</code></pre>
<p>Which I'm trying to use as a base to solve my specific problem: I need to find duplicates according to column values like in the example, but only for records posted within 15 days of each other (the date of record insertion in the column &quot;thedate&quot; in my DB).</p>
<p>I reproduced it in this fiddle <a href=""http://sqlfiddle.com/#!15/ae109/2"" rel=""nofollow noreferrer"">http://sqlfiddle.com/#!15/ae109/2</a>, where id 5 (same title as id 1, and posted within 15 days of each other) should be the only acceptable answer.</p>
<p>How would I implement that condition in the query?</p>",,2,0,,2021. 12. 9 오후 1:58:54,,2021. 12. 9 오후 3:13:42,2021. 12. 9 오후 2:18:01,,1208142,,1208142,,1,0,postgresql,57
70148839,SQL order groups of data,"<p>Here I have a data sample:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Title</th>
<th>Size</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>First</td>
<td>3</td>
<td>14</td>
</tr>
<tr>
<td>First</td>
<td>5</td>
<td>3</td>
</tr>
<tr>
<td>Second</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>First</td>
<td>2</td>
<td>10</td>
</tr>
<tr>
<td>Third</td>
<td>3</td>
<td>10</td>
</tr>
<tr>
<td>Second</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>Third</td>
<td>2</td>
<td>9</td>
</tr>
<tr>
<td>Third</td>
<td>5</td>
<td>11</td>
</tr>
<tr>
<td>Second</td>
<td>5</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>Now I want to sort the data with following rules:</p>
<p>Put the records with same title together: First followed by First, Second followed by Second.</p>
<p>Then for each group, order them by size;</p>
<p>For groups, order them in the sum of count of each group, like: sum of First is 14+3+10=27, Second is 5+4+4=13, Third is 10+9+11=30.</p>
<p>The result I want:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Title</th>
<th>Size</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>Second</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>Second</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>Second</td>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>First</td>
<td>2</td>
<td>10</td>
</tr>
<tr>
<td>First</td>
<td>3</td>
<td>14</td>
</tr>
<tr>
<td>First</td>
<td>5</td>
<td>3</td>
</tr>
<tr>
<td>Third</td>
<td>2</td>
<td>9</td>
</tr>
<tr>
<td>Third</td>
<td>3</td>
<td>10</td>
</tr>
<tr>
<td>Third</td>
<td>5</td>
<td>11</td>
</tr>
</tbody>
</table>
</div>",70148945,3,0,,2021. 11. 29 오전 1:15:11,,2021. 11. 29 오전 6:32:16,,,,,8883824,,1,2,sql|postgresql,58
70367344,PostgreSQL - Substring to nth occurence of character,"<p>I'm trying to run a query that returns the substring of a value up to the nth occurence of a particular character.</p>
<p>For example:</p>
<p>This is the value <code>abc|123|xyz098|password|xxxxx</code> and I'd like to get <code>abc|123|xyz098</code> So everything up to the third '|'. The number of characters between the delimiters changes, so I can't use a fixed index.</p>
<p>My thinking is to use SUBSTRING() with POSITION(). But I'm not having any success using it it to get to the nth occurence. Does anyone have any solutions?</p>",,2,0,,2021. 12. 15 오후 4:46:45,,2021. 12. 15 오후 4:53:49,,,,,14034750,,1,1,sql|postgresql,58
70079101,MySQL Date Format From Fri Jan 10 00:00:00 UTC 1992 to YYYY-MM-DD,"<p>I have a data &quot;Fri Jan 10 00:00:00 UTC 1992&quot; And I want to convert it to 1992-10-01.</p>
<p>I know how to do it with Javascript, but I have no idea how to do it with MySQL</p>
<p>I tried :
<code>DATE_FORMAT(column, '%d/%m/%Y')</code></p>
<p>But it's return null</p>",70079354,1,0,,2021. 11. 23 오전 10:21:38,,2021. 11. 23 오전 10:42:12,,,,,9976838,,1,0,mysql,59
70225546,Neo4j Cypher Match AND vs OR,"<p>I have the following Cypher query:</p>
<pre><code>MATCH (childD:Decision)
MATCH (childD)-[mandatoryCriteriaVote1:HAS_VOTE_ON]-&gt;(mandatoryCriteriaId1:Criterion {deleted: false}) WHERE mandatoryCriteriaId1.id = 1 AND mandatoryCriteriaVote1.avgVotesWeight &gt;= 1.0 WITH childD  
MATCH (childD)-[mandatoryCriteriaVote5:HAS_VOTE_ON]-&gt;(mandatoryCriteriaId5:Criterion {deleted: false}) WHERE mandatoryCriteriaId5.id = 5 AND mandatoryCriteriaVote5.avgVotesWeight &gt;= 3.0 WITH childD  
RETURN childD
</code></pre>
<p>Right now the following part pf the query:</p>
<pre><code>MATCH (childD)-[mandatoryCriteriaVote1:HAS_VOTE_ON]-&gt;(mandatoryCriteriaId1:Criterion {deleted: false}) WHERE mandatoryCriteriaId1.id = 1 AND mandatoryCriteriaVote1.avgVotesWeight &gt;= 1.0 WITH childD  
MATCH (childD)-[mandatoryCriteriaVote5:HAS_VOTE_ON]-&gt;(mandatoryCriteriaId5:Criterion {deleted: false}) WHERE mandatoryCriteriaId5.id = 5 AND mandatoryCriteriaVote5.avgVotesWeight &gt;= 3.0 WITH childD 
</code></pre>
<p>works as a logical operation <code>AND</code>. This means that both conditions must be met for <code>childD</code> in order to be returned to the query result.</p>
<p>How to rewrite this query in order to work like logical <code>OR</code>?</p>
<p>I mean - return all <code>chilD</code> which meet any of the following conditions:</p>
<pre><code>MATCH (childD)-[mandatoryCriteriaVote1:HAS_VOTE_ON]-&gt;(mandatoryCriteriaId1:Criterion {deleted: false}) WHERE mandatoryCriteriaId1.id = 1 AND mandatoryCriteriaVote1.avgVotesWeight &gt;= 1.0 WITH childD  
</code></pre>
<p>or</p>
<pre><code>MATCH (childD)-[mandatoryCriteriaVote5:HAS_VOTE_ON]-&gt;(mandatoryCriteriaId5:Criterion {deleted: false}) WHERE mandatoryCriteriaId5.id = 5 AND mandatoryCriteriaVote5.avgVotesWeight &gt;= 3.0 WITH childD 
</code></pre>",70227747,1,0,,2021. 12. 4 오후 12:24:44,,2021. 12. 6 오전 11:48:01,2021. 12. 6 오전 11:48:01,,6077914,,1219755,,1,0,neo4j|cypher,59
70283306,How can I iterate the row of table and append result of each iteration,"<p>Assume I have a product table which has fields id, color and size.
I am trying to cluster the product with the same color and size.</p>
<pre><code>select count(*) as product_count, color, size from product group by color, size
</code></pre>
<p>for each record in above table, I would like to get all the product ids with the same color&amp;size.</p>
<p>And I would like to save the result into a csv file.
The result will be sth like</p>
<pre><code>color red, size 9:
id1, id2, id3, id4
color yellow, size 8:
id6, id7
...
</code></pre>
<p>Is there a way to do this in postgreSQL?</p>",,1,0,,2021. 12. 9 오전 12:21:54,,2021. 12. 9 오전 6:35:03,,,,,13803863,,1,0,sql|postgresql,59
70146840,How to add a condition to count function in PostgreSQL,"<p>I have these tables Course, subscription,subscription_Course(A table that creates a relation between Course and subscription), and another with Student. I want to Select all the id_courses that have a subscription count higher than 1 but only want to count the subscriptions from different students. Example: If a Student Subscribes two times the same course I want to have a condition that enables the count function to not count more than one time in these cases</p>
<p>These are my tables:</p>
<p>Student:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">idStudent(pk)</th>
<th style=""text-align: center;"">cc</th>
<th style=""text-align: right;"">nif</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">30348507</td>
<td style=""text-align: right;"">232928185</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">30338507</td>
<td style=""text-align: right;"">231428185</td>
</tr>
<tr>
<td style=""text-align: left;"">3</td>
<td style=""text-align: center;"">30438507</td>
<td style=""text-align: right;"">233528185</td>
</tr>
<tr>
<td style=""text-align: left;"">4</td>
<td style=""text-align: center;"">30323231</td>
<td style=""text-align: right;"">3232132</td>
</tr>
</tbody>
</table>
</div>
<p>Subscription</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">idsubscription(pk)</th>
<th style=""text-align: center;"">Student(fk)</th>
<th style=""text-align: center;"">value_subscription</th>
<th style=""text-align: center;"">vouchercurso</th>
<th style=""text-align: right;"">date</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">100</td>
<td style=""text-align: center;"">null</td>
<td style=""text-align: right;"">2021-11-01</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">150</td>
<td style=""text-align: center;"">null</td>
<td style=""text-align: right;"">2021-12-11</td>
</tr>
<tr>
<td style=""text-align: left;"">3</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">160</td>
<td style=""text-align: center;"">null</td>
<td style=""text-align: right;"">2021-01-03</td>
</tr>
<tr>
<td style=""text-align: left;"">4</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">500</td>
<td style=""text-align: center;"">null</td>
<td style=""text-align: right;"">1996-11-07</td>
</tr>
<tr>
<td style=""text-align: left;"">5</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">900</td>
<td style=""text-align: center;"">null</td>
<td style=""text-align: right;"">2001-07-05</td>
</tr>
<tr>
<td style=""text-align: left;"">6</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">432</td>
<td style=""text-align: center;"">null</td>
<td style=""text-align: right;"">2021-05-09</td>
</tr>
</tbody>
</table>
</div>
<p>Subscription_Course</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">idsubscription(PK/fk)</th>
<th style=""text-align: center;"">id_Course(pk/fk)</th>
<th style=""text-align: right;"">Grade</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: right;"">9</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: right;"">15</td>
</tr>
<tr>
<td style=""text-align: left;"">3</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: right;"">12</td>
</tr>
<tr>
<td style=""text-align: left;"">6</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: right;"">9</td>
</tr>
<tr>
<td style=""text-align: left;"">5</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: right;"">16</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">6</td>
<td style=""text-align: right;"">20</td>
</tr>
<tr>
<td style=""text-align: left;"">6</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: right;"">4</td>
</tr>
</tbody>
</table>
</div>
<p>For example, when counting within my table Subscription_Course only the id_course:5 would have a count higher than 1 because 3 and 4 have a subscription from the same student.</p>
<p>I have this query for now:</p>
<pre><code>Select id_Course 
From Subscription_Course 
Group by id_Course 
Having Count (id_Course)&gt;1
</code></pre>
<p>I don't know what to do to add this condition to the count.</p>",70146943,2,0,,2021. 11. 28 오후 7:39:52,,2021. 11. 28 오후 8:22:02,2021. 11. 28 오후 8:22:02,,330315,,14879915,,1,1,sql|postgresql,60
70077151,Handle whitespace in Neo4j full text search,"<p>I need some help with full text search.</p>
<p>I have created an index like so:</p>
<pre><code>CALL db.index.fulltext.createNodeIndex(&quot;ReasourceName&quot;,[&quot;Resource&quot;],[&quot;name&quot;])
</code></pre>
<p>I can query it and get results:</p>
<pre><code>CALL db.index.fulltext.queryNodes('ReasourceName', 'bmc pumping station~') YIELD node, score 
WITH node, score 
RETURN node.name, score
limit 10;
</code></pre>
<p>output:</p>
<pre><code>╒════════════════════════════════╤══════════════════╕
│&quot;node.name&quot;                     │&quot;score&quot;           │
╞════════════════════════════════╪══════════════════╡
│&quot;BMC Pumping Station&quot;           │8.143752098083496 │
├────────────────────────────────┼──────────────────┤
│&quot;BMC Office&quot;                    │2.944127082824707 │
├────────────────────────────────┼──────────────────┤
│&quot;BMC Office&quot;                    │2.944127082824707 │
├────────────────────────────────┼──────────────────┤
│&quot;BMC Dispensary&quot;                │2.944127082824707 │
├────────────────────────────────┼──────────────────┤
│&quot;BMC Office&quot;                    │2.944127082824707 │
├────────────────────────────────┼──────────────────┤
│&quot;BMC Dispensary&quot;                │2.944127082824707 │
├────────────────────────────────┼──────────────────┤
│&quot;BMC Office&quot;                    │2.944127082824707 │
├────────────────────────────────┼──────────────────┤
│&quot;Police Station&quot;                │2.6569595336914062│
├────────────────────────────────┼──────────────────┤
│&quot;Momo Station&quot;                  │2.6569595336914062│
├────────────────────────────────┼──────────────────┤
│&quot;BMC Shikshak Bhavan&quot;           │2.515393018722534 │
└────────────────────────────────┴──────────────────┘
</code></pre>
<p>However it performs poorly if the input query differs in whitespace. For example, I would expect the query <code>bmcpumpingstation</code> or <code>bmcpumpingstation~</code> to have a similar result set, however it returns nothing.</p>
<p>There does not appear to be an analyzer that works on levenshtein distance.</p>
<p>(I also asked this question on <a href=""https://community.neo4j.com/t/handle-whitespace-in-full-text-search/47534"" rel=""nofollow noreferrer"">neo4j community</a> but didn't get a response)</p>",70083453,2,0,,2021. 11. 23 오전 7:51:12,,2021. 11. 23 오후 3:22:40,,,,,588734,,1,0,neo4j,61
70190425,Why PostgreSQL doesn't block transaction 1 if both are serializable?,"<p>I've been given this schedule:</p>
<p><a href=""https://i.stack.imgur.com/NpwPn.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/NpwPn.png"" alt=""enter image description here"" /></a></p>
<p>And I'm asked why Postrgre doesn't make T1 wait before executing the update.
I thought that sice both are serializable, T1 shouldn't do anything until T2 has commited since both are accessing the samne data. But apparently this isn't the case.</p>
<p>Can someone explain?</p>
<p>Thank you!</p>",70190930,1,0,,2021. 12. 1 오후 7:50:18,,2021. 12. 2 오전 5:14:29,,,,,9940776,,1,0,sql|postgresql,61
70219387,How to get query time and space information from BigQuery API,"<p>I'm going to build a web app and use BigQuery as a part of backend database, and I want to show the query cost information (ex. 1.8 sec elapsed, 264.9 MB processed) in the app.</p>
<p>I know we can check the BigQuery's query information inside GCP, but how do we I get that information from BigQuery API?</p>",70219564,1,0,,2021. 12. 3 오후 6:52:43,,2021. 12. 3 오후 7:08:42,,,,,7802905,,1,-1,google-bigquery,61
70191192,How can I structure a voting system in Neo4j?,"<p>I have nodes and relationships like this:</p>
<p><code>(u:User)</code></p>
<p><code>(t:Topic)-[r:HAS_FACT]-&gt;(t:Fact)</code></p>
<p><code>(t2:Topic)-[r2:HAS_FACT]-&gt;(t:Fact)</code></p>
<p>or, simplified:</p>
<p><code>(t:Topic)-[r:HAS_FACT]-&gt;(t:Fact)&lt;-[r2:HAS_FACT]-(t2:Topic)</code></p>
<p>Where users can upload <code>Facts</code> and tie them to <code>Topics</code>. Because of the craziness of the internet I'd like to add a voting system that enables users to support/validate/upvote facts, but they don't just upvote the Facts, they need to upvote the combination of Topic and Fact. So really I think they'd be upvoting r and r2?</p>
<p>Essentially I'd like to tie <code>User</code> nodes to some sort of voting system that is somehow tied to a combination of <code>Fact</code> and <code>Topic</code> nodes. I'm not against restructuring anything at this point, happy to do it if there is a more logical solution here!</p>
<p>Thank you in advance!</p>",70191766,1,0,,2021. 12. 1 오후 9:05:45,,2021. 12. 1 오후 10:02:07,,,,,1604072,,1,0,neo4j,62
70101327,Consecutive Numbers in SQL (Leetcode),"<p>The question is for Table: Logs</p>
<pre><code>+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| id          | int     |
| num         | varchar |
+-------------+---------+
</code></pre>
<p>id is the primary key for this table. Write an SQL query to find all numbers that appear at least three times consecutively.</p>
<p>My solution is the following, which Leetcode is not accepting. Kindly help me identify the error.</p>
<pre><code>with temp1 as
(select num, 
       id, 
       row_number () over (partition by num order by id) as r
from logs),  
temp2 as
(select (id-r) as rn, num, count(num)  
from temp1
group by rn, num
having count(num)&gt;=3)
select num as ConsecutiveNums
from temp
</code></pre>",,1,0,,2021. 11. 24 오후 6:37:26,,2021. 11. 24 오후 7:19:43,,,,,15059717,,1,0,mysql,63
70095085,How to calculate the number of messages within 10 seconds before the previous one?,"<p>I have a table with messages and I need to find chats where were two or more messages in period of 10 seconds. table</p>
<pre><code>id message_id time
1  1          2021.11.10 13:09:00
1  2          2021.11.10 13:09:01
1  3          2021.11.10 13:09:50
2  1          2021.11.10 15:18:00           
2  2          2021.11.10 15:20:00
3  1          2021.11.12 15:00:00
3  2          2021.11.12 15:10:00
3  2          2021.11.12 15:10:10
</code></pre>
<p>So the result looks like</p>
<pre><code>id
1
3
</code></pre>
<p>I can't come up with the idea how to group by a period or maybe it can be done other way?</p>
<pre><code>select id
from t
group by id, ?
having count(message_id) &gt; 1
</code></pre>",70096587,3,0,,2021. 11. 24 오전 11:15:17,,2021. 11. 25 오전 7:06:40,,,,,15974340,,1,0,postgresql,64
70259328,Return all the second highest valued rows SQL,"<p>Let's say I have a table called <code>bookings</code>, containing 3 columns: <code>hotelid</code>, <code>timestampOfBooking</code>and <code>numberOfGuests</code>.</p>
<p>How do I return all the dates on which the <strong>second</strong> highest beds were booked (the amount of beds booked is the same as the number of guests).</p>
<p>In other words, I'm looking for the dates on which the <strong>second</strong> maximum number of <code>numberOfGuests</code>occur. This means that in the event of a tie (where there is more than 1 date on which the described condition applies), it should return all those dates. In the event that all the dates have exactly the same <code>numberOfGuests</code> the query should return nothing.</p>
<p>If possible, I would only like to have one column in the query result that contains those specific dates.</p>
<p>Example:</p>
<pre><code>hotelid      timestampOfBooking      numberOfGuests 
  11             22/11/2021                 2
  34             23/11/2021                 2
  30             23/11/2021                 5
  19             24/11/2021                 7
  8              25/11/2021                 12
  34             25/11/2021                 5
</code></pre>
<p>In this case two dates should be in the result: 23/11/2021 and 24/11/2021 as they both had 7 <code>numberOfGuests</code>. The max <code>numberOfGuests</code> here is 17 (occurs on 25/11/2021) and 7 is the <strong>second</strong> highest, explaining why 23/11/2021 <code>(2 + 5)</code> and 24/11/2021 <code>(7)</code> are returned. The final result should look like this:</p>
<pre><code>dates
23/11/2021
24/11/2021
</code></pre>",70259406,1,0,,2021. 12. 7 오전 11:27:42,,2021. 12. 7 오후 2:03:35,,,,,17606103,,1,1,sql|postgresql,64
70036200,Copying data in two tables with foreign keys,"<p>I have two tables, reviews and grade.</p>
<p>Reviews table has</p>
<blockquote>
<p>id_review (primary key), id_lang, email, text etc.</p>
</blockquote>
<p>Example</p>
<pre><code>1, 2, email@email.com, test text
2, 2, email@email.com, test text
4, 2, email@email.com, test text
</code></pre>
<p>Grade table has</p>
<blockquote>
<p>id_review (primary/foreign key), id_criterion, grade</p>
</blockquote>
<pre><code>1, 3, 5.00
1, 1, 4.00
2, 3, 3.00
2, 1, 5.00
4, 2, 3.00
</code></pre>
<p>I need to copy all the reviews with lang id 2, change the text and the lang id to 1 (this I can do manually).
But as the id_review changes with the copied reviews, I need to create new rows on the grade table, too. Is there a way to make sure that the foreign keys are matched with the copied reviews, too?</p>
<p>I tried to do it the old fashioned way with copy/paste on csv but as some reviews are removed from the reviews table and some reviews have differences in id_criterion count, it's very hard to do for a large table.</p>
<p>Or should I try to edit the table to allow the reviews table to have distinct values for id_lang with the same id_review?</p>",,2,0,,2021. 11. 19 오후 2:14:10,,2021. 11. 19 오후 4:05:34,,,,,6441841,,1,0,mysql,65
70242717,casting issue on Temporary table,"<p>I got error like:</p>
<blockquote>
<p>1292 Truncated incorrect datetime value: '2021-11-30T18:30:00Z' 1292 Truncated incorrect datetime value: '2021-12-31T18:29:59Z'</p>
</blockquote>
<p>I have just simply created one Temporary Table inside the Temporary table I have to get data from the date condition base. I have cast to date but somehow not proper work but I have replaced to <strong>'2021-12-31T18:29:59Z'</strong> to <strong>'2021-12-31'</strong> so it's working properly.</p>
<p><strong>CREATED column type:</strong> <em>DateTime</em></p>
<p><strong>I want to cast this formate because I have got this formate on the front side.</strong></p>
<p>Query:</p>
<pre><code>DROP TEMPORARY TABLE IF EXISTS TEMPDATA;
CREATE TEMPORARY TABLE IF NOT EXISTS TEMPDATA AS (
SELECT DISTINCT S.ID `ID`,S.name name FROM Student S
WHERE  ( CAST(S.CREATED AS DATE) BETWEEN CAST('2021-11-30T18:30:00Z' AS DATE) AND CAST('2021-12-31T18:29:59Z' AS DATE) )
ORDER BY  name
asc limit 0,50)
</code></pre>
<p><strong>Without Temprory table Query: Work Perfect</strong></p>
<pre><code>SELECT DISTINCT S.ID `ID`,S.name name FROM Student S
    WHERE  ( CAST(S.CREATED AS DATE) BETWEEN CAST('2021-11-30T18:30:00Z' AS DATE) AND CAST('2021-12-31T18:29:59Z' AS DATE) )
    ORDER BY  name
    asc limit 0,50
</code></pre>",,0,0,,2021. 12. 6 오전 8:35:29,,2021. 12. 6 오전 9:31:30,2021. 12. 6 오전 9:31:30,,2873907,,2873907,,1,2,mysql,66
70210904,How to use SET command in MySQL instead of SELECT statement for storing the value in STORED PROCEDURE (Version : 6.0.11-alpha-community),"<p>I want to store the one table data row 'Id' into variable and I used the SELECT statement for that in stored procedure.</p>
<p>EX:</p>
<pre><code>  SET @IRid := 1;
  SET @iCID := 0;

 SELECT @iCID := Id FROM tbl_custidData WHERE RID = @IRid;
</code></pre>
<p>The Id value is storing successfully into the @iCID</p>
<p>Here My question is, can I use SET command instead of SELECT statement to store the one table id value into variable ?</p>
<p>I tried this way but not working ( directly assigning the value into variable )</p>
<pre><code>  SET @IRid := 1;
  SET @iCID := 0;

 SET @iCID := Id FROM tbl_custidData WHERE RID = @IRid;
</code></pre>
<p>And also I tried like this (declaring the variable and assigning the value) :</p>
<pre><code>        DECLARE IRid,iCID INT;
        SET IRid =1;
        SET iCID = 0;

 SET iCID := Id FROM tbl_custidData WHERE RID = IRid;
</code></pre>
<p>The above two ways are not working</p>
<p>Is there any possibility in MySQL for the use of SET command to assign the table id value, like how I used the SELECT statement.</p>
<p>I'm new to MYSQL .</p>
<p>Give me your best solution for my further good steps.</p>",70211214,1,0,,2021. 12. 3 오전 7:36:15,,2021. 12. 3 오전 8:07:37,,,,,16694344,,1,0,mysql,67
70037235,Can MYSQL tabulate results by the search values used within an 'IN' statement?,"<p>Consider the below MYSQL select query:</p>
<pre><code>SELECT  software,
        count(*) 
FROM allmydata 
WHERE software IN  ('Version 1','Version 2','Version 3')
GROUP BY software;
</code></pre>
<p>With the above query, MYSQL will only show the software and count for matches within the database. If there are no results for value 'Version 3' in software, it won't appear in the output table.</p>
<p>Is there a way to have the counts for each search value in a table, even if the count is zero?</p>
<p>Ideal output would be:</p>
<pre><code>+-----------+-------+
| Software  | Count |
+-----------+-------+
| Version 1 |     5 |
| Version 2 |     3 |
| Version 3 |     0 |
+-----------+-------+
</code></pre>
<p>My real-world application is slightly more complicated than this but the example above was the simplest way I could explain what I need and I figured an answer will really help me towards reaching my goal.</p>
<p>Thanks</p>",,1,0,,2021. 11. 19 오후 3:28:33,,2021. 11. 19 오후 4:51:34,2021. 11. 19 오후 4:18:24,,16461952,,17457994,,1,1,mysql,68
70115043,Update a table's foreign key that is duplicate from a specific tuple in other table with the right one,"<p>Database :</p>
<p><strong>Car table</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>serialnumber</th>
<th>plate</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>AA</td>
<td>11111</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>AA</td>
<td>11111</td>
<td>Ford</td>
</tr>
<tr>
<td>3</td>
<td>BB</td>
<td>22222</td>
<td>Tesla</td>
</tr>
<tr>
<td>4</td>
<td>BB</td>
<td>22222</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p><strong>User table</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>car_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1 linked to a duplicate without name)</td>
</tr>
<tr>
<td>2</td>
<td>1 linked to a duplicate without name)</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Expected user table after query</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>car_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2 (now linked to duplicate with name)</td>
</tr>
<tr>
<td>2</td>
<td>2 (now linked to duplicate with name)</td>
</tr>
<tr>
<td>3</td>
<td>3 (linked to a duplicate but has name so doesn't change)</td>
</tr>
</tbody>
</table>
</div>
<p>The tuple (<code>serialnumber, plate</code>) has duplicates, and amongst those duplicates, one has a name, one doesn't.
Assume that duplicates are at a maximum of 2.
One user can only be affected to one car</p>
<p>I'm trying to reaffect all users that are linked to <strong>a duplicated car with no name</strong>(identified by <strong>serialnumber, plate</strong>) to the same car <strong>WITH</strong> a name.</p>
<p>My query :</p>
<pre class=""lang-sql prettyprint-override""><code>    UPDATE user u
    SET car_id = c.id
    FROM car c
    WHERE EXISTS(SELECT 1
                 FROM (SELECT *,
                              count(*)
                              OVER
                                  (PARTITION BY
                                  serialnumber,
                                  plate
                                  ) AS count
                       FROM car) c2
                 WHERE c2.count &gt; 1
                   AND c2.serialnumber = c.serialnumber
                   AND c2.plate = c.plate)
    AND c.name &lt;&gt; ''; 
</code></pre>
<p>I had only one duplicate and tested with a <code>WHERE c.id=...</code> clause and it worked, rerunning it after removing clause affected 300+ rows and messed up my data, so obviously something went wrong (unless reaffecting same value to a column counts?), any idea ?</p>
<p><strong>Thanks for your help</strong></p>",70117831,1,0,,2021. 11. 25 오후 5:14:08,,2021. 11. 25 오후 10:21:00,2021. 11. 25 오후 5:20:05,,2802552,,2802552,,1,0,sql|postgresql,68
70245150,MySQL Row Locking with Unique Index,"<p>I  have a users table (id, username, password, last_login) with id as primary key and username as unique index. When I use <code>SELECT * FROM users WHERE username = 'Foo' FOR SHARE</code> it works as I expected (locking the row until COMMIT). But if I use <code>SELECT id FROM users WHERE username = 'Foo' FOR SHARE</code> it does not lock the row. I have to at least select one column that is not primary key or unique index to lock the row. Isn't the row supposed get locked no matter which columns are selected?</p>",,0,0,,2021. 12. 6 오전 11:59:33,,2021. 12. 6 오전 11:59:33,,,,,8993735,,1,0,mysql,68
70107414,Extract Dynamic keys from json in BQ,"<p>I have a json like :</p>
<pre><code>&quot;z&quot;: {&quot;12345&quot;: &quot;xyz&quot;, &quot;56789&quot;: &quot;abc&quot;, &quot;23456&quot;: &quot;jkl&quot;},
&quot;z&quot;: {&quot;12345&quot;: &quot;xyz&quot;, &quot;56789&quot;: &quot;abc&quot;}
</code></pre>
<p>where the keys are dynamic.</p>
<p>I want to extract the keys as well as their values and also the number of keys are not fixed in z. It can be 1/2/3/4/5 or even null. I have looked into other threads but they're different use cases. How to extract this via JSON_EXTRACT ?</p>",70115018,1,0,,2021. 11. 25 오전 7:46:05,,2021. 11. 26 오후 5:09:28,,,,,4780034,,1,1,google-bigquery,324
70099249,SQL return all rows and number of references to another table,"<p>Given these two tables</p>
<pre><code>A                 B
id                id   a_id
----              ---------
1                 1    1
2                 2    1
3                 3    2
                  4    2
                  5    2
                  6    3
                  7    NULL
                  8    NULL
</code></pre>
<p>I need to return all IDs from <code>B</code> and for each ID return if there is more than one reference to <code>A</code>.
i.e.</p>
<pre><code>result
B.id  more_than_one_reference
-----------------------------
1     true
2     true
3     true
4     true
5     true
6     false
7     false
8     false
</code></pre>
<p>For <code>B.id = 1,2</code> I need to return <code>true</code> because there are two rows in <code>B</code> with <code>a_id = 1</code>.</p>
<p>For <code>B.id = 3,4,5</code> I need to return <code>true</code> because there are three rows in <code>B</code> with <code>a_id = 2</code>.</p>
<p>For <code>B.id = 6</code> I need to return <code>false</code> because there is one row in <code>B</code> with <code>a_id = 3</code>.</p>
<p>For <code>B.id = 7,8</code> I need to return <code>false</code> because a corresponding <code>a_id</code> value is <code>NULL</code>.</p>
<p>I can see that for my purpose, simple <code>COUNT(B.id) &gt; 1</code> check (for a given a_id) would be enough but I am unable to join this result to a <code>SELECT B.id FROM B</code> query.</p>
<p><strong>EDIT:</strong>
I am also posting my own solution, since the accepted one wasn't working correctly when used with where clause.</p>
<pre><code>SELECT B.id, COALESCE(S1.more_than_one_reference, false)
FROM b B
         LEFT JOIN (SELECT B.a_id, COUNT(B.a_id) &gt; 1 more_than_one_reference FROM b B GROUP BY B.a_id) S1
                   ON B.a_id = S1.a_id;
</code></pre>",70099331,3,0,,2021. 11. 24 오후 4:02:52,,2021. 11. 26 오후 3:22:48,2021. 11. 26 오후 3:22:48,,17335839,,17335839,,1,1,sql|postgresql,69
70257189,Metricbeat gcp module to capture bigquery metrics is not working as expected,"<p>I have added bigquery metrics configuration in modules.d/gcp.yml file</p>
<p>But getting an error below</p>
<p>&quot;2021-12-06T09:51:10.206Z        ERROR   [gcp.metrics]   metrics/metricset.go:294        bigquery.googleapis.com/storage/table_count&quot; metric descriptor is empty, this metric will not be collected</p>
<p>Below is the code which I have used</p>
<ul>
<li>module: gcp
region: &quot;us-central1&quot;
metricsets:
<ul>
<li>metrics
project_id: &quot;ProjectName&quot;
credentials_file_path: &quot;/root/xyz.json&quot;
exclude_labels: false
period: 1h
metrics:</li>
<li>aligner: ALIGN_NONE
service: bigquery
service_metric_prefix: bigquery.googleapis.com/
metric_types:
<ul>
<li>&quot;bigquery.googleapis.com/storage/table_count&quot;</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Let me know if there is any changes needed in code.</p>
<p>I have also tried extracting compute and billing metrics . We can see the column names populating in Kibana discovery filter area , but we do not have any data available</p>
<p>Please find the code given below</p>
<ul>
<li>module: gcp
region: &quot;us-central1&quot;
metricsets:
<ul>
<li>metrics
project_id: &quot;projectname&quot;
credentials_file_path: &quot;/root/xyz.json&quot;
exclude_labels: false
period: 1
metrics:</li>
<li>aligner: ALIGN_NONE
service: compute
metric_types:
<ul>
<li>&quot;instance/cpu/reserved_cores&quot;</li>
<li>&quot;instance/cpu/usage_time&quot;</li>
<li>&quot;instance/cpu/utilization&quot;</li>
<li>&quot;instance/uptime&quot;</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Thanks</p>",,1,0,,2021. 12. 7 오전 8:47:32,,2021. 12. 23 오후 6:04:42,,,,,17611990,,1,0,google-bigquery,69
70333119,get time series in 8 hours of interval,"<p>I am generating one time-series from using the below query.</p>
<pre><code>SELECT * from (
    select * from generate_series(
        date_trunc('hour', '2021-11-13 10:01:38'::timestamp),
        '2021-12-13 10:01:38'::timestamp,
        concat(480, ' minutes')::interval) as t(time_ent)) as t
    where t.&quot;time_ent&quot; between '2021-11-13 10:01:38'::timestamp and '2021-12-13 10:01:38'::timestamp
</code></pre>
<p>and it will give me output like below.</p>
<pre><code>2021-11-13 18:00:00.000
2021-11-14 02:00:00.000
2021-11-14 10:00:00.000
2021-11-14 18:00:00.000
2021-11-15 02:00:00.000
</code></pre>
<p>but I need output like.</p>
<pre><code>2021-11-13 16:00:00.000
2021-11-14 00:00:00.000
2021-11-14 08:00:00.000
2021-11-14 16:00:00.000
2021-11-15 00:00:00.000
</code></pre>
<p>currently, the time series hours depend upon the timestamp that I pass. in above it gives me hours like 02,10,18...but I want the hours like 00,08,16...hours should not depend on the time I passed in query. I tried many things but not any success.</p>",,1,0,,2021. 12. 13 오전 10:23:29,,2021. 12. 13 오전 11:34:49,,,,,4710899,,1,0,sql|postgresql,70
70157863,Statistics are lost after failover,"<p>Following a failover, the statistics are reset to 0 on the new primary in the pg_stat_user_tables view.</p>
<pre><code> relname | n_tup_ins | n_tup_upd | n_tup_del | n_live_tup | n_dead_tup | last_autovacuum | last_autoanalyze | n_mod_since_analyze
---------+-----------+-----------+-----------+------------+------------+-----------------+------------------+---------------------
 foo     |         0 |         0 |         0 |          0 |          0 |                 |                  |                   0
(1 row)
</code></pre>
<p>If modifications are made on a tables (update/delete/insert) and the vacuum was not executed before the FO, the planner's statistics won't be up to date.
Is there an easy way to deal with this problem?</p>",70160101,1,0,,2021. 11. 29 오후 4:20:16,,2021. 11. 29 오후 7:09:57,,,,,7069611,,1,0,postgresql,72
70216235,How to aggregate across elements in list in neo4j,"<p>I'm a complete beginner to neo4j and cypher queries. I have a scenario where two Person nodes <code>James</code> and <code>Karen</code> have 3 nodes in between them. The relationships between all nodes have a property called <code>weight</code>:
<a href=""https://i.stack.imgur.com/Lej5x.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Lej5x.png"" alt=""enter image description here"" /></a></p>
<pre><code>CREATE 
(j:Person { name: &quot;James&quot; }),
(m:Person { name: &quot;Mary&quot; }),
(d:Person { name: &quot;David&quot; }),
(e:Person { name: &quot;Emily&quot; }),
(t:Person { name: &quot;Todd&quot; }),
(x:Person { name: &quot;Xavier&quot; }),
(k:Person { name: &quot;Karen&quot; }),

(j)-[:KNOWS{weight: 32}]-&gt;(m),
(j)-[:KNOWS{weight: 10}]-&gt;(d),
(j)-[:KNOWS{weight: 50}]-&gt;(e),
(j)-[:KNOWS{weight: 86}]-&gt;(t),
(j)-[:KNOWS{weight: 86}]-&gt;(x),

(d)-[:KNOWS{weight: 12}]-&gt;(e),

(k)-[:KNOWS{weight: 76}]-&gt;(e),
(k)-[:KNOWS{weight: 8}]-&gt;(t),
(k)-[:KNOWS{weight: 2}]-&gt;(x)
</code></pre>
<p>I want to rank these people who know <code>James</code> and <code>Karen</code> using a calculated score from the property of the relationship, which is defined as <code>(x - min(x)/max(x) - min(x)</code>, some form of normalization i.e.</p>
<pre><code>MATCH (:Person{name:'James'})-[:KNOWS]-&gt;(:Person)&lt;-[r1:KNOWS]-(:Person{name: 'Karen'})
WITH collect(r1.weight) as a
WITH  apoc.coll.min(a) as min_val, apoc.coll.max(a) as max_val
MATCH (:Person{name:'James'})-[:KNOWS]-&gt;(p:Person)&lt;-[r2:KNOWS]-(:Person{name: 'Karen'})
WITH p, r2, (r2.weight - min_val)/(max_val - min_val) as score
RETURN p, r2, score
ORDER BY score DESC

╒═════════════════╤═════════════╤═══════╕
│&quot;p&quot;              │&quot;r2&quot;         │&quot;score&quot;│
╞═════════════════╪═════════════╪═══════╡
│{&quot;name&quot;:&quot;Emily&quot;} │{&quot;weight&quot;:76}│1      │
├─────────────────┼─────────────┼───────┤
│{&quot;name&quot;:&quot;Xavier&quot;}│{&quot;weight&quot;:2} │0      │
├─────────────────┼─────────────┼───────┤
│{&quot;name&quot;:&quot;Todd&quot;}  │{&quot;weight&quot;:8} │0      │
└─────────────────┴─────────────┴───────┘
</code></pre>
<p>Is there a better way to do this without having to repeat the process of finding the matching nodes i.e.
<code>MATCH (:Person{name:'James'})-[:KNOWS]-&gt;(p:Person)&lt;-[r2:KNOWS]-(:Person{name: 'Karen'})</code></p>
<p><strong>UPDATE</strong>
This is another attempt</p>
<pre><code>MATCH (:Person{name:'James'})-[:KNOWS]-&gt;(p:Person)&lt;-[r:KNOWS]-(:Person{name: 'Karen'})
WITH r, apoc.map.fromLists([&quot;name&quot;, &quot;r_weight&quot;],[p.name, r.weight]) as person
WITH collect(person) as people, collect(r.weight) as w
WITH people, apoc.coll.min(w) as min_val, apoc.coll.max(w) as max_val 
UNWIND people as pp
WITH pp, (pp.r_weight - min_val)/(max_val - min_val) as score
RETURN pp, score
ORDER BY score DESC

╒══════════════════════════════╤═══════╕
│&quot;pp&quot;                          │&quot;score&quot;│
╞══════════════════════════════╪═══════╡
│{&quot;name&quot;:&quot;Emily&quot;,&quot;r_weight&quot;:76}│1      │
├──────────────────────────────┼───────┤
│{&quot;name&quot;:&quot;Xavier&quot;,&quot;r_weight&quot;:2}│0      │
├──────────────────────────────┼───────┤
│{&quot;name&quot;:&quot;Todd&quot;,&quot;r_weight&quot;:8}  │0      │
└──────────────────────────────┴───────┘
</code></pre>
<p>Any cleaner approach than my crude way?</p>",70234375,1,0,,2021. 12. 3 오후 2:52:39,1,2021. 12. 5 오후 12:38:32,2021. 12. 4 오후 12:19:06,,10277323,,10277323,,1,1,neo4j|cypher,72
70251444,Data model and queries for rentals and customers using SQL / PostgreSQL,"<p>I got similar data model as on picture below, and wanted to know following things (I am trying to learn PostgreSQL so I would appreciate statements in it):</p>
<ol>
<li>customers who have a Rent starting in the last XY days</li>
<li>customers who have more than XY rent in the category ‘category’ starting in the last XY months</li>
<li>For each day of June 2019, how many Rs are active on a given day ?(R is active between its start/return date). *Date Series</li>
</ol>
<p>I am not so experienced in SQL statements but wanted to get some inputs...</p>
<p>Maybe solution to the 3rd:</p>
<pre><code>SELECT 
   date_trunc('day', rental_date) m,
   count (customer_id)
from rental
where rental_date &gt;= '2021-11-01'
and   return_date &lt; '2021-12-01'
group by 
m
order by
m;
</code></pre>",70252520,1,0,,2021. 12. 6 오후 8:18:56,,2021. 12. 7 오후 2:01:33,2021. 12. 7 오후 2:01:33,,11749036,,11749036,,1,0,sql|postgresql,72
70082179,Return max value of each partition,"<p>I have this table:</p>
<pre><code>create table some_date
(
    dt date,
    t time without time zone,
    price numeric   
)
</code></pre>
<p>This is a sample data set:</p>
<pre><code>insert into some_date 
values ('2021-11-17','06:39:37.7663',2),
('2021-11-17','06:39:38.7663',5),
('2021-11-17','06:39:39.7663',0),
('2021-11-17','06:39:40.7663',9),
('2021-11-17','06:39:41.7663',3),
('2021-11-17','06:39:42.7663',7),
('2021-11-17','06:39:43.7663',5),
('2021-11-17','06:39:44.7663',6),
('2021-11-17','06:39:45.7663',3),
('2021-11-17','06:39:46.7663',1),
('2021-11-17','06:39:47.7663',2),
('2021-11-17','06:39:48.7663',5),
('2021-11-17','06:39:49.7663',8),
('2021-11-17','06:39:50.7663',9),
('2021-11-17','06:39:51.7663',4),
('2021-11-17','06:39:52.7663',5),
('2021-11-17','06:39:53.7663',6),
('2021-11-17','06:39:54.7663',6),
('2021-11-17','06:39:55.7663',7),
('2021-11-17','06:39:56.7663',8),
('2021-11-17','06:39:57.7663',9),
('2021-11-17','06:39:58.7663',7),
('2021-11-17','06:39:59.7663',8),
('2021-11-17','06:40:00.7663',9),
('2021-11-17','06:40:01.7663',1),
('2021-11-17','06:40:00.7663',9),
('2021-11-17','06:40:01.7663',1),
('2021-11-17','06:40:02.7663',9),
('2021-11-17','06:40:03.7663',1),
('2021-11-17','06:40:04.7663',9),
('2021-11-17','06:40:05.7663',1),
('2021-11-17','06:40:06.7663',9),
('2021-11-17','06:40:07.7663',1),
('2021-11-17','06:40:08.7663',9),
('2021-11-17','06:40:09.7663',1),
('2021-11-17','06:40:10.7663',9),
('2021-11-17','06:40:11.7663',1),
('2021-11-17','06:40:12.7663',9),
('2021-11-17','06:40:13.7663',1),
('2021-11-17','06:40:14.7663',9),
('2021-11-17','06:40:15.7663',1),
('2021-11-17','06:40:16.7663',9),
('2021-11-17','06:40:17.7663',1),
('2021-11-17','06:40:18.7663',9),
('2021-11-17','06:40:19.7663',1),
('2021-11-17','06:40:20.7663',9),
('2021-11-17','06:40:21.7663',1),
('2021-11-17','06:40:22.7663',9),
('2021-11-17','06:40:23.7663',1),
('2021-11-17','06:40:24.7663',9),
('2021-11-17','06:40:25.7663',1),
('2021-11-17','06:40:26.7663',9),
('2021-11-17','06:40:27.7663',1),
('2021-11-17','06:40:28.7663',9),
('2021-11-17','06:40:29.7663',1),
('2021-11-17','06:40:30.7663',9),
('2021-11-17','06:40:31.7663',1),
('2021-11-17','06:40:32.7663',9),
('2021-11-17','06:40:33.7663',1),
('2021-11-17','06:40:34.7663',9),
('2021-11-17','06:40:35.7663',1);
</code></pre>
<p>I want to query data per min like max, min ..., so I use <code>row_number()</code> and partition to set group by a minute</p>
<pre><code>with t as (
    select * , extract(hour from t) as h,  extract(minute from t) as m
    from  price
), tt as (
select * , row_number() over(partition by h,m order by t) as t_sequence
from t)
</code></pre>
<p>and now I want to query by this 'partition', how to do it?</p>",,1,0,,2021. 11. 23 오후 1:54:35,,2021. 12. 24 오전 8:54:00,2021. 12. 24 오전 8:54:00,,13302,,6345323,,1,0,postgresql,73
70111525,SQL aggregate data based on a single column,"<p>i have to aggregate data in my SQL query (DISTINCT) based on a single column in this kind of fashion:</p>
<p>original table:</p>
<pre><code>id|var_val|id_res_id|var_id_id|device_id|var_val_conv
11|126    |3864     |36       |abc123   |1.21
10|136    |3764     |36       |abc123   |1.51
9 |115    |3582     |35       |abc123   |4.41
8 |143    |2464     |36       |abc123   |8.81
7 |226    |1844     |35       |abc123   |9.21
6 |12     |3364     |34       |abc123   |11.7
</code></pre>
<p>so i would to aggregate data based on column var_id_id having just first data fo every different values of var_id_id as in example:</p>
<p>result:</p>
<pre><code>id|var_val|id_res_id|var_id_id|device_id|var_val_conv
11|126    |3864     |36       |abc123   |1.21
9 |115    |3582     |35       |abc123   |4.41
6 |12     |3364     |34       |abc123   |11.7
</code></pre>
<p>i try this query but i don't get what i would:</p>
<pre><code>SELECT VR.id, var_val, id_res_id, var_id_id, AR.device_id, var_val_conv
    FROM public.api_site_varsresults as VR,
    public.modbus_modbusvariable as MV,
    public.api_site_results as AR
    WHERE VR.var_id_id = MV.id AND VR.id_res_id = AR.id
    AND AR.device_id = 'abc123'
    GROUP BY VR.id, var_id_id, AR.device_id
    ORDER BY VR.id DESC;
</code></pre>
<p>How can i group for var_id_id having just first line encountred for every result?</p>
<p>So many thanks in advance</p>",,2,0,,2021. 11. 25 오후 12:56:58,,2021. 11. 25 오후 1:28:35,,,,,7662496,,1,0,sql|postgresql,78
70206680,"Creating a SQL movie database. Do I really a ""genre_linker"" table for the relationship between ""movies"" and ""genres""","<p>I am building an sql movie database for all the dvds and blurays I own. I currently have the following tables...</p>
<p>movies(id(primary key), title, year, format, runtime)
people(id(primary key), gender, dob, dod, name)
credits(person_id(foreign key), movie_id(foreign key), job, role)
genres(id(primary key), genre)
movie_genres(movie_id(foreign key), genre_id(foreign key))</p>
<p>My question is do I need/is there a logical benefit i.e. memory management etc. to having 2 separate tables for the genres or would it be better to just have 1 say like....</p>
<p>genres(movie_id(foreign key), genres)</p>",,2,0,,2021. 12. 2 오후 9:27:09,,2021. 12. 3 오전 12:59:16,,,,,9302556,,1,0,mysql,80
70291992,MySql count () to return 0 if no records found,"<p>I try to do a COUNT in a table where possibly there is no record to count, LEFT JOIN, RIGHT JOIN, none of them work, what happens?</p>
<p>If there are no records, is it possible for COUNT to say zero?</p>
<pre><code>CREATE TABLE clase (
  cla_id INTEGER,
  cla_name varchar(5) NOT NULL
) 


CREATE TABLE products (
 product_type int,
 product varchar(10),
 cla_name varchar(5)
) 

insert into clase (cla_id,cla_name ) values
(1,'A'),
(2,'B'),
(3,'C'),
(4,'D')


insert into products (product_type,product,cla_name ) values
(29,'P0001','A'),
(29,'P0002','A'),
(29,'P0003','A'),
(29,'P0004','A'),
(29,'P0005','A'),
(29,'P0006','A'),
(29,'P0007','B'),
(29,'P0008','B'),
(29,'P0009','B'),
(29,'P0010','C'),
(29,'P0011','C'),
(29,'P0012','C'),
(29,'P0013','B'),
(29,'P0014','B')
</code></pre>
<p>this is the simple query I am using</p>
<pre><code>SELECT c.cla_name, COUNT(p.cla_name)
FROM clase c
LEFT JOIN products p ON p.cla_name = c.cla_name
WHERE p.product_type = 29
GROUP BY c.cla_name




The result:
cla_name    COUNT(p.cla_name)
A                6
B                5
C                3
</code></pre>
<p>The result expected:</p>
<pre><code>cla_name    COUNT(p.cla_name)
A                6
B                5
C                3
D                0
</code></pre>
<p><a href=""https://dbfiddle.uk/?rdbms=mysql_5.5&amp;fiddle=9ff6619ebfce455fb624853e4c715451"" rel=""nofollow noreferrer"">See the Fiddle Here</a></p>",70292056,1,0,,2021. 12. 9 오후 2:56:08,,2021. 12. 9 오후 3:06:41,,,,,11513437,,1,-1,mysql,82
70089099,creating new table from multiple tables,"<p>Hi I'm trying to create a new lookup tables in which I need all columns that have date values from all the tables in a particular schema. When I'm trying to UNION the column, I am getting only the result of 1st select and seems like union is not working here. How can I get all these columns in my new table?
Here's my code for reference:</p>
<pre><code>CREATE TABLE datetime_test AS (
SELECT col1, null as col2, null as col3 from table1
union all 
select col1, col2, col3 from table2
union all 
select col1, col2, null as col3 from table3 );
</code></pre>",,1,0,,2021. 11. 23 오후 11:35:25,,2021. 11. 24 오전 6:36:29,2021. 11. 24 오전 6:26:08,,16110118,,16110118,,1,2,mysql,83
70368186,Transpose rows to column in postgresql,"<pre class=""lang-sql prettyprint-override""><code>select distinct column_name
from information_schema.columns
where table_name like 'fea_var%';
</code></pre>
<p>This query gives me a list of 1222 distinct columns and I want to create one base table which has all the 1222 rows from this query as columns. fea_var% tables are just empty tables with columns.<br />
So, the output should be an empty table with those 1222 columns.</p>",,1,0,,2021. 12. 15 오후 5:50:24,,2021. 12. 17 오후 4:51:30,2021. 12. 17 오후 4:51:30,,124486,,14751861,,1,1,postgresql,83
70152849,"Postgresql 12: pg_ctl: PID file ""/var/lib/postgresql/12/main/postmaster.pid"" does not exist","<p>after updates on our servers postgresql wont run properly (not listening, and actualy not running at all).
system: Debian 10 (4.19.0-18-amd64 #1 SMP Debian 4.19.208-1 (2021-09-29) x86_64 GNU/Linux)</p>
<p>pg_clusterts output:</p>
<pre><code>Ver Cluster Port Status Owner    Data directory              Log file
12  main    5432 down   postgres /var/lib/postgresql/12/main /var/log/postgresql/postgresql-12-main.log
</code></pre>
<p>log file:</p>
<pre><code>postgres@franklin:/etc/postgresql/12/main$ /usr/lib/postgresql/12/bin/pg_ctl restart -D /var/lib/postgresql/12/main
pg_ctl: PID file &quot;/var/lib/postgresql/12/main/postmaster.pid&quot; does not exist
Is server running?
trying to start server anyway
waiting for server to start....2021-11-29 10:45:29.443 CET [5458] LOG:  starting PostgreSQL 12.8 (Debian 12.8-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit
2021-11-29 10:45:29.443 CET [5458] LOG:  listening on IPv4 address &quot;0.0.0.0&quot;, port 5432
2021-11-29 10:45:29.443 CET [5458] LOG:  listening on IPv6 address &quot;::&quot;, port 5432
2021-11-29 10:45:29.448 CET [5458] LOG:  listening on Unix socket &quot;/var/run/postgresql.s.PGSQL.5432&quot;
2021-11-29 10:45:29.471 CET [5459] LOG:  database system was shut down at 2021-11-25 11:28:00 CET
2021-11-29 10:45:29.471 CET [5459] LOG:  invalid primary checkpoint record
2021-11-29 10:45:29.471 CET [5459] PANIC:  could not locate a valid checkpoint record
2021-11-29 10:45:29.472 CET [5458] LOG:  startup process (PID 5459) was terminated by signal 6: Aborted
2021-11-29 10:45:29.472 CET [5458] LOG:  aborting startup due to startup process failure
2021-11-29 10:45:29.473 CET [5458] LOG:  database system is shut down
stopped waiting
pg_ctl: could not start server
Examine the log output.
</code></pre>
<p>I'm unclear why id doesn't listen on the port (5432) or how to resolve it</p>",,0,0,,2021. 11. 29 오전 10:07:29,,2021. 12. 4 오전 11:11:05,2021. 11. 29 오전 11:53:17,,17539775,,17539775,,1,0,postgresql,340
70211146,"Use ""json_field@>"" for greater than, is in etc (PostgreSQL)","<p>Say I have a table in a PostgreSQL database like</p>
<pre class=""lang-py prettyprint-override""><code>id | json_field
---+-----------
1    {&quot;name&quot;:&quot;foo&quot;,&quot;age&quot;:20}
2    {&quot;name&quot;:&quot;bar&quot;, &quot;age&quot;:10, &quot;alive&quot;:1}
.
.
</code></pre>
<p>I can get the data for <code>json_field</code> where <code>name==&quot;foo&quot;</code> by doing</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT * from my_table where json_field@&gt;&quot;{'name':'foo'}&quot;
</code></pre>
<p>or</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT * from my_table where (json_field-&gt;&gt;'name')='foo'&quot;
</code></pre>
<p>Since the first query is way faster (it is indexed as far as I understand, where the second have to loop through each record and check) is there a way to do other conditons like &quot;greater than&quot;, &quot;is in&quot;, &quot;is not&quot; e.g (some pseudo-code)</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT * from my_table where json_field@&gt;&quot;{'name':is not 'foo'}&quot;
SELECT * from my_table where json_field@&gt;&quot;{'name':&gt;'foo'}&quot;
SELECT * from my_table where json_field@&gt;&quot;{'age':is in '(20,50)'}&quot;
</code></pre>",,1,0,,2021. 12. 3 오전 8:01:05,,2021. 12. 3 오전 8:46:31,,,,,6224975,,1,1,postgresql,85
70332682,How to have parameters in property keys in Cypher?,"<p>According to <a href=""https://neo4j.com/docs/cypher-manual/current/syntax/parameters/"" rel=""nofollow noreferrer"" title=""Parameters - Neo4j Cypher Manual"">Parameters - Neo4j Cypher Manual</a>, this is not allowed</p>
<pre><code>MATCH (n) WHERE n.$param = 'something'
</code></pre>
<p>I wonder if there is a way to overcome this?</p>",70332866,1,0,,2021. 12. 13 오전 9:49:50,,2021. 12. 14 오전 10:14:09,2021. 12. 13 오전 10:11:00,,1734996,,3416774,,1,2,neo4j|cypher,85
70298476,BigQuery pivot multiple rows into columns,"<p>I have a table similar to this in BigQuery.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Accounts</th>
<th>ACount</th>
<th>BCount</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>4</td>
<td>5</td>
<td>2021-12-08</td>
</tr>
<tr>
<td>A</td>
<td>3</td>
<td>4</td>
<td>2021-12-07</td>
</tr>
<tr>
<td>B</td>
<td>2</td>
<td>3</td>
<td>2021-12-08</td>
</tr>
<tr>
<td>B</td>
<td>4</td>
<td>6</td>
<td>2021-12-07</td>
</tr>
</tbody>
</table>
</div>
<p>I need to convert this table to something similar to below.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Accounts</th>
<th>ACount_12-07</th>
<th>BCount_12-07</th>
<th>ACount_12-08</th>
<th>BCount_12-08</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>3</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>B</td>
<td>4</td>
<td>6</td>
<td>2</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>Can BigQuery experts help me figure out how to achieve this through BigQuery?</p>
<p>Thank you in advance,</p>",70298552,1,0,,2021. 12. 10 오전 12:46:56,1,2021. 12. 10 오전 12:59:53,,,,,1122359,,1,1,google-bigquery,343
70202050,Charges for Querying Metadata tables in INFORMATION_SCHEMA in bigquery,"<p>Does Bigquery charge for querying tables in <strong>INFORMATION_SCHEMA</strong> and also some other metadata tables like <code>__TABLES__</code> . I tried to look for this information in the document here <a href=""https://cloud.google.com/bigquery/pricing"" rel=""nofollow noreferrer"">https://cloud.google.com/bigquery/pricing</a> but seems like there is not much information about this.</p>
<p>If this is chargable then whether call getTable method from java client is also chargable</p>",70207091,1,0,,2021. 12. 2 오후 3:20:03,,2021. 12. 2 오후 10:13:47,,,,,1298454,,1,1,google-bigquery,88
70274285,"Postgres, order by SUM of column in child table","<p>I have the following (simplified) tables</p>
<p>products - <code>id</code> <code>name</code></p>
<p>order_products - <code>quantity</code>, <code>product_id</code></p>
<p>I would like to order the rows from <code>products</code> table based on the sum of <code>quantity</code> column in <code>order_products</code> for every product</p>
<p>If <code>order_products</code> has these rows</p>
<pre><code>quantity - product_id
2        - 555
2        - 555
6        - 666
3        - 777
</code></pre>
<p>I want the results to be ordered like that: <code>666, 555, 777</code></p>
<p>666 has 6 quantity, 555 has 4 and 777 has 3</p>
<p>I ended up using slightly modified version of the answer, as my requirement was to include <code>products</code> even if they don't have any relations in <code>order_products</code> table.</p>
<pre><code>select p.*, coalesce(sum(op.quantity), 0) quantity_sold
from products p
left outer join order_products as op on op.product_id = p.id
group by p.id
order by quantity_sold desc
</code></pre>",70274456,1,0,,2021. 12. 8 오전 11:31:54,,2021. 12. 8 오후 1:01:59,2021. 12. 8 오후 1:01:59,,13992557,,13992557,,1,0,sql|postgresql,88
70217516,SQL to SELECT all groups belonging to a specific member ID AND all the users that belong to each group,"<p>I have three tables, the relevant parts of which are:</p>
<p>users</p>
<pre><code>users.userID, users.userNickname
</code></pre>
<p>groups</p>
<pre><code>groups.groupID, groups.groupOwner, groups.groupName
</code></pre>
<p>mapFriendsGroups</p>
<pre><code>mapFriendsGroups.userID, mapFriendsGroups.groupID
</code></pre>
<p>To be clear, the functionality is that a primary user can create new groups which appear in the groups table.  A primary user has a list of friends (secondary users, each with their own entry in the users table) that they can add to one of their groups; this is represented by that friend's users.userID value being entered into the mapFriendsGroups.userID field of the mapFriendsGroups table. I then wrote this SQL to get the data that I want to display:</p>
<pre><code> SELECT `groups`.*, `users`.* FROM `groups` JOIN `mapFriendsGroups` ON `groups`.`groupID` = `mapFriendsGroups`.`groupID` JOIN `users` ON `users`.`userID` = `mapFriendsGroups`.`userID` WHERE `groups`.`groupOwner` = ? ORDER BY `groups`.`groupID`, `users`.`userLastName`
</code></pre>
<p>I handle this as a prepared statement in PHP and bind the primary user's users.userID value (which is held in a session variable) to the ?</p>
<p>This very nearly works but I discovered one problem - if a primary user creates a group but has not assigned any members to that group, the group will not be part of the results. I am convinced I'm doing a JOIN wrong but can't seem to get it to work.</p>
<p>I checked several other questions on stackoverflow (e.g. <a href=""https://stackoverflow.com/questions/14983042/select-all-users-that-belong-to-a-certain-group-complicated-query"">Select all users that belong to a certain group, complicated query</a> and <a href=""https://stackoverflow.com/questions/66693042/sql-query-get-all-users-for-a-specific-group-and-each-user-with-all-groups"">SQL: query get all users for a specific group and each user with all groups</a> ) but all of those answers seem to assume that the groups are not restricted to a subset and filtered by the current user's ID.</p>
<p>Anyone have any suggestions?</p>
<p>In case it matters, here's what I'm using to parse the data after I get it:</p>
<pre><code>if ($r-&gt;num_rows &gt; 0) { // If it ran OK.
    $data1 = $r-&gt;fetch_assoc(); 
    $myGroups = '';
    $currentGroup = '';
    do {  
        // check the value of the current group variable against the actual current group name
        if ($currentGroup == $data1['groupName']){
            // this is part of a prior group...
            $myGroups .= ', '.$data1['userFirstName'].' '.$data1['userLastName'];
        } else {
            // this is not part of a prior group. check if the current group variable is empty - if it is then just start a new row
            if ($currentGroup == ''){
                $myGroups .= '&lt;tr&gt;';
                $myGroups .= '&lt;td&gt;&lt;strong&gt;'.$data1['groupName'].'&lt;/strong&gt;&lt;/td&gt;';
                $myGroups .= '&lt;td&gt;'.$data1['userFirstName'].' '.$data1['userLastName'];             
            } else {
                // close the prior group then start a new row
                $myGroups .= '&lt;/td&gt;';
                $myGroups .= '&lt;/tr&gt;';
                $myGroups .= '&lt;tr&gt;';
                $myGroups .= '&lt;td&gt;&lt;strong&gt;'.$data1['groupName'].'&lt;/strong&gt;&lt;/td&gt;';
                $myGroups .= '&lt;td&gt;'.$data1['userFirstName'].' '.$data1['userLastName']; 
            }
        }
        // assign the current group name to the current group variable
        $currentGroup = $data1['groupName'];
    } while($data1 = mysqli_fetch_assoc($r));
    // close the final row
    $myGroups .= '&lt;/td&gt;&lt;/tr&gt;';
</code></pre>
<p>It ain't pretty, but it outputs a table of data where the users sees all of his groups (that have members in them) and who are the members (note that the creator of a group is NOT part of the group - this is important for later functionality).  Again, I just need a tweak that will let this show empty groups. It's not an error in the PHP code - I've tested the SQL directly in phpMyAdmin's SQL tool and even there I'm not seeing the groups with zero members.</p>
<p>I wish I could just add the creator of the group to the group - that would enable my current code to do the job - but again that's not an option for this project.</p>
<p><em><strong><strong>EDIT 01</strong></strong></em>
Here's a sample of the data:</p>
<p>from the users table
userID = 5 is the primary user (the value of ? in the test query)
other userID values are 1,2,3,4,8,10,11,12</p>
<p>from the groups table, only those groups whose groups.groupOwner value = 5</p>
<pre><code>groupID = 11 | groupName = BFFs
groupID = 12 | groupName = Car
groupID = 13 | groupName = Shopping
groupID = 14 | groupName = Travel
groupID = 15 | groupName = Test
groupID = 18 | groupName = Gamers
</code></pre>
<p>from the mapFriendsGroups table, the relevant rows</p>
<pre><code>userID = 1 | groupID 11
userID = 2 | groupID 11
userID = 3 | groupID 11
userID = 1 | groupID 12
userID = 2 | groupID 13
userID = 3 | groupID 13
userID = 1 | groupID 14
userID = 3 | groupID 14
userID = 1 | groupID 15
userID = 2 | groupID 15
</code></pre>
<p><em><strong><strong>EDIT 02</strong></strong></em>
I took the csv export option from phpMySQL and dumped it into a text editor, removed the irrelevant columns, and am pasting it here. Note there's 10 rows.</p>
<pre><code>11,5,BFFs,3,Alex,Smith
11,5,BFFs,2,Ben,Smith
11,5,BFFs,1,Allison,Smith
12,5,Car,1,Allison,Smith
13,5,Shopping,3,Alex,Smith
13,5,Shopping,2,Ben,Smith
14,5,Travel,3,Alex,Smith
14,5,Travel,1,Allison,Smith
15,5,Test,2,Ben,Smith
15,5,Test,1,Allison,Smith
</code></pre>
<p>I'm trying to get this same type of output, but with an 11th row that would be:</p>
<pre><code>18,5,Gamers,,,
</code></pre>
<p>That is, the group that has no members in it.</p>
<p><em><strong><strong>EDIT 03 - FINAL EDIT</strong></strong></em>
I've got it working. The trick seems to be to make both of the joins into LEFT JOIN - that gives me the needed output of 11 rows, i.e. 10 rows with associated members of a group and 1 row for a group that has no members (and which has null values for the fields of userID and userName so I'll need to handle that in the PHP code that parses it... but that's trivial).</p>
<p>Thank you very much to all of you that contributed. I will mark as the correct answer the contribution which helped me the most to find the correct answer.</p>",70217672,2,0,,2021. 12. 3 오후 4:19:56,,2021. 12. 3 오후 5:20:59,2021. 12. 3 오후 5:20:59,,2953492,,2953492,,1,0,mysql,345
70201455,How to perform graph traversal along multiple paths,"<h3>Problem Introduction</h3>
<p>I have a list of graph edges with fromNodes, toNodes, and the edge properties (edgeType and edgeLength) in a SQL table.</p>
<p>My goal is to find all yellow edges and then build paths through the graph consisting of all connected blue edges (starting with each yellow edge).</p>
<p>I implemented the following for this discussion:</p>
<p><a href=""https://i.stack.imgur.com/q9BrW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/q9BrW.png"" alt=""Example Graph"" /></a></p>
<p><strong>STEP 1</strong> So first I want to find all yellow edges, that's easy:</p>
<pre class=""lang-sql prettyprint-override""><code>WITH 
  YellowEdges AS
  (SELECT EdgeId, FromNodeID, ToNodeID,EdgeType,EdgeLength,array_append(GraphNetwork.EDGES,GraphNetwork.EdgeId) AS EdgePathArray
     FROM GraphNetwork
  WHERE EdgeType = 3
  )
  
SELECT * 
FROM YellowEdge
</code></pre>
<p>Now we have all of the yellow edges 1,4,6,9,15<br />
<a href=""https://i.stack.imgur.com/kr3yk.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kr3yk.png"" alt=""Query To Find All Yellow Edges"" /></a></p>
<p><strong>STEP 2</strong>
Find all the blue edges, okay no problem</p>
<pre class=""lang-sql prettyprint-override""><code>WITH
  YellowEdges AS
  (SELECT EdgeId, FromNodeID, ToNodeID,EdgeType,EdgeLength,array_append(GraphNetwork.EDGES,GraphNetwork.EdgeId) AS EdgePathArray
     FROM GraphNetwork
  WHERE EdgeType = 3
  ),
  BlueEdges AS 
  (SELECT *
  FROM GraphNetwork
  WHERE EdgeType = 2
  )

SELECT *
FROM BlueEdges
</code></pre>
<p><a href=""https://i.stack.imgur.com/njbA5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/njbA5.png"" alt=""Blue Edges"" /></a></p>
<p><strong>STEP 3</strong> Find all blue edges that lead to yellow edges and perform a left join, adding both yellow edges and blue edges to a column of arrays called edge path array</p>
<pre class=""lang-sql prettyprint-override""><code>WITH
  YellowEdges AS
  (SELECT EdgeId, FromNodeID, ToNodeID,EdgeType,EdgeLength,array_append(GraphNetwork.EDGES,GraphNetwork.EdgeId) AS EdgePathArray
     FROM GraphNetwork
  WHERE EdgeType = 3
  ),
  BlueEdges AS 
  (SELECT *
  FROM GraphNetwork
  WHERE EdgeType = 2
  ),
  EdgePathTable AS
  (SELECT *
  FROM (
    SELECT BlueEdges.EdgeId, BlueEdges.FromNodeID, BlueEdges.ToNodeID,BlueEdges.EdgeType,BlueEdges.EdgeLength,array_append(YellowEdges.EdgePathArray,BlueEdges.EdgeId) AS EdgePathArray
    FROM YellowEdges
    LEFT JOIN BlueEdges
    ON YellowEdges.EdgeId &lt;&gt; BlueEdges.EdgeId 
    AND YellowEdges.FromNodeID = BlueEdges.ToNodeID 
       ) AS unnamedTable
  )
  
SELECT * 
FROM EdgePathTable
</code></pre>
<p><a href=""https://i.stack.imgur.com/U3xrX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/U3xrX.png"" alt=""First Iteration On Path"" /></a></p>
<p><strong>Step 4</strong> Now find all blue edges that connect to the blue edges we identified previously and add these to the path (Make sure that new edges have not been previously traversed as part of this path (to avoid circular paths)</p>
<pre class=""lang-sql prettyprint-override""><code>WITH
  YellowEdges AS
  (SELECT EdgeId, FromNodeID, ToNodeID,EdgeType,EdgeLength,array_append(GraphNetwork.EDGES,GraphNetwork.EdgeId) AS EdgePathArray
     FROM GraphNetwork
  WHERE EdgeType = 3
  ),
  BlueEdges AS 
  (SELECT *
  FROM GraphNetwork
  WHERE EdgeType = 2
  ),
  EdgePathTable AS
  (SELECT *
  FROM (
    SELECT BlueEdges.EdgeId, BlueEdges.FromNodeID, BlueEdges.ToNodeID,BlueEdges.EdgeType,BlueEdges.EdgeLength,array_append(YellowEdges.EdgePathArray,BlueEdges.EdgeId) AS EdgePathArray
    FROM YellowEdges
    LEFT JOIN BlueEdges
    ON YellowEdges.EdgeId &lt;&gt; BlueEdges.EdgeId 
    AND YellowEdges.FromNodeID = BlueEdges.ToNodeID 
       ) AS unnamedTable
  )

SELECT *
FROM (SELECT EdgePathTable_iteration2.EdgeId, EdgePathTable_iteration2.FromNodeID, EdgePathTable_iteration2.ToNodeID,EdgePathTable_iteration2.EdgeType,EdgePathTable_iteration2.EdgeLength,array_append(EdgePathTable.EdgePathArray,EdgePathTable_iteration2.EdgeId) AS EdgePathArray
FROM EdgePathTable
LEFT JOIN BlueEdges AS EdgePathTable_iteration2
ON EdgePathTable_iteration2.EdgeId &lt;&gt; any(EdgePathTable.EdgePathArray) 
AND EdgePathTable.FromNodeID = EdgePathTable_iteration2.ToNodeID) AS EdgePathTable
</code></pre>
<p><a href=""https://i.stack.imgur.com/krWyg.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/krWyg.png"" alt=""Add Next Set of Blue Edges"" /></a></p>
<p><strong>STEP 5</strong> Repeat step 4 until some condition is met i(e perform x iterations, or you have reached the end of each path).</p>
<p><em><strong>Okay so here is where I am stuck.</strong></em> I've looked into a few potential options, Recursive CTE, recursive function call, function call in a while loop, or maybe just repeating this query in a while loop.</p>
<p>I'm not sure which of these if any would allow me to do what I want:</p>
<ol>
<li><p>The recursive CTE I'm not sure would work since it relies on union and it seems to not be possible to implement with left join. I did find some tree traversal examples, but in each case it was limited to starting with a single edge, I'm assuming that is a limitation of that method since union expands the number of rows not the number of columns. I need a method that allows me to traverse multiple edges like what I've started to do here. When I eventually get this working I will port this to our actual database which probably has 100,000-1,000,000 of these edges</p>
</li>
<li><p>The functional call options seem tricky because it seems like you can't pass a table to a function (but you can pass a table like thing or something but still I haven't been able to figure that out)</p>
</li>
<li><p>I like the idea of just repeating this query in a while loop but I haven't been able to find understandable documentation on how to do a while loop in a PostgreSQL query. I haven't been able to implement even a basic while loop in a query on SQL fiddle.</p>
</li>
</ol>
<p>Here's the fiddle link to the example up to step 4:</p>
<p><a href=""http://sqlfiddle.com/#!17/2a341d/1"" rel=""nofollow noreferrer"">http://sqlfiddle.com/#!17/2a341d/1</a></p>
<p>Or else you can find the example code below. I've been stuck on this for a bit now and would really appreciate some help.</p>
<pre class=""lang-sql prettyprint-override""><code>CREATE TABLE GraphNetwork 
(
    EdgeId INT primary key,
    FromNodeID INT,  
    ToNodeID INT,
    EdgeType INT,
    EdgeLength INT,
    EDGES INT[]
);

INSERT INTO GraphNetwork (EdgeId, FromNodeID, ToNodeID, EdgeType, EdgeLength)
VALUES
    (1,2,1,3,10),
    (2,3,2,2,50),
    (3,4,3,2,40),
    (4,5,4,3,15),
    (5,5,16,2,60),
    (6,4,5,3,20),
    (7,3,4,2,80),
    (8,2,3,2,25),
    (9,7,6,3,5),
    (10,8,7,2,20),
    (11,9,8,2,35),
    (12,7,9,2,10),
    (13,10,9,2,10),
    (14,11,10,1,15),
    (15,13,12,3,25),
    (16,14,13,2,25),
    (17,15,14,1,30)
;
</code></pre>
<pre class=""lang-sql prettyprint-override""><code>WITH YellowEdges AS
(
    SELECT 
        EdgeId, FromNodeID, ToNodeID, EdgeType, EdgeLength,
        array_append(GraphNetwork.EDGES, GraphNetwork.EdgeId) AS EdgePathArray
    FROM 
        GraphNetwork
    WHERE 
        EdgeType = 3
),
BlueEdges AS 
(
    SELECT *
    FROM GraphNetwork
    WHERE EdgeType = 2
),
EdgePathTable AS
( 
    SELECT *
    FROM 
        (SELECT 
             BlueEdges.EdgeId, BlueEdges.FromNodeID, BlueEdges.ToNodeID,
             BlueEdges.EdgeType, BlueEdges.EdgeLength,
             array_append(YellowEdges.EdgePathArray, BlueEdges.EdgeId) AS EdgePathArray
         FROM 
             YellowEdges
         LEFT JOIN 
             BlueEdges ON YellowEdges.EdgeId &lt;&gt; BlueEdges.EdgeId 
                       AND YellowEdges.FromNodeID = BlueEdges.ToNodeID 
        ) AS unnamedTable
)
SELECT *
FROM 
    (SELECT 
         EdgePathTable_iteration2.EdgeId, 
         EdgePathTable_iteration2.FromNodeID, 
         EdgePathTable_iteration2.ToNodeID,
         EdgePathTable_iteration2.EdgeType,
         EdgePathTable_iteration2.EdgeLength,
         array_append(EdgePathTable.EdgePathArray, EdgePathTable_iteration2.EdgeId) AS EdgePathArray
     FROM 
         EdgePathTable
     LEFT JOIN 
         BlueEdges AS EdgePathTable_iteration2 ON EdgePathTable_iteration2.EdgeId &lt;&gt; ANY(EdgePathTable.EdgePathArray) 

                                               AND EdgePathTable.FromNodeID = EdgePathTable_iteration2.ToNodeID) AS EdgePathTable
</code></pre>",,1,0,,2021. 12. 2 오후 2:40:44,,2021. 12. 6 오전 7:38:55,2021. 12. 2 오후 3:43:15,,466862,,11070198,,1,1,sql|postgresql,90
70230858,I have issue with CREATE TABLE and then INSERT you table,"<p>I have issue width CREATE TABLE and then INSERT you table.</p>
<p>This is what I want to do. CREATE TABLE LIKE and then INSERT SELECT * FROM.</p>
<p>I be creating multiple tables at the same time. I will be using a table like sample table to create the tables. Then editing the new tables in the future.</p>
<p>This Sample table.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">id</th>
<th style=""text-align: center;"">old_data</th>
<th style=""text-align: right;"">new_data</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">pool_00</td>
<td style=""text-align: right;"">pool_01</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">pool_00</td>
<td style=""text-align: right;"">pool_02</td>
</tr>
</tbody>
</table>
</div>
<p>This is MySQL code I’m having issues with.</p>
<pre><code>CREATE TABLE `new_data` LIKE `old_data`; 
INSERT `new_data` SELECT * FROM `old_data`; 
</code></pre>
<p>This is the error I get.</p>
<p>Error
SQL query:</p>
<p>CREATE TABLE <code>new_data</code> LIKE <code>old_data</code>
MySQL said: Documentation</p>
<p>#1146 - Table 'oerpn_survivor_us.old_data' doesn't exist.</p>
<p><strong>I run this MySQL code and it works.</strong></p>
<pre><code>CREATE TABLE pool_01 LIKE pool_00; 
INSERT pool_01 SELECT * FROM pool_00;

CREATE TABLE pool_02 LIKE pool_00; 
INSERT pool_02 SELECT * FROM pool_00;
</code></pre>
<p>Thank you for your help.</p>",,1,0,,2021. 12. 5 오전 1:30:04,,2021. 12. 5 오전 1:52:06,2021. 12. 5 오전 1:52:06,,16762652,,16762652,,1,-1,mysql,90
70120416,enable replication in another aws region using terraform for postgresql db,"<p>currently we have PostgreSQL and we need to enable the setting of  &quot;enable replication in another AWS region&quot; in rds which means RDS cross region backup not a read replica.</p>
<p>Currently in terraform rds module there no argument to enable this setting.</p>
<p>could someone help on how to enable this setting.</p>
<p>Thanks In advance.</p>",,0,0,,2021. 11. 26 오전 6:40:02,,2021. 11. 26 오전 6:40:02,,,,,11435491,,1,1,postgresql,91
70298854,MYSQL create unique id according to another column (which is a foreign key),"<p>In a DB there's a table called <code>decks</code> which looks like this:</p>
<pre><code>ID | Name
------------
1  | Deck 1
2  | Deck 2
3  | Deck 3
</code></pre>
<p>And then another table called <code>words</code> which should look like this</p>
<pre><code>Deck ID | Word ID | Text
-------------------------------
1       | 1       | Cat
2       | 1       | Elephant
1       | 2       | Dog
1       | 3       | Elephant
3       | 1       | Shark
</code></pre>
<p>So basically this table should have a Foreign Key which points to the deck and then a key which is set to auto-increment according to the foreign key. Also, note that the ID of this table would be the combination of <code>Deck Id</code> and <code>Word Id</code>. Is this possible in MYSQL 8?</p>
<p>Basically what I have is this:</p>
<pre><code>CREATE TABLE my_db.words (
    deck_id INT,
    text VARCHAR(100),
    FOREIGN KEY(deck_id) REFERENCES decks(id)
);
</code></pre>
<p>But no idea how to create this auto-increment field.</p>
<p>Not sure if it's important but the text column should have no effect whatsoever in the result of this generated ID.</p>",70299376,3,0,,2021. 12. 10 오전 1:53:27,,2021. 12. 10 오전 4:18:05,,,,,3770881,,1,2,mysql,91
70108680,how to use MySQL key_len in explain statement to defined whether a sql is fast or not?,"<blockquote>
<p>The key_len column indicates the length of the key that MySQL decided to use.</p>
</blockquote>
<p>MySQL's docs mantion this. but i don't figure out how to use this statement to defined a sql is fast or not. the smaller key_len, the faster sql it is(please forgive my english grammarT_T)? and how it works?</p>
<p>expect for your answer.</p>",70109300,2,0,,2021. 11. 25 오전 9:30:57,,2021. 11. 26 오전 3:54:01,,,,,9860584,,1,1,mysql,94
70115341,Number of Accounts That Did Not Stream (MYSQL via Leetcode),"<p>Question</p>
<pre><code>+-------------+------+
| Column Name | Type |
+-------------+------+
| account_id  | int  |
| start_date  | date |
| end_date    | date |
+-------------+------+
</code></pre>
<p>In table Subscriptions, account_id is the primary key column for this table.
Each row of this table indicates the start and end dates of an account's subscription.
Note that always start_date &lt; end_date.</p>
<pre><code>+-------------+------+
| Column Name | Type |
+-------------+------+
| session_id  | int  |
| account_id  | int  |
| stream_date | date |
+-------------+------+
</code></pre>
<p>In table streams, session_id is the primary key column for this table.
account_id is a foreign key from the Subscriptions table.
Each row of this table contains information about the account and the date associated with a stream session.</p>
<p>Write an SQL query to report the number of accounts that bought a subscription in 2021 but did not have any stream session.</p>
<p>Can someone please help me to identify what is wrong with my following code? I don't wish to use year = 2021 but want to use exact dates. Please help.</p>
<pre><code>with temp1 as
(
select account_id
from Subscriptions sb
where start_date &gt;= 2021-01-01 and end_date &lt;= 2021-12-31
and account_id not in (select distinct(account_id)
                              from streams
                              where stream_date &gt;= 2021-01-01 and stream_date &lt;= 2021-12-31 ))
select count(account_id) as accounts_count
from temp1;
</code></pre>",,1,0,,2021. 11. 25 오후 5:39:29,,2021. 11. 25 오후 5:51:20,,,,,15059717,,1,1,mysql,94
70090246,Get the most recent record by date in mysql,"<p>I have a table in which I store a code, a price, and a date.</p>
<p>Code is type varchar,
price is type float (yes, I know it is better to store it as Double),
date is type date</p>
<pre><code>create table prices (
 code varchar(15), 
 price float(5),
 date date
)
</code></pre>
<p>so,</p>
<pre><code>insert into prices (code,price,date) values
('ADV000001','2.1','2021-02-03'),
('ADV000001','0.3','2021-11-22'),
('ADV000001','20.0','2021-11-23'),
('ADV000001','31.4','2017-01-11'),
('ADV000001','99.99','2012-12-09'),
('ADV000123','31.4','2017-04-21'),
('ADV000123','0.4','2016-12-02'),
('ADV000123','31','2012-11-06'),
('ADV000991','3','2000-01-15'),
('ADV000991','1.4','2004-01-13'),
('ADV000991','0.9','2011-01-30'),
('ADV000991','12','2017-01-23'),
('ADV000991','854.82','2004-04-30'),
('ADV000991','231.11','2009-04-15'),
('ADV000991','242.66','2021-04-09'),
('ADV000912','111.1','2021-01-11'),
('ADV000912','1.4','2020-01-11'),
('ADV031242','75.48','2019-03-11'),
('ADV031242','231.42','2019-07-11'),
('ADV011912','1324.11','1994-11-11'),
('ADV000112','685.04','1993-06-11'),
('ADV000777','757.54','2001-06-11'),
('ADV000777','221.74','2002-09-11'),
('ADV000777','1352.12','2012-04-11'),
('ADV000215','856.81','2011-12-11'),
('ADV000202','511.99','2011-11-11')
</code></pre>
<p>I try to make this select, but it doesn't work very well, it brings the correct date, however it brings me any price, not the correct one!!!!</p>
<pre><code>SELECT 
code, price, date 
FROM 
prices 
WHERE 
date = (SELECT MAX(date) FROM prices) 
</code></pre>
<p>the result:</p>
<pre><code>code       price    date
ADV000001   0.3    2021-11-23
</code></pre>
<p>Ideally, it should show each code with its respective prices and the most recent date.</p>
<pre><code>code           price    date
ADV000001      20       2021-11-23
ADV000123      31.4     2017-04-21
ADV000991    242.66     2021-04-09
...          ...          ... 
</code></pre>
<p>Any ideas? maybe a sub-consult? a group by sentence not work!</p>
<p>The MYSQL MAX() function doesn't seem to work, it doesn't group by codes and only brings me one record.
Here is the link where you can quickly ask your queries, I would appreciate it.
<a href=""https://dbfiddle.uk/?rdbms=mysql_8.0&amp;fiddle=e1a1805934099cfbaed5b421e7021ad7"" rel=""nofollow noreferrer"">dbfiddle.uk</a></p>",70090428,3,0,,2021. 11. 24 오전 2:59:24,,2021. 11. 24 오전 3:39:18,,,,,11513437,,1,0,mysql,95
70144182,Return nodes with only one specified relationship,"<p>i have a graph like this:
<a href=""https://i.stack.imgur.com/YkZLK.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YkZLK.png"" alt=""enter image description here"" /></a></p>
<p>What i wanna do, is to return actors, which only played in one specified film.
So for example if I  pass an Iron Man 2 id, it should  return only Robert Downey. Scarlett Johansson is skipped because she has played in 3 films, and also she has a &quot;IS_FRIEND_WITH&quot; relationship.
This code which i wrote, return all the actors that played in film of <code>id 11 in this case</code></p>
<pre><code>MATCH (a)
WHERE ID(a) = 11
MATCH (b:Actor)-[:ACTED_IN]-(a:Movie)
RETURN b
</code></pre>
<p>If Iron Man 2 would be of Id = 11 it would return Scarlett and Robert Downey. I just want it to return only Robert Downey.</p>",,4,0,,2021. 11. 28 오후 2:09:39,,2021. 12. 17 오전 8:24:53,,,,,14591988,,1,0,neo4j|cypher,95
70279005,Get bytes queried for entire BigQuery project history,"<p>In our <strong>Project History</strong> tab, we have hundreds of queries from our daily analytics pipelines. I am working on a review of our BigQuery billing and analyzing the cost of queries here seems like the place to start.</p>
<p><a href=""https://i.stack.imgur.com/mvBkO.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/mvBkO.png"" alt=""enter image description here"" /></a></p>
<p>However, there is no column for bytes processed or for cost. We can click the ... to show job details with billing, but this is not efficient or useful for assessing costs of hundreds of queries.</p>
<p>The accepted answer <a href=""https://stackoverflow.com/questions/60570745/is-it-possible-to-retrieve-full-query-history-and-correlate-its-cost-in-google-b"">Is it possible to retrieve full query history and correlate its cost in google bigquery?</a>, which is:</p>
<pre><code>SELECT query, total_bytes_processed 
FROM 'region-us'.INFORMATION_SCHEMA.JOBS_BY_PROJECT 
WHERE 
project_id = 'you_project_id' AND user_email = 'my@eamil.com'
</code></pre>
<p>This is not so helpful. I've run this query for our project and for some reason it only shows a handful of queries for the last month, despite our pipelines running hundreds of queries daily. I've even removed the <code>project_id</code> and <code>email</code> filters to ensure that I was not filtering away results, and still only a handful of queries...</p>
<p>How can I get the cost / bytes queried for all queries in the Project History tab? Any why might the majority of our queries be missing from the <code>JOB_BY_PROJECT</code> query?</p>",,1,0,,2021. 12. 8 오후 5:07:32,,2021. 12. 13 오전 4:00:20,2021. 12. 9 오전 9:52:46,,14733669,,5573294,,1,1,google-bigquery,352
70290076,Select all values for given key from JSON array column,"<p>I have a <code>json</code> array column, <code>foo</code>:</p>
<pre><code>[{&quot;a&quot;: &quot;my_key_type&quot;, &quot;b&quot;: &quot;foo&quot;}]
[{&quot;a&quot;: &quot;my_other_key_type&quot;, &quot;b&quot;: &quot;foo&quot;}]
[]
[{&quot;a&quot;: &quot;my_key_type&quot;, &quot;b&quot;: &quot;bar&quot;}, {&quot;a&quot;: &quot;my_other_key_type&quot;, &quot;b&quot;: &quot;baz&quot;}]
</code></pre>
<p>I would like to select into an array all <code>a</code> values for each JSON element in the column. For instance:</p>
<pre><code>['my_key_type']
['my_other_key_type']
[]
['my_key_type','my_other_key_type']
</code></pre>
<p>I was initially pursuing <code>json_object_keys</code>, but that doesn't seem to accomplish what I'm actually after, and it doesn't work on an array type. I have not found a function in <a href=""https://www.postgresql.org/docs/9.5/functions-json.html"" rel=""nofollow noreferrer"">the documentation</a> that seems to accomplish what I'm after.</p>",70290395,1,0,,2021. 12. 9 오후 12:38:14,,2021. 12. 9 오후 1:03:21,2021. 12. 9 오후 12:44:12,,3015734,,3015734,,1,1,postgresql,102
70179189,postgres is not in the sudoers file. This incident will be reported,"<p>If the error occurs when trying to create PostgreSql Role This error occurs because you are inside the postgresql.</p>
<p>You need to change to root user, for that you need to type in the terminal,</p>
<p><strong>su root</strong></p>
<p>Next run the command,
<strong>sudo -u postgres createuser --interactive</strong></p>",,1,0,,2021. 12. 1 오전 4:39:40,,2021. 12. 1 오전 4:57:02,,,,,10070018,,1,0,postgresql,103
70375795,Postgres conversion rate,"<p>I want to get conversion rate in postgresql. My data look like below:</p>
<p>input:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>count</th>
<th>type</th>
<th>converted</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>30</td>
<td>A</td>
<td>true</td>
</tr>
<tr>
<td>2</td>
<td>20</td>
<td>A</td>
<td>false</td>
</tr>
<tr>
<td>3</td>
<td>13</td>
<td>B</td>
<td>false</td>
</tr>
<tr>
<td>4</td>
<td>7</td>
<td>B</td>
<td>true</td>
</tr>
</tbody>
</table>
</div>
<p>As first step, I would like to get a sum of counts for each type with associated count field. I tried with different variations of <code>SUM()</code> but couldn't get it. This middle step would look like:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>count</th>
<th>type</th>
<th>converted</th>
<th>sum</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>30</td>
<td>A</td>
<td>true</td>
<td>50</td>
</tr>
<tr>
<td>2</td>
<td>7</td>
<td>B</td>
<td>true</td>
<td>20</td>
</tr>
</tbody>
</table>
</div>
<p>I expect the following output:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>conversion_rate</th>
<th>type</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>60%</td>
<td>A</td>
</tr>
<tr>
<td>2</td>
<td>35%</td>
<td>B</td>
</tr>
</tbody>
</table>
</div>
<p>but my problem is to write proper SQL to get to the middle step.</p>",70376225,2,0,,2021. 12. 16 오전 8:16:01,,2021. 12. 16 오전 8:53:25,,,,,13524515,,1,0,sql|postgresql,103
70304541,How to compare same period of different date ranges in columns in BigQuery standard SQL,"<p>i have a hard time figuring out how to compare the same period (e.g. iso week 48) from different years for a certain metric in different columns. I am new to SQL and haven't fully understand how PARTITION BY works but guess that i'll need it for my desired output.</p>
<p>How can i sum the data from column &quot;metric&quot; and compare same periods of different date ranges (e.g. YEAR) in a table?</p>
<p><strong>current table</strong></p>
<pre><code>date          iso_week          iso_year          metric
2021-12-01       48              2021              1000         
2021-11-30       48              2021               850
...
2020-11-28       48              2020               800
2020-11-27       48              2020               950
...
2019-11-27       48              2019               700
2019-11-26       48              2019               820
</code></pre>
<p><strong>desired output</strong></p>
<pre><code>iso_week          metric_thisYear        metric_prevYear       metric_prev2Year
48                     1850                   1750                   1520
...
</code></pre>",70307002,1,0,,2021. 12. 10 오후 12:30:27,,2021. 12. 10 오후 3:40:49,,,,,17627764,,1,1,google-bigquery,104
70336666,Sum of cummulative difference within group in postgres,"<p>I have a table that looks like the one below. I will like to find the sum of the cumulative difference between the target value daily actual value.</p>
<pre><code>ID  | Date    | Target_value | Daily_Value
1   |01/10/20 |   200        |   5
2   |01/10/20 |   500        |   2
3   |05/10/20 |   600        |   10
1   |04/11/20 |   200        |   50
2   |05/11/20 |   500        |   80
3   |05/11/20 |   600        |   40
1   |06/12/20 |   200        |   50
4   |06/12/20 |   400        |   30
5   |07/12/20 |   300        |   20

Expected output

Date     | Target_value - monthly_cummulative daily_value          |
   10/20 | (200 + 500 + 600) - (5 + 2 + 10) =   1283               |
   11/20 | (200 + 500 + 600) - (17 + 50 + 80 + 40) = 1113          |
   12/20 | (200 + 500 + 600 + 400 + 300) - (17 + 170 + 100) = 1713 |


</code></pre>
<p>This is similar to this <a href=""https://stackoverflow.com/questions/22841206/calculating-cumulative-sum-in-postgresql"">Calculating Cumulative Sum in PostgreSQL</a> but not exactly the same.</p>",,3,0,,2021. 12. 13 오후 2:59:27,,2021. 12. 14 오전 10:26:10,2021. 12. 13 오후 4:50:29,,12851573,,12851573,,1,1,sql|postgresql,106
70302004,How to find inactive users,<p>Is it possible to find inactive PostgreSQL users? Does it have any activity log or something like this? My main goal is to find users that have not logged for a long time?</p>,,1,0,,2021. 12. 10 오전 9:02:35,,2021. 12. 10 오전 9:13:49,2021. 12. 10 오전 9:06:33,,466862,,12152043,,1,0,postgresql,108
70262470,All unique combinations of a column based on another one,"<p>I have a table with the following columns:</p>
<pre><code>col1 col2
1     1
1     2
1     1
2     1
3     3
3     2
3     1
3     2
3     4
3     1
</code></pre>
<p>I want to get all the combinations for each value of col2 with everything else but itself group by col1, i.e. achieve the following output:</p>
<pre><code>col1 col2 col2_combo
1    1    2
3    3    2
3    3    1
3    3    4
3    2    1
3    2    4
3    1    4
</code></pre>
<p>I have tried using self join of the table but I can't get a unique result, i.e. a single line for every two values combined.</p>",70262614,1,0,,2021. 12. 7 오후 3:05:54,,2021. 12. 7 오후 3:14:31,,,,,13051408,,1,1,sql|postgresql,111
70238420,Update sum with trigger,"<p>I want to sum basket item price values and insert it into a payment as total price. I am trying to use a trigger for this but I am getting error near <code>SET total_price =</code>. Error msg: Expected expression, got 'select'. How do I deal with this?</p>
<pre class=""lang-sql prettyprint-override""><code>CREATE FUNCTION make_sum() RETURNS TRIGGER
AS $$
    BEGIN
        UPDATE payment
            SET total_price = select sum(price) from basket where basket_id = new.basket_id;
        RETURN NULL;
END;$$ LANGUAGE plpgsql;
CREATE TRIGGER make_sum AFTER INSERT ON basket FOR EACH ROW EXECUTE make_sum()
</code></pre>",70238519,1,0,,2021. 12. 5 오후 8:48:10,,2021. 12. 5 오후 9:07:37,,,,,17575164,,1,0,sql|postgresql,113
70092638,In which table can I find the parameters of an uncommitted transaction in postgres,"<p>If I start a transaction in a Postgres database
I can find it in the table  pg_stat_activity.
To retrieve the uncommitted transaction I use the following query:</p>
<pre><code>from pg_stat_activity
where (state = 'idle in transaction')
  and xact_start is not null
</code></pre>
<p>This gives something like this:</p>
<pre><code>datid            | 16397
datname          | msmith
pid              | 39437
leader_pid       | 
usesysid         | 16396
usename          | msmith
application_name | PostgreSQL JDBC Driver
client_addr      | 127.0.0.1
client_hostname  | 
client_port      | 58411
backend_start    | 2021-11-24 09:07:06.571559+01
xact_start       | 2021-11-24 09:07:22.584942+01
query_start      | 2021-11-24 09:07:31.82002+01
state_change     | 2021-11-24 09:07:31.820198+01
wait_event_type  | Client
wait_event       | ClientRead
state            | idle in transaction
backend_xid      | 3446
backend_xmin     | 
query            | update students set address_id=$1, age=$2, first_name=$3, last_name=$4 where student_id=$5
backend_type     | client backend
</code></pre>
<p>In which table can I find the parameters for the prepared statement (update students set address_id=$1, age=$2, first_name=$3, last_name=$4 where student_id=$5)?</p>",,1,0,,2021. 11. 24 오전 8:14:02,,2021. 11. 24 오전 8:20:22,,,,,7183399,,1,1,postgresql,114
70257757,Fill in null values using previous value using FIRST_VALUE or LAST_VALUE,"<p>I am having a problem with filling in blank values using previous not null values.
I have tried using the FIRST_VALUE and LAST_VALUE formula, but I dont quite manage to get the desired results.</p>
<p>Here is an query with example data and what I have been trying to do.</p>
<pre><code>WITH test_data AS  (
SELECT 'A10-79' AS target_group, '2020w1' AS week, 'TV' AS placement, 10.1 AS views UNION ALL 
SELECT NULL,  '2020w2', 'TV', 0.3 UNION ALL 
SELECT Null,  '2020w3', 'TV', 4.3 UNION ALL 
SELECT Null,  '2020w4', 'TV', 5.1 UNION ALL
SELECT 'A40-79', '2020w1', 'TV', 7.1 AS views UNION ALL 
SELECT NULL,  '2020w2', 'TV', 0.1 UNION ALL 
SELECT Null,  '2020w3', 'TV', 2.3 UNION ALL 
SELECT Null,  '2020w4', 'TV', 3.1
)

SELECT 
FIRST_VALUE(target_group IGNORE NULLS) OVER (ORDER BY week ROWS BETWEEN UNBOUNDED PRECEDING 
AND CURRENT ROW) AS target_group,
week,
placement, 
views 
FROM test_data 
</code></pre>
<p>And this produces this result</p>
<p><a href=""https://i.stack.imgur.com/wBZt8.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/wBZt8.png"" alt=""enter image description here"" /></a></p>
<p>And this is what I would like to get</p>
<p><a href=""https://i.stack.imgur.com/chhHI.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/chhHI.png"" alt=""enter image description here"" /></a></p>
<p>The problem is that I cant seem to find a way where it will fill in just the blanks with the previous or first value, and not overwrite every field.</p>",70268115,1,0,,2021. 12. 7 오전 9:36:36,,2021. 12. 7 오후 11:17:47,,,,,4727118,,1,0,google-bigquery,115
70149803,MySQL - Filter records using SUM,"<p>I've a student table like below -</p>
<pre><code>CREATE TABLE `test`.`student` (
  `student_id` INT NOT NULL,
  `student_marks` INT NULL);
</code></pre>
<p>I want to find the student whose <strong>sum of marks</strong> is greater than 500, but I am not able to filter the records, however I develop below query.</p>
<pre><code>mysql&gt; select * from student;
+------------+---------------+
| student_id | student_marks |
+------------+---------------+
|          1 |           220 |
|          2 |           100 |
|          3 |           280 |
|          2 |           430 |
|          1 |           300 |
+------------+---------------+
5 rows in set (0.00 sec)

mysql&gt; select student_id, sum(student_marks) from student group by student_id;
+------------+--------------------+
| student_id | sum(student_marks) |
+------------+--------------------+
|          1 |                520 |
|          2 |                530 |
|          3 |                280 |
+------------+--------------------+
3 rows in set (0.00 sec)
</code></pre>",70149862,2,0,,2021. 11. 29 오전 4:38:31,2,2021. 11. 29 오전 4:46:53,,,,,6872018,,1,0,mysql,119
70194526,"springboot,Can't connect to my database java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)","<pre class=""lang-java prettyprint-override""><code>java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)

    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)


Process finished with exit code -1

</code></pre>
<p>my test</p>
<pre class=""lang-java prettyprint-override""><code>@SpringBootTest
class Springboot04DataApplicationTests {

    @Autowired
    DataSource dataSource;
    @Test
    void contextLoads() throws SQLException {
        System.out.println(dataSource.getClass());

        Connection connection = dataSource.getConnection();
        System.out.println(connection);

    }

}
</code></pre>
<p>here is my application.yml</p>
<pre class=""lang-yaml prettyprint-override""><code>spring:
  datasource:
    username: root
    password: 011575
    url: jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;allowPublicKeyRetrieval=true
    driver-class-name: com.mysql.cj.jdbc.Driver

</code></pre>
<p>I confirmed that my username is root and my pwd is 011575.And also open the mysql service, please help me!!</p>",70194557,2,0,,2021. 12. 2 오전 5:19:34,,2021. 12. 2 오전 5:35:40,,,,,17568155,,1,0,mysql,119
70350559,Group By weeks between two dates,"<p>I have a table of <code>logins</code> and it has a <code>created_at</code> field that stores the current date it's something like</p>
<pre><code>id, created_at
1, 2021-11-01
2, 2021-11-02
3, 2021-11-02
...
99, 2021-11-30
</code></pre>
<p>I have a range of dates that is <code>2021-11-01</code> to <code>2021-11-30</code> and I'd like to calculate the count of logins on week bases within that date range.</p>
<p>I have tried a lot in mysql but no luck, I can easily write multiple queries to achieve my result but was thinking if there is a way to do this in just one query.</p>
<p>Expected result:</p>
<pre><code>count, date
3, 2021-11-01
4, 2021-11-08
46, 2021-11-15
</code></pre>
<p>I wrote a simple query but couldn't get how would I iterate to get weeks</p>
<pre><code>SELECT count(id), CONCAT('Week ',WEEK('2021-11-30')) week
FROM logins
</code></pre>",70350666,1,0,,2021. 12. 14 오후 2:25:00,,2021. 12. 14 오후 2:32:14,,,,,4002819,,1,0,mysql,119
70315455,Count sum with trigger for delete/update/insert,"<p>I want to create trigger that updates price in a row. However this works fine whenever I am adding an amount, but it doesn't work whenever I am deleting the item or updating with smaller value. How can I make this trigger to work for all the 3 needs? I don't want to write multiple of triggers to handle this.</p>
<pre class=""lang-sql prettyprint-override""><code>CREATE FUNCTION sum_total() RETURNS TRIGGER
AS $$
BEGIN
    UPDATE payment
    SET price = price + (SELECT SUM(price) from basket WHERE service_id = new.service_id)
    WHERE service_id = new.service_id;
    RETURN NULL;
END; $$ LANGUAGE plpgsql;

CREATE TRIGGER sum_total AFTER INSERT ON basket
    FOR EACH ROW EXECUTE PROCEDURE sum_total();
</code></pre>",70319043,2,0,,2021. 12. 11 오후 1:14:11,,2021. 12. 11 오후 9:07:29,,,,,17575164,,1,0,sql|postgresql,120
70083613,dynamic dblink in postgresql,"<p>i have this piece of code :</p>
<pre><code>do $$
declare 
port int;
dbname varchar;
begin
    select current_database() into dbname;

    select setting into port from pg_catalog.pg_settings where name = 'port';

    perform format ('select dblink_connect(''toto'', ''port=%s dbname=%s'')', port, dbname);

    perform dblink_disconnect('toto');
end $$;
</code></pre>
<p>But when i run it, it says that my 'toto' connection does not exists when trying to disconnect it.</p>
<p>I've tried multiple things but nothing worked. I think there is something wrong with my dblink_connect, somehow it does not create the connection.</p>
<p>thanks for your help.</p>",70084189,1,0,,2021. 11. 23 오후 3:33:56,,2021. 11. 23 오후 4:11:37,,,,,12243069,,1,0,postgresql,121
70282803,How return a value with mysql query depending on condition?,"<p>I have the next mysql table:</p>
<pre><code>Table(cl_convenios_do_medico)
id auto_increment
med_id  int
conv_id int
</code></pre>
<p>I´d like a sql to return '1':</p>
<ol>
<li>If I found at least one &quot;med_id&quot; having a &quot;conv_id&quot;.</li>
<li>If the table is empty</li>
</ol>
<p>otherwise return '0'</p>
<p>I have tried something as:</p>
<pre><code>select IFNULL( (select '1' from cl_convenios_do_medico CC where 
    CC.med_id=&lt;my_med_id&gt; and CC.conv_id=&lt;my_conv_id&gt; ) 
    and  exists(select '1' from cl_convenios_do_medico CC where CC.med_id=&lt;my_med_id&gt; limit 1),'0') as result
</code></pre>
<p>If seems to work when the table is not empty, but fail if table is empty.</p>
<p>Maybe someone has a simpler solution.</p>",70283523,2,0,,2021. 12. 8 오후 11:07:27,,2022. 1. 21 오전 12:53:26,2022. 1. 21 오전 12:53:26,,17544312,,4536580,,1,0,mysql,121
70365702,How to map column name into query response if there is data present in column?,"<p>So lets say I have table like this with unknown number of columns. I would like to know if there is a way to map <code>env</code> struct properties into columns.</p>
<pre><code>ID | env.foo | env.bar | .... | unknown number of env. columns | .... | env.xyz |
1  | prod    | null    | null | null                           | null | null    |
2  | prod    | prod    | null | null                           | null | null    |
3  | null    | null    | null | null                           | null | prod    |
</code></pre>
<p>My desired output from this table would be like this</p>
<pre><code>ID | env 
1  | foo 
2  | foo 
2  | bar 
3  | xyz
</code></pre>",,1,0,,2021. 12. 15 오후 2:48:13,,2021. 12. 15 오후 5:43:16,,,,,6612592,,1,1,google-bigquery,122
70325309,grouping by parameters in postgres sql function and returning column name identical to the parameter,"<p>I have a query</p>
<pre><code>select count(distinct id), usertype from mytable group by usertype;
</code></pre>
<p>which I want to wrap in a function where usertype is a parameter</p>
<pre><code>create or replace function myfun(facet text)
RETURNS TABLE(total_accounts bigint, facet text)

LANGUAGE plpgsql
AS $$
    select count(distinct id), facet from mytable group by facet;
$$;
select * from myfun('usertype');
</code></pre>
<p>so that output column name also depends on the parameter I send.</p>
<p>But it shows an error 'parameter facet is used more than once'.</p>
<p>how do I make the output identical to the original query when I pass 'usertype' as a parameter?</p>",,1,0,,2021. 12. 12 오후 4:09:07,,2021. 12. 12 오후 4:30:19,2021. 12. 12 오후 4:14:19,,14358229,,14358229,,1,0,sql|postgresql,125
70235449,"Using WITH Clause and ""RETURN QUERY SELECT"" Together","<p>I have a problem using WITH clause and &quot;RETURN QUERY SELECT&quot; together.
I tried the following &quot;simplified&quot; function, but got an error.  How can I return result-set from WITH clause statement?</p>
<pre><code>CREATE FUNCTION f1() RETURNS TABLE(v1 varchar, v2 varchar)
LANGUAGE plpgsql
AS $$                 
BEGIN   
    WITH tbl AS 
    (
        SELECT 'a' AS aa , 'b' AS bb     
    )
    RETURN QUERY SELECT aa as v1, bb as v2 from tbl
END;   
$$;



ERROR:  syntax error at or near &quot;RETURN&quot;
LINE 10:     RETURN QUERY SELECT aa as v1, bb as v2 from tbl
             ^
SQL state: 42601
Character: 215
</code></pre>",70235584,1,0,,2021. 12. 5 오후 2:47:40,,2021. 12. 5 오후 3:10:13,,,,,1409708,,1,0,postgresql,127
70280580,SQL query to get values by the calendar month,"<p>I have the following schema:</p>
<pre><code>CREATE TABLE phone_clicks (
    id integer NOT NULL,
    start_date date NOT NULL,
    industry_id integer NOT NULL,
    clicks integer DEFAULT 0 NOT NULL
);

insert into phone_clicks(id, start_date, industry_id)
values
(1, '2021-10-03', 1),
(2, '2021-10-03', 2),
(3, '2021-10-02', 3),
(4, '2021-10-01', 1),
(5, '2021-11-01', 3),
(6, '2021-11-01', 4),
(7, '2021-11-02', 1),
(8, '2021-11-02', 2);
</code></pre>
<p>and i want to get a return object that has the industry id along with the number of items but based on the calendar month for the previous two months, not including the current. So i want the number of items in October and the number in November.</p>
<p>What i have, that is not working</p>
<pre><code>SELECT industry_id,
    sum(
        CASE
            WHEN start_date &gt;= (date_trunc('month', start_date) - interval '1 month')::date AND start_date &lt; (date_trunc('month', start_date) - interval '2 month')::date THEN 1
            ELSE 0
        END) AS last_month,
    sum(
        CASE
            WHEN start_date &gt;= (date_trunc('month', start_date) - interval '2 month')::date AND start_date &lt;= (date_trunc('month', start_date) - interval '3 month')::date THEN 1
            ELSE 0
        END) AS prev_month
   FROM phone_clicks
   Group by industry_id
</code></pre>
<p>What i am currently getting from the above :</p>
<pre><code>industry_id last_month  prev_month
     4          0           0
     1          0           0
     3          0           0
     2          0           0
</code></pre>
<p>What i am expecting:</p>
<pre><code>industry_id last_month  prev_month
     4          1           0
     1          1           2
     3          1           1
     2          1           1
</code></pre>
<p>So industry 1, it has two items with start_date in October and 1 in November.</p>",70282237,1,0,,2021. 12. 8 오후 7:20:06,,2021. 12. 8 오후 10:00:27,2021. 12. 8 오후 7:45:18,,1100102,,1100102,,1,0,sql|postgresql,129
70356737,MySQL JSON_INSERT() of an Array into Object creates Escape characters,"<p>MySQL v8.</p>
<p>The line of code below:</p>
<p><code>SELECT JSON_INSERT(@varJSON, '$.recordings', @recordedJSON) INTO @varJSON;</code></p>
<p>Will insert a JSON array into a JSON object. However, it is also introducing escape characters when doing so.</p>
<pre><code>/*Outputs*/

/* @varJSON before - Correct format. */
{&quot;routeName&quot;: &quot;INDIA&quot;, &quot;routeNotes&quot;: &quot;This is an area that must be reviewed and remarked out.&quot;}
 
/* @recordedJSON - Correct format.*/
[{&quot;sessionID&quot;: &quot;7811a89a-58b8-11ec-8172-42010ac00007&quot;, &quot;recordedGeom&quot;: {&quot;type&quot;: &quot;LineString&quot;, &quot;coordinates&quot;: [[-35.1235, 139.1234], [-36.1235, 139.1234], [1.234, 5.5456], [1.234, 149.1234]]}, &quot;recordingEnd&quot;: null, &quot;applianceName&quot;: &quot;The Basin - Pumper&quot;, &quot;recordingStart&quot;: &quot;2021-12-10 01:58:17.000000&quot;, &quot;applianceBrigade&quot;: &quot;The Basin&quot;}, {&quot;sessionID&quot;: &quot;another_test_test_test_&quot;, &quot;recordedGeom&quot;: {&quot;type&quot;: &quot;LineString&quot;, &quot;coordinates&quot;: [[-34.920281, 138.606703], [-34.922584, 138.607913]]}, &quot;recordingEnd&quot;: null, &quot;applianceName&quot;: &quot;The Basin - Pumper&quot;, &quot;recordingStart&quot;: &quot;2021-12-14 21:50:37.000000&quot;, &quot;applianceBrigade&quot;: &quot;The Basin&quot;}]

SELECT JSON_INSERT(@varJSON, '$.recordings', @recordedJSON) INTO @varJSON;
/*Note - I receive the same output format in JSON_SET*/


/*MySQL then inputs escape slashes in when I am using the code above.*/

{&quot;routeName&quot;: &quot;INDIA&quot;, &quot;recordings&quot;: &quot;[{\&quot;sessionID\&quot;: \&quot;7811a89a-58b8-11ec-8172-42010ac00007\&quot;, \&quot;recordedGeom\&quot;: {\&quot;type\&quot;: \&quot;LineString\&quot;, \&quot;coordinates\&quot;: [[-35.1235, 139.1234], [-36.1235, 139.1234], [1.234, 5.5456], [1.234, 149.1234]]}, \&quot;recordingEnd\&quot;: null, \&quot;applianceName\&quot;: \&quot;The Basin - Pumper\&quot;, \&quot;recordingStart\&quot;: \&quot;2021-12-10 01:58:17.000000\&quot;, \&quot;applianceBrigade\&quot;: \&quot;The Basin\&quot;}, {\&quot;sessionID\&quot;: \&quot;another_test_test_test_\&quot;, \&quot;recordedGeom\&quot;: {\&quot;type\&quot;: \&quot;LineString\&quot;, \&quot;coordinates\&quot;: [[-34.920281, 138.606703], [-34.922584, 138.607913]]}, \&quot;recordingEnd\&quot;: null, \&quot;applianceName\&quot;: \&quot;The Basin - Pumper\&quot;, \&quot;recordingStart\&quot;: \&quot;2021-12-14 21:50:37.000000\&quot;, \&quot;applianceBrigade\&quot;: \&quot;The Basin\&quot;}]&quot;, &quot;routeNotes&quot;: &quot;This is an area that must be reviewed and remarked out.&quot;}

</code></pre>
<p>I have read through this documentation several times and I cannot see what/where I am going wrong:</p>
<p><a href=""https://dev.mysql.com/doc/refman/5.7/en/json-modification-functions.html#function_json-set"" rel=""nofollow noreferrer"">https://dev.mysql.com/doc/refman/5.7/en/json-modification-functions.html#function_json-set</a>
<a href=""https://dev.mysql.com/doc/refman/8.0/en/json.html#json-normalization"" rel=""nofollow noreferrer"">https://dev.mysql.com/doc/refman/8.0/en/json.html#json-normalization</a></p>",,2,0,,2021. 12. 14 오후 11:25:49,,2021. 12. 14 오후 11:46:31,,,,,17146695,,1,0,mysql,129
70325974,BigQuery streaming insert with a function applied to another column,"<p>When using client libraries I can pass a list of objects to be inserted into BigQuery, like this one in Go <a href=""https://cloud.google.com/bigquery/docs/samples/bigquery-table-insert-rows#bigquery_table_insert_rows-go"" rel=""nofollow noreferrer"">https://cloud.google.com/bigquery/docs/samples/bigquery-table-insert-rows#bigquery_table_insert_rows-go</a></p>
<p>But what if I want to do something like this:</p>
<pre class=""lang-sql prettyprint-override""><code>INSERT INTO table_name (col1, col2)
VALUES
    (&quot;a&quot;, FARM_FINGERPRINT(&quot;a&quot;)),
    (&quot;bcd&quot;, FARM_FINGERPRINT(&quot;bcd&quot;)),
</code></pre>
<p>i.e. providing only values &quot;a&quot;, &quot;bcd&quot; insert into both columns where one is just a function of another.</p>
<p>How to do this using streaming insert in Go library, for example? Like this pseudo-code:</p>
<pre class=""lang-golang prettyprint-override""><code>...
inserter := client.Dataset(datasetID).Table(tableID).Inserter()
items := []*Item{
        // Item implements the ValueSaver interface.
        {Name: &quot;Phred Phlyntstone&quot;, Age: 32, SomeColumn: 'CALL_ME(&quot;Phred Phlyntstone&quot;)'},
        {Name: &quot;Wylma Phlyntstone&quot;, Age: 29, SomeColumn: 'CALL_ME(&quot;Wylma Phlyntstone&quot;)'}},
}
...
</code></pre>
<p>One possibility is to re-implement the function in Go code and insert in explicitly, but it's not ideal. Or with simple INSERT INTO I can hit DML limits. Is there a better solution?</p>",70373305,2,0,,2021. 12. 12 오후 5:27:44,,2021. 12. 16 오전 5:24:03,,,,,1837084,,1,0,google-bigquery,138
70108558,How to disambiguate PostgreSQL column references from table references in projections?,"<p>Assuming I have a schema like this:</p>
<pre class=""lang-sql prettyprint-override""><code>create table x (t1 int, t2 int);
create table t1 (t1 int, t2 int);
insert into x values (1, 2);
insert into t1 values (1, 2);
</code></pre>
<p>Now in PostgreSQL, I can conveniently project table references to create nested rows in the result:</p>
<pre class=""lang-sql prettyprint-override""><code>select x from x;
</code></pre>
<p>Producing:</p>
<pre class=""lang-none prettyprint-override""><code>|x     |
|------|
|[1, 2]|
</code></pre>
<p>But this doesn't work if there's a conflict between tables and columns:</p>
<pre class=""lang-sql prettyprint-override""><code>select t1 from t1;
</code></pre>
<p>That just translates to an unqualified column reference:</p>
<pre class=""lang-none prettyprint-override""><code>|t1 |
|---|
|1  |
</code></pre>
<p>Now, as I'm maintaining a SQL generator, let's assume I cannot alias the table (because I might not know what column names it contains, and any alias could still conflict with actual columns).</p>
<p>Is there any syntax which allows for disambiguating between table reference and column reference, such as e.g. a hypothetical syntax below?</p>
<pre class=""lang-sql prettyprint-override""><code>select t1::the_table_not_the_column from t1
</code></pre>",70108568,2,0,,2021. 11. 25 오전 9:21:46,,2021. 11. 25 오전 11:21:03,,,,,521799,,1,3,sql|postgresql,142
70210429,How to get the project Name and project Number through audit logs or through API's in google bigquery,"<p>I am trying to retrieve the project details such as <code>projectName</code> and <code>projectNumber</code> in <a href=""https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy#projects"" rel=""nofollow noreferrer"">bigquery</a>, but anywhere I can see only the <code>projectId</code> but not other details. I have explored the <a href=""https://console.cloud.google.com/logs/"" rel=""nofollow noreferrer"">audit logs</a> in my project when I ran a query and seen all the types of audit logs whether anywhere I can be able to find those details, but I was able to see the <code>projectId</code> only. I also explored the API's like is there any API serving my purpose, I have found one <a href=""https://cloud.google.com/bigquery/docs/reference/rest/v2/projects/list"" rel=""nofollow noreferrer"">API</a> which gives the list of projects but there also they are not providing the <code>projectName</code> and <code>projectNumber</code> details. So is there any other way I can get those details, please let me know.</p>
<p>EDIT: Looking for the JAVA API client</p>",,2,0,,2021. 12. 3 오전 6:44:14,,2021. 12. 20 오후 4:58:23,2021. 12. 6 오후 12:21:09,,11560878,,7408451,,1,2,google-bigquery,659
70065834,How to Start PostgreSQL in Windows,"<p>I would like to configure PosgreSQL in Windows machine.</p>
<p>Every time we have to recall the configuration process.</p>
<p>Please find the process below.</p>",,1,0,,2021. 11. 22 오후 12:36:04,,2021. 11. 22 오후 12:38:22,2021. 11. 22 오후 12:38:22,,330315,,1593230,,1,0,postgresql,150
70085091,Using dense_rank to find the 2nd highest salary in MYSQL,"<p>I am trying to do this Leetcode question where we try to find the 2nd highest salary from the EMPLOYEE TABLE.</p>
<p>INPUT :</p>
<pre><code>+-------------+------+
| Column Name | Type |
+-------------+------+
| id          | int  |
| salary      | int  |
+-------------+------+
</code></pre>
<p>id is the primary key column for this table.
Each row of this table contains information about the salary of an employee.</p>
<p>My answer is the following. But leetcode is not accepting this answer. What if I don't want to use the offset clause and use the dense function? Can it be done? Kindly help.</p>
<pre><code>with temp1 as
(select id, salary, dense_rank() over (order by salary desc) as salary_order
from employee)
select coalesce(salary, null) as SecondHighestSalary
from temp1
where salary_order=2;
</code></pre>
<p>Question Link: <a href=""https://leetcode.com/problems/second-highest-salary/"" rel=""nofollow noreferrer"">https://leetcode.com/problems/second-highest-salary/</a></p>",,1,0,,2021. 11. 23 오후 5:16:14,0,2021. 11. 23 오후 6:18:44,2021. 11. 23 오후 5:24:21,,2310830,,15059717,,1,-1,mysql,152
70246581,On conflict do nothing with a custom constraint,"<p>I need to do the following:</p>
<pre><code>insert into table_a (primarykey_field, other_field)
select primarykey_field, other_field from table_b b
on conflict (primarykey_field) where primarykey_field &gt;&gt;= b.primarykey_field do nothing;
</code></pre>
<p>Nevermind the operation of my where condition it could be anything except a simple equal. in mycase I'm using a custom ip range field soI I want to check that one ip address is not in the range of the other ip adderss when I'm inserting a new row.</p>
<p>Is there a way I can do this with <code>on conflict</code> or with another query?</p>",70246984,1,0,,2021. 12. 6 오후 1:52:46,,2021. 12. 6 오후 5:17:29,,,,,11049921,,1,0,sql|postgresql,152
70174092,Like vs Similar to vs rLike,"<p>I am trying to understand the differences between <strong>like</strong>, <strong>rlike</strong> and <strong>similar to</strong> in postgres and whether there are specific use cases for each operator.</p>
<p>Being familiar with TSQL I generally used the <strong>like</strong> operator to do things like</p>
<pre><code>Select * From Table where ColA like '%[0-9]%[a-z]%'
</code></pre>
<p>But in postgres the same statement would not yield the same results.</p>
<p>My questions are:</p>
<ol>
<li>What, if any, operator in postgres (<strong>like</strong>, rlike, <strong>similar to</strong>, ...) most closely mimics the functionality/usability of the <strong>like</strong> operator in tsql?</li>
<li>Is there a general rule of thumb when deciding which operator to use in postgress?</li>
</ol>
<p>Thanks!</p>",70174156,1,0,,2021. 11. 30 오후 6:05:36,,2021. 11. 30 오후 6:21:12,2021. 11. 30 오후 6:21:12,,2029983,,6374012,,1,0,sql|postgresql,408
70200560,How to use KEYS.KEYSET_CHAIN in BigQuery,"<p>I'm trying to use KEYS.KEYSET_CHAIN to obtain the a key from the KMS but I haven't figured out how to generate the first_level_keyset correctly. I'm getting the following message:</p>
<p><strong>AEAD.ENCRYPT failed: Keyset deserialization failed: Error reading keyset data: Could not parse the input stream as a Keyset-proto.</strong></p>
<p>I'm following the doc:</p>
<ul>
<li><a href=""https://cloud.google.com/bigquery/docs/reference/standard-sql/aead_encryption_functions#keyskeyset_chain"" rel=""nofollow noreferrer"">https://cloud.google.com/bigquery/docs/reference/standard-sql/aead_encryption_functions#keyskeyset_chain</a></li>
</ul>
<p>My code:</p>
<pre><code>DECLARE KMS_RESOURCE_NAME STRING;
DECLARE FIRST_LEVEL_KEYSET BYTES;

SET KMS_RESOURCE_NAME = 'gcp-kms://projects/XXX/locations/XXX/keyRings/XXX-key-ring/cryptoKeys/XXX-key';
SET FIRST_LEVEL_KEYSET = FROM_HEX(&quot;0a240... &lt;suppressed&gt;&quot;);

select AEAD.ENCRYPT(KEYS.KEYSET_CHAIN(KMS_RESOURCE_NAME, FIRST_LEVEL_KEYSET), b'string to encrypt', b'customer_id');
</code></pre>",70218254,1,0,,2021. 12. 2 오후 1:42:13,,2021. 12. 5 오전 3:44:57,,,,,13638069,,1,2,google-bigquery,412
70252748,replace null values in subsequent rows from previous row,"<p>I have this table about foods and rating and facing this scenario.</p>
<pre><code>select * from foods
</code></pre>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>food_type</th>
<th>country</th>
<th>rating</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pizza</td>
<td>Italy</td>
<td>8</td>
</tr>
<tr>
<td>Pizza</td>
<td>Italy</td>
<td>null</td>
</tr>
<tr>
<td>Pizza</td>
<td>Italy</td>
<td>null</td>
</tr>
<tr>
<td>Pizza</td>
<td>Sweden</td>
<td>6</td>
</tr>
<tr>
<td>Pizza</td>
<td>Sweden</td>
<td>null</td>
</tr>
<tr>
<td>Pizza</td>
<td>Sweden</td>
<td>null</td>
</tr>
<tr>
<td>Calzone</td>
<td>France</td>
<td>7</td>
</tr>
<tr>
<td>Calzone</td>
<td>France</td>
<td>null</td>
</tr>
<tr>
<td>Calzone</td>
<td>France</td>
<td>null</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>10</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>null</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>null</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>null</td>
</tr>
</tbody>
</table>
</div>
<p>How can I replace the <strong>nulls</strong> with the rating value of the same food_type and same country from the previous not null rating value? e.g. <strong>new_rating column</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>food_type</th>
<th>country</th>
<th>rating</th>
<th>new_rating</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pizza</td>
<td>Italy</td>
<td>8</td>
<td>8</td>
</tr>
<tr>
<td>Pizza</td>
<td>Italy</td>
<td>null</td>
<td>8</td>
</tr>
<tr>
<td>Pizza</td>
<td>Italy</td>
<td>null</td>
<td>8</td>
</tr>
<tr>
<td>Pizza</td>
<td>Sweden</td>
<td>6</td>
<td>6</td>
</tr>
<tr>
<td>Pizza</td>
<td>Sweden</td>
<td>null</td>
<td>6</td>
</tr>
<tr>
<td>Pizza</td>
<td>Sweden</td>
<td>null</td>
<td>6</td>
</tr>
<tr>
<td>Calzone</td>
<td>France</td>
<td>7</td>
<td>7</td>
</tr>
<tr>
<td>Calzone</td>
<td>France</td>
<td>null</td>
<td>7</td>
</tr>
<tr>
<td>Calzone</td>
<td>France</td>
<td>null</td>
<td>7</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>10</td>
<td>10</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>null</td>
<td>10</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>null</td>
<td>10</td>
</tr>
<tr>
<td>Hero Sub</td>
<td>USA</td>
<td>null</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>I am using postgreSQL 11.4!</p>",,2,0,,2021. 12. 6 오후 10:29:40,,2021. 12. 6 오후 11:15:35,,,,,7044005,,1,0,sql|postgresql,159
70343139,Does PERFORM inside of a trigger execute a function in the same transaction as the caller?,"<p>I have come across a postgres trigger that is defined like so...</p>
<pre class=""lang-sql prettyprint-override""><code>CREATE FUNCTION public.my_trigger_func() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
  BEGIN
    PERFORM my_other_func(NEW.my_val);
    RETURN NULL;
  END;
$$;
</code></pre>
<p>From what this <a href=""https://stackoverflow.com/a/10727471/4227700"">other post's answer</a> says (I cannot find it explicitly stated in the postgres documentation):</p>
<blockquote>
<p>All PostgreSQL triggers execute in the same transaction as the transaction that has triggered them.</p>
</blockquote>
<p>However, does the function <code>my_other_func</code>, called with <code>PERFORM</code>, get run in the same transaction as well?  Or what is its behavior in this context?</p>
<p>Postgres version:</p>
<pre><code>select version();
                                                     version                                                      
------------------------------------------------------------------------------------------------------------------
 PostgreSQL 12.7 (Debian 12.7-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit
</code></pre>",70343277,1,0,,2021. 12. 14 오전 2:36:39,,2021. 12. 14 오전 2:58:02,,,,,4227700,,1,1,postgresql,162
70351010,Why does bigquery show the number (1) behind some tables,"<p>After loading data with batch processing to Google BigQuery i'm expecting tables that are partitioned based on their date (I know, have to rename the column of date as it's reserved).</p>
<p>However, when receiving some new tables they have a different icon and show the number 1 behind the table in this format <em><strong>(1)</strong></em>. See the image below.</p>
<p>What is happening here? I would expect them to be normal partitioned tables.<br />
I can't find this anywhere in their documentation or the wider web.</p>
<p>// if you give a -1 at least tell me why? What is wrong with this question?</p>
<p><a href=""https://i.stack.imgur.com/CiqfQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/CiqfQ.png"" alt=""enter image description here"" /></a></p>",70355807,1,0,,2021. 12. 14 오후 2:58:22,,2021. 12. 14 오후 9:35:26,2021. 12. 14 오후 4:15:05,,2468182,,2468182,,1,2,google-bigquery,163
70063912,BigQuery - default expiration time,"<p>How to update the default expiration time for a dataset to never.</p>
<p>Here is an example how it is set to 60 days,
but I would like the dataset to never expired.</p>
<p>ALTER SCHEMA mydataset
SET OPTIONS(default_table_expiration_days=60)</p>",70064725,1,0,,2021. 11. 22 오전 9:59:33,,2021. 11. 22 오전 11:01:18,,,,,3972214,,1,0,google-bigquery,169
70089488,How to activate table preview menu in Bigquery Console?,"<p>I started BigQuery trial account just before
and created sample table using a source with Drive URI &amp; CSV.</p>
<p>When I clicked my uploaded table, it shows table information like schema and details.</p>
<p>I remember that there was a <code>preview</code> menu but I can't find it now. <a href=""https://i.stack.imgur.com/lmxBQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lmxBQ.png"" alt=""enter image description here"" /></a></p>
<p>Is there anyway to activate table preview menu?</p>",70091467,1,0,,2021. 11. 24 오전 12:39:41,,2021. 11. 24 오전 6:19:32,2021. 11. 24 오전 5:28:27,,14733669,,16927836,,1,0,google-bigquery,169
70191081,getting this error when running rails db:seed,"<pre><code>ActiveRecord::ConnectionNotEstablished: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket &quot;/tmp/.s.PGSQL.5432&quot;?
/Users/tylerwashington/new-work/Meta-Minds/bin/rails:5:in `&lt;top (required)&gt;'
/Users/tylerwashington/new-work/Meta-Minds/bin/spring:10:in `block in &lt;top (required)&gt;'
/Users/tylerwashington/new-work/Meta-Minds/bin/spring:7:in `&lt;top (required)&gt;'

Caused by:
PG::ConnectionBad: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket &quot;/tmp/.s.PGSQL.5432&quot;?
/Users/tylerwashington/new-work/Meta-Minds/bin/rails:5:in `&lt;top (required)&gt;'
/Users/tylerwashington/new-work/Meta-Minds/bin/spring:10:in `block in &lt;top (required)&gt;'
/Users/tylerwashington/new-work/Meta-Minds/bin/spring:7:in `&lt;top (required)&gt;'
Tasks: TOP =&gt; db:abort_if_pending_migrations
(See full trace by running task with --trace)
</code></pre>
<p>so far I have tried <code>brew services start postgresql</code> and I get back <code>Error: Formula postgresql is not installed</code> but I have version 12.8 installed</p>",,0,0,,2021. 12. 1 오후 8:55:17,,2021. 12. 1 오후 9:06:05,2021. 12. 1 오후 9:06:05,,2336231,,17472641,,1,0,postgresql,169
70174694,Behavior difference between TIMESTAMP_DIFF and TIMESTAMP_SUB in BigQuery,"<p>I tested two ways of finding if the difference between two events expires a given threshold and found out that the second one (using <code>TIMESTAMP_DIFF</code>) seems to be more consistent.</p>
<p><code>TIMESTAMP_SUB(finished_at, INTERVAL 24 HOUR) &lt; created_at</code></p>
<p><code>TIMESTAMP_DIFF(finished_at, created_at, HOUR) &gt; 24</code></p>
<p>But I don't understand why <code>TIMESTAMP_SUB</code> doesn't give the same result.</p>",,1,0,,2021. 11. 30 오후 7:01:35,,2021. 11. 30 오후 8:53:42,,,,,6922088,,1,-1,google-bigquery,170
70151076,How to select rows in every day between two dates using MySQL,"<p>I want to keep track of users logged in every day between two dates.
Let's say I have a table <code>my_table</code> like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>user_id</th>
<th>login_datetime</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2021-10-02 10:00:00</td>
</tr>
<tr>
<td>1</td>
<td>2021-10-02 12:00:00</td>
</tr>
<tr>
<td>2</td>
<td>2021-10-02 12:20:00</td>
</tr>
<tr>
<td>1</td>
<td>2021-10-03 17:00:00</td>
</tr>
<tr>
<td>1</td>
<td>2021-10-04 22:00:00</td>
</tr>
<tr>
<td>2</td>
<td>2021-10-04 23:00:00</td>
</tr>
</tbody>
</table>
</div>
<p>and given date range is from '2021-10-02' to '2021-10-04'.</p>
<p>I want to get user_id = 1 in this case, because user_id = 2 is not logged in at '2021-10-03'</p>
<p>result</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>user_id</th>
<th>login_date</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2021-10-02</td>
</tr>
<tr>
<td>1</td>
<td>2021-10-03</td>
</tr>
<tr>
<td>1</td>
<td>2021-10-04</td>
</tr>
</tbody>
</table>
</div>
<p>Is there any solution for this?</p>",70151188,1,0,,2021. 11. 29 오전 7:34:11,,2021. 11. 29 오전 8:02:40,,,,,12517302,,1,2,mysql,176
70153120,BigQuery view not allowing to add policy tag to column,<p>BigQuery shows option to add policy tag to Table by editing schema. Unable to do the same for BigQuery view.</p>,,1,0,,2021. 11. 29 오전 10:31:32,,2021. 11. 29 오전 10:57:09,,,,,2072589,,1,0,google-bigquery,176
70196519,Postgres override system function,"<p>Is it possible to override a Postgres system function with user-defined function?</p>
<p>I have created a user-defined function 'substr' but it works only if I specify the schema name, else it uses the system function 'substr'.</p>
<p>Is there a way to override the system function 'substr' and use my user-defined function 'substr' without having to use schema name?</p>
<p>The reason is I want the same functionality of Oracle substr in PG for the existing code base.</p>",70196632,1,0,,2021. 12. 2 오전 8:55:13,,2021. 12. 2 오전 9:04:03,,,,,5944884,,1,0,postgresql,183
70201022,Cypher virtual nodes to aggregate many to many relationships,"<p>I have 8000 Authors nodes and 2000 book nodes. Each author has a country property and each book can be co-authored by many authors.</p>
<p>I am trying to show which countries have collaborated on books by grouping all authors from a country into a single virtualNode called Country. Then I would need to create a virtual relationship between countries based on the number of times each author in CountryA has published something with an Author from CountryB.</p>
<p>I have a few queries that are doing stuff, but can't get it quite to what I want. Here is what I have tried and the outcome:</p>
<pre><code>MATCH (a1:Author)--&gt;(p:Paper)&lt;--(a2:Author)
WHERE a1.country &lt;&gt; a2.country
WITH apoc.create.vNode(['Country'], {name: a1.country}) as Country1,  apoc.create.vNode(['Country'], {name: a2.country}) as Country2, count(p) as numCollabs
RETURN DISTINCT Country1, Country2, apoc.create.vRelationship(Country1, 'COLLABORATED_WITH', {numCollabs: numCollabs}, Country2) LIMIT 25
</code></pre>
<p>This shows many duplicate countries ( I assume 1 for each author rather than aggregating authors ) and the numCollabs on each relationship is always 1.</p>
<p>I also tried this one:</p>
<pre><code>MATCH (a: Author)
WITH a.country as country, count(*) as count
RETURN apoc.create.vNode(['Country'], {name: country, authors: count}) as countries
</code></pre>
<p>This gives me the proper number of countries and shows the number of authors in that country... however, I cannot figure out how to then create the vRelationship which will show how many times each country has worked with each other country.</p>",70205061,1,0,,2021. 12. 2 오후 2:12:04,,2021. 12. 3 오후 8:07:12,,,,,11571390,,1,0,neo4j|cypher,184
70350269,Run a Big Query Schedule everytime a table is updated,"<p>So I have this schedule that gets data from some tables and aggregate then into a single table, that I use as a source in a data studio dash, one of these tables (table 1), is updated daily, sometimes more than once, I wanted to know if there is a way to automatically run the schedule every time this table (table1) is updated.</p>",70367330,1,0,,2021. 12. 14 오후 2:08:17,,2021. 12. 15 오후 4:45:48,,,,,17491194,,1,0,google-bigquery,188
70119158,SQL Calculate Jaccard Similarity (IoU),"<p>I have 2 Postgres tables:</p>
<p>Table <code>UserItems</code>:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>uuid</th>
<th>user</th>
<th>item</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>item1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>item2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>item3</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>item1</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>item2</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>item4</td>
</tr>
<tr>
<td>6</td>
<td>3</td>
<td>item2</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>item5</td>
</tr>
<tr>
<td>8</td>
<td>4</td>
<td>item1</td>
</tr>
<tr>
<td>9</td>
<td>4</td>
<td>item5</td>
</tr>
</tbody>
</table>
</div>
<p>Table <code>Items</code></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>item</th>
<th>feature1</th>
<th>feature2</th>
<th>feature3</th>
</tr>
</thead>
<tbody>
<tr>
<td>item1</td>
<td>val_11</td>
<td>val_12</td>
<td>val_13</td>
</tr>
<tr>
<td>item2</td>
<td>val_21</td>
<td>val_22</td>
<td>val_23</td>
</tr>
<tr>
<td>item3</td>
<td>val_31</td>
<td>val_32</td>
<td>val_33</td>
</tr>
<tr>
<td>item4</td>
<td>val_41</td>
<td>val_42</td>
<td>val_43</td>
</tr>
<tr>
<td>item4</td>
<td>val_51</td>
<td>val_52</td>
<td>val_53</td>
</tr>
</tbody>
</table>
</div>
<p>I'd like to calculate the Jaccard similarity given some input X. So for example, if the input X is <code>item1</code>, I'd like to find every user which has purchased <code>item1</code>, then calculate the Intersection Over Union (IOU) for every other item which any of those users have purchased. The output would then be:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>item</th>
<th>feature1</th>
<th>feature2</th>
<th>feature3</th>
<th>jaccard</th>
</tr>
</thead>
<tbody>
<tr>
<td>item2</td>
<td>val_21</td>
<td>val_22</td>
<td>val_23</td>
<td>0.67</td>
</tr>
<tr>
<td>item3</td>
<td>val_31</td>
<td>val_32</td>
<td>val_33</td>
<td>0.33</td>
</tr>
<tr>
<td>item4</td>
<td>val_41</td>
<td>val_42</td>
<td>val_43</td>
<td>0.33</td>
</tr>
<tr>
<td>item5</td>
<td>val_51</td>
<td>val_52</td>
<td>val_53</td>
<td>0.33</td>
</tr>
</tbody>
</table>
</div>
<p>My approach so far is</p>
<pre><code>SELECT t1.item
FROM UserItems AS t1
JOIN Items AS t2 ON t1.item&lt;&gt;t1.item
WHERE t1.item={input}
GROUP BY t1.item
</code></pre>
<p>Then the idea was that I could count the total number of times that each item occurs divided by the total number of groups ... But I'm stumped on how to count the total number of times that each item occurs</p>
<pre><code></code></pre>",70119290,1,0,,2021. 11. 26 오전 2:58:17,,2021. 11. 26 오전 3:25:53,2021. 11. 26 오전 3:16:14,,9968110,,9968110,,1,0,sql|postgresql,189
70034054,How to get the row access policy related metadata using bigquery sql in Google Big Query?,"<p>Google Big Query has well documented ways to get the metadata about other objects <a href=""https://cloud.google.com/bigquery/docs/information-schema-intro"" rel=""nofollow noreferrer"">(Table, Datasets, Routine, etc)</a> using SQL like queries. I am using Python driver to execute those queries and getting expected result.
But I didn't found any query which can list the metadata about row access policies.</p>
<pre><code>CREATE ROW ACCESS POLICY My_row_filter ON example_dataset.my_base_table3 GRANT TO (&quot;domain:example.com&quot;) FILTER USING (lastName=&quot;Doe&quot;);
</code></pre>
<p>I have gone through the documentation and found the same can be displayed using bq command line tool.</p>
<pre><code>bq ls --row_access_policies example_dataset.my_base_table3
</code></pre>
<p>Is there a way to get metadata related to row access policy via Python driver?</p>",70065776,1,0,,2021. 11. 19 오전 11:21:07,,2021. 11. 23 오전 8:54:18,2021. 11. 23 오전 8:54:18,,11560878,,9460702,,1,1,google-bigquery,190
70124814,How to convert binary string to integer in BigQuery,"<p>I would need to convert a binary string (actually string) column to its integer representation:</p>
<pre><code>----------------------------------------------------------------
| binary_string (string)    |   integer (int64) &lt;- What I need |
----------------------------------------------------------------
| '1011011100111000'        |   46904                          |
| '1111111111101011'        |   65515                          |
| '0111111001001010'        |   32330                          |
----------------------------------------------------------------

</code></pre>
<p>In my case the values are 16 bit max.</p>
<p>It's the equivalent to javascript code: <code>parseInt('0111111001001010', 2)</code></p>
<p>Thanks</p>",70129229,2,0,,2021. 11. 26 오후 12:58:24,,2021. 11. 26 오후 7:30:35,,,,,2861702,,1,0,google-bigquery,193
70374514,How to remove \n���� from a sentence in bigquery,"<p>I want to remove \n���� from a sentence in biquery. I have used the following query  REGEXP_REPLACE(Sentence, r'([^\p{ASCII}]+)', '')  AS Senetnce. It is removing only the question marks. How do I remove \n also? Thanks.</p>",70374546,1,0,,2021. 12. 16 오전 6:05:47,,2021. 12. 16 오전 6:09:53,,,,,16784408,,1,0,google-bigquery,193
70280298,Select odd or even values from text array,"<p>How to select odd or even values from a text array in Postgres?</p>
<p>You can select by index (starts at 1)</p>
<pre><code>select
text_array[1] as first
from (
  select '{a,1,b,2,c,3}'::text[] as text_array
) as x
</code></pre>
<p>There is not a native function for this: <a href=""https://www.postgresql.org/docs/13/functions-array.html"" rel=""nofollow noreferrer"">https://www.postgresql.org/docs/13/functions-array.html</a>. I see Postgres supports modulo math (<a href=""https://www.postgresql.org/docs/13/functions-math.html"" rel=""nofollow noreferrer"">https://www.postgresql.org/docs/13/functions-math.html</a>) but I'm not sure how to apply that here as the below is invalid:</p>
<pre><code>select
text_array[%2] as odd
from (
  select '{a,1,b,2,c,3}'::text[] as text_array
) as x
</code></pre>
<p>The goal is to get <code>{a,1,b,2,c,3}</code> -&gt; <code>{a,b,c}</code>. Likewise for even, <code>{a,1,b,2,c,3}</code> -&gt; <code>{1,2,3}</code>.</p>
<p>Any guidance would be greatly appreciated!</p>",70280777,1,0,,2021. 12. 8 오후 6:53:39,1,2021. 12. 9 오후 6:42:05,,,,,241673,,1,1,sql|postgresql,195
70107190,Unable to save a view in a different BigQuery project,"<p>I have my big query table <em><strong>Tab1</strong></em> in GCP Project A. I have created a new GCP Project B. I have written a query that retrieves data stored in <em><strong>Tab1</strong></em> and I want to store this as view in Project B.</p>
<p>I am getting an error like this:</p>
<p><em>Not found: Dataset Project A:Tab1 not found</em></p>
<p>Both projects are under the same organization. How do I create views in new projects based on data stored in another project.</p>",,2,0,,2021. 11. 25 오전 7:22:19,,2021. 11. 25 오전 10:20:13,,,,,11673739,,1,0,google-bigquery,201
70225627,How in Cypher do I output a row number,"<p>Given a query like this</p>
<pre><code>match (u:User)-[]-&gt;(p:Project) return 'x' as row_number, u, p
</code></pre>
<p>How do I output a resultset like this, with row_number being the row number?</p>
<pre><code>╒════════════╤═════════════════╤══════════════════╕
│&quot;row_number&quot;│&quot;u&quot;              │&quot;p&quot;               │
╞════════════╪═════════════════╪══════════════════╡
│&quot;x&quot;         │{&quot;name&quot;:&quot;Martin&quot;}│{&quot;name&quot;:&quot;Martin2&quot;}│
├────────────┼─────────────────┼──────────────────┤
│&quot;x&quot;         │{&quot;name&quot;:&quot;Martin&quot;}│{&quot;name&quot;:&quot;Martin1&quot;}│
├────────────┼─────────────────┼──────────────────┤
│&quot;x&quot;         │{&quot;name&quot;:&quot;Bob&quot;}   │{&quot;name&quot;:&quot;Bob2&quot;}   │
├────────────┼─────────────────┼──────────────────┤
│&quot;x&quot;         │{&quot;name&quot;:&quot;Bob&quot;}   │{&quot;name&quot;:&quot;Bob1&quot;}   │
└────────────┴─────────────────┴──────────────────┘
</code></pre>",70226124,2,0,,2021. 12. 4 오후 12:36:01,,2021. 12. 4 오후 1:43:21,,,,,954927,,1,0,neo4j|cypher,202
70366936,"Illegal mix of collations (utf8mb4_unicode_ci,COERCIBLE) and (latin1_swedish_ci,IMPLICIT) for operation '='","<pre><code>I have a query like this:

SELECT MOV.id, MOV.idProd, MOV.merce, MOV.move AS qta, MOV.prezzo, MOV.seriale, MOV.lotto, MOV.SNLTdett, MOV.scadenza, MOV.typeMove, MOV.typeDoc, MOV.tabDoc, MOV.tabIdDoc, MOV.ragSoc, MOV.rifDoc, MOV.dataDoc, MOV.rifMove, MOV.dataMove, MOV.dataModifica, MOV.usrModifica, MOV.note, P.codProdotto, P.nomeProdotto, P.composto, CSL.ita AS causale 
    FROM PArticoli AS P, varCausaliDoc AS CSL, magMovimenti AS MOV 
        INNER JOIN(
            SELECT rifDoc, 'bollaOut' AS tabDoc FROM bollaOut WHERE idRagSoc=7 AND typRagSoc='cliente' UNION 
            SELECT rifDoc, 'schApp' AS tabDoc FROM schApp WHERE idCliente=7 UNION 
            SELECT rifDoc, 'schAut' AS tabDoc FROM schAut WHERE idCliente=7 UNION 
            SELECT rifDoc, 'schOrd' AS tabDoc FROM schOrd WHERE idCliente=7 UNION 
            SELECT rifDoc, 'schLoc' AS tabDoc FROM schLoc WHERE idCliente=7 
        ) DOCOUT ON DOCOUT.tabDoc=MOV.tabDoc AND DOCOUT.rifDoc=MOV.rifDoc  
    WHERE MOV.idProd=P.id AND MOV.typeDoc=CSL.ident AND MOV.idProd=2595
</code></pre>
<p>the problem is here DOCOUT.tabDoc=MOV.tabDoc because it's a &quot;latin1_swedish_ci&quot;</p>
<p>I have tried solution as:</p>
<ul>
<li>... (DOCOUT.tabDoc COLLATE latin1_swedish_ci) = MOV.tabDoc ... but I have an error as: COLLATION 'latin1_swedish_ci' is not valid for CHARACTER SET 'utf8mb4'</li>
<li>... DOCOUT.tabDoc = (MOV.tabDoc COLLATE utf8mb4_unicode_ci) ... but I have an error as: COLLATION 'utf8mb4_unicode_ci' is not valid for CHARACTER SET 'latin1'</li>
</ul>
<p>I wouldn't like to change the charset on my dbase because I'm afraid to broke something in some other parts in my code... any suggestions?</p>",70367241,1,0,,2021. 12. 15 오후 4:15:27,,2021. 12. 15 오후 4:39:24,,,,,2051816,,1,0,mysql,204
70322047,Need proper query to filter according to date which is a relationship property in neo4j,"<p>I have a User label and a Follows relationship. Follows relationship has a property <code>ts</code>.
I want to get all the users that followed a particular user before a specific date.
However the query is not returning any records.</p>
<p>Get all followers</p>
<pre><code>MATCH (b) WHERE id(b) = 172  MATCH (a)-[f:Follows]-&gt;(b) RETURN f.ts
</code></pre>
<p>Output:</p>
<blockquote>
<p>&quot;2021-12-10T00:00:00&quot;</p>
</blockquote>
<p>Get all followers where ts is less than or equal to the date, 11th December, 2021</p>
<pre><code>MATCH (b) WHERE id(b) = 172  MATCH (a)-[f:Follows]-&gt;(b) WHERE f.ts &lt;= &quot;DateTime({year:2021, month:12, day:11})&quot; RETURN f.ts
</code></pre>
<p>Output:</p>
<blockquote>
<p>(no changes, no records)</p>
</blockquote>
<p>In actuality, I want to compare the whole timestamp</p>",70323190,1,0,,2021. 12. 12 오전 8:28:58,,2021. 12. 12 오후 1:02:19,2021. 12. 12 오후 12:26:03,,8496019,,8496019,,1,0,neo4j|cypher,206
70294474,how to retrieve data from multiple tables (postgresql),"<p>I have 4 different tables that are linked to each other in the following way (I only kept the essential columns in each table to emphasise the relationships between them):</p>
<pre><code>create TABLE public.country (
    country_code  varchar(2) NOT NULL PRIMARY KEY,
    country_name  text NOT NULL,

    
);


create table public.address
(
    id                    integer generated always as identity primary key,
    country_code          text not null,
    CONSTRAINT FK_address_2 FOREIGN KEY (country_code) REFERENCES public.country (country_code)
);


create table public.client_order
(
    id                         integer generated always as identity primary key,
    address_id                 integer null,
    CONSTRAINT FK_client_order_1 FOREIGN KEY (address_id) REFERENCES public.address (id)
    
);

create table public.client_order_line
(
    id                                   integer generated always as identity primary key,
    client_order_id                      integer not null,
    product_id                           integer not null,
    client_order_status_id               integer not null default 0,
    quantity                             integer not null,
 
    CONSTRAINT FK_client_order_line_0 FOREIGN KEY (client_order_id) REFERENCES public.client_order (id)
);
</code></pre>
<p>I want to get the data in the following way: for each client order line to show the product_id, quantity and country_name(corresponding to that client order line).</p>
<p>I tried this so far:</p>
<pre><code>SELECT country_name FROM public.country WHERE country_code = (
    SELECT country_code FROM public.address WHERE id = (
        SELECT address_id FROM public.client_order WHERE  id= 5
    )
)
</code></pre>
<p>to get the country name given a client_order_id from client_order_line table. I don't know how to change this to get all the information mentioned above, from client_order_line table which looks like this:</p>
<pre><code>id  client_order_id. product_id.   status. quantity
1   1                122           0       1000
2   2                122           0       3000
3   2                125           0       3000
4   3                445           0       2000
</code></pre>
<p>Thanks a lot!</p>",70294817,1,0,,2021. 12. 9 오후 5:49:49,,2021. 12. 9 오후 6:17:12,,,,,15644093,,1,0,postgresql,207
70086109,Count the amount of times a word appears in BigQuery column,"<p>I have a column with some long strings and need to count the most used words in it.</p>
<p>I need something that works like this <a href=""https://towardsdatascience.com/very-simple-python-script-for-extracting-most-common-words-from-a-story-1e3570d0b9d0"" rel=""nofollow noreferrer"">https://towardsdatascience.com/very-simple-python-script-for-extracting-most-common-words-from-a-story-1e3570d0b9d0</a>. The word counting part at least...</p>
<p>And it is very important that i have the option to blacklist some words so they dont count.</p>",70088715,1,0,,2021. 11. 23 오후 6:33:37,1,2021. 11. 23 오후 10:40:31,,,,,17491194,,1,1,google-bigquery,217
70353978,Mysql SUM with case statement and multiple conditions,"<pre><code>SUM( CASE WHEN items.items_status != 2 THEN items.items_amount 
ELSE 0
END) as ItemsAmount
FROM orders 
LEFT JOIN items ON orders.orders_id = items.orders_id
WHERE orders.orders_status = 1 
group by orders.orders_id 


I get the following:


|     orders_id       |    orders_amount |    orders_status  |     ItemsAmount  |
|---------------------|------------------|------------------ |------------------|
|          1          |         10500    |     1             |      10500       |
|          2          |         2500     |     1             |      1300        |

</code></pre>
<p>I would like to exclude orders when orders_amount = ItemsAmount .
So i have to add another conditions and the first line should be excluded</p>
<p>My two table are ( orders and items ).</p>
<p>table: items</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Item_id</th>
<th>orders_id</th>
<th>items_amount</th>
<th>items_staus</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>10500</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>100</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>1200</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>200</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>5000</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>Table : orders</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>orders_id</th>
<th>orders_status</th>
<th>orders_amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>10500</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>2500</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>7000</td>
</tr>
</tbody>
</table>
</div>",70354062,2,0,,2021. 12. 14 오후 6:34:35,,2021. 12. 14 오후 6:50:38,,,,,17676796,,1,0,mysql,217
70126705,How do I convert postgreSQL results to JSON?,"<p>I have this sql</p>
<pre class=""lang-sql prettyprint-override""><code>select post_id, tag 
from finalcache
order by tag, post_rank desc
</code></pre>
<p>It gives this results.</p>
<p><a href=""https://i.stack.imgur.com/vRgDs.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/vRgDs.png"" alt=""enter image description here"" /></a></p>
<p>How do i get the results to look like this?</p>
<pre class=""lang-json prettyprint-override""><code>{
   &quot;Politics&quot;: [&quot;1e4fd2c5-c32e-4e3f-91b3-45478bcf0185&quot;],
   &quot;Technology&quot;: [
      &quot;1e4fd2c5-c32e-4e3f-91b3-45478bcf0185&quot;,
      &quot;1e4fd2c5-c32e-4e3f-91b3-45478bcf0189&quot;,
      &quot;1e4fd2c5-c32e-4e3f-91b3-45478bcf0186&quot;,
   ]
}
</code></pre>
<p>I have been trying different combinations of <code>json_build_object</code> and <code>json_agg</code> like this</p>
<pre><code>select json_build_object(tag, json_agg(post_id))
from finalcache
group by tag, post_rank
order by tag, post_rank desc
</code></pre>
<p>But I am just not getting the correct response. Any help will be very appreciated.</p>",70126862,2,0,,2021. 11. 26 오후 3:25:16,,2021. 11. 27 오후 11:21:49,,,,,433073,,1,0,sql|postgresql,220
70032938,Delete tables in BigQuery Cloud Console,"<p>I am trying to delete data from Bigquery tables and facing a challenge. At the moment only one date partitioned table drops/deletes at a time. Based on some research and docs on google, I understand I need to use DML operations.</p>
<p>Below are the commands that I used for deletion and it doesn’t work</p>
<p>1.delete from <code>bigquery-project.dataset1.table1_*</code></p>
<p>2.drop table <code>bigquery-project.dataset1.table1_*</code>;</p>
<p>3.delete from <code>bigquery-project.dataset1.table1_*</code> where _table_suffix='20211117';</p>
<p>The third query works for me and it deletes only for that particular date.</p>
<p>For the 1 and 2 queries, I’ve got a exception saying <strong>“Illegal operation (write) on meta-table bigquery-project.dataset1.table1_”</strong></p>
<p>How would I go about deleting over 300 date partitioned tables in one go?</p>
<p>Thanks in advance.</p>",,1,0,,2021. 11. 19 오전 9:56:32,,2021. 11. 19 오전 11:52:25,,,,,6677837,,1,0,google-bigquery,227
70074415,Return type matched from multiple relationships in Neo4j with Cypher,"<p>I know that you can match on multiple relationships in Neo4j, like this example in the docs:</p>
<pre><code>MATCH (wallstreet {title: 'Wall Street'})&lt;-[:ACTED_IN|:DIRECTED]-(person)
RETURN person.name
</code></pre>
<p>which returns nodes with an ACTED_IN or DIRECTED relationship to 'Wall Street'.</p>
<p>However, is there a way to get the type of the relationship in this query? That is, I would like to return not only the name, but also <em>which relationship applies to him/her</em>, in order to see if it was the ACTED_IN, or the DIRECTED relationship that caused the result to be output.</p>
<p>You can do the equivalent here:</p>
<pre><code>MATCH (:Person {name: 'Oliver Stone'})-[r]-&gt;(movie)
RETURN type(r)
</code></pre>
<p>but that's just matching on any relationship. I would like to do this, but only with the two relationships specified in the clause.</p>
<p>Thanks</p>",70074463,1,0,,2021. 11. 23 오전 1:42:12,,2021. 11. 23 오전 1:50:21,,,,,11634814,,1,0,neo4j|cypher,228
70304704,PostgreSQL: How to combine multiple columns from 2 tables?,"<p>I am very new to PostgreSQL and I can't combine two tables.</p>
<p>I have the table <code>title</code> and table <code>movie_info</code>. In both tables I have the column <code>id</code>.</p>
<p>From the table <code>title</code> I want the column <code>kind_id</code> where <code>kind_id = 6</code> and from the table <code>movie_info</code> I want the column <code>info</code> where <code>info = Netherlands</code> and the column <code>info-id</code> where <code>info_type_id = 8</code>.</p>
<pre><code>SELECT mi.id, mi.info_type_id, mi.info, t.kind_id 
FROM title t 
  JOIN movie_info mi ON mi.id = t.id
WHERE t.kind_id = 6
</code></pre>
<p>How to combine above with this</p>
<pre><code>and where mi.info_type_id = 8
and mi.info = 'Netherlands'
</code></pre>
<p>Can someone please help? Thanks!</p>",,1,0,,2021. 12. 10 오후 12:44:29,,2021. 12. 16 오후 6:06:56,2021. 12. 16 오후 6:06:56,,6771046,,17644671,,1,0,postgresql,228
70253193,PostgreSQL ANALYZE statisticts & Replication,"<p>On my primary I ran a VACUUM then an ANALYZE on all databases, then when I check <code>pg_stat_user_tables</code>, the <code>last_analyze</code> column shows a current timestamp which is great.</p>
<p>When I check my replication instance, there are no values in the <code>last_analyze</code> column.  I was assuming this timestamp would also eventually populate?  Is this known behaviour?</p>
<p>The reason I ask is that after that VACUUM/ANALYZE on the primary, I'm running into some extremely slow queries on the replication instance.  I ran an EXPLAIN plan prior to the VACUUM/ANALYZE on a query and it ran in 5 seconds... now it's taking 65 seconds.  The EXPLAIN shows it's not using a lot of indexes that it should be.</p>",,1,0,,2021. 12. 6 오후 11:26:36,,2021. 12. 7 오전 12:49:07,,,,,1830948,,1,1,postgresql,230
70123567,"Index row size 2712 exceeds btree version 4 maximum 2704 for index, while doing DB restore","<p>I am trying to restore a database backup of a Postgresql version 9.2 onto Postgresql 13.5, but while restoring I am getting this message:</p>
<blockquote>
<p>index row size 2712 exceeds btree version 4 maximum 2704 for index</p>
</blockquote>
<p>DB restore shows successfull but data is not available once restore is done.</p>",,2,0,,2021. 11. 26 오전 11:18:05,,2021. 11. 26 오후 1:07:23,2021. 11. 26 오후 12:45:15,,13302,,3153530,,1,2,postgresql,1272
70128181,Limited access for postgreSQL user,"<p>is it possible to create PostgreSQL user so that he can connect and see only  one specific database? So that he could only see one database (he couldn't see the others). Ideally, I could also set the visibility of the tables in the database.
I create user like this:</p>
<pre><code>create user user with encrypted password 'password';
GRANT CONNECT ON DATABASE db TO user;
</code></pre>
<p>although I have given the user connect privilege to only one database, he can see all other databases :(</p>",,1,0,,2021. 11. 26 오후 5:36:46,,2021. 11. 26 오후 5:40:09,,,,,9480035,,1,0,postgresql,253
70124021,is there an easy way to collect all the dependent cells form a table and concatenate themagainst the independent cell in mySQL?,"<p>for example if the table looks like</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>c1</th>
<th>c2</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>a</td>
</tr>
<tr>
<td>x</td>
<td>b</td>
</tr>
<tr>
<td>x</td>
<td>c</td>
</tr>
</tbody>
</table>
</div>
<p>the result should look like</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>c1</th>
<th>c2</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>abc</td>
</tr>
</tbody>
</table>
</div>",,0,1,,2021. 11. 26 오전 11:55:49,,2021. 11. 26 오전 11:55:49,,,,,16994328,,1,0,mysql,12
70317114,"Check, for every year, how many objects of a table display a relationship with another table in mySQL","<p>Hi I have this small database of 2 entities (artwork and museum) and one relationship (exposed).
The relationship assign for each artwork the exposition time in a given museum:</p>
<ol>
<li>artowrk(ID, name)</li>
<li>museum(ID,name, nation)</li>
<li>exposed(ID_artwork, ID_museum, start_date, end_date)</li>
</ol>
<p>What I managed to do so far is to obtain the artworks exposed in french museums given a specific year, here it is the query</p>
<pre><code>SET @year_check = 1999; #this is an example

SELECT m.ID AS mid, e.start_date, e.end_date, e.ID_artwork FROM exposed e
JOIN museum m ON (e.ID_museum = m.ID)
WHERE m.nation= &quot;france&quot; AND year(e.start_date) &lt;= @year_check AND 
(year(e.start_date) + timestampdiff(year, e.start_date, e.end_date) &gt;= @year_check;

</code></pre>
<p>What I need now is to iterate my variable @year_check and for each year display artworks in french museums.</p>
<p>Please, share the solution in mySQL format if it's not a problem</p>",,0,1,,2021. 12. 11 오후 4:54:38,,2021. 12. 11 오후 4:54:38,,,,,15374188,,1,0,mysql,15
70110343,Saving a data on a table and registering them per batch,"<p>I am having trouble designing my web app database.
I want to save every item the user will input but each item must be registered to a transaction id.
It is possible to do this on a single user only but when there are multiple users, the items are jumbled.</p>
<p>Below is my table design.</p>
<p><strong>User_Table</strong></p>
<hr />
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>User_id</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>John</td>
</tr>
<tr>
<td>4</td>
<td>Mary</td>
</tr>
</tbody>
</table>
</div>
<p>Items_Table</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Items_id</th>
<th>User_Id</th>
<th>Item Name</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>3</td>
<td>Car</td>
<td>10.00</td>
</tr>
<tr>
<td>---------------</td>
<td>---------------</td>
<td>--------------------</td>
<td>------------------</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>Bike</td>
<td>5.00</td>
</tr>
<tr>
<td>---------------</td>
<td>---------------</td>
<td>--------------------</td>
<td>------------------</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>Strawbery</td>
<td>20.00</td>
</tr>
<tr>
<td>---------------</td>
<td>---------------</td>
<td>--------------------</td>
<td>------------------</td>
</tr>
</tbody>
</table>
</div>
<p>So to sum it up:
John had made a (first)transaction  with a total price of : 15.00</p>
<p>My problem is that what if I want to create another transaction but the system will just add up the last transaction I made.</p>
<p>Solutions taken:</p>
<p>Create a logs id of each transaction id and load it in the form so that when the user adds an item the system will log that the new item entered by John will be a new transaction. But what if some technical error happens like Johns computer freezes, and the transaction is not saved and Mary took the id that was supposed to be Johns. My main problem here is how to make my data reliable and accurate when keeping records. I hope someone helps me.</p>",,0,1,,2021. 11. 25 오전 11:31:30,,2021. 11. 25 오후 9:18:36,2021. 11. 25 오후 9:18:36,,9555804,,9555804,,1,0,mysql,16
70190562,Postgresql - Update Query - How To Set Column Value To Be The Name Of The Last Column That Is Not null,"<p>I have some data similar to that listed below:</p>
<pre><code>      | id | status   | stage1 | stage2 | stage3 | stage4 | stage5 | rejected_at_stage
----------------------------------------------------------------------------------------------
row 1 | 1  | rejected | 125    |   null |  null  |  null  |  null  |    stage1
row 2 | 2  | rejected | 125    |   123  |  null  |  null  |  null  |    stage2
row 3 | 3  | rejected | 125    |   123  |  154   |  null  |  null  |    stage3
row 4 | 4  | rejected | 125    |   123  |  154   |  132   |  null  |    stage4
row 5 | 5  | rejected | 125    |   123  |  154   |  132   |  143   |    stage5
</code></pre>
<p>The column <em>rejected_at_stage</em> is a new column that is to be backfilled to set the name of the stages column (stage1...stage5) that is the last instance (left to right) that is not null. For example, in row 2 the rejected_at_stage value is stage2. This is because stage1 is not null and stage2 is not null. However, stage3 has a null value. So the <em>rejected_at_stage</em> column = last non null value from stages columns (left to right) =&gt; stage 2.</p>
<p>Is it possible to do the following in postgresql to update the rejected_at_stage column for each row in a select statement?</p>
<ul>
<li>find the last column that is not null from the given set of columns (e.g.[stage1, stage2...., stage5]</li>
<li>Update the rejected_at_stage column with the name of the column that was found</li>
</ul>",,2,1,,2021. 12. 1 오후 8:04:39,,2021. 12. 1 오후 9:08:08,,,,,12152982,,1,1,postgresql,17
70306977,how to query a list of values names in a column of PostgresSQL,"<p>I'm fairly new to SQL, and am having trouble with a relatively simple query, but for some odd reason I cannot get it to work.</p>
<p>I am trying to pull a dataset based on values within that dataset meeting certain criteria. In python, it's relatively simple, but I cannot import the dataset of 20 million rows, and only need about 20 thousand.</p>
<p>Logically, I'd think you can pass a list of values to SQL to filter based on columns, but it doesn't seem to work.</p>
<p>My code is below:</p>
<pre><code>SELECT * FROM dataset
WHERE column_1 = ['value_in_column_1', 'another_value_in_column_1', 'third_value_in_column_1']
ORDER BY date DESC
LIMIT 250;
</code></pre>
<p>However, that returns syntax error messages.</p>
<p>My though process was that since I can query by saying <code>WHERE column_1 = value_in_column_1</code>, I should be able to add additional values to it, but it seems it's not the case.</p>
<p>Any help is appreciated.</p>",,1,1,,2021. 12. 10 오후 3:39:12,,2021. 12. 10 오후 3:44:46,,,,,14847960,,1,0,sql|postgresql,17
70328572,Find the book/books with the lowest average rating. Select book title and average rating,"<p>You are given three tables:</p>
<pre><code>create table books (id int, title varchar(250), year int, author varchar(250));
create table reviewers(id int, name varchar(250));
create table ratings (reviewer_id int, book_id, rating int, rating_date date);
</code></pre>
<p>data</p>
<pre><code>insert into books (id, title, year, author) values (101,    &quot;A Tale Of Two Cities&quot;, 1859,   &quot;Charles Dickens&quot;);
insert into books (id, title, year, author) values (102,    &quot;The Lord of the Rings&quot;,    1955,   &quot;J. R. R. Tolkien&quot;);
insert into books (id, title, year, author) values (103,    &quot;The Hobbit&quot;,   1937,   &quot;J. R. R. Tolkien&quot;);
insert into books (id, title, year, author) values (104,    &quot;The Little Prince&quot;,    1943,   &quot;Antoine de Saint-Exupry&quot;);
insert into books (id, title, year, author) values (105,    &quot;Harry Potter and the Philosopher's Stone&quot;, 1997,   &quot;J. K. Rowling&quot;);
insert into books (id, title, year, author) values (106,    &quot;And Then There Were None&quot;, 1939,   &quot;Agatha Christie&quot;);
insert into books (id, title, year, author) values (107,    &quot;Dream of the Red Chamber&quot;, 1791,   null);
insert into books (id, title, year, author) values (108,    &quot;She: A History of Adventure&quot;,  1887,   &quot;H. Rider Haggard&quot;);
</code></pre>
<p>Reviewers</p>
<pre><code>insert into reviewers (id, name) values (15201, &quot;Joe Martinez&quot;);
insert into reviewers (id, name) values (53202, &quot;Alice Lewis&quot;);
insert into reviewers (id, name) values (44203, &quot;John Smith&quot;);
insert into reviewers (id, name) values (41204, &quot;Mike Anderson&quot;);
insert into reviewers (id, name) values (66205, &quot;Chris Thomas&quot;);
insert into reviewers (id, name) values (23206, &quot;Elizabeth Black&quot;);
insert into reviewers (id, name) values (24407, &quot;Jack Green&quot;);
insert into reviewers (id, name) values (25208, &quot;Mike White&quot;);
</code></pre>
<p>Ratings</p>
<pre><code>insert into ratings (reviewer_id, book_id, rating, rating_date) values (15201,  101,    2,  2015-02-11);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (15201,  101,    4,  2015-06-16);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (53202,  106,    4,  null);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (44203,  103,    2,  2015-01-12);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (44203,  108,    4,  2015-04-03);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (44203,  108,    2,  2015-01-23);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (41204,  101,    3,  2015-02-09);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (66205,  103,    3,  2015-01-26);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (66205,  104,    2,  2015-03-22);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (66205,  108,    4,  null);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (23206,  107,    3,  2015-01-15);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (23206,  106,    5,  2015-03-19);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (24407,  107,    5,  2015-05-20);
insert into ratings (reviewer_id, book_id, rating, rating_date) values (25208,  104,    3,  2015-09-02);
</code></pre>
<p>Find the book/books with the lowest average rating. Select book title and average rating.</p>
<p>Expected results</p>
<pre><code>The Hobbit          2.5000
The Little Prince   2.5000
</code></pre>
<p>but my query is:</p>
<pre><code>select books.title, avg(ratings.rating) as avg_rating from ratings join books on ratings.book_id = books.id
group by books.title
order by avg_rating desc;
</code></pre>
<p><a href=""https://i.stack.imgur.com/x917d.png"" rel=""nofollow noreferrer"">My result, but is wrong</a></p>
<p>what's wrong in my query,</p>
<p>the lowest rating is:
Expected results
<a href=""https://i.stack.imgur.com/ME6z1.png"" rel=""nofollow noreferrer"">Expected results</a></p>",,3,1,,2021. 12. 12 오후 11:37:52,,2021. 12. 13 오전 12:40:20,2021. 12. 12 오후 11:47:58,,7922583,,7922583,,1,1,mysql,529
70219277,MySQL: Getting a row from another table that has a column value over the current one,"<p>Apologies for the weird title phrasing, but I honestly don't know how to explain this any better. The query in itself with the context might be clearer, though:</p>
<pre><code>UPDATE logentry 
JOIN logtier ON logentry.logtierid = logtier.idlogtier 
SET logentry.logtierid = NEW.idlogtier 
WHERE logentry.logid = NEW.logid 
AND logentry.valuelogentry BETWEEN NEW.thresholdlogtier AND 1000
</code></pre>
<p>I have log entries that have tiers depending on their value. So for instance, a log entry could have a value of 50 and have Tier 1 which is for values over 25. I could have Tier 2 which is 100, so as long as a value is between 50 and 100, it'll be Tier 1... You get the idea.<br />
So basically, the idea here is that I have a trigger that's being run when a new tier is being inserted. As you can see in the query above, I want to update the existing log entries with the new tier that's being added. I have no issues updating all the entries whose values are over the newly added tier's threshold, however, I do not know how to prevent entries that are above the next existing tier from being updated (because they're not included in the [new tier; next tier] interval). The &quot;1000&quot; that I wrote in the query is what should be the value of the next tier, and I just don't know how to retrieve that.<br />
Thanks for the help and sorry for the messy explanation!</p>",,0,1,,2021. 12. 3 오후 6:43:01,,2021. 12. 3 오후 6:45:08,2021. 12. 3 오후 6:45:08,,16461952,,14582639,,1,0,mysql,18
70266262,Find rows in MySQL table with duplicate Employee No and expose the fields within those rows that differ,"<p>I can find the duplicate Employee No and then identify of the 2 (or more) rows which fields differ but need a query which tell me the fields that differ.</p>
<p>i.e.<br>
ID | EmployeeNo | Name | Job         | Salary   | Country<br>
1   | 1234              | Fred   | Analyst   | 50,000 | UK<br>
2   | 1234             | Fred   | Engineer | 50,000 | UK<br>
3   | 2345             | John  | Typist      | 25,000 | UK<br>
4   | 5678             | Rose  | Florist      | 10,000 | UK<br>
5   | 5678             | Rose  | Actress   | 60,000 | UK<br>
6   | 9999             | Sid     | Driver      | 10,000 | UK<br>
7   | 9999             | Sid     | Driver      | 20,000 | Germany<br>
8   | 9999             | Sid     | Driver      | 20,000 | UK<br></p>
<p>So, I'm trying to develop a query that tells me I have duplicate EmployeeNo records and what fields differ</p>
<p>i.e. 1234 occurs twice and the Job field differs<br>
5678 occurs twice and the Job field and the Salary field differ<br>
9999 occurs 3 times and the Salary and Country fields have differences</p>
<p>My table is much wider and longer than this, so looking for the differences is not that easy, having to scan across the adjacent rows to spot the fields that differ</p>",70266680,1,1,,2021. 12. 7 오후 8:01:39,,2021. 12. 7 오후 8:39:39,,,,,17397635,,1,0,mysql,18
70204523,Trying create multuple table using LIKE from multiple tables as source using arrays,"<p>I have two base tables <code>&quot;tutorials_tb2&quot;,&quot;tutorials_tbl&quot;</code>
and I am trying to create two new tables from these tables as <code>&quot;tutorials_tb2_new&quot;,&quot;tutorials_tbl_new&quot;</code>
So <code>tutorials_tb2</code> will be source to <code>tutorials_tb2_new</code> and similarly <code>tutorials_tbl</code> to <code>tutorials_tbl_new</code></p>
<p>I am trying by creating a MySQL function with new and orig tables as array by using <code>JSON_*</code> methods</p>
<pre class=""lang-sql prettyprint-override""><code>DELIMITER //
CREATE FUNCTION example()
BEGIN
  
DECLARE _counter INT DEFAULT 0;
DECLARE _value varchar(50);

SET @origTables = '[&quot;tutorials_tb2&quot;,&quot;tutorials_tbl&quot;]';
SET @newTables = '[&quot;tutorials_tb2_new&quot;,&quot;tutorials_tbl_new&quot;]';

WHILE _counter &lt; JSON_LENGTH(@origTables) DO

CREATE TABLE JSON_VALUE(@newTables, CONCAT('$[',_counter,']')) LIKE JSON_VALUE(@origTables, CONCAT('$[',_counter,']'))
SET _counter = _counter + 1;

END WHILE;
END //

DELIMITER ;

SELECT example();
</code></pre>
<p>And while executing I am getting below error</p>
<pre><code>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BEGIN

DECLARE _counter INT DEFAULT 0;
DECLARE _value varchar(50);

SET @origT' at line 2
MySQL&gt;
</code></pre>",,1,1,,2021. 12. 2 오후 6:14:35,,2021. 12. 13 오후 5:54:12,2021. 12. 13 오후 5:54:12,,13860,,1293013,,1,0,mysql,19
70359565,Unique Query By Date with highest ID taking precidence,"<p>I am trying to get the newest unique dates, returning the date and the item.  I have made a example here, but its not giving me unique dates only.</p>
<pre><code>SELECT DISTINCT(date), meal, dinner_id FROM dinner_tb ORDER BY `dinner_tb`.`date` DESC LIMIT 10   
</code></pre>
<p>See there are three items on the 16th, where I should only have the Pie on that day.  Any suggestions please.  MYSQL v8.  dinner_id is primary key.</p>
<p><a href=""https://i.stack.imgur.com/NtQBu.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/NtQBu.png"" alt=""enter image description here"" /></a></p>",70359680,1,1,,2021. 12. 15 오전 7:02:38,,2021. 12. 15 오전 7:13:25,,,,,8360289,,1,0,mysql,19
70030214,how to case when statistics data row in mysql,"<p>I am writing a statistic query.</p>
<p>The case when statement is showing the total count according to the user's department position information.
When a date condition is added If there is no position updated or added on the date
The position does not show in the data row,</p>
<p>How can I display the positions in the CASE WHEN condition even if I do not have a position?
ex) position is counted as 0.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>SELECT CASE WHEN POSITION_NAME = 'Employee' THEN POSITION_NAME
   WHEN POSITION_NAME = 'Manager' THEN POSITION_NAME
   WHEN POSITION_NAME = 'Supervisor' THEN POSITION_NAME
   WHEN POSITION_NAME = 'Director' THEN POSITION_NAME
 ELSE 'Other' END AS TITLE
 , COUNT(POSITION_NAME) AS TOTAL_COUNT
FROM TB_USER
WHERE POSITION_NAME IS NOT NULL
AND DATE_FORMAT(REG_DATE, '%Y-%m-%d) BETWEEN '2021-10-01' AND '2021-10-01'
GROUP BY POSITION_NAME</code></pre>
</div>
</div>
</p>",,1,1,,2021. 11. 19 오전 5:20:50,,2021. 11. 19 오전 5:34:39,2021. 11. 19 오전 5:25:36,,10856825,,10856825,,1,0,mysql,20
70057590,Update current record field after update has been made on it,"<p>I have a table called <code>payment</code>. With fields <code>id, end_date, status</code>. Whenever the payment status is updated to <code>true</code> I want to automatically add an <code>end_date</code> of CURRENT_DATE. I am trying to write a trigger for this but can't get it to work.</p>
<pre class=""lang-sql prettyprint-override""><code>create function update_date() returns trigger
as $$
    BEGIN
        update payment
        SET end_date = CURRENT_DATE
        END; $$ LANGUAGE plpgsql;
CREATE TRIGGER update_date AFTER UDATE ON payment
FOR EACH ROW EXECUTE FUNCTION update_date()
</code></pre>",,1,1,,2021. 11. 21 오후 6:47:29,,2021. 11. 21 오후 7:38:41,2021. 11. 21 오후 7:14:40,,17457900,,17457900,,1,0,sql|postgresql,20
70035972,"MySQL, Formatting additional entries into columns","<p>Not sure i am explaining it well in the title,
I am trying to create a few views, but i am wondering if what i am wanting to accomplish is even possible.</p>
<p>I have a table:</p>
<pre><code>|Column1|Column2|Column3|  Column4  |
|  1    |1234   | Foo   | 19/11/2021| 
|  2    |1234   | Foo   | 19/11/2021| 
|  3    |1234   | Foo   | 19/11/2021| 
|  1    |1234   | Bar   | 19/11/2021| 
|  2    |1234   | Bar   | 19/11/2021| 
|  3    |1234   | Bar   | 19/11/2021| 
|  1    |1234   | Baz   | 19/11/2021| 
|  2    |1234   | Baz   | 19/11/2021| 
|  3    |1234   | Baz   | 19/11/2021| 
</code></pre>
<p>The Unique of the table on this is Column1, Column2, Column3.</p>
<p>When querying this data in a view, because of the type of join i am getting, i am getting Column1, and Column 2 showing multiple times because of the multiple entries in Column 3. This is what i expected.</p>
<p>But is there any way or query in sql that can do something like:
for-each column 3, assigning it to column4, column5, column5.</p>
<p>For example:</p>
<pre><code>|Column1|Column2|Column3|  Column4  |  Column3a |  Column3b |  Column3c |
|  1    |1234   | Foo   | 19/11/2021|   Foo     |   Bar     |   Baz     | 
|  2    |1234   | Foo   | 19/11/2021|   Foo     |   Bar     |   Baz     | 
|  3    |1234   | Foo   | 19/11/2021|   Foo     |   Bar     |   Baz     | 
</code></pre>
<p>The number of unique in Column3 can be be any, so it would have to be programmable like a foreach column+1
This is working with existing data, so its not possible to reformat how its already present, i am working with a poorly designed database and trying to create views to make it more readable and workable for a API Endpoint</p>",,1,1,,2021. 11. 19 오후 1:55:45,,2021. 11. 19 오후 2:08:33,,,,,4605812,,1,0,mysql,21
70034682,Eliminate zero values and put values in two different columns in one row,"<p><a href=""https://dbfiddle.uk/?rdbms=postgres_13&amp;fiddle=d36c040c667a974fd5ad813832562fd0"" rel=""nofollow noreferrer"">DB-Fiddle</a></p>
<pre><code>CREATE TABLE check_inbound 
(
    id SERIAL PRIMARY KEY,
    data_source VARCHAR,
    product VARCHAR,
    inbound_type VARCHAR,
    quantity DECIMAL
);

INSERT INTO check_inbound (data_source, product, inbound_type, quantity)
VALUES 
('data_source_01', 'product_a', 'type_01', '500'),
('data_source_01', 'product_a', 'type_02', '200'),
('data_source_01', 'product_b', 'type_01', '130'),
('data_source_01', 'product_b', 'type_02', '320'),
('data_source_01', 'product_c', 'type_01', '700'),
('data_source_01', 'product_c', 'type_02', '850'),

('data_source_02', 'product_a', 'type_01', '980'),
('data_source_02', 'product_a', 'type_02', '315'),
('data_source_02', 'product_b', 'type_01', '760'),
('data_source_02', 'product_b', 'type_02', '512'),
('data_source_02', 'product_c', 'type_01', '125'),
('data_source_02', 'product_c', 'type_02', '720');
</code></pre>
<p>Expected result:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>product</th>
<th>inbound_type</th>
<th style=""text-align: right;"">quantity_data_source_01</th>
<th style=""text-align: right;"">quantity_data_source_02</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_a</td>
<td>type_01</td>
<td style=""text-align: right;"">500</td>
<td style=""text-align: right;"">980</td>
</tr>
<tr>
<td>product_a</td>
<td>type_02</td>
<td style=""text-align: right;"">200</td>
<td style=""text-align: right;"">315</td>
</tr>
<tr>
<td>product_b</td>
<td>type_01</td>
<td style=""text-align: right;"">130</td>
<td style=""text-align: right;"">760</td>
</tr>
<tr>
<td>product_b</td>
<td>type_02</td>
<td style=""text-align: right;"">320</td>
<td style=""text-align: right;"">512</td>
</tr>
<tr>
<td>product_c</td>
<td>type_01</td>
<td style=""text-align: right;"">700</td>
<td style=""text-align: right;"">125</td>
</tr>
<tr>
<td>product_c</td>
<td>type_02</td>
<td style=""text-align: right;"">850</td>
<td style=""text-align: right;"">720</td>
</tr>
</tbody>
</table>
</div>
<p>I want to compare the <code>quantity</code> per <code>product</code> and <code>inbound_type</code> in two different <code>data_sources</code>.</p>
<p>I was able to come close to the result with this query:</p>
<pre><code>SELECT
    i.data_source AS date_source,
    i.product AS product,
    i.inbound_type AS inbound_type,
    (CASE WHEN i.data_source = 'data_source_01' THEN SUM(i.quantity) ELSE 0 END) AS quantity_data_source_01,
    (CASE WHEN i.data_source = 'data_source_02' THEN SUM(i.quantity) ELSE 0 END) AS quantity_data_source_02
FROM 
    check_inbound i
GROUP BY 
    1, 2, 3
ORDER BY 2,1
</code></pre>
<p>However, I could not figure out how I can get rid of the rows with the zero values and put the quantities on the same line as in the expected result.</p>
<p>Do you have any idea what I need to change to make it work?</p>",,1,1,,2021. 11. 19 오후 12:14:40,,2021. 11. 19 오후 12:31:43,2021. 11. 19 오후 12:22:33,,13302,,4934150,,1,1,sql|postgresql,22
70210631,Mysql compare different rows,"<p>i have the following table
id | user | date | value. I need to find users that have values on eg October month but they dont have on November month.
I ve tried the following code around.</p>
<pre><code>select *
from users B 
LEFT OUTER JOIN data A 
on A.user = B.user
Where B.permissions=1 AND A.date BETWEEN '2021-11-01' AND '2021-11-30' group by A.user 
</code></pre>",70210819,2,1,,2021. 12. 3 오전 7:07:29,,2021. 12. 3 오전 7:26:20,,,,,3341101,,1,1,mysql,22
70047481,How to split one table into multiple tables with different columns (PostgreSQL)?,"<p>I have one single table with 25 columns and I want to split it into 3 or 4 tables with a smaller column count. Below is a simplified example as a reference:</p>
<p>This is the big table</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>supplier</th>
<th>brand</th>
<th>sku</th>
<th>product_class</th>
<th>size</th>
<th>sales</th>
<th>trans_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>supplier_1</td>
<td>brand_1</td>
<td>sku_1</td>
<td>class_1</td>
<td>3.5</td>
<td>100</td>
<td>1</td>
</tr>
<tr>
<td>supplier_1</td>
<td>brand_2</td>
<td>sku_2</td>
<td>class_1</td>
<td>3.5</td>
<td>200</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<p>I need something like this:</p>
<p>product_info</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>sku</th>
<th>product_class</th>
<th>size</th>
<th>trans_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>sku_1</td>
<td>class_1</td>
<td>3.5</td>
<td>1</td>
</tr>
<tr>
<td>sku_2</td>
<td>class_1</td>
<td>3.5</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<p>product_sales</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>supplier</th>
<th>brand</th>
<th>sales</th>
<th>trans_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>supplier_1</td>
<td>brand_1</td>
<td>100</td>
<td>1</td>
</tr>
<tr>
<td>supplier_1</td>
<td>brand_2</td>
<td>200</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<p>In this case, trans_id from the product_info table would be my PRIMARY KEY.</p>",,2,1,,2021. 11. 20 오후 3:49:45,,2021. 11. 20 오후 5:06:23,2021. 11. 20 오후 4:08:14,,20860,,17413721,,1,1,sql|postgresql,278
70168926,is there any way in mysql to rollup and merge columns at the same time?,"<p>if there is a table of the format</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">continent</th>
<th style=""text-align: right;"">country</th>
<th style=""text-align: right;"">val</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">A</td>
<td style=""text-align: right;"">X</td>
<td style=""text-align: right;"">10</td>
</tr>
<tr>
<td style=""text-align: center;"">A</td>
<td style=""text-align: right;"">Y</td>
<td style=""text-align: right;"">20</td>
</tr>
<tr>
<td style=""text-align: center;"">B</td>
<td style=""text-align: right;"">Z</td>
<td style=""text-align: right;"">30</td>
</tr>
</tbody>
</table>
</div>
<p>the output should look like</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>region</th>
<th>val</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>30</td>
</tr>
<tr>
<td>B</td>
<td>30</td>
</tr>
<tr>
<td>X</td>
<td>10</td>
</tr>
<tr>
<td>Y</td>
<td>20</td>
</tr>
<tr>
<td>Z</td>
<td>30</td>
</tr>
</tbody>
</table>
</div>",,2,1,,2021. 11. 30 오전 11:52:08,,2021. 11. 30 오후 12:01:16,,,,user16697126,,,1,0,mysql,23
70065092,agregate sales totals per years per customer in one transaction,"<p>i have a normal turnover table with 3 columns &quot;customer&quot; , &quot;year&quot;, &quot;amount&quot;
(for example)</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>customer</th>
<th>year</th>
<th>amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>anton</td>
<td>2020</td>
<td>$5</td>
</tr>
<tr>
<td>paul</td>
<td>2019</td>
<td>$12</td>
</tr>
<tr>
<td>anton</td>
<td>2021</td>
<td>$5</td>
</tr>
<tr>
<td>paul</td>
<td>2019</td>
<td>$10</td>
</tr>
<tr>
<td>felicia</td>
<td>2021</td>
<td>$5</td>
</tr>
<tr>
<td>anton</td>
<td>2019</td>
<td>$12</td>
</tr>
<tr>
<td>felipe</td>
<td>2019</td>
<td>$12</td>
</tr>
</tbody>
</table>
</div>
<p>and i have the following mysql query</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT `customer` , SUM(`amount`) as summ FROM `customer`.`accountsales` WHERE `amount`&gt; 0 GROUP BY `customer` ORDER BY summ DESC ;
</code></pre>
<p>This transaction gives me a nice Paretto table with the sales of each customer in descending order</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>name</th>
<th>sales all years</th>
</tr>
</thead>
<tbody>
<tr>
<td>customer1</td>
<td>sum of all transactions of customer1</td>
</tr>
<tr>
<td>customer2</td>
<td>sum of all transactions of customer2</td>
</tr>
<tr>
<td>customer3</td>
<td>sum of all transactions of customer3</td>
</tr>
</tbody>
</table>
</div>
<p>so far so good, i want to go one step further and i want to create the following table</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Name</th>
<th>Sales all years</th>
<th>Sales 2021</th>
<th>Sales2020</th>
<th>Sales2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>customer1</td>
<td>sum1</td>
<td>sum2021 from customer1</td>
<td>sum2020 from customer1</td>
<td>sum2019 from customer1</td>
</tr>
<tr>
<td>customer2</td>
<td>sum2</td>
<td>sum2021 from customer2</td>
<td>sum2020 from customer2</td>
<td>sum2019 from customer2</td>
</tr>
<tr>
<td>customer3</td>
<td>sum3</td>
<td>sum2021 from customer3</td>
<td>sum2020 from customer3</td>
<td>sum2019 from customer3</td>
</tr>
</tbody>
</table>
</div>
<p>but i want to do it in only one transaction, because the initial table is very huge.</p>
<p>can someone give a hint ?</p>
<p>p.S. feel free to edit the title since I am not very inspired today</p>",70065158,1,1,,2021. 11. 22 오전 11:31:55,,2021. 11. 22 오전 11:36:31,,,,,1986815,,1,1,mysql,24
70074124,How do I perform aggregate query which returns 'grouping criteria' as a table header?,"<p>I am having <code>Project</code>, which has many <code>Task</code> objects are linked by <code>id</code> of Project , each <code>Task</code> has a status. I want to do an aggregate query that summarize all status of Tasks in Projects. I do a query</p>
<pre><code>SELECT p.name, t.status, count (t.id) AS size FROM public.projects AS p 
JOIN public.tasks AS t ON p.id=t.project_id
GROUP BY p.name, t.status
</code></pre>
<p>But the result return each status of each project in one line.</p>
<pre><code>name   status   size
-----  -------  -----
t1     foo      1
t1     bar      2
t2     foo      3
t2     bar      4
</code></pre>
<p>I want to to the result like this:</p>
<pre><code>name   foo   bar
-----  ----  ----
t1     1     1
t2     3     4
</code></pre>
<p>How can I do that in SQL (I am using Postgres) ? Thanks.</p>",70074225,1,1,,2021. 11. 23 오전 12:47:02,,2021. 11. 23 오전 1:06:58,,,,,3070080,,1,0,sql|postgresql,24
70270136,Query with multiple AND conditions,"<p>I have my query like below</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT dates,
       COUNT(link_data_id) as TotalClicks,
       sum(case when link_redirect_status = 1 then 1 else 0 end) AS GoodClicks, 
       sum(case when link_redirect_status != 1 then 1 else 0 end) AS BadClicks 
FROM tbl_calendar 
LEFT JOIN tbl_links_data ON dates = CAST(link_data_time AS DATE) 
WHERE (`dates` BETWEEN '2021-11-28' AND DATE_ADD('2021-11-28', INTERVAL 7 DAY)) 
GROUP BY dates
</code></pre>
<p>It's giving me expected output like below</p>
<p><a href=""https://i.stack.imgur.com/oiZQW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/oiZQW.png"" alt=""enter image description here"" /></a></p>
<p>But I want add one more condition called link_order_id ='abcde', so I am trying like below</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT dates,
       COUNT(link_data_id) as TotalClicks,
       sum(case when link_redirect_status = 1 then 1 else 0 end) AS GoodClicks, 
       sum(case when link_redirect_status != 1 then 1 else 0 end) AS BadClicks 
FROM tbl_calendar 
LEFT JOIN tbl_links_data ON dates = CAST(link_data_time AS DATE) 
WHERE link_order_id = 'abcde' 
  AND (`dates` BETWEEN '2021-11-28' AND DATE_ADD('2021-11-28', INTERVAL 7 DAY)) 
GROUP BY dates
</code></pre>
<p>But it's giving me only two rows like below</p>
<p><a href=""https://i.stack.imgur.com/OLTqT.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/OLTqT.png"" alt=""enter image description here"" /></a></p>
<p>Why I am getting only two rows instead of 8 rows like first picture?</p>",70270172,1,1,,2021. 12. 8 오전 4:55:06,,2021. 12. 8 오전 10:02:58,2021. 12. 8 오전 10:02:58,,1839439,,17194094,,1,0,mysql,24
70252400,Postgres: How to find rows in which a specific column has 'empty' values?,"<p>I need to find rows which have a empty values in a column after a CSV import.
The column is an <code>INTEGER</code> column, hence the</p>
<pre class=""lang-sql prettyprint-override""><code>...
where col = ''
</code></pre>
<p>doesn't work for me.</p>",70252433,1,1,,2021. 12. 6 오후 9:49:44,,2021. 12. 6 오후 10:06:45,2021. 12. 6 오후 10:06:45,,330315,,11994885,,1,0,sql|postgresql,25
70089246,Delete rows with a matching column - MySQL,"<p>I am not sure what to title this, so feel free to edit it if you have a better one.</p>
<p>I currently have the following table in my database (It has many more rows than this):</p>
<pre><code>|-----------------|
|Account |Group ID|
|--------|--------|
|HappyDy |  5532  |
|HDayGrp |  2212  |
|Yuyuyu  |  5532  |
|awesome |  4422  |
</code></pre>
<p>I want to delete all columns that have a Group ID (<code>group_id</code>) of &quot;5532&quot; using a MySQL command within PHP MyAdmin. Is there a MySQL command that can delete all rows with a Group ID of &quot;5532&quot;?</p>
<p>What I want the table to look like after the command is run:</p>
<pre><code>|-----------------|
|Account |Group ID|
|--------|--------|
|HDayGrp |  2212  |
|awesome |  4422  |
</code></pre>
<p>Thanks in advance.</p>",70089449,1,1,,2021. 11. 23 오후 11:56:27,,2021. 11. 24 오전 2:10:49,2021. 11. 24 오전 2:10:49,,15837542,,15837542,,1,0,mysql,26
70125824,Looking to select only first of set,"<p>In my query I am able to successfully extract the mass data, however it would be very helpful if I am able to drill down to only selecting the first project start date of the data set.</p>
<p>I've tried adding a (MIN) to my query but it errors out, any suggestions ?</p>
<p>For clarification, I am looking to select the first project start date on a particular contract. Any contract can have (n) # of projects. My goal is to detect the first of them.</p>
<p>Here is my query :</p>
<pre><code>SELECT DISTINCT CONT.CONTRACTNUMBER as &quot;Contract Number&quot;,

            CS.PRODUCTID as &quot;Product ID&quot;,

            PROJ.PROJECTID as &quot;Project ID&quot;,

            PR.PRODDESCRIPTION as &quot;Product Description&quot;,

            PROJ.PROJECTNAME as &quot;Project Name&quot;,

            CS.STARTDT as &quot;Contract Service/ Product Start DT&quot;,

            CONT.CONTRACTStartDT as &quot;Contract Start DT&quot;,

            PROJ.PROJECTSTARTDT as &quot;Project Start DT&quot;,

Datediff(DAY, CS.STARTDT, PROJ.PROJECTSTARTDT) as &quot;# Day Difference&quot;

FROM   PRODUCTDATA.DBO.HHCONTRACTSERVICE CS WITH(NOLOCK)

LEFT OUTER JOIN COSTTRACKERDATA.DBO.OAPROJECT PROJ WITH(NOLOCK)

ON CS.DID = PROJ.EXTERNALID

LEFT OUTER JOIN PRODUCTDATA.DBO.HHCONTRACT CONT WITH(NOLOCK)

ON CS.CONTRACTDID = CONT.DID

LEFT OUTER JOIN FIGURES..DIMPRODUCT PR WITH(NOLOCK)

ON CS.PRODUCTID = PR.PRODUCTID

AND PR.SUBPRODUCTLINE IN ( 'S', 'S' )

WHERE  CS.STARTDT BETWEEN '2020-01-01' AND '2021-11-11'

AND PROJ.PROJECTSTARTDT &lt;&gt; '1970-01-01 00:00:00.000'

order by [Contract Number], [Project Start DT]
</code></pre>",,1,1,,2021. 11. 26 오후 2:17:39,,2021. 11. 26 오후 2:38:03,2021. 11. 26 오후 2:38:03,,12711644,,12711644,,1,0,mysql,26
70206299,Extract String between string and character,"<p>I have a column that brings me several pieces of information. They are all like:</p>
<pre><code>{&quot;user_id&quot;:&quot;1234&quot;, &quot;is_employee&quot;:&quot;0&quot;, &quot;system_version&quot;:&quot;12.34&quot;}
</code></pre>
<p>But the character lenght of the information is not fixed, and sometimes user id comes after employee, there's no set order.</p>
<p>How can I create columns with each specific value?</p>",,0,1,,2021. 12. 2 오후 8:52:16,,2021. 12. 2 오후 9:39:36,2021. 12. 2 오후 9:39:36,,14516631,,14516631,,1,0,mysql,26
70110810,How to Get data from Index Key in MySQL?,"<p>I have 2 tables. One <code>users</code> and one <code>logs</code>.
In <code>users</code> we have these columns:</p>
<pre><code>ID | Name | Admin | Log
</code></pre>
<p>and in <code>logs</code>:</p>
<pre><code>ID | Player | Admin
</code></pre>
<p>Player and Admin are index keys which are related to <code>users</code> table. I want to use a simple sql query to return Player and Admin name. I'm using this:</p>
<pre class=""lang-sql prettyprint-override""><code>SELECT users.ID, users.Name, (SELECT users.Name FROM users WHERE users.ID = logs.Admin) AS Admin FROM users INNER JOIN logs ON users.Log = logs.ID
</code></pre>
<p>I'm not familiar with MySQL... So can you guys help me with better query?</p>",,0,1,,2021. 11. 25 오후 12:04:51,,2021. 11. 25 오후 12:04:51,,,,,12144984,,1,0,mysql,27
70142186,How to find the number of daily active users on an app for a given date range?,"<p>I have this table in MySQL.</p>
<p>*<em>user_id  event_date_time  Event</em></p>
<p>7494212  1535308430      Opened app</p>
<p>7494212  1535308433      Closed app</p>
<p>1475185  1535308444      Registered</p>
<p>6946725  1535308475      Opened app</p>
<p>6946725  1535308476      Made a purchase</p>
<p>6946725  1535308477      Closed app</p>
<p>This has millions of rows where event date time is in unix timestamp format.</p>
<p>I need to find the number of daily active users and monthly active users for the month of July-19. I tried the below mentioned query but it is not working in MySQL. Please help.</p>
<pre><code>SELECT * FROM event_log; WHERE event_date_time BETWEEN 2014-07-01 00:00:00' AND '2019-07-31 23:59:59'
</code></pre>",,0,1,,2021. 11. 28 오전 9:43:11,,2021. 11. 28 오전 9:50:06,2021. 11. 28 오전 9:50:06,,14851780,,14851780,,1,0,mysql,28
70045476,How to create table with all combinations of values,"<p>I want to create a table of all combinations of values so that I could left join another table(t2) on it (I do this for vizualization in Tableua). This table(t2) should have 6 columns, 4 of them I can select from one table(t1),but other 2 are flags calculated in t2. So I came up only with solution where I have to create table(t3) with two columns (first and second flag) insert there all combinations</p>
<pre><code>1 0
0 1
1 1
0 0
</code></pre>
<p>And only then cross join them with other 4 columns in t1</p>
<pre><code>select distinct flg1,flg2,...
from t1
cross join t3
</code></pre>
<p>But this looks comlicated. Maybe there is a way to do this without inserting values into new table?</p>",,0,1,,2021. 11. 20 오전 11:27:03,,2021. 11. 20 오전 11:27:03,,,,,15974340,,1,0,postgresql,29
70101435,"SQL, How do I add a column which needs to be a primary key, unique and auto-incrementing? Error says syntax error at or near ""IDENTITY""","<pre><code>CREATE TABLE cities
(
    name varchar(80),
    location point
);

ALTER TABLE cities
    ADD city_id int IDENTITY(1,1) UNIQUE NOT NULL PRIMARY KEY;
</code></pre>",,1,1,,2021. 11. 24 오후 6:46:37,,2021. 11. 24 오후 6:53:51,2021. 11. 24 오후 6:51:06,,13302,,16037688,,1,1,sql|postgresql,29
70154614,"How can we cast a string, 21 Jul 2016 23:38:01, into date and time format?","<p>How can we cast a column named DateEventRecorded with strings like this 21 Jul 2016 23:38:01 into DATETIME format? The table name is patients_observations.</p>
<p>I tried to cast it using the cast function, but there is an &quot;invalid date&quot; error.</p>",,1,1,,2021. 11. 29 오후 12:25:28,,2021. 11. 29 오후 6:03:36,,,,,17489814,,1,0,google-bigquery,29
70315215,Select subquery slow down the execution how to fix it,"<pre><code> SELECT
  (SELECT SUM(`m_amount`) FROM `tr10_project_payment` WHERE `m_project_id`=`plan_booking`.`plan_book_id`) AS Total_deposit,
   (CASE WHEN (`plan_booking`.`plan_type`=2 || `plan_booking`.`plan_type`=4) THEN (CASE WHEN DATE_ADD((SELECT GetMaturityDate(`plan_booking`.`plan_book_date`,`plan_booking`.`total_paid_ins`,`plan_booking`.`plan_mode`)),INTERVAL 90 DAY)&lt;NOW() THEN '1' ELSE '2' END) ELSE '2' END) AS `Installmen`
  FROM
  `plan_booking`
</code></pre>
<p>tr10_project_payment table has 400000 records. This whole query will take approx 35s to execute any Anyone know how can i fix the performance issue.</p>",,2,1,,2021. 12. 11 오후 12:38:50,,2021. 12. 12 오후 5:56:32,2021. 12. 11 오후 6:19:23,,1839439,,8744309,,1,0,mysql,29
70225125,HOW to avoid completely showing data which is in another MySQL table?,"<p>I am trying to avoid some data which is already in two tables... which means... I used the select statement to get an advertisement which is stored in MySql database using Member Id and I use JOIN tables... there is no problem... all advertisements are showing perfectly which are belong to the member package...</p>
<p>Now the problem is... after the member clicks on an advertisement... it's stored in a table which is called &quot;view&quot; with the date of click, ad_id, and member id. And again the same member should not be able to click that advertisement till the next day... I need to avoid showing that advertisement data using select statements with the condition...</p>
<p>can anyone help me, please? I paste my query below</p>
<pre><code>SELECT `advertisements`.`Ads_ID`,`advertisements`.`AdsName`,`advertisements`.`code`,`advertisements`.`Ad_Value`,`advertisements`.`images`,`advertisements`.`date` FROM `advertisements` JOIN `package_ads` ON `package_ads`.`Ads_ID`=`advertisements`.`Ads_ID` JOIN `packages` ON `packages`.`Package_ID`=`package_ads`.`Package_ID` JOIN `member_package` ON `member_package`.`Package_ID`=`packages`.`Package_ID` JOIN `members2`ON `members2`.`Mem_ID`=`member_package`.`Mem_ID` JOIN `views`ON `views`.`Mem_ID`=`members2`.`Mem_ID` WHERE `member_package`.`Mem_ID`=&quot;M100&quot; AND `views`.`clickeddate`!=&quot;2021-12-04&quot; AND `views`.`Ads_ID`!=`advertisements`.`Ads_ID`
</code></pre>",70225303,1,1,,2021. 12. 4 오전 11:19:42,,2021. 12. 4 오후 1:55:59,2021. 12. 4 오후 1:55:03,,1839439,,16062357,,1,0,mysql,30
70315990,mysql error 1442 trigger when inserting a new record from table A to table B and vice versa,"<p>I have these two triggers, which trigger A inserts from table A to table B, and vice-versa :</p>
<pre><code>DELIMITER //    
CREATE TRIGGER insert_split
BEFORE INSERT ON user FOR EACH ROW
    BEGIN
        IF new.level_id = '1' THEN
            INSERT INTO petugas (nama_petugas, email, username, tgl_lahir, no_hp, created_by, updated_by, created_at, updated_at)
            VALUES (new.name, new.email, new.username, new.dob, new.phone, '1', '1', NOW(), NOW());
        ELSEIF new.level_id = '2' THEN
            INSERT INTO bidan (nama_bidan, email, username, tgl_lahir, no_hp, created_by, updated_by, created_at, updated_at)
            VALUES (new.name, new.email, new.username, new.dob, new.phone, '1', '1', NOW(), NOW());
        ELSE
            INSERT INTO ibu (nama_ibu, email, username, tgl_lahir, no_hp, created_by, updated_by, created_at, updated_at)
            VALUES (new.name, new.email, new.username, new.dob, new.phone, '1', '1', NOW(), NOW());
        END IF;
    END;
    DELIMITER ;
</code></pre>
<p>and this second trigger</p>
<pre><code>DELIMITER //    
CREATE TRIGGER insert_user_ibu
BEFORE INSERT ON ibu FOR EACH ROW
    BEGIN
        INSERT into user (name, username, email, password, dob, phone, level_id, is_active,created_at, updated_at) 
        VALUES (new.nama_ibu, new.email, new.email, md5('qwerty'), new.tgl_lahir, new.no_hp, '3', '1', NOW(), NOW());
    END; //
</code></pre>
<p>But after I create both trigger insert regardless before or after, I execute this :</p>
<pre><code>insert into user(id, name, username, phone, dob, email, password, level_id, is_active, created_at, updated_at) values 
('30', 'Janice', 'janice123@yahoo.com', '087769958123', '2001-01-01', 'janice123@yahoo.com', md5('admin123'), '3', '1', NOW(), NOW());
</code></pre>
<p>or this</p>
<pre><code>insert into ibu(id, nama_ibu, tempat_lahir, tgl_lahir, gol_dar, pendidikan, pekerjaan, alamat, city_id, province_id, no_hp, email, created_by, updated_by, created_at, updated_at) values 
('5', 'Jessica', '1201', '2000-01-01', 'O', 'Tidak Sekolah', 'Tidak Bekerja', 'Testing', '1201', '12', '081211223344', 'jessica123@gmail.com', '1', '1', NOW(), NOW());
</code></pre>
<p>it won't work, and show error :</p>
<pre><code>1442 - Can't update table 'user' in stored function/trigger because it is already used by statement which invoked this stored function/trigger
</code></pre>
<p>the trigger function means, I want to insert a record to table A, so in table B are inserted too, and vice-versa. But it shows error. Anybody have solution this? So, I can insert a record, from table A is inserted in table B too, and from table B is inserted in table A.</p>",,0,1,,2021. 12. 11 오후 2:30:14,,2021. 12. 11 오후 2:30:14,,,,,17652137,,1,1,mysql,30
70108096,how can exclude id with having multiple value?,"<p>i have 3 store_id (0,1,6) . i only want to get id have storeid &lt;&gt; 0 , but 24340 also have storeid =0 , i also want remove it too</p>
<p>Original:</p>
<pre><code>valueid   store_id
24346     6
24345     6
24345     1
24344     0
24340     6
24340     1
24340     0
</code></pre>
<p>Expected:</p>
<pre><code>valueid   store_id
24346     6
24345     6
24345     1
</code></pre>
<p>tried using store_id NOT IN (0,1,6) or store_id&lt;&gt;0 And store_id&lt;&gt;1 AND store_id&lt;&gt;6 but seeem not working</p>",70108173,2,1,,2021. 11. 25 오전 8:41:59,,2021. 11. 25 오전 8:50:57,,,,,2951444,,1,0,mysql,31
70165504,Unable to find my.cnf in MySQL version mysql-5.7.35,"<p>I have installed mysql-5.7.35, with the command</p>
<p>&quot;bin/mysqld --initialize    --user=mysql --port=3308  --socket=/data/mysql-5.7/data/mysql.sock  --basedir=/data/mysql-5.7/ --datadir=/data/mysql-5.7/data  --explicit_defaults_for_timestamp &quot;</p>
<p>I got an error when I was adding <strong>--defaults-file=/data/mysql-5.7/my.cnf</strong> so I removed this and installed mysql.</p>
<p>Now I am not able to find my.cnf. I checked on every possible option with no luck.</p>
<p>I want to change the value of <strong>max_allowed_packet</strong> and <strong>innodb_log_file_size</strong> but I am unble to do it.</p>
<p>Can someone please help me with this?</p>",,0,1,,2021. 11. 30 오전 7:06:24,,2021. 11. 30 오전 7:11:25,2021. 11. 30 오전 7:11:25,,9019709,,9019709,,1,0,mysql,31
70289930,Select results and use result value as column,"<p>I have such query in postgres:</p>
<pre><code>
  WITH results AS (
                    select distinct id, type from m.errors
                  )
    select distinct t.ag_id, q.type, q.id
    from (select distinct id, type from results where type = results.type) q
    inner join m.full f on f.[results.type]_id = q.id
</code></pre>
<p><code>results.type</code> can be e.g. book, newspaper, paper etc
based on it I need my inner join to look like this:</p>
<p><code>inner join m.full f on f.book_id = q.id</code></p>
<p><code>inner join m.full f on f.paper_id = q.id</code></p>
<p>etc. is it possible to do it? I can't figure it out. Or should I use <code>case</code> here?</p>",,0,1,,2021. 12. 9 오후 12:26:30,,2021. 12. 9 오후 12:47:17,2021. 12. 9 오후 12:47:17,,3624141,,3624141,,1,0,sql|postgresql,31
70089550,"How to compare one value, with a value that corresponds to another value?","<p>I have a table:</p>
<pre><code>Table 1
pizza     |price|country|base
-----------------------------------
americano | 2   | U.S   | wholemeal
funghi    | 3   | Italy | wholemeal
sicilliano| 7   | Italy | wholemeal
</code></pre>
<p>I need to list all the <code>pizza</code> elements, that have the same <code>country</code> element, as sicilliano <code>pizza</code>, not using a subquery.</p>",70089638,1,1,,2021. 11. 24 오전 12:48:28,,2021. 11. 24 오전 8:56:30,,,,,16077846,,1,0,mysql,33
70237495,Select events between today's start/end and group in array,"<p>I am trying to group user logged in for today date and aggregate in an array,
using timestamp with timezone for <code>last_login_at</code> field.</p>
<pre><code>| user_id | last_login_at |
| ------- | ------------- |
| 1       | 2021-12-04 02:03:03.489+01 |
| 2       | 2021-12-04 02:01:02.489+01 |
| 2       | 2021-12-04 01:49:01.489+01 |
| 1       | 2021-12-04 01:35:06.489+01 |
</code></pre>
<p>Got empty result with:</p>
<pre><code>SELECT 
user_id,
array_agg(last_login_at) AS connexion 
FROM user_last_login
WHERE last_login_at &gt;= current_date
AND last_login_at &lt; current_date + interval '1 day'
GROUP BY 1;
</code></pre>
<p>Also got empty result with simple query:</p>
<pre><code>SELECT user_id, last_login_at FROM user_last_login 
WHERE last_login_at &gt;= current_date
AND last_login_at &lt; current_date + interval '1 day';
</code></pre>
<p>Any suggestion?</p>",,0,1,,2021. 12. 5 오후 6:50:01,,2021. 12. 12 오후 6:27:23,2021. 12. 12 오후 6:27:23,,2753501,,3407073,,1,0,postgresql,33
70061486,Install mysql in windows,"<p>Every thing is downloading except the server, I tried deleting it and downloading it again but it didn’t work
<a href=""https://i.stack.imgur.com/NrV1C.jpg"" rel=""nofollow noreferrer"">enter image description here</a></p>",,1,1,,2021. 11. 22 오전 6:02:54,,2021. 11. 22 오후 2:49:44,,,,,14803290,,1,-3,mysql,34
70259388,SQL select rows case INsensitive not works my statement,"<p>I have Android app that sends to server pattern to find user by name. I want to be able to find rows where <code>VARCHAR</code> column is like pattern (but case INsensitive) that I send to server. Lets say we have a nickname like 'Bigboss'. The SQL statement should be able to find this row either when is passed 'Bigboss' or 'bIGBOSS' or 'biGbOsS' or 'bi' etc. Currently it works weird.</p>
<p>Here is my <code>SQL</code> statement:</p>
<pre><code>SELECT * 
from users_details 
where upper(name) like '&quot; + pattern + &quot;%' 
   or lower(name) like '&quot; + pattern + &quot;%'
</code></pre>
<p>Help me please.</p>",70259435,2,1,,2021. 12. 7 오전 11:32:47,,2021. 12. 8 오전 2:51:18,2021. 12. 7 오전 11:37:09,,330315,,14992173,,1,0,sql|postgresql,34
70190284,postgres - how to show most recent date when joining two tables?,"<p>I am joining two tables but I want the most recent date shown. Here are my tables:</p>
<pre><code>Project_updates:
company_id  project_id  progress    &quot;date&quot;
    1   1   5   2020-02-02
    1   1   20  2020-02-03
    1   1   200 2021-11-29
    1   8   200 2021-11-29
    2   3   20  2020-02-03
    2   3   20  2020-02-04
    2   3   30  2020-02-04
    2   3   30  2020-02-05
</code></pre>
<p>Project details:</p>
<pre><code>project_id  project_name    project_carbon_impact   description project_goal    company_transition_id
1   project1    25  We are going to convert 100 trucks to eletric   100 1
2   project1    25  We are going to convert 100 trucks to eletric   100 1
3   project1    250 We are going to convert 1000 trucks to eletric  1000    2
4   ProjectTest 1500    ProjectTest Description Here    2500    3
5   project5    250 We are going to convert 1000 trucks to eletric  1000    2
6   project6    250 None    1000    2
7   project7    250     1000    2
8   Test Project  Dev   20  Project Description 50  1
9   Solar building project  0   We will add solar panels to the buildings to reduce emissions.  100 1
</code></pre>
<p>I'm trying to write a query to get me the details for each project for each company and the most recent progress
I tried something like this:</p>
<pre><code>select  tpd.project_id, max(date) as max_date, tpu.progress 
from company.transition_project_details tpd  
JOIN company.transition_project_updates tpu ON (tpu.project_id = tpd.project_id)
where tpd.company_transition_id = 2
group by tpd.project_id, tpu.progress
order by max_date desc 
</code></pre>
<p>I've tried this also :</p>
<pre><code>select  *
from company.transition_project_details tpd, 

(select company_id, project_id, progress, date,
rank() over (partition by project_id order by date desc)
from company.transition_project_updates tpu 
where tpu.company_id =2 ) as project_updates

where project_updates.rank =1 
and tpd.company_transition_id = 2
</code></pre>
<p>but for both, I get multiple results for each project_id.  My goal is to just get all projects for a specific company_id and then their most current progress.</p>",70190795,1,1,,2021. 12. 1 오후 7:38:14,,2021. 12. 2 오후 12:02:57,,,,,640558,,1,0,sql|postgresql,35
70070263,How to select the part of a column between _ and a,"<p>i have a column <strong>href</strong>  which contiens a liste of links</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>href</th>
</tr>
</thead>
<tbody>
<tr>
<td>100712107%23C3.3_.pdf</td>
</tr>
<tr>
<td>100712107~%23C3.2_C00.zip</td>
</tr>
<tr>
<td>100740104_C2.3.xls</td>
</tr>
<tr>
<td>testme_aze_--b00.xls</td>
</tr>
</tbody>
</table>
</div>
<p>My ouput would be</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>href</th>
<th>name</th>
<th>rev</th>
</tr>
</thead>
<tbody>
<tr>
<td>100712107%23C3.3_.pdf</td>
<td>100712107%23C3.3</td>
<td></td>
</tr>
<tr>
<td>100712107~%23C3.2_C00.zip</td>
<td>100712107~%23C3.2</td>
<td>C00</td>
</tr>
<tr>
<td>100740104_C2.3.xls</td>
<td>100740104</td>
<td>C2.3</td>
</tr>
<tr>
<td>testme_aze_--b00.xls</td>
<td>testme_aze</td>
<td>--b00</td>
</tr>
</tbody>
</table>
</div>
<p>I have tried to use ** reverse(split_part(reverse(href),'.',1))**</p>",70070510,2,1,,2021. 11. 22 오후 5:52:30,,2021. 11. 22 오후 6:12:46,,,,user15973370,,,1,0,postgresql,36
70076461,How to select data with an unusual grouping by date?,"<p>There is a table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">id</th>
<th style=""text-align: center;"">direction_id</th>
<th style=""text-align: right;"">created_at</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">22 November 2021 г., 16:00:00</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">22 November 2021 г., 16:20:00</td>
</tr>
<tr>
<td style=""text-align: left;"">43</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">22 November 2021 г., 16:25:00</td>
</tr>
<tr>
<td style=""text-align: left;"">455</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: right;"">22 November 2021 г., 16:27:00</td>
</tr>
<tr>
<td style=""text-align: left;"">6567</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">22 November 2021 г., 17:36:00</td>
</tr>
<tr>
<td style=""text-align: left;"">674556</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">22 November 2021 г., 20:01:00</td>
</tr>
<tr>
<td style=""text-align: left;"">5243554</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: right;"">22 November 2021 г., 20:50:00</td>
</tr>
<tr>
<td style=""text-align: left;"">5243554</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: right;"">22 November 2021 г., 21:46:00</td>
</tr>
</tbody>
</table>
</div>
<p>I need to get the following result:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">1</th>
<th style=""text-align: center;"">2</th>
<th style=""text-align: right;"">created_at_by_hour</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: right;"">22.11.21 17</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: right;"">22.11.21 18</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: right;"">22.11.21 19</td>
</tr>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: right;"">22.11.21 20</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: right;"">22.11.21 21</td>
</tr>
<tr>
<td style=""text-align: left;"">3</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: right;"">22.11.21 22</td>
</tr>
</tbody>
</table>
</div>
<p>1 and 2 in the header are all possible values of <code>direction_id</code> that are in the table.
<code>created_at</code> is reduced to hours and you need to count how many records satisfy the condition &lt;= <code>created_at_by_hour</code>. But the grouping should be such that if the time (hour) when no records were created, then just duplicate the previous hour.</p>
<p>The table consists of three fields - <code>id</code> (int), <code>direction_id</code> (int), <code>created_at</code> (timestamptz). I need to get an hourly (based on the created_at field) data upload with the number of records created before this &quot;grouped&quot; time. But I need not just the number, but separately for each <code>direction_id</code> (there are only two of them - <code>1</code> and <code>2</code>). If no records were created for a certain <code>direction_id</code> at a certain hour, duplicate the previous one, but the result should end at the last <code>created_at</code>. <code>created_at</code> is the time when the record was created.</p>",70076788,2,1,,2021. 11. 23 오전 6:47:26,,2021. 11. 23 오전 7:58:06,,,,,17397512,,1,0,sql|postgresql,36
70153451,How can I condition a double variable to be less than 500 while creating the table in MYSQL,<p>So my teacher asked me to condition the double variable so it can't be higher than 500. How can I do that when creating the table?</p>,70153612,1,1,,2021. 11. 29 오전 10:55:23,,2021. 11. 29 오전 11:29:22,,,,,17540344,,1,0,mysql,36
70187524,How do I update multiple columns in multiple rows on MySQL?,"<p>Say I have this table:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;table border=1&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;id&lt;/th&gt;
      &lt;th&gt;manufacturer&lt;/th&gt;
      &lt;th&gt;year&lt;/th&gt;
      &lt;th&gt;car_model&lt;/th&gt;
      &lt;th&gt;engine_model&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;Honda&lt;/td&gt;
      &lt;td&gt;2017&lt;/td&gt;
      &lt;td&gt;Civic&lt;/td&gt;
      &lt;td&gt;P10A2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;Volvo&lt;/td&gt;
      &lt;td&gt;2014&lt;/td&gt;
      &lt;td&gt;S60&lt;/td&gt;
      &lt;td&gt;B4204T11&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;Hyundai&lt;/td&gt;
      &lt;td&gt;1994&lt;/td&gt;
      &lt;td&gt;Accent&lt;/td&gt;
      &lt;td&gt;G4EK&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;Mazda&lt;/td&gt;
      &lt;td&gt;1992&lt;/td&gt;
      &lt;td&gt;323&lt;/td&gt;
      &lt;td&gt;B6E&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;Citroen&lt;/td&gt;
      &lt;td&gt;2015&lt;/td&gt;
      &lt;td&gt;DS5&lt;/td&gt;
      &lt;td&gt;5FV&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
</p>
<p>How do I update it in a single query so it would look like this for instance?
*the red text signifies that something changed.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.change {
  color: red;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;table border=1&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;id&lt;/th&gt;
      &lt;th&gt;manufacturer&lt;/th&gt;
      &lt;th&gt;year&lt;/th&gt;
      &lt;th&gt;car_model&lt;/th&gt;
      &lt;th&gt;engine_model&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td class=""change""&gt;Honda&lt;/td&gt;
      &lt;td class=""change""&gt;2000&lt;/td&gt;
      &lt;td class=""change""&gt;CRV&lt;/td&gt;
      &lt;td class=""change""&gt;R20A9&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;Volvo&lt;/td&gt;
      &lt;td class=""change""&gt;2015&lt;/td&gt;
      &lt;td&gt;S60&lt;/td&gt;
      &lt;td&gt;B4204T11&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;Hyundai&lt;/td&gt;
      &lt;td class=""change""&gt;2000&lt;/td&gt;
      &lt;td&gt;Accent&lt;/td&gt;
      &lt;td class=""change""&gt;G4EB&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;Mazda&lt;/td&gt;
      &lt;td&gt;1992&lt;/td&gt;
      &lt;td&gt;323&lt;/td&gt;
      &lt;td&gt;B6E&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;Citroen&lt;/td&gt;
      &lt;td&gt;2015&lt;/td&gt;
      &lt;td class=""change""&gt;C4&lt;/td&gt;
      &lt;td class=""change""&gt;HNY&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
</p>
<p>I have a client who wants the changes to be saved all at once only after confirmation of his progress, so I'm storing his progress on an array before I send it to the server and run the MySQL code. I previously used a foreach loop to update each row separately, but I get a timeout when I try to update too many rows via loop, meaning some of the progress isn't saved, so I want to get it sorted under a single query, if possible. I've tried using CASE but it only worked if the changes were associative. In the example I've given, the changes are not associative.</p>
<p>Any help is appreciated.</p>",,0,1,,2021. 12. 1 오후 4:08:27,,2021. 12. 1 오후 4:08:27,,,,,17563428,,1,0,mysql,36
70359700,mysql where a column does not contain regular expression with value from another column,"<p>I have the below table and I need to find all rows where the <code>resource_path</code> does not contain the <code>code</code> in the string.</p>
<pre><code>id | code | resource_path
1   abc01    /this/is/path/to/resource/abc01/xyz.jpg
2   abc02    /this/is/path/to/resource/abc02/xyz.png
3   abc02    /this/is/path/to/resource/xyz.png 
</code></pre>
<p>I have tried the following query</p>
<pre><code>SELECT * FROM aTable WHERE resource NOT IN (select code from aTable) ORDER BY id DESC LIMIT 10;
</code></pre>
<p>but this returns everything.
Thanks in advance.</p>",70359774,2,1,,2021. 12. 15 오전 7:16:04,,2021. 12. 15 오전 7:29:20,,,,,1468797,,1,0,mysql,36
70031762,Autovacuum does not autovacuum often enough,"<p>The vacuum does not execute regularly enough on some tables, therefore bloat is present on large tables.
To overcome this problem, I am setting up a weekly job that runs a vacuum analyze command.
Is this approach correct and is it compatible with good practice?</p>",70032120,1,1,,2021. 11. 19 오전 8:19:38,,2021. 11. 19 오전 8:49:47,,,,,7069611,,1,0,postgresql,37
70035660,Are SQL field types case sensitive,"<p>I was wondering if field types are case sensitive in SQL, specifically in postgresql.
As far as I know SQL key words are generally case insensitive but does this also apply to types?
So if I have:</p>
<pre><code>SELECT CAST(item1 AS INT)
</code></pre>
<p>is that the same as:</p>
<pre><code>SELECT CAST(item1 AS int)
</code></pre>",70036004,1,1,,2021. 11. 19 오후 1:32:19,,2021. 11. 19 오후 1:57:34,,,,,13061414,,1,-2,sql|postgresql,37
70136953,Inserting a row in table that consist of only one auto increment PK column,"<p>I have this table:</p>
<pre><code>CREATE TABLE `VormerkListe` (
  `vormerkListeID` int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`vormerkListeID`)
)
</code></pre>
<p>And I try to add a new column with this, found <a href=""https://stackoverflow.com/questions/28310462/insert-row-into-table-with-only-a-primary-key-field"">here</a>:</p>
<pre><code>INSERT INTO VormerkListe DEFAULT VALUES;
</code></pre>
<p>But I get this error:</p>
<pre><code>INSERT INTO VormerkListe DEFAULT VALUES Error Code: 1064. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DEFAULT VALUES' at line 1  0.031 sec
</code></pre>",70137037,2,1,,2021. 11. 27 오후 5:03:23,,2021. 11. 27 오후 5:45:50,,,,,11355362,,1,0,mysql,37
70185393,Neo4j count(*) returning wrong value,"<p>The query in question is:</p>
<pre><code>MATCH (p1:Politician)-[r1:mentioned_by]-&gt;(c:Channel {name: &quot;Telefe Noticias&quot;})&lt;-[r2:mentioned_by {video_id: r1.video_id}]-(p2:Politician)
WHERE p1.fullname &lt; p2.fullname  
RETURN COUNT(*) AS totalMentions
</code></pre>
<p>Neo4j is returning 364 but there are 59 records and I can't understand why.</p>",,2,1,,2021. 12. 1 오후 1:49:15,,2021. 12. 2 오전 12:51:48,,,,,13191080,,1,0,neo4j,38
70193819,column table_name of relation table_name does not exist,"<p>My project using Postgresql and Microsoft SQL Server. So I can't change the parameter name in Postgresql. How can I fix the bug in this case.</p>
<p>my function below.</p>
<pre><code>CREATE OR REPLACE FUNCTION schedule_updatealarmsetting(
    userno integer,
    isemail boolean,
    isalarmi boolean,
    ispc boolean,
    ismobile boolean,
    timealarm integer,
    isunuse boolean)
  RETURNS void AS
$BODY$ 
BEGIN
    -- check exists
    if(exists(select 1 from ScheduleAlarmSetting A where A.UserNo = Schedule_UpdateAlarmSetting.UserNo)) then
    begin
        -- update
        update ScheduleAlarmSetting 
        set IsEmail = Schedule_UpdateAlarmSetting.IsEmail
        , ScheduleAlarmSetting.IsAlarmi = Schedule_UpdateAlarmSetting.IsAlarmi
        , ScheduleAlarmSetting.IsPC = Schedule_UpdateAlarmSetting.IsPC
        , ScheduleAlarmSetting.TimeAlarm = Schedule_UpdateAlarmSetting.TimeAlarm 
        , ScheduleAlarmSetting.IsMobile = Schedule_UpdateAlarmSetting.IsMobile
        , ScheduleAlarmSetting.IsUnuse = Schedule_UpdateAlarmSetting.IsUnuse
        , ScheduleAlarmSetting.ModDate = now()
        , ScheduleAlarmSetting.ModUserNo = Schedule_UpdateAlarmSetting.UserNo
        where ScheduleAlarmSetting.UserNo = Schedule_UpdateAlarmSetting.UserNo;
    end;
    else
    begin
        -- insert
        insert into ScheduleAlarmSetting(UserNo,IsEmail,IsAlarmi,IsPC,IsMobile, TimeAlarm, IsUnuse,RegUserNo,RegDate)
        values (Schedule_UpdateAlarmSetting.UserNo
        , Schedule_UpdateAlarmSetting.IsEmail
        , Schedule_UpdateAlarmSetting.IsAlarmi
        , Schedule_UpdateAlarmSetting.IsPC
        , Schedule_UpdateAlarmSetting.IsMobile
        , Schedule_UpdateAlarmSetting.TimeAlarm
        , Schedule_UpdateAlarmSetting.IsUnuse
        , Schedule_UpdateAlarmSetting.UserNo
        , now());
    end;
    end if;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION schedule_updatealarmsetting(integer, boolean, boolean, boolean, boolean, integer, boolean)
  OWNER TO postgres;


select * from schedule_updatealarmsetting(1,True, True, True, True,0,false);
</code></pre>
<p>Error
column &quot;schedulealarmsetting&quot; of relation &quot;schedulealarmsetting&quot; does not exist</p>
<p>When I remove &quot;schedulealarmsetting.&quot; it will show error:&quot;column reference &quot;userno&quot; is ambiguous&quot;</p>",,1,1,,2021. 12. 2 오전 3:18:40,,2021. 12. 2 오전 5:05:58,,,,,8063048,,1,0,postgresql,38
70052076,PosgreasSQL index is not applied when select?,"<p>In my database, I created a index</p>
<pre><code>CREATE INDEX meeting_name_idx ON swoosh.meeting (meeting_name varchar_pattern_ops);
</code></pre>
<p>So based on the index that I have for table &quot;meeting&quot;, if I do:</p>
<pre><code>Explain SELECT meeting_name FROM meeting WHERE meeting_name like 'Pro%';
</code></pre>
<p>I would get</p>
<pre><code>index only scan using meeting_name_idx on meeting
</code></pre>
<p>But if I changed the <code>%</code> in this case, and I do</p>
<pre><code>Explain SELECT meeting_name FROM meeting WHERE meeting_name like '%Pro';
</code></pre>
<p>The result would be a sequential scan, why is that?</p>",70052108,1,1,,2021. 11. 21 오전 5:32:33,,2021. 11. 21 오전 5:39:56,,,,,17156262,,1,0,sql|postgresql,39
70076332,Is there a way to improve BigQuery's performance over PostgreSQL,"<p>We have a 12M records of geospatial data in PostgreSQL (with no index) and use the same data in BigQuery and the time taken to run the same query takes nearly same timings.</p>
<p>Is there some ways to tweak BigQuery to achieve better performance than PostgreSQL?</p>",,0,1,,2021. 11. 23 오전 6:32:04,,2021. 11. 23 오전 7:14:47,2021. 11. 23 오전 7:14:47,,13302,,17133926,,1,0,google-bigquery,39
70174089,"MySQL ""number"" rows in result","<p>This is my first question, so please bear with me.
I have a stored procedure which selects orders and order line location ids. In the result, I need the ability to &quot;sequence&quot; each location in each order.</p>
<p>the query so far is:</p>
<pre><code>   select DISTINCT oh.order_id, oline.ship_location_id, null
    from op_order_header as oh
    inner join op_order_line as oline ON
        oh.order_id = oline.order_id
    inner join co_products as pr ON
        oline.product_id = pr.product_id and
        pr.inventory_type = 'inventory'
    where oh.order_status = 'COMPLETE'
</code></pre>
<p>the result is:</p>
<pre><code>+----------+------------------+----------+
| order_id | ship_location_id | sequence |
+----------+------------------+----------+
|    24737 |             6621 |     NULL |
|    24738 |             6623 |     NULL |
|    24743 |             6634 |     NULL |
|    24743 |             6635 |     NULL |
+----------+------------------+----------+
</code></pre>
<p>the required result is:</p>
<pre><code>+----------+------------------+----------+
| order_id | ship_location_id | sequence |
+----------+------------------+----------+
|  1224737 |             6621 |         1|
|  1324738 |             6623 |         1|
|  1224743 |             6634 |         1|
|  1224743 |             6635 |         2|
+----------+------------------+----------+
</code></pre>
<p>As you can see from the above that the first 3 orders only have 1 location each - so this would be the only location (thus only 1 in this order's sequence), while the order 1224743 has 2 locations and thus 2 in the sequence.</p>
<p>Hope this makes sense and I am looking forward to your responses.
thanks</p>",70174204,2,1,,2021. 11. 30 오후 6:05:33,,2021. 11. 30 오후 7:55:29,,,,,17554639,,1,1,mysql,39
70318920,Сan not compose the correct SQL query for my case,"<p>I need to select contacts</p>
<ol>
<li><p>where field &quot;email&quot; = value &quot;email1&quot; OR field &quot;name&quot; = value &quot;name1&quot;</p>
</li>
<li><p>where field &quot;email&quot; = value &quot;email1&quot; AND field &quot;name&quot; = value &quot;name1&quot;</p>
</li>
</ol>
<p>I have solution SQL query for first condition OR</p>
<pre><code>SELECT v.contact_id 
FROM values v
INNER JOIN fields f ON f.id = v.field_id
INNER JOIN contacts c ON c.id = v.contact_id
WHERE (f.tag = 'email' AND v.value = 'email1' AND f.listing_id = 1) 
   OR (f.tag = 'name' AND v.value = 'name1' AND f.listing_id = 1)
</code></pre>
<p>But if I change OR in the beginning of fifth line to AND it of course won't work</p>
<pre><code>SELECT v.contact_id 
FROM values v
INNER JOIN fields f ON f.id = v.field_id
INNER JOIN contacts c ON c.id = v.contact_id
WHERE (f.tag = 'email' AND v.value = 'email1' AND f.listing_id = 1) 
  AND (f.tag = 'name' AND v.value = 'name1' AND f.listing_id = 1)
</code></pre>
<p>Please help me to improve this query to work in both options, i will be very grateful for help with solving this problem (mysql db)</p>
<p>Database scheme: <a href=""https://i.imgur.com/I5J2hh0.png"" rel=""nofollow noreferrer"">https://i.imgur.com/I5J2hh0.png</a></p>
<p>Database values:</p>
<p>Table groups</p>
<pre><code>id | name
---+--------
1  | group1
</code></pre>
<p>Table contacts</p>
<pre><code>id | group_id
---+----------
1  | 1
2  | 1
</code></pre>
<p>Table fields</p>
<pre><code>id | group_id | tag
---+----------+--------
1  | 1        | email
2  | 1        | name
3  | 1        | email
4  | 1        | name
</code></pre>
<p>Table values</p>
<pre><code>id | contact_id | field_id | value
---+------------+----------+----------
1  | 1          | 1        | email1
2  | 1          | 2        | name1
2  | 2          | 3        | email2
4  | 2          | 4        | name2
</code></pre>",70319068,1,1,,2021. 12. 11 오후 8:48:39,,2021. 12. 11 오후 9:57:24,2021. 12. 11 오후 9:45:08,,13302,,17654221,,1,1,mysql,39
70140900,Failed to create table: Undefined parameter - ERROR_MESSAGE,"<p><a href=""https://i.stack.imgur.com/FlAkE.png"" rel=""nofollow noreferrer"">enter image description here</a>
I encountered this issue recently. I tried to create a table from the dataset employee_data. But no matter how I tried, I can not create the table anymore. Please help.</p>",,1,1,,2021. 11. 28 오전 5:30:17,,2021. 11. 28 오후 5:33:54,,,,,17512271,,1,0,google-bigquery,295
70108845,"Postgresql: How to get null values when using WHERE col NOT LIKE ""foo""?","<p>When using <code>WHERE</code> clause with <code>NOT LIKE</code> on <code>my_text_column</code>, <code>null</code> values are skipped.</p>
<p>Why and how to get it ?</p>
<pre><code>SELECT count(id) FROM public.mytable;
 count 
-------
    91
SELECT count(id) FROM public.mytable WHERE my_text_column LIKE 'foo';
 count 
-------
    59
SELECT count(id) FROM public.mytable WHERE my_text_column NOT LIKE 'foo';
 count 
-------
     0
</code></pre>",70109598,2,1,,2021. 11. 25 오전 9:42:17,,2021. 11. 25 오전 10:36:32,,,,,931247,,1,0,postgresql,41
70261763,mysql command to get data of 2 tables,"<p>I would like to get data from 2 mysql tables.</p>
<p>Table tbl_1:</p>
<p><a href=""https://i.stack.imgur.com/1Vnii.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/1Vnii.png"" alt=""enter image description here"" /></a></p>
<p>Table tbl_2:</p>
<p><a href=""https://i.stack.imgur.com/XJm4s.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/XJm4s.png"" alt=""enter image description here"" /></a></p>
<p>I tried this:</p>
<pre><code>SELECT `tbl_2`.* 
FROM `tbl_1` 
    LEFT JOIN `tbl_2` ON `tbl_1`.invoiceID = `tbl_2`.invoiceID 
WHERE `tbl_1`.customerID = &quot;463&quot;;
</code></pre>
<p>My result:</p>
<p><a href=""https://i.stack.imgur.com/GWA3s.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/GWA3s.png"" alt=""enter image description here"" /></a></p>
<p>The results looks good but not perfect.
I get many null rows which are not be in my result.
only the first both rows should be in the result.</p>
<p>Where is my fault?</p>",70261894,3,1,,2021. 12. 7 오후 2:16:54,,2021. 12. 8 오전 10:05:06,2021. 12. 8 오전 10:05:06,,1839439,,5068746,,1,0,mysql,41
70140755,Error code: 1054 Unkown column 'London' in 'field list',"<p>I am not sure what is wrong here, I have column 6 &quot;Location varchar(50)&quot; and as you can see in the VanWinkles table, column 6 is 'London', so why am I getting this error?</p>
<pre><code>CREATE TABLE VanWinkleEmployee
(EmployeeID int,
Reservation varchar(50),
Checkin int,
Checkout int,
TotalDays int,
Location varchar(50),
Deposit int,
Rate int,
Discount int,
ExtraCharges int,
Reimbursement int

INSERT INTO VanWinkleEmployee VALUES
(104, null, null, null, 4, ‘London’, 20, 35, 15, null, null ),
(105, null, null, null, null, ‘London’, null, null, null, null, null )
</code></pre>",,1,1,,2021. 11. 28 오전 4:53:18,,2021. 11. 28 오전 8:42:55,2021. 11. 28 오전 8:39:37,,3522312,,15837467,,1,-1,mysql,43
70186645,Reindex command seems not working for some indexes,"<p>the pg_catalog.pg_amproc table of my demo database
has 2 indexes which density does not change even after a reindex or a vacuum full
Why index density does not change after a rebuild?</p>
<pre><code>                Table &quot;pg_catalog.pg_amproc&quot;
     Column      |   Type   | Collation | Nullable | Default
-----------------+----------+-----------+----------+---------
 amprocfamily    | oid      |           | not null |
 amproclefttype  | oid      |           | not null |
 amprocrighttype | oid      |           | not null |
 amprocnum       | smallint |           | not null |
 amproc          | regproc  |           | not null |
Indexes:
    &quot;pg_amproc_fam_proc_index&quot; UNIQUE, btree (amprocfamily, amproclefttype, amprocrighttype, amprocnum)
    &quot;pg_amproc_oid_index&quot; UNIQUE, btree (oid)

=# select s.leaf_fragmentation,
-#           s.avg_leaf_density
-#  FROM pg_index AS i
-#  CROSS JOIN LATERAL pgstatindex(i.indexrelid) AS s
-#  WHERE indrelid = 'pg_catalog.pg_amproc'::regclass;
 leaf_fragmentation | avg_leaf_density
--------------------+------------------
                  0 |             70.8
                  0 |            50.59

=# reindex table pg_amproc;
REINDEX
=# select s.leaf_fragmentation,
          s.avg_leaf_density
 FROM pg_index AS i
 CROSS JOIN LATERAL pgstatindex(i.indexrelid) AS s
 WHERE indrelid = 'pg_catalog.pg_amproc'::regclass;
 leaf_fragmentation | avg_leaf_density
--------------------+------------------
                  0 |             70.8
                  0 |            50.59
(2 rows)
</code></pre>",,0,1,,2021. 12. 1 오후 3:11:06,,2021. 12. 1 오후 4:33:37,2021. 12. 1 오후 4:33:37,,7069611,,7069611,,1,0,postgresql,43
70265863,How to sum values in a column based on values in a different column SQL,"<p>For example, lets say I have</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>values</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>then i would want sql to return</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>values</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>32</td>
</tr>
<tr>
<td>2</td>
<td>11</td>
</tr>
</tbody>
</table>
</div>",,2,1,,2021. 12. 7 오후 7:23:07,,2021. 12. 7 오후 7:31:47,2021. 12. 7 오후 7:27:17,,14693337,,14693337,,1,0,sql|postgresql,43
70027668,problems updating the table,"<p>Im not sure what is wrong with the code, it should update just 30 rows with the nulls but instead updates all the rows.</p>
<pre><code>update nashville_housing_data
set property_address = coalesce(a.property_address,b.property_address)
from nashville_housing_data a
inner join nashville_housing_data b
on a.parcel_id = b.parcel_id 
and a.id_number &lt;&gt; b.id_number
where a.property_address is null
</code></pre>",,1,1,,2021. 11. 18 오후 10:41:42,,2021. 11. 19 오전 10:40:14,,,,,17451805,,1,-1,sql|postgresql,44
70363922,"MySQL all from first table, exist from second","<p>I have a problem with a MySQL query.
I have two tables:</p>
<p>table1</p>
<pre><code>id
name
status
</code></pre>
<p>table2</p>
<pre><code>plu (id from table1)
nr_order
quantity
txt
</code></pre>
<p>I would like to show all the rows from table1 and only the ones that match from table2.
I have this query:</p>
<pre><code>$selectNumberOrder = $this-&gt;__db-&gt;execute(&quot;SELECT ID_order 
                                            from order 
                                            WHERE FK_ID_shop = x 
                                            AND data = 'xxx' 
                                            LIMIT 1;&quot;);

$selectNumberOrder_ = $selectNumberOrder[0]['ID_Order'];
    

SELECT table1.id, table1.name, table2.quantity, table2.txt 
from table1
    LEFT JOIN table2 ON table1.id = table2.plu
WHERE table1.status = 1 
AND table2.nr_order = {$selectNumberOrder_} 
ORDER BY table1.id&quot;);
</code></pre>
<p>but the query output only shows the elements that are in table2.
I do not know how to make it show all the elements from table1 and add the elements from table2 to them (if table2 does not have the id data from table1, let the quantity be empty)</p>",70364107,2,1,,2021. 12. 15 오후 12:44:58,,2021. 12. 15 오후 1:13:43,2021. 12. 15 오후 12:58:08,,2310830,,8562130,,1,0,mysql,44
70147596,Get all of the low-level children of a node,"<p>I am struggling with the writing of a query for PostgreSQL. The table resembles a tree and every item can have <em>n</em> children.
I would like to get only and all the children of the lowest level(s) (which don't have any children by themselves) of a given element of the tree.</p>
<p>The structure:</p>
<pre><code>CREATE TABLE items
(
    ikey integer NOT NULL,
    description character varying(255),
    parent integer,
    CONSTRAINT i_pk PRIMARY KEY (ikey),
    CONSTRAINT i_relation FOREIGN KEY (parent)
        REFERENCES items (ikey) MATCH SIMPLE
)
</code></pre>
<p>Some values of the table would look like this:</p>
<pre><code> 1  &quot;Products&quot;  NULL --Parent
 2  &quot;Metal&quot; 1
 3  &quot;Nails&quot; 2
 4  &quot;Chains&quot;    2
 5  &quot;Bicycle Chains&quot;    4
 6  &quot;Shimano Bicycle Chains&quot;    5
 7  &quot;Shimano Bicycle Chains&quot;    5
 8  &quot;7mm chain, black&quot;    4
 9  &quot;Wood&quot;  1
 10 &quot;Cutting Boards&quot;    8
 11 &quot;Cutting Board Holder&quot; 8
</code></pre>
<p>Most of the solutions on SO deal with not very deep trees which have just 1-2 levels. Or it is known from which parent the children are required.</p>
<p>I would like to select all children of &quot;Chains&quot; (4), which would give the following result:</p>
<pre><code>6   &quot;Shimano Bicycle Chains&quot;    5
7   &quot;Shimano Bicycle Chains&quot;    5
8   &quot;7mm chain, black&quot;    4
</code></pre>
<p>To be honest, recursive queries are not my strongest skill. I had the idea already to search upside down - getting all items first which are never used as parents and then going down, but this only shifts the problem to the point again that I have to go down recursively from the given parent which seems a bit over the top.</p>",,3,1,,2021. 11. 28 오후 9:27:42,,2021. 11. 28 오후 10:39:28,,,,,2516892,,1,1,sql|postgresql,46
70101871,how can i rewrite this into a single query - sql optimization,"<p>how can i optimize the following query?
I'm not sure how to rewrite them into a single query, combine all the joins.</p>
<pre><code>other_publisher_views AS (
             SELECT clv.date,
                    clv.streeteasy_page_views,
                    clv.trulia_page_views,
                    clv.zillow_page_views,
                    clv.realtor_page_views
             FROM agent_insights_lt.agent_insights__combined_listing_views AS clv
             JOIN listing_info_raw
                     ON clv.property_id_sha = listing_info_raw.property_id_sha
         ),
         other_publisher_views_by_period AS (
             SELECT is_current_period,
                    start_date,
                    end_date,
                    coalesce(sum(streeteasy_page_views), 0) AS streeteasy_page_views,
                    coalesce(sum(trulia_page_views), 0)     AS trulia_page_views,
                    coalesce(sum(zillow_page_views), 0)     AS zillow_page_views,
                    coalesce(sum(realtor_page_views), 0)    AS realtor_page_views
             FROM periods
             LEFT JOIN other_publisher_views ON
                 other_publisher_views.date BETWEEN periods.start_date
                                                AND periods.end_date
</code></pre>",,1,1,,2021. 11. 24 오후 7:26:46,1,2021. 11. 25 오전 2:03:10,2021. 11. 25 오전 1:57:57,,1766831,,17296009,,1,-2,mysql,47
70128654,Simple POSTGRESQL SELECT query too slow,"<p>I have a table that stores logs from an Electronic Invoicing System webservice, this is my SQL Structure</p>
<pre><code>CREATE TABLE public.eis_transactions
(
    id bigint NOT NULL DEFAULT nextval('eis_transactions_id_seq'::regclass),
    operation_type character varying COLLATE pg_catalog.&quot;default&quot;,
    sale_id integer,
    delivery_note_id integer,
    sale_credit_note_id integer,
    debit_note_id integer,
    cdc text COLLATE pg_catalog.&quot;default&quot;,
    transaction_id text COLLATE pg_catalog.&quot;default&quot;,
    response_code character varying COLLATE pg_catalog.&quot;default&quot;,
    response_description text COLLATE pg_catalog.&quot;default&quot;,
    xml text COLLATE pg_catalog.&quot;default&quot;,
    response_xml text COLLATE pg_catalog.&quot;default&quot;,
    response_datetime timestamp without time zone,
    created timestamp without time zone,
    modified timestamp without time zone,
    user_id integer,
    async boolean DEFAULT false,
    url character varying COLLATE pg_catalog.&quot;default&quot;,
    final_xml text COLLATE pg_catalog.&quot;default&quot;,
    CONSTRAINT eis_transactions_pkey PRIMARY KEY (id),
    CONSTRAINT eis_transactions_debit_note_id_fkey FOREIGN KEY (debit_note_id)
        REFERENCES public.debit_notes (id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    CONSTRAINT eis_transactions_delivery_note_id_fkey FOREIGN KEY (delivery_note_id)
        REFERENCES public.delivery_notes (id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    CONSTRAINT eis_transactions_sale_credit_note_id_fkey FOREIGN KEY (sale_credit_note_id)
        REFERENCES public.sale_credit_notes (id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    CONSTRAINT eis_transactions_sale_id_fkey FOREIGN KEY (sale_id)
        REFERENCES public.sales (id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    CONSTRAINT eis_transactions_user_id_fkey FOREIGN KEY (user_id)
        REFERENCES public.users (id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public.eis_transactions
    OWNER to postgres;
-- Index: eis_transactions_id_idx

-- DROP INDEX public.eis_transactions_id_idx;

CREATE INDEX eis_transactions_id_idx
    ON public.eis_transactions USING btree
    (id ASC NULLS LAST)
    TABLESPACE pg_default;
-- Index: eis_transactions_id_idx1

-- DROP INDEX public.eis_transactions_id_idx1;

CREATE INDEX eis_transactions_id_idx1
    ON public.eis_transactions USING btree
    (id ASC NULLS FIRST)
    TABLESPACE pg_default;
-- Index: eis_transactions_id_idx2

-- DROP INDEX public.eis_transactions_id_idx2;

CREATE INDEX eis_transactions_id_idx2
    ON public.eis_transactions USING btree
    (id DESC NULLS FIRST)
    TABLESPACE pg_default;
-- Index: eis_transactions_sale_id_delivery_note_id_sale_credit_note__idx

-- DROP INDEX public.eis_transactions_sale_id_delivery_note_id_sale_credit_note__idx;

CREATE INDEX eis_transactions_sale_id_delivery_note_id_sale_credit_note__idx
    ON public.eis_transactions USING btree
    (sale_id ASC NULLS LAST, delivery_note_id ASC NULLS LAST, sale_credit_note_id ASC NULLS LAST, debit_note_id ASC NULLS LAST, user_id ASC NULLS LAST)
    TABLESPACE pg_default;
</code></pre>
<p>Cointains ~800 rows, this is the query:</p>
<pre><code>SELECT * FROM eis_transactions LIMIT 1000;
</code></pre>
<p>It takes more than 60 seconds to complete the query.</p>
<p>And this is the <code>EXPLAIN ANALYZE</code> result i got:</p>
<pre><code>EXPLAIN (ANALYZE, BUFFERS) SELECT * FROM eis_transactions LIMIT 100;
Limit  (cost=0.00..15.94 rows=100 width=1108) (actual time=0.013..0.121 rows=100 loops=1)
  Buffers: shared read=15
  -&gt;  Seq Scan on eis_transactions  (cost=0.00..128.03 rows=803 width=1108) (actual time=0.012..0.106 rows=100 loops=1)
        Buffers: shared read=15
Total runtime: 0.180 ms
</code></pre>
<p>But doing a <code>SELECT * FROM eis_transactions</code> (With or without <code>LIMIT</code>) will take more than 60 seconds. While i have other tables with more than 1000 and they don't take so long as this particular table.</p>
<p>What could be wrong ?</p>
<p>Thank you !</p>",,0,1,,2021. 11. 26 오후 6:24:05,,2021. 11. 26 오후 6:24:05,,,,,1009089,,1,1,postgresql,47
70043682,Postgresql Fuzzy Search,"<p>Forgive this general question. I have created a huge Fuzzy Search function in PostgreSQL that uses Similarity, Soundex, Metaphone, Levenshtein, and other types of logic comparisons. I've placed weighted values on each result. The function has grown to improve results, but it is slow and still not great! I've spent a lot of time researching and searching for a Fuzzy Search that someone has created who is smarter than me!</p>
<p>Does anyone know of a great fuzzy search function for PostgreSQL that compares two strings and produces a score that can be sorted? I am hoping for something that can work like:</p>
<p>SELECT tbl_name_column, fuzzy_function(tbl_name_column, 'Most like this string') as score
FROM tbl
ORDER BY score desc</p>",,1,1,,2021. 11. 20 오전 6:12:37,,2021. 12. 30 오후 8:43:12,,,,,10356614,,1,0,postgresql,303
70217899,Postgresql Create Type,"<p>Can someone explain the following type to me?</p>
<pre><code>  CREATE TYPE _newData (
        INPUT = array_in,
        OUTPUT = array_out,
        RECEIVE = array_recv,
        SEND = array_send,
        ANALYZE = array_typanalyze,
        ALIGNMENT = 8,
        STORAGE = any,
        CATEGORY = A,
        ELEMENT = newData ,
        DELIMITER = ',');
</code></pre>",,0,1,,2021. 12. 3 오후 4:46:02,,2021. 12. 3 오후 4:46:02,,,,,14259719,,1,0,postgresql,48
70320804,Executing an insert query on successful deletion in postgres,"<p>Is it possible to insert some data into one table if some entry is deleted in another table?</p>
<p>I am able to do that with multiple queries(delete first, then insert by checking if it exists). But this runs as two queries. Is it possible to merge the queries or what is the most efficient way of doing this?</p>",,2,1,,2021. 12. 12 오전 3:47:20,1,2022. 1. 9 오전 9:15:19,,,,,13566273,,1,1,sql|postgresql,48
70374574,MySQL GROUP BY if Multiple Numbered Columns are Close to Each Other (+/- 1),"<p>I have a mysql table with a large list of coordinates (x, y, z). I want to find the most common spots, but when the same place is logged, it isn't identical. For example, x could be 496.0481 or 496.3904, but that is actually the same place.</p>
<p>When I do the following query I get a list of the absolute exact matches, but those are very few and far between:</p>
<pre><code>SELECT x, y, z, COUNT(*) AS coords
FROM coordinates 
GROUP BY x, y, z
ORDER BY coords DESC
LIMIT 10;
</code></pre>
<p>How can I adjust this to be grouped by each of x, y, and z to be +/- 1 to catch a larger area? I've tried a mix of IF and BETWEEN statements but can't seem to get anything to work.</p>
<p>If I do <code>GROUP BY round(x), round(y), round(z)</code>, that gets a larger range but doesn't capture if the number goes from 496 to 497 even if they are just slightly different.</p>
<p>Thanks in advance for the help.</p>",,1,1,,2021. 12. 16 오전 6:13:05,,2021. 12. 17 오전 7:24:05,,,,,2005612,,1,2,mysql,48
70191828,Windows: neo4j cannot stop service or access console,"<p>How can I access the console/URL of an already running neo4j service or see what started the service?</p>
<p>I am running a Windows 10 VM server and downloaded the neo4j-community-4.3.7 edition.
When I run &quot;neo4j console&quot; in the command line, I get a message that says &quot;Neo4j is already running&quot;.
However when I go to the default database URL: http://localhost:7474/ the webpage does not load.</p>
<p>If I try to stop the neo4j service (using Command Prompt run as Administrator): &quot;neo4j stop&quot;, I get an error that &quot;Neo4j took more than 121 seconds to stop....&quot; and the logs stored at &quot;neo4j-community-4.3.7\logs\neo4j.log&quot; are empty.</p>
<p>If I restart the server I get the same exact problem even though I have not run neo4j at all. This makes me think that something else on the machine is launching neo4j. Is there a way for me to find what is doing this and stop it, or a way to access the console/database of the already running neo4j instance?</p>",,0,1,,2021. 12. 1 오후 10:07:45,,2021. 12. 1 오후 10:07:45,,,,,3626456,,1,0,neo4j,49
70205129,SQL Error [1064] [42000]: You have an error in your SQL syntax when using ALTER IGNORE TABLE on mysql 8,"<p>This one works in older mysql versions, but the good thing with this query is that it will remove duplicates and same time add index, how do i do the same in mysql 8 commercial</p>
<pre><code>ALTER IGNORE TABLE tablex
ADD UNIQUE INDEX id_rmd (field1,field12, field3);
</code></pre>
<blockquote>
<p>SQL Error [1064] [42000]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IGNORE TABLE ...</p>
</blockquote>
<p>How do i do the same in mysql 8 commercial. i.e. remove duplicate while same time create index</p>",70205199,1,1,,2021. 12. 2 오후 7:03:45,,2021. 12. 7 오후 5:49:27,,,,,5737654,,1,0,mysql,309
70244373,PostgreSQL select IN with duplicate,"<p>I have a field of product variant names.</p>
<blockquote>
<p>'XS',
'S',
'M',
'S',
'M',
'S',
'M',
'XS',
'S',
'M',
'XS',
'S',
'M',
'L',
'XS',
'XS',
'XS',
'S',
'XL',
'XS',
'M',
'XS',
'S',
'M',
'XS',
'M',
'S',
'XS',
'M',
'Chick Black',
'Brave Blue',
'Bold Red',
'Posh Pink',
'Purple Yum',
'Blue',
'Good Green',
'Orange',
'Purple Yum',
'Red',
'Yellow',
'Red',
'Blue',
'Purple Yum',
'Good Green',
'Orange',
'Pink',
'Light Blue',
'Red',
'Yellow',
'Green Elipse',
'Light Blue',
'Pink',
'Orange',
'White',
'Green Elipse',
'Pink Elipse',
'Blue Elipse',
'Red',
'Yellow Elipse',
'Green Elipse',
'Blue Elipse',
'Pink Elipse',
'Orange',
'White',
'Blue',
'Mint Green',
'Dusty Pink',
'Airforce Blue',
'Claret',
'Pink',
'Rubine Red',
'Green MM',
'Grey',
'Blue',
'Orange',
'Yellow',
'Light Blue',
'Pink',
'Rubine Red',
'Green MM',
'Grey',
'Blue',
'Orange',
'Yellow',
'Light Blue',
'SA 10',
'SA 12',
'SA 14',
'SA 16',
'Blue Babyhood',
'Pink Babyhood'</p>
</blockquote>
<p>I want to select id from the <code>variants</code> table based on the list above. But when I do this query,</p>
<pre><code>SELECT id FROM variants WHERE name IN ('XL', 'S', 'M', 'S', ...)
</code></pre>
<p>it returns grouped id. For example,</p>
<pre><code>|id|name|
|0001|XL|
|0002|S|
|0003|M|
|0004|XS|
</code></pre>
<p>What I expect is a non-grouped result, so variants will be retrieved many times. For example, variant 'S' must be retrieved 2 times here.</p>
<pre><code>|id|name|
|0001|XL|
|0002|S|
|0003|M|
|0002|S|
..etc
</code></pre>
<p>Is this possible to do? I hope my question is understandable. Thanks in advance!</p>",70244467,1,1,,2021. 12. 6 오전 10:57:03,,2021. 12. 6 오전 11:04:03,,,,,11689956,,1,0,sql|postgresql,54
70231389,Postgres insert function by aggregating data from multiple tables,"<p>I have got two tables, 'page_visits' and 'comments', which store new webpage visits and new comments, respectively.</p>
<h3>PAGE_VISITS</h3>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">id</th>
<th style=""text-align: center;"">page_id</th>
<th style=""text-align: center;"">created_at</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">1111</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.779Z</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">1442</td>
<td style=""text-align: center;"">2021-12-02T02:25:32.219Z</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">1111</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.214Z</td>
</tr>
</tbody>
</table>
</div><h3>COMMENTS</h3>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">id</th>
<th style=""text-align: center;"">page_id</th>
<th style=""text-align: center;"">...</th>
<th style=""text-align: center;"">created_at</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">1024</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.779Z</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">1111</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">2021-12-02T02:25:32.219Z</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">3849</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.214Z</td>
</tr>
</tbody>
</table>
</div>
<p>I want to aggregate the data from both the tables in the past 1 hour to use for analytics, such that it looks like the table below.</p>
<h3>PAGE_DATA</h3>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">page_id</th>
<th style=""text-align: center;"">visit_count</th>
<th style=""text-align: center;"">comment_count</th>
<th style=""text-align: center;"">created_at</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">1024</td>
<td style=""text-align: center;"">14</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.779Z</td>
</tr>
<tr>
<td style=""text-align: center;"">1111</td>
<td style=""text-align: center;"">11</td>
<td style=""text-align: center;"">8</td>
<td style=""text-align: center;"">2021-12-02T02:25:32.219Z</td>
</tr>
<tr>
<td style=""text-align: center;"">3849</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.214Z</td>
</tr>
<tr>
<td style=""text-align: center;"">2412</td>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2021-12-02T04:55:26.779Z</td>
</tr>
</tbody>
</table>
</div>
<pre><code>SELECT page_visits.page_id
     , COUNT(page_visits.id)    AS visitCount
     , COALESCE(cmts.cmt_cnt,0) AS commentCount
  FROM page_visits
LEFT OUTER
  JOIN ( SELECT page_id
              , COUNT(*) AS cmt_cnt
           FROM comments
          WHERE created_at &gt;= NOW() - INTERVAL '1 HOUR'
         GROUP
             BY page_id
       ) AS cmts
    ON cmts.page_id = page_visits.page_id
 WHERE page_visits.created_at &gt;= NOW() - INTERVAL '1 HOUR'
GROUP
    BY page_visits.page_id, cmts.cmt_cnt;
</code></pre>
<p>I have the above code as of now, however, it only prints the row when comment_count is null, but it does not do the same when visit_count is 0 and comment_count is &gt; 0.
My first question is, how do I get it to print even when visit_count results as 0.
Because someone could have gone on to the page the hour before but only made a comment later on.</p>
<p>Secondly, I am trying to run this code every hour with the use of pg_cron and I know that I can run a function directly in a cron scheduler, however, I am unable to turn the above code into a working postgres function that inserts a new row into the 'page_data' table each time its called.</p>
<p>Could someone help me out with these 2 issues? Thank you.</p>",70231795,1,1,,2021. 12. 5 오전 4:05:43,,2021. 12. 5 오후 9:07:25,,,,,15167444,,1,0,sql|postgresql,55
70260879,sort records by status and datetime asc or desc,"<p>Guide me here, if you can:
I'm using mysql.</p>
<p>I need to order Events according to the sequence:</p>
<ol>
<li>the ones that are happening: status = started
(and datetime ASC)</li>
</ol>
<pre><code>2021-12-07 07:00:00 | started
2021-12-07 08:00:00 | started
2021-12-07 09:00:00 | started
</code></pre>
<ol start=""2"">
<li>the ones that will happen: status = created
(and datetime asc)</li>
</ol>
<pre><code>2021-12-07 13:00:00 | created
2021-12-07 14:00:00 | created
2021-12-07 15:00:00 | created
</code></pre>
<ol start=""3"">
<li>those that have passed the date but have not started
(and datetime desc)</li>
</ol>
<pre><code>2021-12-07 06:00:00 | created
2021-12-07 05:00:00 | created
2021-12-07 04:00:00 | created
</code></pre>
<ol start=""4"">
<li>the finished ones: status = finished
(and datetime desc)</li>
</ol>
<pre><code>2021-12-06 12:00:00 | finished
2021-12-05 17:00:00 | finished
2021-12-04 19:00:00 | finished
</code></pre>
<p>I'm trying with some CASE WHEN...</p>
<pre><code>order by
  CASE
    WHEN E.status = 'started' THEN 1
    WHEN E.status = 'created' &amp;&amp; eventDateTime &gt;= NOW() THEN 2
    WHEN E.status = 'created' &amp;&amp; eventDateTime &lt; NOW() THEN 3
    WHEN E.status = 'finished' THEN 4
    ELSE 5
  END
</code></pre>
<p>But I didn't know how to match <code>THEN 1 &amp;&amp; eventDateTime ASC</code>
or <code>THEN 4 &amp;&amp; eventDateTime DESC</code></p>",70261017,2,1,,2021. 12. 7 오후 1:19:27,,2021. 12. 7 오후 3:41:08,,,,,17614722,,1,0,mysql,55
70350663,Monthly cumulative differences calculation in postgres,"<p>I am trying to write an sql script in postgres that find cumulative difference in total price and repayment amount. I have two tables as shown below. I have gone through solution provided <a href=""https://stackoverflow.com/questions/70336666/sum-of-cummulative-difference-within-group-in-postgres"">here</a> but it doesn't address my question.</p>
<pre><code>item table

item_id  cost_price    date_purchase
1        200           01-06-2019
2        300           10-07-2019
3        250           15-08-2019
4        400           10-09-2019

payment table
item id  payment       payment date
1          50           01-06-2019
1          40           20-06-2019
2          30           15-07-2019
1          60           17-07-2019
2          100          15-08-2019
3          90           17-08-2019
4          300          20-09-2019
1          50           25-09-2019

Expected result

Month                        Remaining amount
06_2019       (200 - 90) = 110
07_2019       (200+ 300) - (90 + 30 + 60) = 320
08_2019       (200+ 300 + 250) - (90 + 90 + 100 + 90) = 380
09_2019       (200 + 300 + 250 + 400) - (90 + 90 + 190 + 300 + 50) = 430





</code></pre>",,3,1,,2021. 12. 14 오후 2:32:05,1,2021. 12. 19 오후 12:52:27,,,,,17673915,,1,1,sql|postgresql,55
70295244,Selecting unique column values and returning corresponding values in mysql table,"<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">SlNo</th>
<th style=""text-align: center;"">UserID</th>
<th style=""text-align: right;"">points</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">1</td>
<td style=""text-align: center;"">001</td>
<td style=""text-align: right;"">Three</td>
</tr>
<tr>
<td style=""text-align: left;"">2</td>
<td style=""text-align: center;"">002</td>
<td style=""text-align: right;"">Three</td>
</tr>
<tr>
<td style=""text-align: left;"">3</td>
<td style=""text-align: center;"">001</td>
<td style=""text-align: right;"">Three</td>
</tr>
</tbody>
</table>
</div>
<p>I have the following table named 'userdata' and I would like to get the points of just the unique usernames.</p>
<pre><code>SELECT points from userdata where USERID==distinct
</code></pre>
<p>Is there a functionality in mysql that works similar to ==     ?</p>",,2,1,,2021. 12. 9 오후 6:54:01,,2021. 12. 9 오후 7:05:42,,,,,17184842,,1,-1,mysql,57
70295412,SQL (postgres) column name dynamically change based on function parameters(date),"<p>I created a function to generate the previous month's sales report based on the date. The function works fine, the only problem is the column name is fixed. I would like the column name to be changed dynamically based on the parameter run_date.</p>
<p>For example, if the run_date is '12-09-2021', the column name should be Nov2021Netsales</p>
<pre><code>create or replace FUNCTION public.salesreport(run_date date) 

  returns TABLE (region numeric, dist numeric, repid character varying, Aug2021Netsales decimal)  

AS 

$$ 

select region,dist,repid,sales as Aug2021Netsales

from billing

where record_created_date between (date_trunc('month', run_date) - INTERVAL '1 months')::date and (date_trunc('month', run_date )::date - 1)

group by region,dist,repid,Aug2021Netsales   

$$  

LANGUAGE sql;
</code></pre>
<p>Thank you.</p>",,0,1,,2021. 12. 9 오후 7:08:28,,2021. 12. 9 오후 9:05:57,,,,,17638021,,1,1,sql|postgresql,57
70170714,How can I write this SQL in a better way?,"<p>This is the query and I'm trying to write it in a better way.</p>
<p>Calculate the average number of languages in every country in a region.</p>
<pre><code>CREATE TABLE region3 AS SELECT regions.name, count(country_languages.country_id) FROM regions
RIGHT OUTER JOIN countries on countries.region_id = regions.region_id
RIGHT OUTER JOIN country_languages on countries.country_id = country_languages.country_id
GROUP BY regions.name;

CREATE TABLE region2 AS SELECT regions.name, count(countries.country_id) FROM regions RIGHT OUTER JOIN countries on countries.region_id = regions.region_id GROUP BY regions.name;

SELECT region2.name, region2.count as total_countries, region3.count as langs from region2
LEFT OUTER JOIN region3 on region2.name = region3.name;
SELECT name, ROUND(langs::decimal/total_countries, 1) as avg_lang_count_per_country from regions_new ORDER BY avg_lang_count_per_country DESC;
</code></pre>
<p>This is how it should look.</p>
<p><img src=""https://i.stack.imgur.com/GZifc.png"" alt=""enter image description here"" /></p>",70170944,1,1,,2021. 11. 30 오후 2:08:09,,2021. 11. 30 오후 2:23:47,2021. 11. 30 오후 2:09:40,,87015,,6730895,,1,0,sql|postgresql,58
70199297,Run code in BigQuery (google sheets add-on): Access Denied,"<p>I am using OWOX BI BigQuery Reports add-on in Google Sheets.
When I try to run the code, I get the following error: API call to bigquery.jobs.getQueryResults failed with error: Access Denied: BigQuery BigQuery: Permission denied while getting Drive credentials.
Any ideas on how to fix this issue?</p>",,0,1,,2021. 12. 2 오후 12:16:52,,2022. 6. 7 오후 2:41:44,,,,,17571188,,1,0,google-bigquery,58
70314863,Filter table from database by 2 filed and from 1 table,"<p>I learn about the script autodidact and only PHP and Mysql and i don't know how to tell the things about the name part of script or syntax or anything i just know how to use it and hard to for me find my question from google, please understand me, sorry.</p>
<p>There is possible to filter 2 field <code>firstname</code> and <code>year</code> from 1 database?</p>
<ul>
<li>Condition 1 : When i type firstname by input only, it work, start from refresh first if not go to condition 3.</li>
<li>Condition 2 : When i select year by select option only, it work, start from refresf first if not go to condition 3.</li>
<li>Condition 3 : When i select year and type by input, it doesn't work.</li>
</ul>
<p>What i need is, when i select year 2009 and than when i just type 'a' Abdul and Agus selected from database, should only abdul selected from database.</p>
<p>I think the problem is my PHP and Mysql so i focus on them</p>
<p>Here my database <code>directory</code>:</p>
<pre><code>| firstname | status | year  |
|:--------- |:------:| :----:|
| Agus      | Alumni | 2008  |
| Abdul     | Alumni | 2009  |
| David     | Alumni | 2009  |
| Jelita    | Student|       |
</code></pre>
<p>and here is mysql query</p>
<pre><code>$sql=&quot;SELECT * FROM directory where
status='Alumni' and year Like '%&quot;.$q.&quot;%' or
status='Alumni' and firstname Like '%&quot;.$q.&quot;%'&quot;;
</code></pre>",,1,1,,2021. 12. 11 오전 11:47:29,,2022. 3. 31 오전 4:20:26,2022. 3. 31 오전 4:20:26,,285587,,12544430,,1,-2,mysql,58
70243796,"After sorting the rank, how to select one record","<p>I'm working with my database. And I want to sort by download and rank it. After that I want to select one record by id.</p>
<p>I know how to rank it.</p>
<pre><code>SELECT id, RANK() OVER(ORDER BY &quot;downLoad&quot; DESC) rank FROM gameinfo;
</code></pre>
<p><a href=""https://i.stack.imgur.com/1FVmr.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/1FVmr.png"" alt=""result above sql"" /></a></p>
<p>So I try to use 'WHERE' to get one result</p>
<pre><code>SELECT id, RANK() OVER(ORDER BY &quot;downLoad&quot; DESC) rank FROM gameinfo WHERE id='9b9df0c5-9906-4444-b30a-9b64ff8fea94';
</code></pre>
<p><a href=""https://i.stack.imgur.com/XbGjD.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/XbGjD.png"" alt=""wrong result"" /></a></p>
<p>I got one record but the result was rank=1
I expect 2.</p>
<p>Right now I get all the gameinfo and ranked it all. After that, I search the id from JavaScript to get the right rank, but is there a way just using SQL to get one record?</p>",70244048,2,1,,2021. 12. 6 오전 10:11:01,,2021. 12. 6 오후 2:08:36,2021. 12. 6 오전 10:15:35,,466862,,15889317,,1,0,sql|postgresql,59
70305774,MySQL get results of items not found in where clause,"<p>I have a query like so:</p>
<pre><code>select id from users where id in (1,2,3,4,5)
</code></pre>
<p>I have a user with the ids 1,3 &amp; 4. What I am trying to do is get the results of ids not found. Example if i have ids 1,3 &amp; 4 in the table, I am expecting 2 &amp; 5 to be returned as those ids do not exists. I hope this makes sense and is possible.</p>",70305918,3,1,,2021. 12. 10 오후 2:10:56,0,2021. 12. 10 오후 2:48:10,,,,,979331,,1,1,mysql,60
70331501,Conversion of columns to rows,"<pre><code>ID Name     M   E   H   S
1   Sally   78  85  91  76
2   Edward  87  90  82  87
</code></pre>
<p>convert to</p>
<pre><code>ID Name Subject Marks
1  Sally M       78
1  Sally E       85
1  Sally H       91
1  Sally S       76
2  Edward M       87
2  Edward E       90
2 Edward H       82
2 Edward S       87
</code></pre>",,3,1,,2021. 12. 13 오전 8:02:04,,2021. 12. 13 오후 9:04:15,2021. 12. 13 오전 10:35:07,,17663501,,17663501,,1,0,google-bigquery,60
70226462,Attempting to start MySQL service,"<p>I installed xampp on c:/xampp, I started apache it started well when I started MySQL this happened [this what happend]<img src=""https://i.stack.imgur.com/GDSoQ.png"" alt=""1"" /></p>
<p>and stayed like this forever
tried the &quot;services.msc&quot; and changing port
didn't work</p>",,1,1,,2021. 12. 4 오후 2:22:55,,2021. 12. 14 오후 9:39:22,2021. 12. 11 오전 11:32:38,,153390,,16079279,,1,-1,mysql,62
70121577,Find out the report generation name,"<p>Currently I have three tables, namely: hospital, doctor and test. The report generation time is calculated using report time minus the sample test time. How can I write a query to find out which hospital has the least average report generation time?</p>
<p>Table name: <code>hospital</code></p>
<h2>|name|</h2>
<h2>| 'A' |
| 'B' |
| 'C' |</h2>
<p>Table name: <code>doctor</code></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>doctor_name</th>
<th>hospital_name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>'Eric'</td>
<td>'A'</td>
</tr>
<tr>
<td>2</td>
<td>'Peter'</td>
<td>'A'</td>
</tr>
<tr>
<td>3</td>
<td>'Sam'</td>
<td>'B'</td>
</tr>
<tr>
<td>4</td>
<td>'Park'</td>
<td>'B'</td>
</tr>
<tr>
<td>5</td>
<td>'Alan'</td>
<td>'C'</td>
</tr>
<tr>
<td>6</td>
<td>'Andrew'</td>
<td>'C'</td>
</tr>
</tbody>
</table>
</div>
<p>Table name: <code>test</code></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>test_date</th>
<th>test_time</th>
<th>report_date</th>
<th>report_time</th>
<th>doctor_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>'2021-10-9'</td>
<td>'19:30:00'</td>
<td>'2021-10-9'</td>
<td>'23:30:00'</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>'2021-10-9'</td>
<td>'14:00:00'</td>
<td>'2021-10-9'</td>
<td>'22:20:00'</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>'2021-10-9'</td>
<td>'20:30:00'</td>
<td>'2021-10-10'</td>
<td>'08:00:00'</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>'2021-10-10'</td>
<td>'07:30:00'</td>
<td>'2021-10-10'</td>
<td>'13:10:00'</td>
<td>4</td>
</tr>
<tr>
<td>5</td>
<td>'2021-10-10'</td>
<td>'09:30:00'</td>
<td>'2021-10-10'</td>
<td>'13:30:00'</td>
<td>5</td>
</tr>
<tr>
<td>6</td>
<td>'2021-10-10'</td>
<td>'11:00:00'</td>
<td>'2021-10-10'</td>
<td>'22:00:00'</td>
<td>6</td>
</tr>
<tr>
<td>7</td>
<td>'2021-10-10'</td>
<td>'15:20:00'</td>
<td>'2021-10-10'</td>
<td>'19:00:00'</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>'2021-10-11'</td>
<td>'08:00:00'</td>
<td>'2021-10-11'</td>
<td>'20:00:00'</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>the column hospital_name in table 'doctor' references hospital.name and the column doctor_id in table 'test' references doctor.id</p>
<blockquote>
<p>Expected result:</p>
<pre><code> hospital_name 
    'A' 
</code></pre>
</blockquote>
<p>Explanation: From the 'test' table, we can get the average report generation time of Hospital 'A' is 320 minutes since there are three records about Hospital 'A' (the doctors whose id are 1 and 2) and the average report generation time of Hospital 'B' is 1630 / 3 minutes since there are three records about Hospital 'B' (the doctors whose id are 3 and 4) and the average report generation time of Hospital 'C' is 450 minutes since there are two records about Hospital 'C' (the doctors whose id are 5 and 6). As a result, the answer is Hospital 'A'.</p>
<pre><code>select TIMESTAMPDIFF(minute, timestamp(test_date,test_time), 
timestamp(report_date, report_time)) from test as t
inner join doctor as d
on t.doctor_id = d.id
inner join hospital as h
on d.hospital_name = h.name; 
</code></pre>
<p>I don't know how to find the average generation time</p>",70122587,2,1,,2021. 11. 26 오전 8:40:23,,2021. 11. 26 오후 1:41:47,2021. 11. 26 오후 1:41:47,,16551110,,16551110,,1,0,mysql,64
70321514,Postgres array comparison - find missing elements,"<p>I have the table below.</p>
<pre><code>╔════════════════════╦════════════════════╦═════════════╗
║id                  ║arr1                ║arr2         ║  
╠════════════════════╬════════════════════╬═════════════╣             
║1                   ║{1,2,3,4}           ║{2,1,7}      ║
║2                   ║{0}                 ║{3,4,5}      ║
╚════════════════════╩════════════════════╩═════════════╝
</code></pre>
<p>I want to find out the elements which are in arr1 and not in arr2. <br>
Expected output</p>
<pre><code>╔════════════════════╦════════════════════╗
║id                  ║diff                ║  
╠════════════════════╬════════════════════╣             
║1                   ║{3,4}               ║      
║2                   ║{0}                 ║
╚════════════════════╩════════════════════╝
</code></pre>
<p>If I have 2 individual arrays, I can do as follows:</p>
<pre><code>select array_agg(elements)
from (
  select unnest(array[0])
  except
  select unnest(array[3,4,5])
) t (elements)
</code></pre>
<p>But I am unable to integrate this code to work by selecting from my table.
Any help would be highly appreciated. Thank you!!</p>",70321759,2,1,,2021. 12. 12 오전 6:45:53,,2021. 12. 12 오전 10:01:34,,,,,6840794,,1,0,postgresql,64
70154690,Neo4j James Bond,"<p>I have been playing around with the James Bond dataset in Neo4J graphgist and using Neo4J Bloom I want to find the different cars in a particular Movie but I dont know how to search for it. As it is now I get all cars in all movies.
What would be the proper Cypher code for retrieving all the cars in a specific movie?</p>",,1,1,,2021. 11. 29 오후 12:31:15,,2021. 11. 30 오전 12:32:37,2021. 11. 30 오전 12:32:37,,272109,,7665774,,1,0,neo4j|cypher,65
70132265,Neo4j movies dataset,"<p>am new to neo4j and I want to know how to query for example, in movies dataset,&quot;Which movie has the most number of actors in it?&quot; and Which pair of actors have acted together in most number of movies?</p>",,1,1,,2021. 11. 27 오전 5:26:40,,2021. 11. 27 오후 1:13:17,,,,,11109712,,1,-1,neo4j,66
70223183,1064 - You have an error in your SQL syntax;check the manual that corresponds to your MySQL server version,"<pre><code>CREATE TABLE `Book`(
 `bookid` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `title` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `img` VARCHAR(255) BLOB NOT NULL,
 `stars` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `desc` text CHARACTER SET utf8 COLLATE utf8_unicode_ci 
) ENGINE = INNODB DEFAULT CHARSET = armscii8
</code></pre>
<blockquote>
<p>1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BLOB NOT NULL,
<code>stars</code> VARCHAR(255) CHARACTER
SET utf8 COLLATE utf8_unicode' at line 6</p>
</blockquote>",,1,1,,2021. 12. 4 오전 5:06:29,,2021. 12. 4 오후 3:25:55,2021. 12. 4 오전 6:29:40,,905093,,15392207,,1,-1,mysql,578
70030838,How to turn this script into a UDF in BigQuery,"<p>This should be easy to do but I'm struggling.</p>
<p>I have the below script that calculates a number of business dates before or after a date. I need to change to UDF as I'll be using it in multiple views. It is for Bigquery:</p>
<pre><code>DECLARE Date DATE; 
DECLARE DAYS_EXTEND INT64;
DECLARE COUNTER INT64;
SET Date = '2021-12-23';
SET DAYS_EXTEND  = 3;

SET COUNTER = DAYS_EXTEND;  
BEGIN 
WHILE COUNTER &gt; 0 Do

    SET COUNTER = COUNTER -1;
    SET Date  = Date +1;

    IF  Extract( DAYOFWEEK  from Date) in (1,7) or Date in ('2021-01-01','2021-04-02','2021-04-05','2021-05-03','2021-05-31','2021-08-30','2021-12-27','2021-12-28','2022-01-03','2022-04-15','2022-04-18','2022-05-02','2022-06-02','2022-06-03','2022-08-29','2022-12-26','2022-12-27')
      Then
    BEGIN
        SET DAYS_EXTEND = DAYS_EXTEND +1;
        SET COUNTER = COUNTER +1;
    END;
    END IF;
END WHILE; 
WHILE COUNTER &lt;0 DO
SET COUNTER = COUNTER +1;
    SET Date  = Date -1;
    IF  Extract( DAYOFWEEK  from Date) in (1,7) or Date in ('2021-01-01','2021-04-02','2021-04-05','2021-05-03','2021-05-31','2021-08-30','2021-12-27','2021-12-28','2022-01-03','2022-04-15','2022-04-18','2022-05-02','2022-06-02','2022-06-03','2022-08-29','2022-12-26','2022-12-27')
      Then
    BEGIN
        SET DAYS_EXTEND = DAYS_EXTEND - 1;
        SET COUNTER = COUNTER - 1;
    END;
    END IF;
END WHILE;
END;
</code></pre>
<p>I'm just not sure how to turn it into a Select statement or if it is possible to do UDF without a Select statement with the loops remaining.</p>
<p>I'd appreciate any help.</p>",,1,1,,2021. 11. 19 오전 6:46:41,,2021. 11. 23 오전 8:57:16,,,,,13967672,,1,0,google-bigquery,69
70267210,"How to call a function in a generated column? ""generation expression is not immutable""","<p>I'm trying to call a function <code>gen_salt</code> in a generated column:</p>
<pre class=""lang-sql prettyprint-override""><code>create table auth.user (
    id serial primary key,
    hash_id text generated always as (id_encode(id, gen_salt('bf'), 8)) stored unique,
    ...
</code></pre>
<p>But it gives the error:</p>
<pre><code>ERROR:  generation expression is not immutable
</code></pre>
<p>It works if I hard-code the salt instead of using <code>gen_salt</code>.</p>
<p>How can I call this function from within this <code>create table</code> statement?</p>",,0,1,,2021. 12. 7 오후 9:33:59,,2021. 12. 7 오후 9:33:59,,,,,732262,,1,0,sql|postgresql,69
70046370,How to split the text in Big Query,"<p>I have a column  which contain of countrycode and Device. For example, JPPHONE,UAEDESKTOP and I want to separate a new column as JP and PHONE , UAE and DESKTOP <a href=""https://i.stack.imgur.com/jEo2Q.png"" rel=""nofollow noreferrer"">enter image description here</a></p>
<p>Could you please advise how can i do that?</p>
<p>Your help is highly appreciated</p>",70049704,2,1,,2021. 11. 20 오후 1:29:26,,2021. 11. 21 오후 9:32:08,,,,,17458247,,1,0,google-bigquery,71
70213642,Grafana with MySQL exponential growth graph,"<p>I have a MySQL table to record the number of users</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>email</th>
<th>name</th>
<th>created</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>user1@example.com</td>
<td>John</td>
<td>2019-02-05 18:53:50.000000</td>
</tr>
<tr>
<td>2</td>
<td>user2@example.com</td>
<td>Rock</td>
<td>2019-02-06 18:53:50.000000</td>
</tr>
<tr>
<td>3</td>
<td>user3@example.com</td>
<td>Sena</td>
<td>2019-02-08 18:53:50.000000</td>
</tr>
<tr>
<td>4</td>
<td>user4@example.com</td>
<td>Anny</td>
<td>2019-02-08 18:53:50.000000</td>
</tr>
</tbody>
</table>
</div>
<p>I want to get the exponential growth in count per day</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>date</th>
<th>count</th>
</tr>
</thead>
<tbody>
<tr>
<td>2019-02-05</td>
<td>1</td>
</tr>
<tr>
<td>2019-02-06</td>
<td>2</td>
</tr>
<tr>
<td>2019-02-07</td>
<td>2</td>
</tr>
<tr>
<td>2019-02-08</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>And draw a similar graph on the Grafana portal</p>
<p><a href=""https://i.stack.imgur.com/DQ7Sd.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/DQ7Sd.png"" alt=""enter image description here"" /></a></p>
<p>I tried using <code>count()</code> but it gives the count of data per day</p>
<p><a href=""https://i.stack.imgur.com/bqX5j.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/bqX5j.png"" alt=""enter image description here"" /></a></p>
<p>The query generated on Graphana is</p>
<pre><code>SELECT
  UNIX_TIMESTAMP(created) DIV 86400 * 86400 AS &quot;time&quot;,
  count(id) AS &quot;Verified&quot;
FROM custom_domain_customdomain
WHERE
  is_cname_verified = '1' AND
  is_txt_verified = '1'
GROUP BY 1
ORDER BY UNIX_TIMESTAMP(created) DIV 86400 * 86400
</code></pre>",,1,1,,2021. 12. 3 오전 11:30:54,,2021. 12. 3 오후 3:15:01,2021. 12. 3 오후 12:53:19,,5389997,,3719167,,1,-1,mysql,72
70335887,sql query with avg price per day and group by day,"<p>I got this table</p>
<pre><code>+------+------------------+-----------+-----------+
| Name |       Time       | LowPrice  | HighPrice |
+------+------------------+-----------+-----------+
| #AAA | 12/13/2021 17:12 |    383.12 |     393.9 |
| #BBB | 12/13/2021 17:13 |   1110.34 |    1114.1 |
| #AAA | 12/13/2021 17:13 |    384.15 |     399.2 |
| #BBB | 12/13/2021 17:14 |   1112.34 |    1119.1 |
+------+------------------+-----------+-----------+
</code></pre>
<p>and this query:</p>
<pre><code>SELECT &quot;Name&quot;, &quot;Time&quot;, &quot;LowPrice&quot;, &quot;HighPrice&quot;
FROM rp_prices
WHERE &quot;Time&quot; &gt; NOW() - INTERVAL '10 day';
</code></pre>
<p>I need to get only one price, with avg I think, and grouped by day, something like this</p>
<pre><code>+------+-------------+-----------+-----------+
| Name |    Time     | LowPrice  | HighPrice |
+------+-------------+-----------+-----------+
| #AAA | 12/13/2021  |    383.12 |     393.9 |
| #BBB | 12/13/2021  |   1110.34 |    1114.1 |
+------+-------------+-----------+-----------+
</code></pre>
<p>Thanks for your help</p>",70335974,2,1,,2021. 12. 13 오후 2:01:46,,2021. 12. 13 오후 2:12:25,2021. 12. 13 오후 2:12:25,,13302,,11913941,,1,0,sql|postgresql,73
70117939,Combine row depending on their value of another column,"<p>I'm trying to select all columns from my table <strong>properties</strong>, but filter through the records with some conditions.</p>
<p>if a record's compositeKey equqals to another compositeKey, and then the apartment value is not equal to the other, and their group is equal to &quot;----&quot; then combine them into 1 record while adding their apartments together</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>compositeKey</th>
<th>apartments</th>
<th>group</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>key1</td>
<td>15</td>
<td>group1</td>
<td>blake</td>
</tr>
<tr>
<td>key2</td>
<td>20</td>
<td>----</td>
<td>michael</td>
</tr>
<tr>
<td>key2</td>
<td>21</td>
<td>----</td>
<td>michael</td>
</tr>
</tbody>
</table>
</div>
<p>I would like to select all the values from the table and return them as this output</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>compositeKey</th>
<th>apartments</th>
<th>group</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>key1</td>
<td>15</td>
<td>group1</td>
<td>blake</td>
</tr>
<tr>
<td>key2</td>
<td>41</td>
<td>----</td>
<td>michael</td>
</tr>
</tbody>
</table>
</div>
<p>How can I achieve this?</p>",,1,1,,2021. 11. 25 오후 10:34:46,,2021. 11. 25 오후 10:59:07,,,,,8946089,,1,1,sql|postgresql,76
70258439,Count if previous month data exists postgres,"<p>i'm stuck with a query to count id where if it exists in previous month than 1</p>
<p>my table look like this</p>
<pre><code>date      |      id       |
2020-02-02|       1       |
2020-03-04|       1       |
2020-03-04|       2       |
2020-04-05|       1       |
2020-04-05|       3       |
2020-05-06|       2       |
2020-05-06|       3       |
2020-06-07|       2       |
2020-06-07|       3       |
</code></pre>
<p>i'm stuck with this query</p>
<pre><code>SELECT date_trunc('month',date), id
FROM table
WHERE id IN 
(SELECT DISTINCT id FROM table WHERE date 
BETWEEN date_trunc('month', current_date) - interval '1 month' AND date_trunc('month', current_date)
</code></pre>
<p>the main problem is that i stuck with current_date function. is there any dynamic ways change current_date? thanks</p>
<p>What i expected to be my result is</p>
<pre><code>date      |      count    |
2020-02-01|       0       |
2020-03-01|       1       |
2020-04-01|       1       |
2020-05-01|       1       |
2020-06-01|       2       |
</code></pre>",70258981,1,1,,2021. 12. 7 오전 10:23:27,,2021. 12. 8 오전 7:48:59,,,,,10253649,,1,1,sql|postgresql,76
70350758,Two columns next to each other from two queries in PostgreSQL,"<p>How do I get two columns <code>goed</code> and <code>slecht</code> side by side with the two following queries. They do work independently of each other.</p>
<p>1:</p>
<pre class=""lang-sql prettyprint-override""><code>select count (*) as goed
from movie_info_idx mii 
join title t 
on mii.movie_id = t.id 
join info_type it 
on it.id = mii.info_type_id
join kind_type kt
on kt.id = t.kind_id 
where kt.id = '1'
and it.id = '101'
and mii.info &gt; '7,5'
</code></pre>
<p>2:</p>
<pre class=""lang-sql prettyprint-override""><code>select count (*) as slecht
from movie_info_idx mii 
join title t 
on mii.movie_id = t.id 
join info_type it 
on it.id = mii.info_type_id
join kind_type kt
on kt.id = t.kind_id 
where kt.id = '1'
and it.id = '101'
and mii.info &lt;= '7,5'
</code></pre>
<p>But how do I merge both queries so I get two columns <code>goed</code> and <code>slecht</code> next to each other?</p>",,1,1,,2021. 12. 14 오후 2:38:36,,2021. 12. 28 오전 11:26:15,2021. 12. 28 오전 11:26:15,,6607497,,17644671,,1,-1,postgresql,76
70151646,How do I get min of jsonb array,"<p>I have this</p>
<pre><code>[{&quot;bed&quot;: 0, &quot;bath&quot;: 1, &quot;price&quot;: [1768]}, {&quot;bed&quot;: 0, &quot;bath&quot;: 1, &quot;price&quot;: [1824, 1824, 1828, 1869, 1869]}, {&quot;bed&quot;: 1, &quot;bath&quot;: 1, &quot;price&quot;: [2085, 2247, 2247]}, {&quot;bed&quot;: 1, &quot;bath&quot;: 1, &quot;price&quot;: [2144]}, {&quot;bed&quot;: 1, &quot;bath&quot;: 1, &quot;price&quot;: [2223, 2177]}, {&quot;bed&quot;: 1, &quot;bath&quot;: 1, &quot;price&quot;: [2205]}, {&quot;bed&quot;: 1, &quot;bath&quot;: 1, &quot;price&quot;: [2237]}, {&quot;bed&quot;: 2, &quot;bath&quot;: 2, &quot;price&quot;: [2982, 2982, 2982, 3017, 3162]}, {&quot;bed&quot;: 2, &quot;bath&quot;: 2, &quot;price&quot;: [3297]}]
</code></pre>
<p>I want to get price min value where bed &gt;0 and price &gt;2000</p>
<p>I tried this</p>
<pre><code>SELECT id,((jsonb_array_elements(p.bedBathPrice)-&gt;'bed'))  FROM 
properties p where p.id = 2 
</code></pre>
<p>So can I do something below like bed &gt;0 and price &gt;2000 and then get min price</p>
<p>but what if I need to add p.bedbathprice in that value</p>
<pre><code>    with the_original_table ( doc_data) as 
(
 values
 ( p.bedbathprice::jsonb)
),
normalized_data as
(
 select 
        (j -&gt;&gt; 'bath')::integer as bath, 
        (j -&gt;&gt; 'bed')::integer as bed, 
        p::numeric as price
 from the_original_table 
 cross join lateral jsonb_array_elements(doc_data) as j
 cross join lateral jsonb_array_elements(j -&gt; 'price') as p
) 
select p.id ,(select min(nd_price) as min_price from (select (price) as nd_price from normalized_data nd where nd.bed&gt;=2 and nd.price&gt;2085)as nd) from properties p where p.parent_id  is not null and p.id=3 
and (exists(select 1 from normalized_data where bed&gt;=2 and price&gt;2085));
</code></pre>
<p>like this??? it says from clouse can't use p.bedbthprice in value</p>",70153062,1,1,,2021. 11. 29 오전 8:24:31,1,2021. 11. 29 오후 2:45:03,2021. 11. 29 오전 10:57:06,,15258123,,15258123,,1,0,postgresql,89
70254999,PostgreSQL how to set auto commit false,"<p>In the <a href=""https://www.tutorialspoint.com/python_data_access/python_postgresql_update_table.htm"" rel=""nofollow noreferrer"">tutorial</a>, it says</p>
<blockquote>
<p>Turn off the auto-commit mode by setting false as value to the
attribute autocommit.</p>
</blockquote>
<p>But in the example, it sets <code>autocommit</code> to <code>True</code>. It makes me confused. Is it a typo? Shouldn't we set the value to <code>False</code>?</p>
<pre><code>#Setting auto commit false
conn.autocommit = True
</code></pre>",,0,1,,2021. 12. 7 오전 4:36:27,,2021. 12. 7 오전 4:36:27,,,,,8314628,,1,0,postgresql,90
70262698,Label MYSQL table column,"<p>I want provide label to column name in MY SQL table similar to SAS. For Example, I have a table with two columns ID, Location. I want to assign them labels as EmployeeID, Employee Location respectively retaining their names.</p>
<p>Let me know if MYSQL allows users to specify name &amp; label to a given column.</p>
<p>Thank you,
Siva Kumar</p>",,0,1,,2021. 12. 7 오후 3:21:20,,2021. 12. 7 오후 3:21:20,,,,,3933370,,1,0,mysql,91
70148035,What is the advantage of using BigQuery’s QUALIFY operator?,"<p>I have just discovered BigQuery’s QUALIFY operator and have been reading about it at <a href=""https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#qualify_clause"" rel=""nofollow noreferrer"">https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#qualify_clause</a></p>
<p>That documentation though does not explain why I should use QUALIFY instead of a normal WHERE predicate. If we take the example provided in the documentation:</p>
<pre><code>SELECT item,
  RANK() OVER (PARTITION BY category ORDER BY purchases DESC) as rank
FROM Produce
WHERE Produce.category = 'vegetable'
  QUALIFY rank &lt;= 3
</code></pre>
<p>That query could also be written as</p>
<pre><code>SELECT
  item,
  RANK() OVER (PARTITION BY category ORDER BY purchases DESC) as rank
FROM Produce
WHERE Produce.category = 'vegetable'
AND rank &lt;= 3
</code></pre>
<p>and it would produce the same result. So what is the advantage of using QUALIFY?</p>",70149163,1,1,,2021. 11. 28 오후 10:30:34,1,2021. 11. 30 오후 3:41:51,,,,,201657,,1,1,google-bigquery,353
70367729,Will a Postgres Serial Primary Key overwrite an existing primary key?,"<p>I just created a new database and copied all of the data from another database into the new database. In one of the database tables titled 'users', there is a column titled 'user_id' that I have set to 'serial primary key', so it auto increments.</p>
<p>I just noticed that the auto increment number for new users reset to 1 after the database change.</p>
<p>Currently, the lowest user_id number is 13 and the highest is 568. Before changing to the new database, the auto increment would continue past the highest number in the database. But now in the new database, it started the auto increment back at 1.</p>
<p>My question is, when the auto increment reaches 13, will postgres automatically jump past the number 13 to the next available number that is currently not in use? Or will the auto increment use the number 13 and I will have two users with the same user_id 13?</p>",70367907,1,1,,2021. 12. 15 오후 5:15:40,,2021. 12. 15 오후 5:29:02,,,,,12329136,,1,0,sql|postgresql,103
70101048,MySQL Installer Stuck on Windows Server 2019,"<p>I am trying to install MySQL database server 8.0.12 on a server with Windows Server 2019 operating system.</p>
<p>The installation is stuck here and does not proceed and shows no errors:</p>
<p><a href=""https://i.stack.imgur.com/CyJun.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/CyJun.png"" alt=""enter image description here"" /></a></p>
<p>I have tried so many times.</p>
<p>Every time before reinstalling I have followed these steps without success:</p>
<p><strong>Step 1</strong></p>
<p>Uninstall MySQL from Control Panel. To do so,
Go to</p>
<p><strong>Control Panel &gt;Programs and Features &gt; Select MySQL &gt;</strong></p>
<p>Click on Uninstall.</p>
<p>After you have uninstalled MySQL through Add/Remove programs, you now need to remove the existing database information which includes your actual data.</p>
<p>If you need any of that data, be sure to back it up.</p>
<p>Next you can delete the data directory.</p>
<p><strong>Step 2</strong></p>
<p>Run Command Prompt as Administrator and execute the following command to stop and remove MySQL service.</p>
<p><strong>Net stop MySQL</strong></p>
<p><strong>Sc delete MySQL</strong></p>
<p><strong>Step 3</strong></p>
<p>Click on Start, type in Show hidden files and folders.
Select the View tab and select Show hidden files and folders.
Now explore the following locations and delete following folders.</p>
<p><strong>C:\Program Files\MySQL</strong></p>
<p><strong>C:\Program Files (x86)\MySQL</strong></p>
<p><strong>C:\ProgramData\MySQL</strong></p>
<p>And if exists, delete the folder from the location.</p>
<p><strong>C:\Users[User-Name]\AppData\Roaming\MySQL</strong></p>
<p>Restart your device and check the status.</p>
<p>How to do resolve this?</p>",,0,1,,2021. 11. 24 오후 6:12:49,,2021. 11. 24 오후 6:12:49,,,,,15117016,,1,0,mysql,105
70114076,Find Interview Candidates in SQL via Leetcode,"<p>In Table Contests</p>
<pre><code>+--------------+------+
| Column Name  | Type |
+--------------+------+
| contest_id   | int  |
| gold_medal   | int  |
| silver_medal | int  |
| bronze_medal | int  |
+--------------+------+
</code></pre>
<p>contest_id is the primary key for this table.
This table contains the LeetCode contest ID and the user IDs of the gold, silver, and bronze medalists.
It is guaranteed that any consecutive contests have consecutive IDs and that no ID is skipped.</p>
<p>In Table Users</p>
<pre><code>+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| user_id     | int     |
| mail        | varchar |
| name        | varchar |
+-------------+---------+
</code></pre>
<p>user_id is the primary key for this table.
This table contains information about the users.</p>
<p>Write an SQL query to report the name and the mail of all interview candidates. A user is an interview candidate if at least one of these two conditions is true:</p>
<p>The user won any medal in three or more consecutive contests.
The user won the gold medal in three or more different contests (not necessarily consecutive).
Return the result table in any order.</p>
<p>Answer in MYSQL. <strong>Now the following code is clear but I don't understand how are we using columns in &quot;group by&quot; function which are not there in the select statement. Isn't this the basics of SQL - that you can only group by the columns which are in your select query?</strong></p>
<pre><code>WITH winner AS
    (SELECT Users.*, contest_id, gold_medal 
    FROM Users, Contests
    WHERE user_id = gold_medal 
    OR user_id = silver_medal 
    OR user_id = bronze_medal 
    ORDER BY user_id, contest_id)

SELECT name, mail 
FROM
    (SELECT user_id, name, mail, 
    (contest_id - ROW_NUMBER() OVER(PARTITION BY user_id ORDER BY contest_id)) AS diff
    FROM winner) AS aa
GROUP BY user_id, diff
HAVING COUNT(*) &gt;= 3

UNION

SELECT name, mail 
FROM winner 
WHERE user_id = gold_medal 
GROUP BY user_id 
HAVING count(*) &gt;= 3;
</code></pre>",,0,1,,2021. 11. 25 오후 3:58:14,,2021. 11. 25 오후 3:58:14,,,,,15059717,,1,0,mysql,105
70186922,How to combine a date and string in Postgresql,"<p>I need to combine a date with a string in Postgresql.</p>
<pre><code>CASE WHEN

multi_app_documentation.nsma1_code = 'ANESTART' THEN
TO_CHAR(multi_app_documentation.nsma1_dt, 'YYYYMMDD') || multi_app_documentation.nsma1_ans

END AS &quot;ANESTART&quot;

</code></pre>
<p>I need to concatenate these two. I have to change multi_app_documentation.nsma1_dt to YYYYMMDD format and then add the multi_app_documentation.nsma1_ans (string) onto it. Is this possible to do?</p>",,1,1,,2021. 12. 1 오후 3:29:18,,2021. 12. 1 오후 4:41:56,,,,,5843831,,1,0,postgresql,122
70209939,Postgres insert into a specified column in the table from another column in the same table where a primary key exists,"<p>I've dug around on here and accepted answers to other questions haven't worked for me.</p>
<p>I have a table &quot;mytable&quot; defined as such</p>
<pre class=""lang-sql prettyprint-override""><code>create table mytable (
column1 varchar(50) PRIMARY KEY,
column2 integer,
column3 money
)
</code></pre>
<p>column3 is all null, and I want to insert column2/1.25 into column3</p>
<p>I've tried these:</p>
<pre class=""lang-sql prettyprint-override""><code>--This gets 23502 &quot;violates not-null constraint&quot;
insert into mytable (column3)
select column2/1.25 from mytable

--This gets 42601 &quot;syntax error near &quot;select&quot;&quot;
insert into mytable (column3)
select column2/1.25 from mytable

--Same as above with parentheses, gets the same error
insert into mytable (column3) values
(select column2/1.25 from mytable )

--Error 42601 &quot;syntax error at or near &quot;select&quot;&quot;
insert into mytable (column1,column3) values
(select column1, column2/1.25 from mytable)
</code></pre>
<p>I've tried other slight variations of parentheses, fields in double quotes, but can't figure out why this is throwing me errors. Column1 is a primary key and not nullable, but I'm not trying to insert into that column.</p>
<p>Any help would be appreciated</p>",70210345,2,1,,2021. 12. 3 오전 5:32:09,,2021. 12. 3 오전 6:38:23,,,,,9485834,,1,-1,sql|postgresql,125
70052317,Mysql Query Error 1054 - Unknown column in the 'field list',"<p>I'm learning MYSQL FULL JOIN queries using the Northwind database. This is my query,</p>
<pre><code>SELECT customers.CompanyName, orders.OrderID
FROM customers
FULL JOIN orders ON customers.CustomerID=orders.CustomerID
ORDER BY customers.CompanyName;
</code></pre>
<p>Customers table schema,</p>
<pre><code>CREATE TABLE `customers` (
  `CustomerID` varchar(5) NOT NULL,
  `CompanyName` varchar(40) NOT NULL,
  `ContactName` varchar(30) DEFAULT NULL,
  `ContactTitle` varchar(30) DEFAULT NULL,
  `Address` varchar(60) DEFAULT NULL,
  `City` varchar(15) DEFAULT NULL,
  `Region` varchar(15) DEFAULT NULL,
  `PostalCode` varchar(10) DEFAULT NULL,
  `Country` varchar(15) DEFAULT NULL,
  `Phone` varchar(24) DEFAULT NULL,
  `Fax` varchar(24) DEFAULT NULL,
  `Image` longblob,
  `ImageThumbnail` longblob,
  PRIMARY KEY (`CustomerID`),
  KEY `City` (`City`),
  KEY `CompanyName` (`CompanyName`),
  KEY `PostalCode` (`PostalCode`),
  KEY `Region` (`Region`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
</code></pre>
<p>Orders table schema,</p>
<pre><code>CREATE TABLE `orders` (
  `OrderID` int(11) NOT NULL AUTO_INCREMENT,
  `CustomerID` varchar(5) DEFAULT NULL,
  `EmployeeID` int(11) DEFAULT NULL,
  `OrderDate` datetime DEFAULT NULL,
  `RequiredDate` datetime DEFAULT NULL,
  `ShippedDate` datetime DEFAULT NULL,
  `ShipVia` int(11) DEFAULT NULL,
  `Freight` decimal(19,4) DEFAULT '0.0000',
  `ShipName` varchar(40) DEFAULT NULL,
  `ShipAddress` varchar(60) DEFAULT NULL,
  `ShipCity` varchar(15) DEFAULT NULL,
  `ShipRegion` varchar(15) DEFAULT NULL,
  `ShipPostalCode` varchar(10) DEFAULT NULL,
  `ShipCountry` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`OrderID`),
  KEY `CustomerID` (`CustomerID`),
  KEY `EmployeeID` (`EmployeeID`),
  KEY `OrderDate` (`OrderDate`),
  KEY `ShippedDate` (`ShippedDate`),
  KEY `ShipPostalCode` (`ShipPostalCode`)
) ENGINE=MyISAM AUTO_INCREMENT=11078 DEFAULT CHARSET=utf8;
</code></pre>
<p>And this is MySQL server version <code>5.7.35 - MySQL Community Server (GPL)</code></p>
<p>I am getting <code>#1054 - Unknown column 'customers.CompanyName' in 'field list'</code></p>
<p>Can someone point out what I am doing wrong?</p>",70052575,1,1,,2021. 11. 21 오전 6:23:00,,2021. 11. 21 오전 7:16:04,,,,,10167310,,1,1,mysql,128
70264632,Set datatype on END AS in CASE ELSE statement - PostgreSQL,"<p>I want to make INT be the data type for this column I'm creating. How do I do that? I tried adding AS INT to the end of END AS &quot;salary_deviation&quot; but that does not work. I tried wrapping END AS in CAST() but that didnt work either.</p>
<pre><code>   CASE 
        WHEN c.salary = pair.salary THEN '6'
        
        WHEN c.salary-pair.salary &lt;= 25000 THEN '5'
        
        WHEN c.salary-pair.salary &lt;= 50000 THEN '4'
        
        WHEN c.salary-pair.salary &lt;= 75000 THEN '3'

        WHEN c.salary-pair.salary &lt;= 100000 THEN '2'
        
    ELSE
        '1'
    END AS &quot;salary_deviation&quot;
</code></pre>
<p>Any ideas on the syntax to do this?</p>",70264686,1,1,,2021. 12. 7 오후 5:40:27,,2021. 12. 7 오후 5:44:03,,,,,14985202,,1,0,sql|postgresql,131
70358757,Trigger Function Doesn't Update the Specified Table,"<p>I have a table, payment_detail, that is comprised of an inner join from two other tables (customer &amp; payment), created as follows:</p>
<pre><code>CREATE TABLE IF NOT EXISTS payment_detail AS
SELECT customer.customer_id, customer.first_name, customer.last_name, payment.payment_id, payment.amount)
FROM payment
INNER JOIN customer ON payment.customer_id = customer.customer_id;
</code></pre>
<p>Now I want to create a trigger function that will update this detail table. This is my current trigger function:</p>
<pre><code>CREATE OR REPLACE FUNCTION update_payment_detail()
   RETURNS TRIGGER
   LANGUAGE PLPGSQL
   AS
$$
BEGIN
   UPDATE payment_detail
      SET
      customer_id = customer.customer_id,
      first_name = customer.first_name,
      last_name = customer.last_name,
      payment_id = payment.payment_id,
      amount = payment.amount
      FROM
         payment
         INNER JOIN customer ON payment.customer_id = customer.customer_id
      WHERE customer.customer_id = payment_detail.customer_id;
      RETURN NULL;
END;
$$

CREATE TRIGGER payment_detail_change
   AFTER UPDATE OR INSERT
   ON payment
   FOR EACH ROW
   EXECUTE PROCEDURE update_payment_detail();
</code></pre>
<p>So, the way it's supposed to work is that when an INSERT or UPDATE operation occurs on the payment table, the trigger function is invoked and the update_payment_detail() procedure is executed, which should  result in the payment_detail table being updated. I test the trigger by inserting a new row into the payment table:</p>
<pre><code>INSERT INTO payment(customer_id, staff_id, rental_id, amount, payment_date)
VALUES (1, 2, 1849, 4.25, now());
</code></pre>
<p>The payment table updates perfectly fine; I can see the inserted row. However, the table targeted for the trigger to update, payment_detail, does not show the new row. So the trigger fails to update the payment_detail table. How could I resolve this, based on the code above?</p>",70370083,1,1,,2021. 12. 15 오전 5:18:45,,2021. 12. 15 오후 8:44:11,,,,,13717463,,1,0,postgresql,131
70248693,Trigger keeps updating value in every row instead of particular one,"<p>I am trying to calculate a sum for each particular order. I am using this trigger but it doesn't work properly, it updates every row with the same value instead of the only one with proper id.</p>
<p>done_services table</p>
<pre><code>id
service_id
price
</code></pre>
<p>service table</p>
<pre><code>id
name
</code></pre>
<p>payment table</p>
<pre><code>id
sum
service_id
</code></pre>
<pre><code>CREATE FUNCTION make_sum() RETURNS TRIGGER
    AS $$
        BEGIN
            UPDATE payment
                SET sum = (select sum(price) from done_services where service_id = new.service_id);
            RETURN NULL;
    END;$$ LANGUAGE plpgsql;
    
CREATE TRIGGER make_sum
AFTER INSERT ON basket FOR EACH ROW EXECUTE FUNCTION make_sum(); 
</code></pre>
<p>I used this command to enter an item
<code>insert into done_services(id, service_id, price) values(uuid_generate_v4(), '76594d2f-7153-495f-9671-0ddaa331568c', 100);</code></p>
<p>But the sum changed for both rows instead of the only one with service id
<a href=""https://i.stack.imgur.com/aFAsk.png"" rel=""nofollow noreferrer"">Image</a></p>",70248784,2,1,,2021. 12. 6 오후 4:30:32,,2021. 12. 6 오후 4:59:21,,,,,17575164,,1,0,sql|postgresql,148
70161222,"BigQuery error message help, I'm a beginner. Table name missing dataset?? What can I try to remedy this?","<p>Error running query
Table name &quot;departments&quot; missing dataset while no default dataset is set in the request.</p>
<p>My table is named &quot;departments&quot; EXACTLY as it is seen here. I've checked it and had a couple others look at my spelling to make sure it's correct. Our eyes work and it is in fact correct. So what is the glitch? Has anyone else run into this? I'm working through Big Query for the Google Data Analytics course.</p>
<p>I've tried my query with many variations, using back-ticks, quotations, parenthesis, I've rearranged the order, rewritten it a few ways and I get nothing.</p>
<p>I uploaded my data set exactly as they said to, location US, automatic schema, correct table name. Not sure what else to do.</p>
<p>Here are a couple screen shots for some reference. <a href=""https://i.stack.imgur.com/q7p7J.png"" rel=""nofollow noreferrer"">enter image description here</a></p>",70341556,1,1,,2021. 11. 29 오후 8:56:46,,2021. 12. 13 오후 10:40:31,,,,,17474178,,1,0,google-bigquery,6805
70325964,mysql : unable to create secondary server instance using mysqld,"<p>I am using mysqld to create an new server along with the existing one[ MYSQL 8.0.27 installed with the windows installer] to test data replication</p>
<p>I already have an instance of the server installed [called Mysql80] which is the original server and i am trying to create another server called MyTest using mysqld by reading <a href=""https://dev.mysql.com/doc/refman/8.0/en/multiple-windows-command-line-servers.html"" rel=""nofollow noreferrer"">this</a> documentation which seems simple enough</p>
<p>i have created an empty Data directory to hold my new database and my configuration file for the server is saved as conf.cnf</p>
<pre><code>[MyTest]
port = 3310
datadir = E:/Program Files/Developer/MYSQL/Data/TestFolder/Data
</code></pre>
<p>from the windows command line i create the server using their exact instructions</p>
<pre><code>mysqld  --defaults-file=E:/conf.cnf  --console
</code></pre>
<p>--console is used to display debugging information but i always get these error's</p>
<pre><code>021-12-12T17:17:11.844725Z 0 [System] [MY-010116] [Server] E:\Program Files\Developer\MYSQL\Server 8.0\bin\mysqld.exe (mysqld 8.0.27) starting as process 2328
2021-12-12T17:17:11.875406Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.
2021-12-12T17:17:13.498780Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.
mysqld: Table 'mysql.plugin' doesn't exist
2021-12-12T17:17:13.866706Z 0 [ERROR] [MY-010735] [Server] Could not open the mysql.plugin table. Please perform the MySQL upgrade procedure.
2021-12-12T17:17:13.867207Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.867617Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.868042Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.868519Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.868926Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.869354Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.869707Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables
2021-12-12T17:17:13.979431Z 0 [Warning] [MY-010015] [Repl] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
2021-12-12T17:17:14.140027Z 0 [Warning] [MY-010015] [Repl] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
2021-12-12T17:17:14.172455Z 0 [Warning] [MY-013746] [Server] A deprecated TLS version TLSv1 is enabled for channel mysql_main
2021-12-12T17:17:14.172592Z 0 [Warning] [MY-013746] [Server] A deprecated TLS version TLSv1.1 is enabled for channel mysql_main
2021-12-12T17:17:14.175122Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.
2021-12-12T17:17:14.175319Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel.
2021-12-12T17:17:14.176633Z 0 [ERROR] [MY-010262] [Server] Can't start server: Bind on TCP/IP port: Only one usage of each socket address (protocol/netwo k address/port) is normally permitted.
2021-12-12T17:17:14.176755Z 0 [ERROR] [MY-010257] [Server] Do you already have another mysqld server running on port: 3306 ?
2021-12-12T17:17:14.177195Z 0 [ERROR] [MY-010119] [Server] Aborting
2021-12-12T17:17:15.446688Z 0 [System] [MY-010910] [Server] E:\Program Files\Developer\MYSQL\Server 8.0\bin\mysqld.exe: Shutdown complete (mysqld 8.0.27)  MySQL Community Server - GPL.
</code></pre>
<p>Ignoring the optimizer error's and cannot find table error's the server always tries to start on port 3306 even though i have specified in my conf file it should be on port 3310</p>
<p>Which makes me believe that i typed the config file in the wrong format or i haven't specified enough parameters for the job</p>
<p>any ideas?</p>",70433917,1,1,,2021. 12. 12 오후 5:26:40,,2021. 12. 21 오전 10:23:18,2021. 12. 12 오후 6:08:35,,5389997,,5794313,,1,1,mysql,406
70233870,custom field field in postgreSQL,"<p>i have a test and i have to create a table that has these fields :</p>
<p><code>name , date , price , customField.</code></p>
<p>Custom fields have a title and a list of key values.
example can have a product “House” with a customField called “House Fields” and
this field has a list of key values such as “Type” =&gt; “Apartment”, “Rooms”=&gt; 5
etc</p>
<p>How can i implement this <code>customField</code> using PostgreSQL</p>",,1,1,,2021. 12. 5 오전 11:36:07,,2021. 12. 5 오전 11:43:59,,,,,17008836,,1,1,postgresql,153
70206197,SQL Add Integer Column to Date column,"<p>This works:</p>
<pre><code>SELECT &quot;date&quot;, &quot;value&quot;::Int, &quot;date&quot; + interval '1' day AS &quot;computed&quot; 
FROM &quot;tab1&quot;
</code></pre>
<p>but what if I want to add a variable from the table to a timestamp?</p>
<pre><code>SELECT &quot;date&quot;, &quot;value&quot;::Int, &quot;date&quot; + interval &quot;value&quot; day AS &quot;computed&quot; 
FROM &quot;tab1&quot;
</code></pre>
<p>This fails.</p>",70206263,1,1,,2021. 12. 2 오후 8:43:12,,2021. 12. 2 오후 8:56:27,,,,,7043401,,1,0,sql|postgresql,156
70107251,Exchange Seats (SQL via Leetcode),"<p>Question:</p>
<pre><code>+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| id          | int     |
| name        | varchar |
+-------------+---------+
</code></pre>
<p>id is the primary key column for this table.
Each row of this table indicates the name and the ID of a student.
id is a continuous increment.</p>
<p>Can someone pls explain me the purpose of &quot;id = (select max(id) from seat)&quot; in the following code?</p>
<pre><code>select
(CASE when (select max(id) from seat)%2 = 1 and id = (select max(id) from seat) then id
when id%2 = 1 then id+1
else id -1
end) as id,student
from seat
order by id
</code></pre>
<p>Shouldn't the following suffice for this question?</p>
<pre><code> select
(CASE when (select max(id) from seat)%2 = 1 then id
when id%2 = 1 then id+1
else id -1
end) as id,student
from seat
order by id
</code></pre>",70107404,1,1,,2021. 11. 25 오전 7:29:43,,2021. 11. 25 오전 7:45:09,,,,,15059717,,1,-1,mysql,167
70312095,"Postgresql query: ""greater than"" statement returns values less than","<p>I'm trying to select the rows where the value of one column is greater than (&gt;) the other column. However, it returns rows where the values are less than the other column.</p>
<p>If I use the less than operator (&lt;), it returns rows where the values are less than the other column, just like expected. The only difference is the order of the rows.</p>
<p>The values of the columns are &quot;varchar&quot;, which I've casted into &quot;integer&quot; for the query.</p>
<p><strong>Query</strong></p>
<p><code>SELECT tripcode, CAST(expected AS int), CAST(capacity AS int) FROM super_plan WHERE expected &gt; capacity;</code></p>
<p>This is the result with the greater than (&gt;) operator:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">expected</th>
<th style=""text-align: right;"">capacity</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">60</td>
<td style=""text-align: right;"">310</td>
</tr>
<tr>
<td style=""text-align: left;"">50</td>
<td style=""text-align: right;"">250</td>
</tr>
<tr>
<td style=""text-align: left;"">80</td>
<td style=""text-align: right;"">270</td>
</tr>
<tr>
<td style=""text-align: left;"">60</td>
<td style=""text-align: right;"">270</td>
</tr>
<tr>
<td style=""text-align: left;"">60</td>
<td style=""text-align: right;"">340</td>
</tr>
<tr>
<td style=""text-align: left;"">80</td>
<td style=""text-align: right;"">340</td>
</tr>
<tr>
<td style=""text-align: left;"">80</td>
<td style=""text-align: right;"">250</td>
</tr>
<tr>
<td style=""text-align: left;"">70</td>
<td style=""text-align: right;"">360</td>
</tr>
<tr>
<td style=""text-align: left;"">50</td>
<td style=""text-align: right;"">360</td>
</tr>
<tr>
<td style=""text-align: left;"">80</td>
<td style=""text-align: right;"">360</td>
</tr>
<tr>
<td style=""text-align: left;"">...</td>
<td style=""text-align: right;"">...</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Query</strong></p>
<p><code>SELECT tripcode, CAST(expected AS int), CAST(capacity AS int) FROM super_plan WHERE expected &lt; capacity;</code></p>
<p>This is the result with the less than (&lt;) operator:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">expected</th>
<th style=""text-align: right;"">capacity</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">310</td>
</tr>
<tr>
<td style=""text-align: left;"">200</td>
<td style=""text-align: right;"">310</td>
</tr>
<tr>
<td style=""text-align: left;"">230</td>
<td style=""text-align: right;"">310</td>
</tr>
<tr>
<td style=""text-align: left;"">280</td>
<td style=""text-align: right;"">310</td>
</tr>
<tr>
<td style=""text-align: left;"">150</td>
<td style=""text-align: right;"">310</td>
</tr>
<tr>
<td style=""text-align: left;"">100</td>
<td style=""text-align: right;"">250</td>
</tr>
<tr>
<td style=""text-align: left;"">200</td>
<td style=""text-align: right;"">250</td>
</tr>
<tr>
<td style=""text-align: left;"">190</td>
<td style=""text-align: right;"">250</td>
</tr>
<tr>
<td style=""text-align: left;"">160</td>
<td style=""text-align: right;"">250</td>
</tr>
<tr>
<td style=""text-align: left;"">110</td>
<td style=""text-align: right;"">270</td>
</tr>
<tr>
<td style=""text-align: left;"">...</td>
<td style=""text-align: right;"">...</td>
</tr>
</tbody>
</table>
</div>
<p>I don't know why this is happening. I'm new to sql. I've already searched the web and stackoverflow, but I couldn't find something usefull.</p>",,1,1,,2021. 12. 11 오전 1:59:08,,2021. 12. 11 오전 2:18:36,,,,,17153499,,1,0,sql|postgresql,965
70287201,Automatically set SUM calculation's result as column value during / after row insert,"<p>I have an SQL table called &quot;credits&quot; which contain the following columns:</p>
<ul>
<li>id (Serial ID for rows (1,2,3,....))</li>
<li>account_id (ID of associated client)</li>
<li>change (int4)</li>
<li>rolling_change</li>
</ul>
<p>Every time during/after a row insert, I'd like the result of this Query to be the &quot;rolling_change&quot; column's value:</p>
<pre><code>SELECT SUM(change)
FROM credits
WHERE account_id = {account_id} AND id &lt; {this_id};
</code></pre>
<p>How can I make this process happen automatically on every row insert?</p>
<p>(I'm using DBeaver for reference)</p>",70288646,1,1,,2021. 12. 9 오전 9:07:53,,2021. 12. 9 오전 10:55:08,,,,,13905550,,1,1,sql|postgresql,236
70051349,How to DELETE row in table if row already exists in another table,"<p>I have seen various examples of delete row if a certain condition does not exist for another table.</p>
<p>I would like to delete row from a table if it already exists in another table. I came up with this query but it seems to be simple and I am worrying I am missing something.</p>
<pre class=""lang-sql prettyprint-override""><code>DELETE FROM tmp t
WHERE (t.employee = (SELECT p.employee FROM position p
                         WHERE (t.column1 = p.column1 AND
                                t.column2 = p.column2)
                        )
      );

</code></pre>",,2,1,,2021. 11. 21 오전 2:22:39,,2021. 11. 22 오전 3:01:08,,,,,17384161,,1,0,sql|postgresql,755
70117059,Postgresql function and trigger to copy content from one column to another?,"<p>I need to implement a function and a trigger to copy the contents of COLUMN A to COLUMN B( last one completely NULL) both in the same table. This function must be executed by the trigger whenever a new record is entered. I have tried to do the following in the function but it does not seem to work</p>
<pre><code>UPDATE table 
SET column1 = column2;

RETURN column1;
</code></pre>
<p>On the other hand in the trigger I have:</p>
<pre><code>CREATE TRIGGER name
AFTER UPDATE OR INSERT ON table
FOR EACH ROW EXECUTE PROCEDURE function();
</code></pre>
<p>Does anyone see the error?</p>",,2,1,,2021. 11. 25 오후 8:46:23,,2021. 11. 26 오후 1:35:43,2021. 11. 25 오후 10:59:51,,3889449,,17510972,,1,0,sql|postgresql,247
70303780,get time series in 10 minutes of interval,"<p>I am generating one time-series from using below query.</p>
<pre><code>SELECT date_trunc('min', dd):: TIMESTAMP WITHOUT TIME zone as time_ent 
FROM generate_series ( timestamp '2021-12-09 06:34:37' + ((DATE_PART('min', timestamp '2021-12-09 06:34:37')::integer % 2) || ' minutes') :: INTERVAL 
, '2021-12-10 06:34:37'::timestamp 
, '20 min'::interval) dd
</code></pre>
<p>and it will give me output like below.</p>
<pre><code>2021-12-09 06:34:00.000
2021-12-09 06:54:00.000
2021-12-09 07:14:00.000
2021-12-09 07:34:00.000
</code></pre>
<p>but I need output like.</p>
<pre><code>2021-12-09 06:40:00.000
2021-12-09 07:00:00.000
2021-12-09 07:20:00.000
2021-12-09 07:40:00.000
</code></pre>
<p>currently, the time series hours depend upon the timestamp that I pass. in above it gives me mins like 34,54,14...but I want the mins like 40,00,20...it should not depend on the time I passed in query. I tried with <strong>timestamp '2021-12-09 06:34:37' + ((DATE_PART('min', timestamp '2021-12-09 06:34:37')::integer % 2) || ' minutes') :: INTERVAL</strong> but not any success.</p>",,1,2,,2021. 12. 10 오전 11:23:54,,2021. 12. 10 오후 1:33:30,,,,,4710899,,1,1,sql|postgresql,264
70109547,Can I create a procedure in MySQL where I will just pass any table name from already created tables and get the records displayed using call,"<p>I tried this...</p>
<p>delimiter //</p>
<p>create procedure pselect(in tname varchar(50))
begin
select * from tname ;</p>
<p>end //
delimiter ;</p>
<p>call pselect ('trainee');</p>",,0,2,,2021. 11. 25 오전 10:33:24,,2021. 11. 25 오전 10:33:24,,,,,17506689,,1,0,mysql,13
70254173,"How to append the current month and year to ""Helpdesk Service"" as dynamic column alias?","<p>My DB server is Postgresql.</p>
<p>Here is my sql query:</p>
<pre><code>select 
scd.NAME AS &quot;System&quot;, 
sum(case when udf_char1='Helpdesk Service' then 1 else 0 end) as &quot;Helpdesk Service&quot;,
sum(case when udf_char1='Problem Determination and Management' then 1 else 0 end) as &quot;Problem Determination and Management&quot;,
sum(case when udf_char1='System Status Monitoring and Problem Reporting' then 1 else 0 end) as &quot;System Status Monitoring and Problem Reporting&quot;
from SubCategoryDefinition scd
inner join CategoryDefinition cd On ((cd.CATEGORYNAME = 'Support System') OR (cd.CATEGORYNAME = 'Weather Info'))
and scd.categoryid=cd.categoryid 
left join WorkOrderStates wos ON wos.SUBCATEGORYID=scd.SUBCATEGORYID 
left join WorkOrder wo ON wo.WORKORDERID=wos.WORKORDERID 
left join WorkOrder_fields wf on  wo.WORKORDERID=wf.WORKORDERID 
group by  scd.SUBCATEGORYID
order by 1
</code></pre>
<p>For the &quot;Helpdesk Service&quot; column, I want to convert the column alias into &quot;Helpdesk Service 12/2021&quot;, i.e. I want to append the current month and year after &quot;Helpdesk Service&quot;,
how can I to implement it?</p>
<p>I have tried to use +,||, concat function to implement it, but no luck.</p>",,0,2,,2021. 12. 7 오전 2:18:09,,2021. 12. 7 오전 2:18:09,,,,,2018278,,1,0,postgresql,15
70115376,How to count related id on second table quicker in mysql?,"<p>I need to know how many orders made to each product within a day by their ids. I tried select all the <code>product_today.id</code>. And count each of them from the second table - <code>product_today_order.hid</code>. I'm now have 20k+ rows of data. It took me 10s+ only this query.</p>
<p>Is there any way to make the query faster?</p>
<pre><code>SELECT t.id,(select count(o.hid) from product_today_order o where o.hid=t.id) as zid 
FROM product_today t
where date(t.dtime)='2021-11-26'
group by t.id
</code></pre>",,1,2,,2021. 11. 25 오후 5:43:42,,2021. 11. 26 오전 3:38:24,,,,,1620626,,1,1,mysql,17
70033091,PostgreSQL - query for record that is either side of the result set,"<p>Lets say I have this table (<code>balances</code>) schema and data:</p>
<pre><code>
+----+---------+------------+
| id | balance | createdAt  |
+----+---------+------------+
|  1 |      10 | 2021-11-18 |
|  2 |      12 | 2021-11-16 |
|  3 |       6 | 2021-11-04 |
+----+---------+------------+
</code></pre>
<p>To retrieve the last 7 days of balances, I would do something like this:</p>
<p><code>SELECT * FROM &quot;balances&quot; WHERE &quot;createdAt&quot; BETWEEN '2021-11-19T09:04:17.488Z' AND '2021-11-12T10:04:17.488Z' ORDER BY &quot;createdAt&quot; ASC</code></p>
<p>This will give me 2 records (IDs: 1 &amp; 2), which is fine. However, what I'm looking at doing, probably with a second query, is to grab the record that is previous to that result set, by <code>createdAt</code> date, as my query is ordered by <code>createdAt</code>. Is there a way to do this with PG?</p>
<p>So whatever the time-range I use, I would also retrieve the record that is n-1 to the result set</p>",70033211,1,2,,2021. 11. 19 오전 10:09:01,,2021. 11. 19 오전 10:18:14,,,,,478144,,1,0,postgresql,19
70046317,How to extract data to outfile in MySQL?,"<pre><code>select * into outfile 'D:/mysql/upload/po.txt' From country;
</code></pre>
<blockquote>
<p>ERROR 1290 (HY000): The MySQL server is running with the
--secure-file-priv option so it cannot execute this statement</p>
</blockquote>
<p>I got mysql server 8.</p>
<pre><code>C:\ProgramData\MySQL\MySQL Server 8.0 
my.ini changed  secure-file-priv=&quot;D:/mysql/upload&quot;
</code></pre>
<p>How to extract data to outfile in MySQL?</p>",,0,2,,2021. 11. 20 오후 1:23:53,,2021. 11. 20 오후 1:45:08,2021. 11. 20 오후 1:45:08,,16461952,,17464587,,1,0,mysql,19
70187578,How do you query large MySQL table for entries that don't start with an ASCII letter?,"<p>Is there a performant way to query a large MySQL table for all entries that don't start with a letter?</p>
<p>I get the correct results using this, but it cannot take advantage of indexes:</p>
<pre><code>SELECT * FROM `companies` WHERE `name` NOT REGEXP '^[a-z]+'
</code></pre>
<p>Edit: Anything better than the following?</p>
<pre><code>SELECT * FROM `companies` WHERE `id` NOT IN (SELECT `id` FROM `companies` WHERE `name` RLIKE '^[a-z]');
</code></pre>",,0,2,,2021. 12. 1 오후 4:12:25,,2021. 12. 1 오후 4:43:44,2021. 12. 1 오후 4:43:44,,15821655,,15821655,,1,0,mysql,19
70184503,How to find out the square sequence in the number string?,"<p>How to find out sequence of square patterns in the number string and eliminate it?</p>
<p>Example,</p>
<p>Input: 1232416256789
Output: 123789</p>",,0,2,,2021. 12. 1 오후 12:48:27,,2021. 12. 1 오후 12:48:27,,,,,17562133,,1,0,google-bigquery,20
70074673,Is it possible to joining multiple row,"<p>I am looking for a way to join two rows with same value (promo code in my case). So for example, I have a table:</p>
<pre><code>ID  PROMO_CODE   PROMO_NAME   DESCRIPTION       LANGUAGE
1   PC123        ABC          Desc in English   ENG
2   PC123        CBA          Desc in Español   ESP
</code></pre>
<p>and I want the result like:</p>
<pre><code>ID PROMO_CODE  PROMO_NAME_ENG  PROMO_NAME_ESP  DESCRIPTION_ENG   DESCRIPTION_ESP
1  PC123       ABC             CBA             Desc in English   Desc in Español
</code></pre>
<p>Any help will be appreciate</p>",70074809,1,2,,2021. 11. 23 오전 2:24:35,,2021. 11. 23 오전 4:03:14,2021. 11. 23 오전 4:03:14,,256196,,6332352,,1,0,postgresql,23
70306434,PostgresSQL Join Into existing table,"<p>before I ask this question I want to lead with full disclosure that this is for a class project so I am not looking for an answer just some guidance on what could be wrong and where to look. I need to create a table and then add data from two other tables. I can create the table, add the initial data but when attempting to add data from another table based on a primary key I get a successful execution message but either nothing happens or all fields are NULL. I am trying to pull data from 2 specific columns we can call t2.c1 and t2.c2 into table 1, Any guidance would be appreciated.</p>
<p>Here is an example of the code I am executing</p>
<pre class=""lang-sql prettyprint-override""><code>INSERT INTO t1
SELECT (I have tried * and specific column names)
FROM table 1 t1
INNER JOIN table 2 t2 ON t1.primary_key=t2.primary_key
ORDER BY t1.primary_key;
</code></pre>
<p>If I remove the INSERT INTO command I receive the correct information but it is not added to the table, which I need to do for this task.</p>",,0,2,,2021. 12. 10 오후 3:01:02,,2021. 12. 10 오후 3:05:13,2021. 12. 10 오후 3:05:13,,5015356,,16814807,,1,0,postgresql,24
70341189,select columns sql,"<p>Im new using sql.</p>
<p>How should i say to sql extract only columns timestamp with zone. Like i did below for my two columns manually.</p>
<p>--query--</p>
<pre><code>SELECT_TIMESTAMPTZ_columns=&quot;&quot;&quot;
SELECT date11 AT TIME ZONE 'Europe/Madrid' as date11, date22 AT TIME ZONE 'Europe/Madrid' as date22
FROM {table} &quot;&quot;&quot;
</code></pre>
<p>Thank you in advance,</p>",,0,2,,2021. 12. 13 오후 9:32:47,,2021. 12. 13 오후 9:32:47,,,,,16976676,,1,1,sql|postgresql,24
70029590,Add information to one table from table contains duplicates,"<p>I have the following table:</p>
<p>In Table_1, (ID, Name) pairs can repeat and have any combination<br />
Table_1:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Value1</th>
<th>Value2</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>John</td>
<td>34</td>
<td>45</td>
</tr>
<tr>
<td>1</td>
<td>John</td>
<td>15</td>
<td>78</td>
</tr>
<tr>
<td>2</td>
<td>Randy</td>
<td>67</td>
<td>12</td>
</tr>
<tr>
<td>2</td>
<td>Randy</td>
<td>40</td>
<td>46</td>
</tr>
<tr>
<td>1</td>
<td>Randy</td>
<td>23</td>
<td>85</td>
</tr>
<tr>
<td>2</td>
<td>Holmes</td>
<td>10</td>
<td>100</td>
</tr>
</tbody>
</table>
</div>
<p>I want to find all information for all unique pairs. So the output should be:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Value1</th>
<th>Value2</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>John</td>
<td>34</td>
<td>45</td>
</tr>
<tr>
<td>2</td>
<td>Randy</td>
<td>67</td>
<td>12</td>
</tr>
<tr>
<td>1</td>
<td>Randy</td>
<td>23</td>
<td>85</td>
</tr>
<tr>
<td>2</td>
<td>Holmes</td>
<td>10</td>
<td>100</td>
</tr>
</tbody>
</table>
</div>
<p>When I do <code>SELECT DISTINCT(ID, Name)</code> I get the unique pairs correctly. But how do I add value1, value2 columns to this. Because adding value1, value2 causes the pairs to repeat.</p>",70029670,2,2,,2021. 11. 19 오전 3:39:42,,2021. 11. 19 오전 3:59:22,,,,,17453058,,1,0,sql|postgresql,26
70157937,Can't set value to column conditionally,"<p>The following code throws a <code>can't calculate log of zero</code> error even though I check for that case in <code>x != N</code></p>
<pre><code>DO $$
DECLARE N integer;
BEGIN
    select count(*) from mytable INTO N;
    UPDATE
        words
    SET
    measure = 
         CASE 
            WHEN x != N THEN 1 + log((N - x) / x)
            ELSE 0
         END;   
END $$;
</code></pre>
<p>also tried this, same error:</p>
<pre><code>DO $$
DECLARE N integer;
BEGIN
    select count(*) from mytable INTO N;
    UPDATE words
    SET measure = 1 + log((N-x)/x)
    WHERE x &lt;&gt; N;   
END $$; 
</code></pre>",70158132,1,2,,2021. 11. 29 오후 4:25:49,,2021. 11. 29 오후 4:39:08,2021. 11. 29 오후 4:34:10,,17041062,,17041062,,1,0,sql|postgresql,26
70203285,PSQL - Aggregating Sales Data by Timeframe,"<p>I'm trying to figure out a better way to write my scripts. Lately, I have found myself relying on Left Joins to accomplish a lot of what I need and I'm wondering if there is a better way to be writing my scripts.</p>
<p>Below is a quick example of what I have been trying, let me know what you think.</p>
<pre><code>SELECT a.id,
       SUM(a.spend) AS spend,
       SUM(a.revenue) AS revenue,
       SUM(b.spend) AS spend,
       SUM(b.revenue),
       c.product_name
FROM (SELECT client, name FROM table_1) AS ACC
  LEFT JOIN (SELECT revenue, spend, id FROM table_2 WHERE MONTH = 11) AS a ON acc.id = a.id
  LEFT JOIN (SELECT revenue, spend, id FROM table_2 WHERE MONTH = 10) AS b ON acc.id = b.id
  LEFT JOIN (SELECT product_name FROM table_3) ON a.id = c.id
ORDER BY a.spend
</code></pre>",,1,2,,2021. 12. 2 오후 4:38:36,,2021. 12. 2 오후 6:57:52,2021. 12. 2 오후 4:46:38,,330315,,17381036,,1,0,sql|postgresql,27
70162398,MySQL can't get data between 2 dates,"<p>I have a mysql view in the database for this query. The column that the date field is in is set to a varchar type.</p>
<p>The dates range from 01/13/2021 - 09/18/2021.</p>
<p>%VAR2% = 01/01/2020
I also set %VAR2% to other dates, but the current one that is not working for me is 11/28/2020. It is returning a no values at all.</p>
<p>I have tried numerous ways to set t1.procedureDate, %VAR2%, &amp; %CURRENT_DATE% to be dates in mysql, but nothing works when I put those in and the values stay the same as when the table first gets loaded. Any ideas on how I could make this work?</p>
<p>The following query is the one that I am using to get data based upon the specified date range.</p>
<pre><code>t3.traineeName, 
    t3.procedureDate,
    t3.surgeryID,
AVG(NULLIF(t3.traineeRemovesFatAdrenalRating, 0)),
AVG(NULLIF(t3.traineeSkeletonizesRenalVeinRating, 0)),
AVG(NULLIF(t3.traineeSkeletonizesArteryRating, 0)),
AVG(NULLIF(t3.traineeDonorArteriesRating, 0)),
AVG(NULLIF(t3.traineeRenalVeinAugmentationRating, 0)),
AVG(NULLIF(t3.traineeTissuePerformanceRating, 0)),
AVG(NULLIF(t3.traineeAnatomyPerformanceRating, 0)),
AVG(NULLIF(t3.traineeProcedurePerformanceRating, 0)),
AVG(NULLIF(t3.doctorRemovesFatAdrenalRating, 0)),
AVG(NULLIF(t3.doctorSkeletonizesRenalVeinRating, 0)),
AVG(NULLIF(t3.doctorSkeletonizesArteryRating, 0)),
AVG(NULLIF(t3.doctorDonorArteriesRating, 0)),
AVG(NULLIF(t3.doctorRenalVeinAugmentationRating, 0)),
AVG(NULLIF(t3.doctorTissuePerformanceRating, 0)),
AVG(NULLIF(t3.doctorAnatomyPerformanceRating, 0)),
AVG(NULLIF(t3.doctorProcedurePerformanceRating, 0))
FROM 
(SELECT
    t1.traineeName, 
    t1.procedureDate, 
    t1.surgeryID,
    t1.traineeRemovesFatAdrenalRating,
    t1.traineeSkeletonizesRenalVeinRating,
    t1.traineeSkeletonizesArteryRating,
    t1.traineeDonorArteriesRating,
    t1.traineeRenalVeinAugmentationRating,
    t1.traineeTissuePerformanceRating,
    t1.traineeAnatomyPerformanceRating,
    t1.traineeProcedurePerformanceRating,
    t2.doctorRemovesFatAdrenalRating,
    t2.doctorSkeletonizesRenalVeinRating,
    t2.doctorSkeletonizesArteryRating,
    t2.doctorDonorArteriesRating,
    t2.doctorRenalVeinAugmentationRating,
    t2.doctorTissuePerformanceRating,
    t2.doctorAnatomyPerformanceRating,
    t2.doctorProcedurePerformanceRating
  FROM
    BackbenchKidneyChartTrainee t1
  JOIN
    BackbenchKidneyChartDoctor t2 
  ON
     t1.traineeName = t2.traineeName
  WHERE
    t1.surgeryID = t2.surgeryID
  AND 
    (t1.traineeName = &quot;%VAR1%&quot; AND t2.traineeName = &quot;%VAR1%&quot;)
  AND t1.procedureDate BETWEEN %VAR2% AND '%CURRENT_DATE%' ) t3
  
</code></pre>",,0,2,,2021. 11. 29 오후 11:08:09,,2021. 11. 29 오후 11:08:09,,,,,3192380,,1,0,mysql,28
70226504,join delivered table with itself,"<p>There are such tables</p>
<pre><code>create table a (id int,pid int);
insert into a values
(1, NULL),
(2,1),
(3,5);

create table b (aid int);
insert into b values
(1),
(2),
(3);
</code></pre>
<p>and a query</p>
<pre><code>select * 
from 
  (select distinct aid as id 
     from b
  ) as t
left join a using(id)
</code></pre>
<p>The result is</p>
<pre><code>id  pid
1   (null)
2   1
3   5
</code></pre>
<p>I want to remove records which pid are present in the table t as id. In the case - the record with id 2</p>
<p>I tried to use</p>
<pre><code>where not exists (select id from t where t.id = a.pid)
</code></pre>
<p>and</p>
<pre><code>left join t t2 on t2.id = a.pid
</code></pre>
<p>but in both cases get error 1146 - Table does not exist because t is delivered table</p>
<p>Hope to do that in one query. Any help would be appreciated</p>
<p><a href=""http://sqlfiddle.com/#!9/9bf8666/7"" rel=""nofollow noreferrer"">sqlfiddle</a></p>",70226604,1,2,,2021. 12. 4 오후 2:28:15,,2021. 12. 4 오후 2:41:45,,,,,4804629,,1,1,mysql,28
70217992,How to convert string to date and calculate using mysql,"<p>I have a column that storage the year and month like this</p>
<pre><code>start  | end
202101 | 202212
201905 | 202001
</code></pre>
<p>The format is YYYYMM</p>
<p>I need to convert the two columns in date and get the difference in months between 'start' and 'end' columns</p>",70218193,2,2,,2021. 12. 3 오후 4:54:02,,2021. 12. 3 오후 5:27:34,2021. 12. 3 오후 5:00:46,,6814841,,6814841,,1,1,mysql,29
70146386,mysql lowest score formula by number of vulnerabilities and severity levels,"<p>I'm trying to find a formula that would identify the least vulnerable teams based on number of vulnerabilities found and severity levels.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: left;"">address</th>
<th style=""text-align: center;"">critical</th>
<th style=""text-align: center;"">medium</th>
<th style=""text-align: right;"">low</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: left;"">siteA</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: right;"">13</td>
</tr>
<tr>
<td style=""text-align: left;"">siteB</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">5</td>
</tr>
<tr>
<td style=""text-align: left;"">siteC</td>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: right;"">12</td>
</tr>
<tr>
<td style=""text-align: left;"">siteD</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: right;"">10</td>
</tr>
<tr>
<td style=""text-align: left;"">siteE</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">0</td>
<td style=""text-align: right;"">8</td>
</tr>
</tbody>
</table>
</div>
<pre><code>    SELECT address, COUNT(*) AS total FROM scanner
    GROUP BY address ORDER BY total DESC LIMIT 1000
    where admin = &quot;xxx&quot; and severity = &quot;critical&quot;
</code></pre>
<p>The MySQL syntax above was used to get the most vulnerable teams.</p>
<p>Now, I want to opposite, I would like to display the LEAST vulnerable teams.</p>
<ol>
<li>Teams having 0 Critical and 0 Medium will be at the top.</li>
<li>Teams having the lowest Medium and Low will be next</li>
<li>etc...</li>
</ol>
<p>Any starting pointer would be great and appreciated</p>",70146553,1,2,,2021. 11. 28 오후 6:39:57,,2021. 11. 28 오후 7:02:30,,,,,8805947,,1,1,mysql,30
70159378,Why doesn't this query to show employees that aren't managers work?,"<p>Wrote this MySQL query to show all employees that aren't managers:</p>
<pre><code>SELECT empno
FROM emp
WHERE empno NOT IN (SELECT mgr FROM emp); 
</code></pre>
<p>but it shows no results. What could be the problem?
This is the table.</p>
<pre><code>CREATE TABLE emp (
  empno int NOT NULL default 0000,
  ename char(10) default NULL,
  job char(9) default NULL,
  mgr int default NULL,
  hiredate datetime default NULL,
  sal double default NULL,
  comm double default NULL,
  deptno int default NULL,
  PRIMARY KEY (empno)
);
</code></pre>",70159696,1,2,,2021. 11. 29 오후 6:10:23,,2021. 11. 29 오후 6:41:54,,,,,15038546,,1,0,mysql,30
70112352,"How can I store a sql query into a variable, not the result?","<p>Hello I am doing a script that needs to consult the results of another query Q1, this Q1 is used in a lot of other queries for example</p>
<pre><code>select * from a,
where id in (Q1)

select * from b,
where id in (Q1)

select * from c,
where id in (Q1)
</code></pre>
<p>The problem is that Q1 can change a lot, so I want to store it in a SQL variable in order to avoid changing three times instead of one.</p>
<p>Is this possible?</p>
<p>How can I do this?</p>
<p>Thanks</p>",70112595,1,2,,2021. 11. 25 오후 1:56:23,,2021. 11. 25 오후 2:14:13,,,,,3672883,,1,1,mysql,31
70176880,How to summarize the inserted amount of two different queries in a single transaction?,"<p>When performing two consecutive insert query statements in a single transaction like:</p>
<pre><code>INSERT INTO MyTable1 
SELECT * FROM SomeTable1 (100 rows)

INSERT INTO MyTable2
SELECT * FROM SomeTable2 (200 rows)
</code></pre>
<p>The total amount of affected rows is 200 rows (of the last INSERT statement: &quot;MyTable2&quot;), I was wondering <strong>how to make it to return 300 rows</strong> as the sum of both INSERT statements?</p>",70192907,1,2,,2021. 11. 30 오후 10:23:14,,2021. 12. 2 오전 12:32:07,2021. 11. 30 오후 10:38:05,,6844481,,6844481,,1,-1,sql|postgresql,31
70344348,Count a row's appearance in foreign keys on another table as a generated column?,"<p>I have two tables, <em>buildings</em> and <em>reports</em>. a row in <em>reports</em> has one relationship to a row in <em>buildings</em> but <em>buildings</em> can have many reports.</p>
<p>I have aa query that returns a table of building id as well as how many reports are related to it:</p>
<pre><code>SELECT
 buildings.bin, A.report_count
 FROM
 buildings JOIN ( 
  SELECT fk_bin, COUNT(fk_bin) 
  AS report_count FROM fisp_filings
  GROUP BY fk_bin) A ON buildings.bin = A.fk_bin
</code></pre>
<p>Result:</p>
<pre><code>___________________
|bin |report_count|
-------------------
|1001|           3|
-------------------
</code></pre>
<p>I would like to have this column showing me the report count within my <em>buildings</em> table.</p>
<p>Something like this: ( doesn't work )</p>
<pre><code>ALTER TABLE buildings ADD report_count int not null GENERATED ALWAYS AS ( fk_bin, COUNT(fk_bin) AS report_count FROM fisp_filings GROUP BY fk_bin ) A ON buildings.bin = A.fk_bin ) STORED;
</code></pre>
<p>Is it possible to have this count on my table without creating a view?</p>",,0,2,,2021. 12. 14 오전 5:53:34,,2021. 12. 14 오전 5:53:34,,,,,11453444,,1,0,sql|postgresql,31
70113823,PostgreSQL - SQL function to loop through all months of the year and pull 10 random records from each,"<p>I am attempting to pull 10 random records from each month of this year using this query here but I get an error &quot;ERROR: relation &quot;c1&quot; does not exist
&quot;
Not sure where I'm going wrong - I think it may be I'm using Mysql syntax instead, but how do I resolve this?</p>
<p>My desired output is like this</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Month</th>
<th>Another header</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-01</td>
<td>random email   1</td>
</tr>
<tr>
<td>2021-01</td>
<td>random email 2</td>
</tr>
</tbody>
</table>
</div>
<p>total of ten random emails from January, then ten more for each month this year (til November of course as Dec yet to happen)..</p>
<pre><code>With CTE AS 
(
    Select  month, 
            email, 
            Row_Number() Over (Partition By month Order By FLOOR(RANDOM()*(1-1000000+1))) AS RN
    From    (
            SELECT
                    DISTINCT(TO_CHAR(DATE_TRUNC('month', timestamp ), 'YYYY-MM')) AS month
                    ,CASE
                      WHEN 
                      JSON_EXTRACT_PATH_TEXT(json_extract_array_element_text (form_data,0),'name') = 'email' 
                      THEN 
                      JSON_EXTRACT_PATH_TEXT(json_extract_array_element_text (form_data,0),'value')
                      END AS email
            FROM  form_submits_y2 fs
            WHERE fs.website_id IN (791)
            AND month LIKE '2021%'
            GROUP BY 1,2
            ORDER BY 1 ASC
            )
)
SELECT  *
FROM CTE C1
LEFT JOIN 
     (SELECT RN
            ,month
            ,email
     FROM CTE C2
     WHERE C2.month = C1.month 
     ORDER BY RANDOM() LIMIT 10) C3
ON C1.RN = C3.RN
ORDER By month ASC```
</code></pre>",,2,2,,2021. 11. 25 오후 3:40:04,,2021. 11. 26 오전 11:46:45,2021. 11. 25 오후 3:48:18,,330315,,15717909,,1,0,postgresql,32
70231538,remove duplicate description in group by with rollup in mysql,"<p>I want to achieve what is in the image attached. The duplicated names do not look good. For example, there are many year 2000, I only need the top one. I want to remove the other year 2000. How can I do it?</p>
<p><a href=""https://i.stack.imgur.com/SPA0V.png"" rel=""nofollow noreferrer"">Click here to see image</a></p>
<pre><code>SELECT
         IF(GROUPING(year), 'All years', year) AS year,
         IF(GROUPING(country), 'All countries', country) AS country,
         IF(GROUPING(product), 'All products', product) AS product,
         SUM(profit) AS profit
         FROM sales
         GROUP BY year, country, product WITH ROLLUP;

+-----------+---------------+--------------+--------+
| year      | country       | product      | profit |
+-----------+---------------+--------------+--------+
| 2000      | Finland       | Computer     |   1500 |
| 2000      | Finland       | Phone        |    100 |
| 2000      | Finland       | All products |   1600 |
| 2000      | India         | Calculator   |    150 |
| 2000      | India         | Computer     |   1200 |
| 2000      | India         | All products |   1350 |
| 2000      | USA           | Calculator   |     75 |
| 2000      | USA           | Computer     |   1500 |
| 2000      | USA           | All products |   1575 |
| 2000      | All countries | All products |   4525 |
| 2001      | Finland       | Phone        |     10 |
| 2001      | Finland       | All products |     10 |
| 2001      | USA           | Calculator   |     50 |
| 2001      | USA           | Computer     |   2700 |
| 2001      | USA           | TV           |    250 |
| 2001      | USA           | All products |   3000 |
| 2001      | All countries | All products |   3010 |
| All years | All countries | All products |   7535 |
+-----------+---------------+--------------+--------+
</code></pre>",,0,2,,2021. 12. 5 오전 4:45:46,,2021. 12. 5 오후 10:35:45,2021. 12. 5 오후 10:35:45,,4437186,,4437186,,1,0,mysql,32
70093475,Postgresql right join with USING shows very slow execution,"<p>I have a select:</p>
<pre><code>with t1 as (select a,b,c,d from tab1 groub by a,b,c,d), &lt;--- has ~10000 rows 
  t2 as (select a,b,c,d from tab2 group by a,b,c,d), &lt;--- has ~20000 rows 
  t3 as (select a,b,c,d from tab3 group by a,b,c,d), &lt;--- has ~20000 rows 
  t4 as (select a,b,c from tab4) &lt;--- this table doesn't have &quot;d&quot; here, has 3000 rows

  select * from t1 
     right join t4 using (a,b,c) &lt;--- the only acceptable option 
     left join t2 on t1.a=t2.a t1.b=t2.b t1.c=t2.c t1.d=t2.d 
     left join t3 on t1.a=t3.a t1.b=t3.b t1.c=t3.c t1.d=t3.d
</code></pre>
<p>So I have a table with t4 (with indexes on a,b,c) without 1 column for left join with other tables. If I use left join then I see nested loop for 40 sec. If I omit the whole table t4 total execution time is around 3 sec., with right join USING total time is 13 sec. I tried generating &quot;d&quot; column values - no good, falls into long nested loop with 40 sec execution. t4 with distinct on (a,b,c) - also no good. I also tried rewriting all &quot;on&quot; clauses for &quot;using&quot; - shows similar time.</p>
<p>Is there some better option or join strategy for this scenario? Maybe I am missing something?
Thanks</p>",,0,2,,2021. 11. 24 오전 9:19:50,,2021. 11. 24 오전 9:19:50,,,,,9072849,,1,0,postgresql,33
70190577,is it possible to change column datatype to SET in mysql?,"<p>i downloaded imdb database and while i was able to import it into mysql, i coulden't put the genre column datatype to &quot;SET&quot;, even tho imdb only has 21 genre's for movies, when i imported the data i set the genre data type to VARCHAR(255), and i can not change it to SET, is it possible?
here's what i tried:</p>
<p>ALTER TABLE movies
MODIFY genre SET('Drama', 'Comedy', 'Action', 'Crime', 'Romance', 'Thriller', 'Adventure', 'Horror', 'Mystery', 'Fantasy', 'Sci-Fi', 'Biography', 'Family', 'Animation', 'Music', 'History', 'War', 'Sport', 'Musical', 'Western', 'Film-Noir') NOT NULL;</p>
<p>and i get the error code 1265 &quot;Data truncated for column 'genre' at row 2&quot;, I'm guessing that's because row 2 has more than only one genre, but i thought that's the difference between ENUM data type in SET, am i missing something?</p>",70192507,1,2,,2021. 12. 1 오후 8:06:10,,2021. 12. 1 오후 11:26:39,,,,,5091108,,1,1,mysql,33
70336179,get time series in 4 days of interval,"<p>I am generating one time-series from using the below query.</p>
<pre><code>SELECT date_trunc('day', dd):: TIMESTAMP WITHOUT TIME zone as time_ent
FROM generate_series (
    CASE
        WHEN MOD(EXTRACT(DAY FROM '2020-12-13 13:02:42'::timestamp)::INT, 4) = 0 THEN
            '2020-12-13 13:02:42'::date
        ELSE
            '2020-12-13 13:02:42'::date + concat(MOD(EXTRACT(DAY FROM '2020-12-13 13:02:42'::timestamp)::INT, 4), ' day')::interval
    END
    , '2021-12-13 13:02:42'::date
    , '5760 min'::INTERVAL
) dd
</code></pre>
<p>and it will give me output like below.</p>
<pre><code>2020-12-14 00:00:00.000
2020-12-18 00:00:00.000
2020-12-22 00:00:00.000
2020-12-26 00:00:00.000
2020-12-30 00:00:00.000
2021-01-03 00:00:00.000
</code></pre>
<p>but I need output like.</p>
<pre><code>2020-12-16 00:00:00.000
2020-12-20 00:00:00.000
2020-12-24 00:00:00.000
2020-12-28 00:00:00.000
2020-01-01 00:00:00.000
2021-01-05 00:00:00.000
</code></pre>
<p>currently, the time series days depend upon the timestamp that I pass. in above it gives me days like 14,18,22...but I want the days like 16,20,24. multiple of 4..days should not depend on the time I passed in query. I tried many things but not any success.</p>",,1,2,,2021. 12. 13 오후 2:24:49,,2021. 12. 13 오후 2:46:32,,,,,4710899,,1,0,sql|postgresql,33
70032352,How to update a row to add a character to a column,"<p>I am using PostgreSQL. I have a table, that has a column that I want to insert a character into.</p>
<p>For example, column <code>unique_reference</code> = <code>&quot;1121464146-1-1R&quot;</code>.  I would like to insert a <code>&quot;-&quot;</code> character before the <code>&quot;R&quot;</code>, so that it is <code>&quot;1121464146-1-1-R&quot;</code>.</p>
<p>I have the following incomplete SQL:</p>
<pre><code>update powwowjournalentry
SET unique_reference = -- something?
where unique_reference LIKE '%R' and unique_reference NOT LIKE '%-R';
</code></pre>",70032419,1,2,,2021. 11. 19 오전 9:09:24,,2021. 11. 19 오전 9:19:33,2021. 11. 19 오전 9:19:33,,466862,,6561309,,1,0,sql|postgresql,35
70024795,How to get percentage based on columns,"<p>so here is what I have:</p>
<pre><code> select
    round(count(hired) / sum(count(population)) over(), 2) as freq,
    hired,    
    population
 from hr group by hired, population
 order by population, hired DESC;
</code></pre>
<p>I have a hired column which is boolean values, population which is either US or EU values.
Right now the freq divides the hired over the entire population which is like 5,000 values but I would like it to divide which are specifically US or EU values.</p>
<p>Can anyone help me with doing this? thanks</p>
<p>Example data:</p>
<pre><code>create table hr
(
  candidate_id INTEGER PRIMARY KEY,         
  hired BOOLEAN NOT NULL,                
  population CHAR(2) NOT NULL            

);

INSERT INTO hr VALUES (1,FALSE,'US');
INSERT INTO hr VALUES (2,TRUE,'US');
INSERT INTO hr VALUES (3,FALSE,'EU');
INSERT INTO hr VALUES (4,TRUE,'EU');
INSERT INTO hr VALUES (5,FALSE,'US');
INSERT INTO hr VALUES (6,FALSE,'EU');
</code></pre>
<p>instead of dividing by the entire population I just want by like total of EU or US values</p>
<p>so like True in EU is 1 but total for EU is 3 so 1/3 instead of 1/6</p>
<p>Sample output:</p>
<pre><code>/* Result:
frequency | hired   |population|
----------+---------+----------+
0.33      |    True |       US |
0.66      |    False|       US |
0.33      |    True |       EU |
0.66      |    False|       EU |
*/

</code></pre>",70025203,1,2,,2021. 11. 18 오후 6:15:51,,2021. 11. 18 오후 7:30:03,2021. 11. 18 오후 7:08:34,,17450124,,17450124,,1,0,sql|postgresql,36
70167127,MYSQL - Find rows that sums a searchable amount on a specific column,"<p>I have the following records in a table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>InvoiceNumber</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>INV_1</td>
<td>135.88</td>
</tr>
<tr>
<td>INV_2</td>
<td>87.91</td>
</tr>
<tr>
<td>INV_3</td>
<td>99.99</td>
</tr>
<tr>
<td>INV_4</td>
<td>421.59</td>
</tr>
<tr>
<td>INV_5</td>
<td>39.22</td>
</tr>
</tbody>
</table>
</div>
<p>Let's say i have an total of 596.69 which turns out to be the sum of rows 1, 4, and 5.</p>
<p>Is it possible to have a query that would scan all records of the Amount column and return the rows that sums the total of 596.69?</p>",70167278,1,2,,2021. 11. 30 오전 9:37:12,2,2021. 11. 30 오전 9:48:48,2021. 11. 30 오전 9:39:20,,10138734,,4246355,,1,1,mysql,37
70048195,how to get column value based on previous two column values in postgresql,"<p>Hi I am new to postgrasql. I am using postgreasql version 10.1. I have a requirement to get 'Total' column value based on</p>
<ol>
<li>Total = previous row 'comp_year' + previous row 'Total'</li>
<li>Total is based on id, group, year.</li>
<li>I have nearly 2 million records.</li>
<li>Need to get the resultant data set in table</li>
</ol>
<p><a href=""https://i.stack.imgur.com/xg3oX.jpg"" rel=""nofollow noreferrer"">This is how my result should look like</a></p>
<p>Below is my code its working but not able to display all the record in table grid.</p>
<p>Thanks in advance</p>
<pre><code>create OR REPLACE FUNCTION TEST3() returns SETOF refcursor
    language plpgsql
as
$$
Declare
    CUMP_TOTAL INTEGER:=0;
    cur cursor for select &quot;ID&quot;,
                       &quot;Group&quot;,
                       &quot;YEAR&quot;,
                       &quot;Comp_year&quot;,
                      LAG(&quot;Comp_year&quot;) OVER (PARTITION BY &quot;ID&quot;, &quot;Group&quot; ORDER BY &quot;YEAR&quot;) AS &quot;PRIOR_YTD1&quot;
 from xyz&quot;
               order by &quot;ID&quot;,&quot;Group&quot;,&quot;YEAR&quot; limit 1000;
C1 RECORD;
BEGIN
open cur;
loop
fetch cur INTO C1;
EXIT WHEN NOT FOUND;
IF C1.&quot;Comp_year&quot; IS NULL THEN
    CUMP_TOTAL:=0;
ELSE
CUMP_TOTAL:=coalesce(C1.&quot;PRIOR_YTD1&quot;,0)+coalesce(CUMP_TOTAL,0);
END IF;
RAISE INFO 'Current va`enter code here`lue of parameter (%)', TOTAL ;
   RAISE notice '%',TOTAL;
  --  RETURN CUMP_TOTAL+10;
 --RAISE NOTICE 'ID             Group';
      --RETURN next C1 ||','||CUMP_TOTAL;
   -- RETURN next CUMP_TOTAL;
    --RETURN NEXT C1;
   RETURN NEXT C1.&quot;ID&quot; ||','||C1.&quot;Group&quot;||','||C1.&quot;YEAR&quot;||','||coalesce(C1.&quot;Comp_year&quot;,0)||','||coalesce(TOTAL);
END LOOP;
close cur;
exception when others then
         raise notice '% %', SQLERRM, SQLSTATE;
END;
$$;
</code></pre>",,0,2,,2021. 11. 20 오후 5:17:25,,2021. 11. 21 오후 6:37:18,2021. 11. 21 오후 6:37:18,,4420967,,16775411,,1,0,postgresql,38
70348494,MySQL - get youngest entry with group by / order by,"<p>I have a simple table like this:</p>
<pre><code>| id    | created_at          | subscriptionId | orderId |
|-------|---------------------|----------------|---------|
| 32247 | 2021-12-13 16:49:21 |           6773 |  600724 |
| 32246 | 2021-12-13 16:26:02 |           6773 |  600717 |
| 32245 | 2021-12-13 16:23:53 |           6773 |  600715 |
</code></pre>
<p>When I run this query:</p>
<pre><code>SELECT
st.subscriptionId,
st.orderId,
st.created_at
FROM subscription_time st
WHERE
st.subscriptionId IN (6773)
GROUP BY st.subscriptionId
ORDER BY st.created_at DESC;
</code></pre>
<p>I get this result:</p>
<pre><code>| subscriptionId | orderId | created_at          |
|----------------|---------|---------------------|
|           6773 |  600715 | 2021-12-13 16:23:53 |
</code></pre>
<p>I would suspect the entry with the <code>id=32247</code> and not the one with <code>id= 32245</code> ? Do I have to run it with a subquery?</p>",,1,2,,2021. 12. 14 오전 11:57:49,,2021. 12. 14 오후 12:07:04,,,,,1124269,,1,1,mysql,38
70217950,Trying to get the count for the number of times an id shows up in different timeframes - Postgresql,"<p>So i want to get the number of times an id shows up in different time frames. Here is the schema:</p>
<pre><code>CREATE TABLE phone_clicks (
id integer NOT NULL,
date date NOT NULL,
industry_id integer NOT NULL,
clicks integer DEFAULT 0 NOT NULL
);

insert into phone_clicks(id, date, industry_id)
values
(1, '2021-12-03', 1),
(2, '2021-12-03', 2),
(3, '2021-12-02', 3),
(4, '2021-12-01', 1),
(5, '2021-12-01', 3),
(6, '2021-12-01', 4),
(7, '2021-12-02', 1),
(8, '2021-12-02', 2);
</code></pre>
<p>Here is where i am for now, but all this is doing is getting the full count for each id.</p>
<pre><code>    select  industry_id
,       count(case when current_date &lt;= date then 1 else 0 end) as today 
,       count(case when current_date-1 &lt;= date and
                      date &lt; current_date then 1 else 0 end) as yesterday
,       count(case when current_date-4 &lt;= date and 
                      date &lt; current_date-1 then 1 else 0 end) as last3days
from    phone_clicks
group by
        industry_id
</code></pre>
<p>This is returning me this:</p>
<pre><code>industry_id today   yesterday   last3days
4             1        1            1
1             3        3            3
3             2        2            2
2             2        2            2
</code></pre>
<p>Which is just the number of times the id shows up in the table at all each time. I want the number of times id 4 shows up today, yesterday and in the last 3 days. Should be 0 for today and yesterday</p>",,2,2,,2021. 12. 3 오후 4:50:42,,2021. 12. 3 오후 7:55:55,,,,,1100102,,1,0,sql|postgresql,39
70265548,How to write array of one entity objects as a column into another entity in database schemas?,"<p>In  portfolio can be multiple stocks, and stock can be in multiple portfolios, so I choose many-to-mane relation. But as I understand to get stocks from portfolio, it will be needed  to use join between portfolioId and stockId. So I've been thinking that it will be good to store a massive of stocks in portfolio. How can I do it or what is the best way to store all stocks in portfolio?
<a href=""https://i.stack.imgur.com/HTc6f.png"" rel=""nofollow noreferrer"">I have created such schema</a></p>
<p>I am using postgresql. My code:</p>
<pre><code>   create TABLE portfolio(
    id SERIAL PRIMARY KEY,
    years INTEGER NOT NULL,
    goal VARCHAR(255) NOT NULL,
    analystId INTEGER,
    clientId INTEGER,
    FOREIGN KEY (analystId) REFERENCES analyst (id),
    FOREIGN KEY (clientId) REFERENCES client (id)
);

create TABLE portfolio_stock(
    stockId int NOT NULL,
    portfolioId int NOT NULL,
    CONSTRAINT portfolio_stockPK PRIMARY KEY(stockId, portfolioId),
    CONSTRAINT portfolio_stock_portfolioFK FOREIGN KEY(portfolioId) REFERENCES portfolio,
    CONSTRAINT portfolio_stock_stockFK FOREIGN KEY(stockId) REFERENCES stock
);

create TABLE portfolio_bond(
    bondId int NOT NULL,
    portfolioId int NOT NULL,
    CONSTRAINT portfolio_bondPK PRIMARY KEY(bondId, portfolioId),
    CONSTRAINT portfolio_bond_portfolioFK FOREIGN KEY(portfolioId) REFERENCES portfolio,
    CONSTRAINT portfolio_bond_bondkFK FOREIGN KEY(bondId) REFERENCES bond
);
</code></pre>",,0,2,,2021. 12. 7 오후 6:54:15,,2021. 12. 7 오후 7:19:29,2021. 12. 7 오후 7:19:29,,17210436,,17210436,,1,0,sql|postgresql,39
70369722,UPDATE from join not returning expected results?,"<p>I am creating a postgresql script that updates one product table based on another.
the first table, we'll call T1 contains the product code and some descriptive info.The product code is the key for this table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>product_code</th>
<th>values</th>
</tr>
</thead>
<tbody>
<tr>
<td>abc123</td>
<td>34</td>
</tr>
<tr>
<td>abd124</td>
<td>42</td>
</tr>
</tbody>
</table>
</div>
<p>The 2nd table contains products, along with dates that show the availability of these products.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>product_code</th>
<th>begin_date</th>
<th>end_date</th>
</tr>
</thead>
<tbody>
<tr>
<td>abc123</td>
<td>1/1/2020</td>
<td>2/3/2021</td>
</tr>
<tr>
<td>abd124</td>
<td>12/1/2019</td>
<td>12/31/2021</td>
</tr>
<tr>
<td>xyz345</td>
<td>03/01/2019</td>
<td>NULL</td>
</tr>
</tbody>
</table>
</div>
<p>I then used ALTER TABLE to add begin and end_date columns to the 1st table.
I then used an update statement:</p>
<pre><code>UPDATE T1
SET
begin_date =  b.begin_date,
end_date = b.end_date
FROM T2 b JOIN T1 a ON a.product_code = b.product_code;
</code></pre>
<p>This gives does not give the correct result. For me, it seems that a single pair of values was populated rather than the correct values from T2.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>product_code</th>
<th>values</th>
<th>begin</th>
<th>end</th>
</tr>
</thead>
<tbody>
<tr>
<td>abc123</td>
<td>34</td>
<td>03/01/2019</td>
<td>NULL</td>
</tr>
<tr>
<td>abd124</td>
<td>42</td>
<td>03/01/2019</td>
<td>NULL</td>
</tr>
</tbody>
</table>
</div>
<p>I really have no idea what could be causing this. I know that the values being inserted are coming from somewhere in T2. However, I cant see any logical reason that all of these values should be the same.</p>",70369836,1,2,,2021. 12. 15 오후 8:08:15,,2021. 12. 15 오후 8:19:51,2021. 12. 15 오후 8:18:55,,8696862,,8696862,,1,0,sql|postgresql,39
70130797,Group By Joined table,"<p>My database contains 3 tables: Sku -&gt; Color -&gt; Product (screen)
<a href=""https://i.stack.imgur.com/100x6.png"" rel=""nofollow noreferrer"">enter image description here</a></p>
<p>I have next query:</p>
<pre><code>SELECT anon_1.product_id          AS anon_1_product_id,
       anon_1.product_name        AS anon_1_product_name,
       anon_1.product_description AS anon_1_product_description,
       anon_1.product_size_chart  AS anon_1_product_size_chart,
       anon_1.product_status      AS anon_1_product_status,
       c.id                       AS anon_1_color_id,
       c.color                    AS anon_1_color_color,
       c.product_image            AS anon_1_color_product_image,
       c.custom_cat_id            AS anon_1_custom_cat_id,
       c.back_image               AS anon_1_color_back_image,
       c.color_hex                AS anon_1_color_color_hex,
       s.id                       AS anon_1_sku_sku_id,
       s.catalog_sku_id           AS anon_1_sku_catalog_sku_id,
       s.cost                     AS anon_1_sku_cost,
       s.size                     AS anon_1_sku_size,
       s.prise                    AS anon_1_sku_prise,
       s.in_stock                 AS anon_1_sku_in_stock
FROM (SELECT product.id                    AS product_id,
             product.custom_cat_product_id AS product_custom_cat_product_id,
             product.name                  AS product_name,
             product.description           AS product_description,
             product.size_chart            AS product_size_chart,
             product.status                AS &quot;product_status&quot;
      FROM product
      WHERE lower(product.name) LIKE lower(:name_product)
      LIMIT :limit OFFSET :skip) AS anon_1
         JOIN color c ON anon_1.product_id = c.product_id
         JOIN sku s ON s.color_id = c.id
ORDER BY anon_1_color_id,
         CASE s.size
             WHEN 'XS' THEN 1
             WHEN 'S' THEN 2
             WHEN 'M' THEN 3
             WHEN 'L' THEN 4
             WHEN 'XL' THEN 5
             WHEN '2XL' THEN 6
             WHEN '3XL' THEN 7
             WHEN '4XL' THEN 8
             WHEN '5XL' THEN 9
             WHEN '6XL' THEN 10
             WHEN 'YXS' THEN 11
             WHEN 'YS' THEN 12
             WHEN 'YM' THEN 13
             WHEN 'YL' THEN 14
             WHEN 'YXL' THEN 15
             WHEN 'Y2XL' THEN 16
             END

</code></pre>
<p>I need sort my products by Sku.price before Limit, Is there some way todo it? Or decompose query and get the same data?</p>",,0,2,,2021. 11. 26 오후 11:01:45,,2021. 11. 27 오전 8:32:35,2021. 11. 27 오전 8:32:35,,2681632,,16276334,,1,0,sql|postgresql,40
70138649,There is a way to optimize this query?,"<pre><code>select cod_curso, anio, id_profesor
from dictado
where (cod_curso, anio) in 
(
    select cod_curso, anio
    from dictado
    where id_profesor in 
        (
            select id_profesor
            from instructor
            where apellido like 'Milmore'
        )  
)
and (id_profesor) not in 
    (
        select id_profesor
        from instructor
        where apellido like 'Milmore'
    )
</code></pre>
<p>Diagram :</p>
<pre>
    https://cdn.discordapp.com/attachments/759558366887411773/914258487666692207/unknown.png
</pre>
<p>Task: Write a query to show the last name, first name and date of birth of any instructor who has taught the same courses as &quot;Milmore&quot;. Exclude Milmore from the result.</p>",70139140,1,2,,2021. 11. 27 오후 8:58:54,,2021. 11. 27 오후 10:19:23,2021. 11. 27 오후 9:04:17,,17526807,,17526807,,1,-1,sql|postgresql,40
70327354,Unable to create relationship 'FK_PATIENTS_VICTIMS',"<p>MySQL says:</p>
<blockquote>
<p>the alter table statement conflicted with the FOREIGN KEY constraint &quot;FK_PATIENTS_VICTIMS&quot;. The conflict occurred in the database &quot; my_database&quot;, table &quot;dbo.victims&quot;, column &quot;victim_id'.</p>
</blockquote>
<p>I tried to alter the table by inputting;</p>
<pre><code>ALTER TABLE PATIENTS WITH NOCHECK ADD CONSTRAINT [FK_PATIENTS_VICTIMS] FOREIGN KEY(VICTIM_ID) REFERENCES VICTIM(ID)
</code></pre>
<p>Patients table</p>
<pre><code>create table patients(
    victim_id int(4),
    blood_type varchar(4),
    vaccinations varchar(100),
    assigned_practitioner int(10),
    hospital_id int(10),
    insurance_id int(10),
    symptoms varchar(200); 
</code></pre>
<p>Victims table</p>
<pre><code>create table victims(
    victim_id int(4) primary key,
    first_name varchar(20),
    last_name varchar(20),
    sex char(1) constraint persons_sex_ck check(sex IN('F','M')),
    PHONE_NUMBER varchar(20),
    DOB varchar(13),
    address varchar(30),
    city varchar(20),
    zip int(5),
    state varchar(5)
);
</code></pre>",70327730,1,2,,2021. 12. 12 오후 8:17:02,,2021. 12. 13 오전 12:19:56,2021. 12. 13 오전 12:19:56,,1127428,user17660383,,,1,0,mysql,40
70264999,Cypher query - Only match on subset of nodes connected to one node,"<p>How do I build an efficient cypher query to pull only 'City' and 'Age' connected to the 'Group'-labeled node? Thanks in advance</p>
<p><a href=""https://i.stack.imgur.com/2Dczy.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/2Dczy.png"" alt=""enter image description here"" /></a></p>
<p>I have tried this query so far:</p>
<pre><code>MATCH(a:Group)-[r]-(b) WHERE b:City OR b:Age RETURN a, b
</code></pre>
<p>This query gets me half way there. It returns the correct data but, in the table format the data is wrong. I want to include cases where there's additional Group node that is connected to City,Age,Name, and Race</p>
<p>The query should return in this format where each row is a distinct group:</p>
<pre><code>Group1, City, Age
Group2, City, Age
</code></pre>",70265730,2,2,,2021. 12. 7 오후 6:09:37,,2021. 12. 7 오후 7:18:55,2021. 12. 7 오후 6:56:49,,16922964,,16922964,,1,0,neo4j|cypher,41
70167210,copy tree structure in MySql and update ids,"<p>I have below structure of tables</p>
<ul>
<li>table_a
<ul>
<li>table_b
<ul>
<li>table_c</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>table_c has external keys in table_b and table_b in table_a, all tables has relation one to many (one parent)
all tables have columnt environment_id</p>
<p>I have to copy structure for 2 rows from table_a and past to the same table with other environment_id</p>
<p>if I run script</p>
<pre><code>    insert into table_a (environment_id, text, is_default, type)
(select -1001, text, is_default, type
    from table_a
    where environment_id = -1005);

insert into table_b
    (environment_id, a_id, ordinal, text, level)
     (select -1001, 
             (select formulaid from table_a where environment_id = -1001 and text = 
                          (select text from table_a where formulaid = a_id))
             ordinal, text, level);



insert into table_c
    (environment_id, b_id, languageid, translation)
    (select -1001, (select id from table_b
                    where environment_id = -1001 and text = (select text from table_b 
                                    where environment_id = -1005 and text = (
                                        select text from table_b where id = b_id))), 
            languageid, translation);
</code></pre>
<p>I will receive expected result for 1st table, but how to manage with rest?
I want to new rows from table_b point new rows from table_a, same with table_c and table_b.</p>",70279458,1,2,,2021. 11. 30 오전 9:43:43,,2021. 12. 8 오후 5:43:37,2021. 11. 30 오전 10:05:17,,9304291,,9304291,,1,0,mysql,42
70259057,Two rows in two columns,"<p>I have table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Owner</th>
<th>Book</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>John</td>
<td>Vile Bodies by Evelyn Waugh</td>
<td>2009-05-20</td>
</tr>
<tr>
<td>Tom</td>
<td>Vile Bodies by Evelyn Waugh</td>
<td>2009-05-22</td>
</tr>
<tr>
<td>Jim</td>
<td>Moab is my Washpot by Stephen Fry</td>
<td>2009-05-26</td>
</tr>
<tr>
<td>Kate</td>
<td>Moab is my Washpot by Stephen Fry</td>
<td>2009-06-02</td>
</tr>
</tbody>
</table>
</div>
<p>How can I get table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Owner</th>
<th>Book</th>
<th>Pick_Date</th>
<th>Gave_Back_Book_Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>John</td>
<td>Vile Bodies by Evelyn Waugh</td>
<td>2009-05-20</td>
<td>2009-05-22</td>
</tr>
<tr>
<td>Tom</td>
<td>Vile Bodies by Evelyn Waugh</td>
<td>2009-05-22</td>
<td></td>
</tr>
<tr>
<td>Jim</td>
<td>Moab is my Washpot by Stephen Fry</td>
<td>2009-05-26</td>
<td>2009-06-02</td>
</tr>
<tr>
<td>Kate</td>
<td>Moab is my Washpot by Stephen Fry</td>
<td>2009-06-02</td>
<td></td>
</tr>
</tbody>
</table>
</div>",70259315,2,2,,2021. 12. 7 오전 11:07:24,,2021. 12. 7 오전 11:29:32,2021. 12. 7 오전 11:29:32,,330315,,17219231,,1,0,sql|postgresql,42
70035273,How to get rid of duplicate SQL results when aggregrating from 2 linking tables without using distinct,"<p>My question is a performance question.</p>
<p>Given this postgresql, I get this result.</p>
<pre class=""lang-sql prettyprint-override""><code>select fp.fp_id post_id, 
tag_linking_table.sehset_tid hashtag
FROM soc_ent social_entity
JOIN fp on fp.fp_id = social_entity.se_id
LEFT JOIN sehset tag_linking_table on tag_linking_table.sehset_seid = social_entity.se_id
GROUP BY post_id, hashtag
</code></pre>
<p><a href=""https://i.stack.imgur.com/KI70f.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/KI70f.png"" alt=""enter image description here"" /></a></p>
<p>I can see that the <code>post</code> ending in <code>89</code> has 2 hashtags. All good so far.</p>
<p>I now modify the query to get the following expected result.</p>
<pre class=""lang-sql prettyprint-override""><code>select fp.fp_id post_id, 
jsonb_agg(tag_linking_table.sehset_tid) hashtag
FROM soc_ent social_entity
JOIN fp on fp.fp_id = social_entity.se_id
LEFT JOIN sehset tag_linking_table on tag_linking_table.sehset_seid = social_entity.se_id
GROUP BY post_id
</code></pre>
<p><a href=""https://i.stack.imgur.com/iFQJZ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/iFQJZ.png"" alt=""enter image description here"" /></a></p>
<p>All good so far. My hashtags are properly grouped. Now if i changed the query to get the <code>likes</code> count using the same method above, this is my expected result</p>
<pre class=""lang-sql prettyprint-override""><code>select fp.fp_id post_id, 
count(social_entity_likes.se_likes_ca) likes
FROM soc_ent social_entity
JOIN fp on fp.fp_id = social_entity.se_id
LEFT JOIN se_likes social_entity_likes on social_entity.se_id = social_entity_likes.se_likes_seid 
GROUP BY post_id
</code></pre>
<p><a href=""https://i.stack.imgur.com/0XZg3.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/0XZg3.png"" alt=""enter image description here"" /></a></p>
<p>So in summary, my post ending in <code>89</code> has 2 likes from the <code>Likes</code> linking table, and 2 <code>Hashtags</code> from the hashtag linking table.</p>
<p>Now comes the problem. I want to display the hashtags and the likes in one sql query, so i modified the sql to the following.</p>
<pre class=""lang-sql prettyprint-override""><code>select fp.fp_id post_id, 
jsonb_agg(tag_linking_table.sehset_tid) hashtag,
count(social_entity_likes.se_likes_ca) likes
FROM soc_ent social_entity
JOIN fp on fp.fp_id = social_entity.se_id
LEFT JOIN sehset tag_linking_table on tag_linking_table.sehset_seid = social_entity.se_id
LEFT JOIN se_likes social_entity_likes on social_entity.se_id = social_entity_likes.se_likes_seid 
GROUP BY post_id
</code></pre>
<p>But oddly, my result was this:</p>
<p><a href=""https://i.stack.imgur.com/4vlMG.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/4vlMG.png"" alt=""enter image description here"" /></a></p>
<p>The solution I found was to add the word <code>distinct</code> inside the aggregation function which gave me the correct results.</p>
<pre class=""lang-sql prettyprint-override""><code>select fp.fp_id post_id, 
jsonb_agg(distinct tag_linking_table.sehset_tid) hashtag,
count(distinct social_entity_likes.se_likes_ca) likes
FROM soc_ent social_entity
JOIN fp on fp.fp_id = social_entity.se_id
LEFT JOIN sehset tag_linking_table on tag_linking_table.sehset_seid = social_entity.se_id
LEFT JOIN se_likes social_entity_likes on social_entity.se_id = social_entity_likes.se_likes_seid 
GROUP BY post_id
</code></pre>
<p><a href=""https://i.stack.imgur.com/ebboV.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ebboV.png"" alt=""enter image description here"" /></a></p>
<p>But I am told every where that <code>distinct</code> will degrade the performance (and especially since i will have very large tables).</p>
<p><strong>Question</strong>:  What caused my duplicate problem? and is distinct the correct way to fix it? And if so how can I get the same result without using the <code>distinct</code> keyword?  Thanks.</p>",70035792,2,2,,2021. 11. 19 오후 1:02:19,,2021. 11. 19 오후 1:57:48,2021. 11. 19 오후 1:14:33,,433073,,433073,,1,4,sql|postgresql,43
70133510,Postgresql: how to add date and avoid weekend?,"<p>i have following table <code>proses</code></p>
<pre><code>id title        created_at(Timestamp)    slaTime(Integer)
1  Proses One   2012-11-22 13:50:09.924  4
2  Proses Two   2012-11-22 13:50:09.924  6
</code></pre>
<p>I want to find the deadline with calculation deadline = created_at + slaTime(No. of days). <strong>but</strong> it also avoid a weekend.</p>
<p>for example on id 1, <code>2012-11-22</code> is monday so the deadline is <code>2012-11-26</code> (friday)
but on id 2, the deadline should be <code>2012-11-30</code> (tuesday) not <code>2012-11-28</code>(sunday)</p>",,1,2,,2021. 11. 27 오전 9:20:45,,2021. 11. 27 오전 10:07:24,,,,,17522688,,1,-2,postgresql,44
70313183,Join with aggregate function on empty resultset,"<p>I have a requirement to get sum, avg, count values as 0 following institution_name when lr.proccessed_on date is not matched with the input date. how can I achieve that in the following query</p>
<pre><code>  SELECT bd.id                         as institutionId,
   bd.institution_name           as institution,
   count(lr.id)                  as numberOfTransaction,
   sum(lr.amount)           as totalTransactionAmount,
   avg(lr.amount)           as averageTransactionAmount,
   sum(lr.processing_fee)        as totalProcessingFee
from daily_transaction lr
     join
 (
     select s.id
     from status s
     where s.name not in (:statusName)) s on
     lr.customer_status = s.id
     join account sa on
lr.account = sa.id
     join branch b on
sa.branch = b.id
     right join institution_details bd on
b.institution = bd.id
     join status s2 on
bd.status = s2.id
where (:institutionIdParam is null
or bd.id = :institutionIdParam)


 and (:instutionStatus is null
    or s2.description = :instutionStatus)
  and (:fromDate is null
           and :toDate is null
or cast(lr.processed_on as date) &lt;= :toDate
       and cast(lr.processed_on as date) &gt;= :fromDate)
group by bd.id , bd.institution_name
order by bd.institution_name asc;
</code></pre>",,1,2,,2021. 12. 11 오전 6:52:48,,2021. 12. 13 오전 1:11:19,2021. 12. 11 오전 11:24:05,,14925487,,14925487,,1,0,mysql,44
70337480,Need MYSQL uquery solution,"<p>I have the folowing tree tables one is the stock_items with all the items in it. The stock_in has the stock movements in to the stock and stock_out has the out movements:</p>
<p><a href=""https://i.stack.imgur.com/9mOse.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/9mOse.png"" alt=""enter image description here"" /></a></p>
<p>and I want to get such a query result:</p>
<p><a href=""https://i.stack.imgur.com/kxteN.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kxteN.png"" alt=""enter image description here"" /></a></p>
<p>could some one help me to make this query?</p>",70338898,3,2,,2021. 12. 13 오후 3:59:31,,2021. 12. 13 오후 6:00:06,2021. 12. 13 오후 5:35:29,user17635247,,user17635247,,,1,1,mysql,44
70236792,Partitioning (and splitting) values to fill slots,"<p>I have some sales data and I need to dispatch the quantities in available slots stored in a separate table.</p>
<p>Example of sales data:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>qty</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
</tr>
<tr>
<td>6</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
<p><code>create table sales (id serial primary key, qty int);</code></p>
<p><code>INSERT INTO sales (qty) VALUES (1),(1),(1),(1),(3),(9);</code></p>
<p>And here are the slots (size is cumulative):</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>name</th>
<th>size</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>3</td>
</tr>
<tr>
<td>b</td>
<td>5</td>
</tr>
<tr>
<td>c</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
<p>There is an &quot;invisible&quot; <code>d</code> slot for the remaining quantities. Of course, these slots are not fixed.</p>
<p><code>create table slots (id serial primary key, name text, size int);</code></p>
<p><code>insert into slots (name,size) values ('a',3),('b',5),('c',9);</code></p>
<p>This is the detailed process of the calculation (and expected result):</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>qty</th>
<th>used</th>
<th>total</th>
<th>slot</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>a</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>a</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>1</td>
<td>3</td>
<td>a</td>
<td>Slot is full</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>1</td>
<td>4</td>
<td>b</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>1</td>
<td>5</td>
<td>b</td>
<td>split this sale</td>
</tr>
<tr>
<td>5</td>
<td>cont.</td>
<td>2</td>
<td>6-7</td>
<td>c</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>9</td>
<td>2</td>
<td>8-9</td>
<td>c</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>cont.</td>
<td>7</td>
<td>10-16</td>
<td>d</td>
<td>split again</td>
</tr>
</tbody>
</table>
</div>
<p>My approach is the following:</p>
<pre><code>WITH p1 AS (
    select sales.*,sum(qty) over (order by sales.id) AS tot 
    from sales 
    order by sales.id
)
, p2 AS (
    select p1.id
        ,p1.qty
        , 1+COALESCE(LAG(tot) OVER (ORDER BY p1.id) ,0) AS lag
        , p1.tot
    from p1
)
,p3 AS (
    SELECT id,qty,lag,tot
        , COALESCE( (SELECT id FROM slots WHERE lag&lt;=size ORDER BY size LIMIT 1) , 999) AS slotmin
        , COALESCE( (SELECT id FROM slots WHERE tot&lt;=size ORDER BY size LIMIT 1) , 999) AS slotmax
    FROM p2
)
SELECT p3.id
    ,p3.qty
    -- ,p3.lag
    -- ,p3.tot
    -- ,p3.slotmin
    -- ,p3.slotmax
    ,COALESCE(slots.size-lag+1,p3.qty) AS qtyconsumed
    ,1 AS so
from p3
LEFT JOIN slots ON slots.id=p3.slotmin AND slotmin&lt;&gt;slotmax
UNION
SELECT p3.id
    ,p3.qty
    -- ,p3.lag
    -- ,p3.tot
    -- ,p3.slotmin
    -- ,p3.slotmax
    ,COALESCE(p3.qty-(slots.size-lag+1),0) AS qtyconsumed
    ,2 AS so
from p3
LEFT JOIN slots ON slots.id=p3.slotmin
WHERE slotmin&lt;&gt;slotmax
ORDER BY id,so

</code></pre>
<p><em>I deliberately left some commented columns to ease understanding/debugging my mental process</em></p>
<p>Which gives the following result:</p>
<pre><code> id | qty | qtyconsumed | so 
----+-----+-------------+----
  1 |   1 |           1 |  1
  2 |   1 |           1 |  1
  3 |   1 |           1 |  1
  4 |   1 |           1 |  1
  5 |   3 |           1 |  1
    |     |           2 |  2
  6 |   9 |           2 |  1
    |     |           7 |  2
(8 lignes)
</code></pre>
<p>The code is pretty ugly and will only work for one split: I could very well have only one sale of qty=20 that should split to 4 slots.</p>
<p>My question unfolds in 2 parts:</p>
<ol>
<li><p>Is it possible to do that splitting in more than 2 slots without going through the mess of cursors or solutions alike? I am guessing <em>WITH RECURSIVE</em> but there could be something smarter.</p>
</li>
<li><p>How can I optimize this (particularly the search for the closest slot in <code>p3</code>) because the real case involves millions of rows?</p>
</li>
</ol>",70238321,1,2,,2021. 12. 5 오후 5:28:41,,2021. 12. 5 오후 9:18:23,2021. 12. 5 오후 5:35:20,,1658533,,1658533,,1,3,postgresql,45
70243319,Unknown column 'ename' in 'field list',"<p>I don't understand how to fix this. PhpMyAdmin cannot find columns. I even gave each query a name but it doesn't work.</p>
<pre><code>SELECT ename, 
       deptno FROM ( SELECT sal 
                     FROM emp T
                   ) as E 
WHERE deptno = 10;
</code></pre>",,3,2,,2021. 12. 6 오전 9:28:59,,2021. 12. 6 오전 10:03:35,2021. 12. 6 오전 10:03:35,,16461952,,16822567,,1,-1,mysql,45
70255538,Split a string into multiple columns using the whitespaces,"<p>I have a data base with around 200 categories, however they are not properly classified.</p>
<p>Take the following as an example:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>prod_id</th>
<th>prod_cat</th>
<th>pc_code</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>101 dishwasher detergent</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>102 laundry detergent</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>501 disposable diapers</td>
<td>5</td>
</tr>
<tr>
<td>4</td>
<td>502 non-disposable diapers</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<p>I cannot group them by the pc_code since they are actually 2 subcategories (at least) per pc_code.</p>
<p>I would like to group them by &quot;detergent&quot; or &quot;diapers&quot; (there are 197 of them), and I cannot, or I would rather not do:</p>
<pre><code>    SELECT
        prod_cat 
    FROM
        markets.products
    WHERE
        pc_code = 1
    GROUP BY pc_code
    ORDER BY pc_code;
</code></pre>
<p>for every one of the 197 categories. Although I know that if I implement a for loop in R for example, I could get a group per category.</p>
<p>However I have thought that it would be <em>cleaner</em> to split the <strong>prod_cat</strong> field into:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>prod_id</th>
<th>prod_cat_no</th>
<th>prod_sub_cat</th>
<th>prod_cat</th>
<th>pc_code</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>101</td>
<td>dishwasher</td>
<td>detergent</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>102</td>
<td>laundry</td>
<td>detergent</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>501</td>
<td>disposable</td>
<td>diapers</td>
<td>5</td>
</tr>
<tr>
<td>4</td>
<td>502</td>
<td>non-disposable</td>
<td>diapers</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<p>And group by prod_cat. So I would like to split the column in the middle into three columns using the whitespaces, but I have no idea on how to.</p>
<p>Thank you very much in advance.</p>",,1,2,,2021. 12. 7 오전 5:58:28,,2021. 12. 7 오전 6:07:51,,,,,16872378,,1,0,mysql,46
70347501,Getting a value without duplication,"<p>Is there a way to get a value from a table that joins on multiple rows?</p>
<p>For example:</p>
<p>table 1 has a unique row with a unique transaction</p>
<p>table 2 has many rows that join on A because it's a balance sheet</p>
<p>I only need a single value (account) from a particular subset of columns in table 2 whose rows are duplicates in every way apart from the date.</p>
<p>When I join table 2 onto table 1 I get a lot of duplication because of the different dates.</p>
<pre><code>SELECT table1.transaction,table2.account
FROM table1
INNER JOIN table2 ON table1.key = table2.table1_key
WHERE table2.account = '343' 
</code></pre>
<p>The row from table1 might look like this:</p>
<pre><code>key: 1, transaction: 200
</code></pre>
<p>The entries from table2 would look like this:</p>
<pre><code>key: 1, transaction: 200, date:31/01, account: 343, table1_key: 1
key: 2, transaction: 200, date:28/02, account: 343, table1_key: 1
key: 3, transaction: 200, date:31/03, account: 343, table1_key: 1
key: 4, transaction: 200, date:30/04, account: 343, table1_key: 1
</code></pre>
<p>I'm brand new to SQL so not sure if this is enough info. If you need any more information, please let me know.</p>",,1,2,,2021. 12. 14 오전 10:40:15,,2021. 12. 14 오후 12:13:32,2021. 12. 14 오전 10:57:16,,14034750,,14034750,,1,0,sql|postgresql,46
70296132,Ensuring no dupe ids in query return,"<p>So for the following schema:</p>
<pre><code>CREATE TABLE activity (
    id integer NOT NULL,
    start_date date NOT NULL
);

CREATE TABLE account (
    id integer NOT NULL,
    name varchar NOT NULL
);

CREATE TABLE contact (
    id integer NOT NULL,
    account_id integer NOT NULL,
    name varchar NOT NULL
);

CREATE TABLE activity_contact (
    id integer NOT NULL,
    contact_id integer NOT NULL,
    activity_id integer NOT NULL
);

insert into activity(id, start_date)
values
(1, '2021-11-03'),
(2, '2021-10-03'),
(3, '2021-11-02');

insert into account(id, name)
values
(1, 'Test Account');

insert into contact(id, account_id, name)
values
(1, 1, 'John'),
(2, 1, 'Kevin');

insert into activity_contact(id, contact_id, activity_id)
values
(1, 1, 1),
(2, 2, 1),
(3, 2, 2),
(4, 1, 3);
</code></pre>
<p>You can see that there are 3 activities and each contact has two. What i am searching for is the number of activities per account in the previous two months. So I have the following query</p>
<pre><code>SELECT contact.account_id AS accountid,
    count(*) FILTER (WHERE date_trunc('month'::text, activity.start_date) = date_trunc('month'::text, CURRENT_DATE - '1 mon'::interval)) AS last_month,
    count(*) FILTER (WHERE date_trunc('month'::text, activity.start_date) = date_trunc('month'::text, CURRENT_DATE - '2 mons'::interval)) AS prev_month
FROM activity
JOIN activity_contact ON activity_contact.activity_id = activity.id
JOIN contact ON contact.id = activity_contact.contact_id
JOIN account ON contact.account_id = account.id
GROUP BY contact.account_id;
</code></pre>
<p>This returns:</p>
<pre><code>accountid   last_month  prev_month
    1           3           1
</code></pre>
<p>However this is incorrect. There are only 3 activities, its just that each contact sees activity 1. so it is counting that activity twice. Is there a way for me to only count each activity id one time so there is no duplication?</p>",70297085,1,2,,2021. 12. 9 오후 8:13:13,,2021. 12. 13 오후 4:46:42,,,,,1100102,,1,2,sql|postgresql,48
70193979,"You have an error in your SQL syntax; syntax to use near 'CREATE TABLE `users` ( `id` INT(11) NULL AUTO_INCREMENT, `hex_id` VARCHAR(10' at line 25","<blockquote>
<p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE <code>users</code> ( <code>id</code> INT(11) NULL AUTO_INCREMENT, <code>hex_id</code> VARCHAR(10' at line 25</p>
</blockquote>
<pre><code>CREATE TABLE `characters` (
  `id` INT(11) NULL AUTO_INCREMENT,
  `owner` VARCHAR(50) DEFAULT NULL,
  `first_name` VARCHAR(50) NOT NULL DEFAULT 'John',
  `last_name` VARCHAR(50) NOT NULL DEFAULT 'Doe',
  `date_created` TIMESTAMP NOT NULL DEFAULT current_timestamp(),
  `cash` INT(9) DEFAULT 500,
  `bank` INT(9) NOT NULL DEFAULT 5000,
  `phone_number` BIGINT(11) NOT NULL DEFAULT 0,
  `dob` DATE NOT NULL DEFAULT '0000-00-00',
  `story` TEXT NOT NULL,
  `new` INT(1) NOT NULL DEFAULT 1,  
  `deleted` INT(11) NOT NULL DEFAULT 0,
  `deletion_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
  `gender` INT(1) NOT NULL DEFAULT 0,
  `jail_time` INT(11) NOT NULL DEFAULT 0,
  `dirty_money` INT(11) NOT NULL DEFAULT 0,
  `gang_type` INT(11) NOT NULL DEFAULT 0,
  `jail_time_mobster` INT(11) NOT NULL DEFAULT 0,
  `judge_type` INT(11) NOT NULL DEFAULT 0,
  `iswjob` INT(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (id)
);

CREATE TABLE `users` (
  `id` INT(11) NULL AUTO_INCREMENT,
  `hex_id` VARCHAR(100) DEFAULT NULL,
  `steam_id` VARCHAR(50) DEFAULT NULL,
  `community_id` VARCHAR(100) DEFAULT NULL,
  `license` VARCHAR(255) DEFAULT NULL,
  `name` VARCHAR(255) NOT NULL DEFAULT 'Uknown',
  `ip` VARCHAR(50) NOT NULL DEFAULT 'Uknown',
  `rank` VARCHAR(50) NOT NULL DEFAULT 'user',
  `date_created` TIMESTAMP NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (id)
);

CREATE TABLE `users_whitelist` (
  `id` INT(11) NULL AUTO_INCREMENT,
  `steam_id` VARCHAR(50) DEFAULT NULL,
  `power` INT(11) NOT NULL DEFAULT 0,
  `admin_name` TEXT NOT NULL,
  `user_name` TEXT NOT NULL,
  `user_ip` TEXT NOT NULL,
  PRIMARY KEY (id)
);
</code></pre>",,1,2,,2021. 12. 2 오전 3:48:47,,2021. 12. 2 오전 5:45:30,2021. 12. 2 오전 3:54:54,,6436191,,16312069,,1,0,mysql,5680
70063931,calculate date in 1 min interval postgres,"<p>I have a Table like this:</p>
<pre><code>create table simulation_book_data 
(
    dt date,
    t time without time zone,
    price numeric   
)
</code></pre>
<p>the lines look like this:</p>
<pre><code>&quot;2021-11-17&quot;    &quot;06:39:37.7663&quot; 2
&quot;2021-11-17&quot;    &quot;06:39:38.7663&quot; 5
&quot;2021-11-17&quot;    &quot;06:39:39.7663&quot; 0
&quot;2021-11-17&quot;    &quot;06:39:40.7663&quot; 9
&quot;2021-11-17&quot;    &quot;06:39:41.7663&quot; 3
&quot;2021-11-17&quot;    &quot;06:39:42.7663&quot; 7
&quot;2021-11-17&quot;    &quot;06:39:43.7663&quot; 5
&quot;2021-11-17&quot;    &quot;06:39:44.7663&quot; 6
&quot;2021-11-17&quot;    &quot;06:39:45.7663&quot; 3
&quot;2021-11-17&quot;    &quot;06:39:46.7663&quot; 1
&quot;2021-11-17&quot;    &quot;06:39:47.7663&quot; 2
&quot;2021-11-17&quot;    &quot;06:39:48.7663&quot; 5
&quot;2021-11-17&quot;    &quot;06:39:49.7663&quot; 8
&quot;2021-11-17&quot;    &quot;06:39:50.7663&quot; 9
&quot;2021-11-17&quot;    &quot;06:39:51.7663&quot; 4
&quot;2021-11-17&quot;    &quot;06:39:52.7663&quot; 5
&quot;2021-11-17&quot;    &quot;06:39:53.7663&quot; 6
&quot;2021-11-17&quot;    &quot;06:39:54.7663&quot; 6
&quot;2021-11-17&quot;    &quot;06:39:55.7663&quot; 7
&quot;2021-11-17&quot;    &quot;06:39:56.7663&quot; 8
&quot;2021-11-17&quot;    &quot;06:39:57.7663&quot; 9
&quot;2021-11-17&quot;    &quot;06:39:58.7663&quot; 7
&quot;2021-11-17&quot;    &quot;06:39:59.7663&quot; 8
&quot;2021-11-17&quot;    &quot;06:40:00.7663&quot; 9
&quot;2021-11-17&quot;    &quot;06:40:01.7663&quot; 1
</code></pre>
<p>I want to sum the price column per minute, but couldn't find how to do range with time (not timestamp)</p>",70064743,2,2,,2021. 11. 22 오전 10:01:05,,2021. 11. 22 오전 11:20:41,2021. 11. 22 오전 11:06:05,,2275388,,13928440,,1,1,sql|postgresql,49
70104609,What is the right way to count records at different points in time?,"<p>I am trying to determine what the right way to get a cumulative count of items for various points in time is, e.g.:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Time window</th>
<th>Item Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>Days 0 - 1</td>
<td>4</td>
</tr>
<tr>
<td>Days 0 - 2</td>
<td>6</td>
</tr>
<tr>
<td>Days 0 - 3</td>
<td>7</td>
</tr>
<tr>
<td>Days 0 - 4</td>
<td>12</td>
</tr>
<tr>
<td>Days 0 - 5</td>
<td>15</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>Days 0 - N</td>
<td>M</td>
</tr>
</tbody>
</table>
</div>
<p>I am not necessarily interested in starting from &quot;0&quot;, but looking at the cumulative item count over the last 7, 30 or however many days.</p>
<p>The closest I've been able to come up with is something like this:</p>
<pre><code>select * 
from (values (0),(1),(2),(3),(4),(5),(6)) as days (d)
left join lateral (
    select count(distinct item.id)
    from item
    where EXTRACT(EPOCH FROM CURRENT_TIMESTAMP - item.creation_time) / 3600 / 24 &gt;= days.d
) item_count on true;

</code></pre>
<p>I'm sure there is something in SQL, and more specifically Postgres, to do this much more efficiently. What SQL feature can help me with this?</p>",70106413,1,2,,2021. 11. 25 오전 12:43:22,,2021. 11. 25 오전 5:57:24,,,,,14383028,,1,0,sql|postgresql,49
70379895,How to search data from database by alias search term?,"<p>For Example, I have a table like</p>
<pre><code>| id | country | search term              |
 ----   -------   --------------------------
| 1  | Paris   |  light country, Eiffel, tower|
</code></pre>
<p>whatever the data I search in the search term it has to show the country Paris.
how to implement that table structure for it?</p>",,1,2,,2021. 12. 16 오후 1:32:20,,2021. 12. 17 오전 1:53:02,2021. 12. 16 오후 1:33:44,,10106580,,17383115,,1,0,sql|postgresql,53
70157101,Complex aggregation with select,"<p>I have table in DB like this (ID column is not a unique UUID, just some object ID, primary key still exists, but removed for example)</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">ID</th>
<th style=""text-align: center;"">Option</th>
<th style=""text-align: center;"">Value</th>
<th style=""text-align: center;"">Number of searches</th>
<th style=""text-align: center;"">Search date</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">abc</td>
<td style=""text-align: center;"">a</td>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2021-01-01</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">abc</td>
<td style=""text-align: center;"">b</td>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2021-01-01</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">abc</td>
<td style=""text-align: center;"">a</td>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2021-01-02</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">abc</td>
<td style=""text-align: center;"">b</td>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-01-02</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">def</td>
<td style=""text-align: center;"">a</td>
<td style=""text-align: center;"">5</td>
<td style=""text-align: center;"">2021-01-01</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">def</td>
<td style=""text-align: center;"">b</td>
<td style=""text-align: center;"">6</td>
<td style=""text-align: center;"">2021-01-01</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">def</td>
<td style=""text-align: center;"">a</td>
<td style=""text-align: center;"">7</td>
<td style=""text-align: center;"">2021-01-02</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">def</td>
<td style=""text-align: center;"">b</td>
<td style=""text-align: center;"">8</td>
<td style=""text-align: center;"">2021-01-02</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
</tr>
<tr>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
<td style=""text-align: center;"">...</td>
</tr>
<tr>
<td style=""text-align: center;"">N</td>
<td style=""text-align: center;"">xyz</td>
<td style=""text-align: center;"">xyz</td>
<td style=""text-align: center;"">M</td>
<td style=""text-align: center;"">any date</td>
</tr>
</tbody>
</table>
</div>
<p>I want to get a some kind of statistic report like</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">ID</th>
<th style=""text-align: center;"">Total searches</th>
<th style=""text-align: center;"">Option</th>
<th style=""text-align: center;"">Total number of option searches</th>
<th style=""text-align: center;"">Value</th>
<th style=""text-align: center;"">Total value searches</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">36</td>
<td style=""text-align: center;"">abc</td>
<td style=""text-align: center;"">10</td>
<td style=""text-align: center;"">a</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;"">b</td>
<td style=""text-align: center;"">6</td>
</tr>
<tr>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;"">def</td>
<td style=""text-align: center;"">26</td>
<td style=""text-align: center;"">a</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;""></td>
<td style=""text-align: center;"">b</td>
<td style=""text-align: center;"">14</td>
</tr>
</tbody>
</table>
</div>
<p>Is it possible in some way? UNION isn't working were, clause GROUP BY also have no idea how can solve that</p>
<p>I can do it easily in kotlin, just request everything and aggregate to classes like that</p>
<pre class=""lang-kotlin prettyprint-override""><code>    data class SearchAggregate (
        val id: String,
        val options: List&lt;Option&gt;,
        val values: List&lt;Value&gt;
    )
    
    data class Option (
        val name: String,
        val totalSearches: Long
    )

    data class Value(
        val name: String,
        val totalSearches: Long
    )
</code></pre>
<p>and export to file but I have to request data by SQL</p>",70157350,2,2,,2021. 11. 29 오후 3:24:46,,2021. 11. 29 오후 10:17:54,2021. 11. 29 오후 10:17:54,,4555810,,4555810,,1,1,sql|postgresql,57
70250224,Select unique tuple of rows with specific conditions,"<p>Consider a table called <code>HotelBooking</code> containing 2 columns: <code>email</code> and <code>dateOfBooking</code>.</p>
<p>How do I return all unique tuples (so 2 columns: <code>email1</code> and <code>email2</code>) that made at least one booking on exactly 1 same dateOfBooking. This means I do not want to return any tuples that made at least one booking on the same day but on multiple occasions.</p>
<p>A starting point:</p>
<pre><code>SELECT hb1.email AS email1, hb2.email AS email2, hb1.dateofbooking 
FROM hotelbooking hb1
INNER JOIN hotelboeking hb2 USING (email, tijdstip)
</code></pre>",,2,2,,2021. 12. 6 오후 6:30:09,,2021. 12. 12 오전 6:02:45,2021. 12. 6 오후 7:22:16,,1367454,,17606103,,1,0,sql|postgresql,57
70379495,Merge the results from multiple tables side by side in PostgreSQL,"<p>I have 3 tables using with I need to make a resulting table.</p>
<p><strong>Scenario:</strong></p>
<ol>
<li>The table 'Incoming Sentences' contains the steram of sentences
flowing in to the database.</li>
<li>The table 'tagged_sentences' contains
the sentences from 'incoming_sentences' which are tagged/labelled by the editor. Sometimes the admin overwrites the label if editor makes any mistake in labelling the data. Admin labelled data is final and considered to be correct.</li>
<li>The table 'accounts' contain the user's account level information</li>
</ol>
<p>Below are the tables with sample information.</p>
<p><strong>Incoming Sentences</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>sentence</th>
<th>market</th>
<th>model_identified_intent</th>
<th>tagged_at</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>abcd</td>
<td>en_in</td>
<td>alphabets</td>
<td>12/12/2021</td>
</tr>
<tr>
<td>2</td>
<td>1234</td>
<td>en_in</td>
<td>numeric</td>
<td>11/13/2021</td>
</tr>
<tr>
<td>3</td>
<td>a1b2</td>
<td>en_in</td>
<td>alphaNumeric</td>
<td>10/14/2021</td>
</tr>
<tr>
<td>4</td>
<td>efgh</td>
<td>en_in</td>
<td>alphabets</td>
<td>10/15/2021</td>
</tr>
<tr>
<td>5</td>
<td>e5f6</td>
<td>en_in</td>
<td>alphaNumeric</td>
<td>11/16/2021</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Tagged Sentences</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>tagger_id</th>
<th>sentence_id</th>
<th>tagger_tagged_intent</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>32</td>
<td>1</td>
<td>alphabets</td>
</tr>
<tr>
<td>2</td>
<td>32</td>
<td>2</td>
<td>alphabets</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
<td>3</td>
<td>Numeric</td>
</tr>
<tr>
<td>4</td>
<td>33</td>
<td>2</td>
<td>Numeric</td>
</tr>
<tr>
<td>5</td>
<td>33</td>
<td>3</td>
<td>alphaNumeric</td>
</tr>
</tbody>
</table>
</div>
<p><strong>User Account Table</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>id</th>
<th>user_role</th>
<th>email</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>32</td>
<td>editor</td>
<td>editor@editor.com</td>
<td>editor123</td>
</tr>
<tr>
<td>33</td>
<td>admin</td>
<td>admin@admin.com</td>
<td>admin456</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Expected Output:</strong></p>
<p>I want to pull the result as 'total tagged senteces per month' in one column and 'total corrections per month by the admin'. Through which the error rate can be known.</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>year-month</th>
<th>total_tagged</th>
<th>Total Error (Corrected by admin)</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2021-11</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2021-12</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<p>Requesting your help in solving this. I tried the below code. But it isn't working as expected.</p>
<pre><code>WITH cte1 AS (SELECT tggs.id                                       id,
                     tggs.sentence                              AS sentence,
                     tggs.market                                AS market,
                     tggs.prod_identified_intent                AS prod_identified_intent,
                     tggs.tagged_at                             AS tagged_at,
                     ROW_NUMBER() OVER (PARTITION BY tagged_at) AS rn
              FROM tagging_sentences tggs),
     cte2 AS (SELECT tgds.sentence_id_id AS sentence_id,
                     tgds.tagger_id_id   AS tagger_id,
                     tgds.tagged_intent  AS tagged_intent
              FROM tagged_sentences tgds),
     cte3 AS (SELECT acts.id AS account_id, acts.email AS email, acts.role AS role FROM accounts AS acts),
     cte4 AS (SELECT tggs.tagged_at, COUNT(*) AS count, ROW_NUMBER() OVER (PARTITION BY count(*)) AS rn
              FROM tagging_sentences AS tggs
                       JOIN tagged_sentences AS tgds ON tggs.id = tgds.sentence_id_id
                       JOIN accounts acts ON tgds.tagger_id_id = acts.id
              WHERE tgds.tagger_id_id = 33
                AND tgds.sentence_id_id IN (SELECT tagging_sentences.id
                                            FROM tagging_sentences,
                                                 tagged_sentences
                                            WHERE tagged_sentences.tagger_id_id = 32) GROUP BY tagged_at)

SELECT TO_CHAR(cte1.tagged_at, 'YYYY-MM'),
       COUNT(cte1.sentence), cte4.count
FROM cte1
         JOIN cte2 ON cte1.id = cte2.sentence_id
         JOIN cte3 ON cte2.tagger_id = cte3.account_id
         JOIN cte4 ON cte1.rn = cte4.rn
GROUP BY TO_CHAR(cte1.tagged_at, 'YYYY-MM'), TO_CHAR(cte4.tagged_at, 'YYYY-MM'), cte4.count;
</code></pre>",70400182,1,2,,2021. 12. 16 오후 1:02:19,0,2021. 12. 18 오전 12:39:00,2021. 12. 17 오전 6:13:42,,12839983,,12839983,,1,1,sql|postgresql,315
70226184,"In SQL, how do I pivot the rows and columns summing up the sales according to product_id?","<pre><code>SELECT *
FROM 
    (SELECT *
     FROM salestotal) x
PIVOT
    (SUM(sales)
        FOR product_id IN ([1256], [4437], [7684])
    ) p
</code></pre>
<p>This the code that I tried. SQL fiddle says that something wrong with the code.</p>
<p><a href=""https://i.stack.imgur.com/eP9uR.png"" rel=""nofollow noreferrer"">the table for reference</a></p>
<p><a href=""http://sqlfiddle.com/#!9/bdc694/40/0"" rel=""nofollow noreferrer"">the fiddle</a></p>",,2,2,,2021. 12. 4 오후 1:48:53,,2021. 12. 5 오전 11:14:40,2021. 12. 4 오후 2:03:12,,13302,,17165761,,1,0,sql|postgresql,60
70194728,Is there any way to reduce the PostgreSQL performance deviation between the multiple iterations?,"<p>NOPM values captured with HammerDB-v4.3 scripts (schema_tpcc.tcl and
test_tpcc.tcl ) for multiple trails.
The expected performance deviation between the multiple trials should be less
than 2%, but observed more.</p>
<p>Hardware configuration</p>
<pre><code>Architecture        x86_64
CPU op-mode(s)      32-bit, 64-bit
Byte Order:          Little Endian
CPU(s):              256
On-line CPU(s) list: 0-255
Thread(s) per core:  2
Core(s) per socket:  64
Socket(s):           2
NUMA node(s):        8
L1d cache:           32K
L1i cache:           32K 
L2 cache:            512K
L3 cache:            16384K
OS: RHEL8.4
RAM SIZE:512
SSD:1TB
</code></pre>
<p>Postgresql.conf</p>
<pre><code>autovacuum_max_workers = 16
autovacuum_vacuum_cost_limit = 3000
checkpoint_completion_target = 0.9
checkpoint_timeout = '15min'
cpu_tuple_cost = 0.03
effective_cache_size = '350GB'
listen_addresses = '*'
maintenance_work_mem = '2GB'
max_connections = 1000
max_wal_size = '128GB'
random_page_cost = 1.1
shared_buffers = '128GB'
wal_buffers = '1GB'
work_mem = '128MB'
random_page_cost = 1.1
effective_io_concurrency = 200 
</code></pre>
<p>HammerDB Scripts
&gt;&gt;cat schema.tcl</p>
<pre><code>    #!/bin/tclsh
    dbset db pg
    diset connection pg_host localhost
    diset connection pg_port 5432
    diset tpcc pg_count_ware 400
    diset tpcc pg_num_vu 50
    print dict
    buildschema
    waittocomplete
</code></pre>
<p>RUN TEST on i.e. start with 1VU then 2, 4, etc</p>
<pre><code>  | Virtual Users | Trail-1(NOPM) | Trail-2(NOPM) | %diff   |
  |---------------|---------------|---------------|---------|
  | 12            | 99390         |     92913     | 6.516752|
  | 140           | 561429        |    525408     | 6.415949| 
  | 192           | 636016        |    499574     | 21.4526 |
  | 230           | 621644        |    701882     | 12.9074 |
</code></pre>",,1,2,,2021. 12. 2 오전 5:48:45,,2021. 12. 3 오전 11:41:35,,,,,17568318,,1,0,postgresql,61
70066759,How to group by period of time?,"<p>I have a table with messages and I need to find chats where were two or more messages in period of 10 seconds.
table</p>
<pre><code>id message_id time
1  1          13:09:00
1  2          13:09:01
1  3          13:09:50
2  1          15:18:00           
2  2          15:20:00
3  1          15:00:00
3  2          15:10:00
3  3          15:10:10
</code></pre>
<p>So the result looks like</p>
<pre><code>id
1
3
</code></pre>
<p>I can't come up with the idea how to group by a period or maybe it can be done other way?</p>
<pre><code>select id
from t
group by id, ?
having count(message_id) &gt; 1
</code></pre>",,1,2,,2021. 11. 22 오후 1:44:23,,2021. 11. 24 오전 11:53:54,2021. 11. 24 오전 11:53:54,,15974340,,15974340,,1,2,sql|postgresql,62
70330132,Postgres configuration for use in embedded?,"<p>I have the same 5000 key/value pairs being read/written continuously (every 150ms or so) on a Debian system equivalent to a Raspberry Pi 3.</p>
<p>I don't care about persisting this data, it's recreated whenever my application server is launched.</p>
<p>Initially I used SQLite for this, using an in-memory table. However, now I want to access the data from multiple processes (using a tmpfs didn't work out great) and even from a remote client, as well as add an HTTP API, use LISTEN/NOTIFY for change notifications, so I'd like to switch to PG which is more appropriate for these.</p>
<p>Given these circumstances:</p>
<ul>
<li>small dataset that fits in RAM</li>
<li>no need for persistence</li>
<li>low power PC</li>
<li>running 24/7 forever</li>
<li>don't want to thrash the flash storage</li>
</ul>
<p>...what would be a good approach to configuring PG?</p>
<p>I found <a href=""https://stackoverflow.com/questions/11729690/postgresql-equivalent-of-mysql-memory-tables"">this</a> 10yo question and the last update was 5 years ago saying to use a 3rd party extension, which I'm not too excited about.</p>",,1,2,,2021. 12. 13 오전 5:03:39,,2021. 12. 13 오전 7:20:50,,,,,12875055,,1,1,postgresql,62
70069841,Oracle to Postgres Migration (Top Row with Order by),"<p>Migrating a code from Oracle to Postgres:</p>
<p>Oracle Code:</p>
<pre><code>SELECT *
FROM (SELECT customers.*
      FROM customers
      WHERE customer_id &gt; 4500
      ORDER BY last_name)
WHERE ROWNUM &lt; 3;
</code></pre>
<p>To the best of my knowledge, it's Oracle's limitation that we need to add a subquery to get a proper sorted result if have to limit the output with rownum.</p>
<p>Do Postgres also carry the same limitations or can I convert the code in Posgtes into a single query as under?</p>
<pre><code>SELECT customers.*
      FROM customers
      WHERE customer_id &gt; 4500
      ORDER BY last_name
      LIMIT 3;
</code></pre>",70069996,1,2,,2021. 11. 22 오후 5:16:30,,2021. 11. 22 오후 5:34:07,2021. 11. 22 오후 5:34:07,,330315,,3706888,,1,0,sql|postgresql,63
70306909,MySQL 5.6 Slave has no Binlog generated,"<p>In my MySQL 5.6 environment, I have A -&gt; B -&gt; C replication setup. On C slave, there is no mysql binlog generated since I set it up as a slave. But the replication is running per <code>show slave status</code>. The Slave_SQL_Running_State showed &quot;Slave has read all relay log; waiting for the slave I/O thread to update it&quot;. The <code>show master status</code> on C slave showed it is on &quot;mysql-bin.000003&quot; position 120. That file was dated on Nov 29, not today. I have checked C slave my.cnf and I have binlog configured:</p>
<pre><code>log-bin=/mysql-binlog/mysql-bin
binlog_format=mixed
max_binlog_size = 200M
</code></pre>
<p>There is relay-bin log on C slave generated and kept current.</p>
<p>What is the reason C slave has no binlog?</p>",,0,2,,2021. 12. 10 오후 3:33:54,,2021. 12. 10 오후 3:33:54,,,,,14720814,,1,0,mysql,65
70312560,Not allow postgres user to override default column value,"<p>I have a table that looks like this:</p>
<pre><code>CREATE TABLE tabley(
   log          text, -- something like this you get the point
   created      timestamptz NOT NULL DEFAULT NOW()
)
</code></pre>
<p>And I want to let a postgres user <code>INSERT</code> their own arbitrary <code>log</code> but I want to make sure they are not allowed to set their own arbitrary <code>created</code>. Is there any clean way to enforce this?</p>",,0,2,,2021. 12. 11 오전 4:14:06,,2021. 12. 11 오전 4:14:06,,,,,7812055,,1,0,postgresql,65
70316027,Aggregate window function and outer join,"<p>I am trying to solve the following question in a performance-oriented way. My current implementation involves ugly loops and is painfully slow.</p>
<p>Specifically, I have a table (transactions) of timestamped orders per customer for various items:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>timestamp</th>
<th>customer</th>
<th>item</th>
<th>volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>2000</td>
<td>Joe</td>
<td>A</td>
<td>100</td>
</tr>
<tr>
<td>2001</td>
<td>Joe</td>
<td>A</td>
<td>200</td>
</tr>
<tr>
<td>2001</td>
<td>Doe</td>
<td>A</td>
<td>100</td>
</tr>
</tbody>
</table>
</div>
<p>Besides, I have a second table (valuations) showing prices for the items:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>timestamp</th>
<th>item</th>
<th>price</th>
</tr>
</thead>
<tbody>
<tr>
<td>2000</td>
<td>A</td>
<td>1.1</td>
</tr>
<tr>
<td>2001</td>
<td>A</td>
<td>1.2</td>
</tr>
<tr>
<td>2002</td>
<td>A</td>
<td>1.3</td>
</tr>
</tbody>
</table>
</div>
<p>Now, I would like to track the value (price*stock) of each customer's stock (cumulative volume) sampled according to the timestamp in the valuations table:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>timestamp</th>
<th>customer</th>
<th>item</th>
<th>stock</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>2000</td>
<td>Joe</td>
<td>A</td>
<td>100</td>
<td>110</td>
</tr>
<tr>
<td>2001</td>
<td>Joe</td>
<td>A</td>
<td>300</td>
<td>360</td>
</tr>
<tr>
<td>2002</td>
<td>Joe</td>
<td>A</td>
<td>300</td>
<td>390</td>
</tr>
<tr>
<td>2001</td>
<td>Doe</td>
<td>A</td>
<td>100</td>
<td>120</td>
</tr>
<tr>
<td>2002</td>
<td>Doe</td>
<td>A</td>
<td>100</td>
<td>130</td>
</tr>
</tbody>
</table>
</div>
<p>Essentially, this is going to be some form of (right) joining transactions and valuations. However, the catch here is that I would have to do one right join per (customer, item) combination. In other words, for every (customer, item) I would have to join the full set of timestamps.</p>
<p>My current (potentially pretty inefficient) solution loops across customers. For every customer, it creates the cumulative volume, right joins valuations and forward-fills (using the last function) columns coming from the transactions table:</p>
<pre><code>CREATE OR REPLACE FUNCTION public.last_func(anyelement, anyelement)
 RETURNS anyelement
 LANGUAGE sql
 IMMUTABLE STRICT
AS $function$
select $2;
$function$
;

   create or replace function last_func(anyelement, anyelement)
returns anyelement language sql immutable strict
as $$
    select $2;
$$;
    
select 
    valuations.timestamp,
    last(t.customer) over (partition by valuations.item order by valuations.timestamp) as customer,
    valuations.item,
    last(t.stock) over (partition by valuations.item order by valuations.timestamp) as stock,
    last(t.stock) over (partition by valuations.item order by valuations.timestamp) * valuations.price as value
from (select 
    timestamp,
    customer,
    item,
    volume as order_volume,
    sum(volume) over (partition by item order by item, timestamp) as stock
from 
    transactions
where customer = 'Joe') t
right join 
    valuations on t.timestamp = valuations.timestamp and t.item = valuations.item
</code></pre>
<p>This seems rather inefficient and becomes very slow for a large number of customers. Does anyone have an idea how to do that in one go? Would be great if you could help me out here.</p>
<p>Thanks in advance and best regards</p>",70316938,2,2,,2021. 12. 11 오후 2:36:12,3,2021. 12. 12 오후 6:25:05,2021. 12. 11 오후 2:44:02,,2561280,,2561280,,1,2,sql|postgresql,69
70124780,Get black friday dates in Postgres,"<p>How to get black friday dates in Postgres ?
IT will be the last friday of November month, is it possible to get it somehow ?</p>",70125649,2,2,,2021. 11. 26 오후 12:55:39,,2022. 9. 20 오후 2:40:30,,,,,11145822,,1,-2,postgresql,70
70342055,How to share a postgreSQL database?,"<p>I'm currently working on a project with some colleagues and a colleague of mine linked a database created in her postgreSQL server to our visual studio project, but we don't know how she can share the database with the rest of us, or how can we modify the database without having it.
We're using postgreSQL 14.</p>",70342563,1,2,,2021. 12. 13 오후 11:24:08,1,2021. 12. 14 오전 12:48:59,,,,,17552421,,1,1,postgresql,839
70364602,MySQL filter intervals within intervals of Timestamp field,"<p>I have a requirement, where I have to display employees records who has completed 5 years, 10 years, 15 years. i.e multiple of 5 years. Here the employee records should display upto 1 year i.e if employee completed 5 years it should display from 5 years upto 6 years, after 6 years it should not display the results. I have one another condition, I should get the results of the employees before 3 months from reaching 5,10,15 years
I have written a query, which showing records of all employees who has completed 5,10,15...years.
I am not able to satisy my 2nd condition i.e getting results before 3 months. Below is my query. Any suggestion could be very helpful to me</p>
<pre><code>SELECT e.emp_id, e.first_name, eji.join_date, e.last_name, e.status
  from employee as e
  JOIN employee_job_info as eji
    on e.id = eji.employee_id
 where floor(datediff('2021-12-15', eji.join_date) / 365)
 %5 = 0
   AND DATE_ADD(eji.join_date,
                INTERVAL floor(datediff('2021-12-15', eji.join_date) / 365) YEAR) BETWEEN
       '2021-09-15' AND
       DATE_ADD(DATE_ADD(eji.join_date,
                         INTERVAL
                         floor(datediff('2021-12-15', eji.join_date) / 365) YEAR),
                INTERVAL 1 YEAR)
</code></pre>",70364943,2,2,,2021. 12. 15 오후 1:34:03,,2021. 12. 16 오후 1:39:44,2021. 12. 16 오후 1:39:44,,2453089,,10584416,,1,0,mysql,74
70091842,MySQL FORCE INDEX got unexpected time cost,"<p>Table:</p>
<pre><code>CREATE TABLE `hosts` (
  `id` int NOT NULL AUTO_INCREMENT,
  `host_name` varchar(255) DEFAULT NULL,
  `ip` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unq_ip_host` (`ip`,`host_name`),
  KEY `idx_host` (`host_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
</code></pre>
<p>MySQL version: <code>mysql:5.7.36.</code></p>
<p>Here's the situation, in my project, the IP can match several hosts, I wanna get the result that matches (ip_a,host_a),(ip_b,host_b), so I use following sql:</p>
<pre><code>select * from hosts h
     where (h.ip,h.host_name) in ((&quot;198.168.214.166&quot;,&quot;la-worker-01&quot;)... ...)
</code></pre>
<p>Actually the target set is so large, around 3000 rows, this sql will scan the complete table, and it costs 24s, I tried to use <code>FORCE INDEX (unq_ip_host)</code>, but it still cost a lot of time, almost equals scanning the whole table. Explain result:</p>
<p><code>type: range, key: unq_ip_host, key_len: 768,rows: 8952, filtered: 50.0, extra: Using where</code></p>
<p>Then I tried to use <code>FORCE INDEX (idx_host)</code>, and this is the result of sql explain:</p>
<p><code>type: ALL, key: null, key_len: null,rows: 284000, filtered: 50.0, extra: Using where</code></p>
<p><code>type</code> is <code>ALL</code> which means it won't use the index, this is weird, when I executed the sql, <code>FORCE INDEX (idx_host)</code> costs about 4.1s, but <code>FORCE INDEX (idx_ip_host)</code> costs 24s, this is weird.</p>
<hr />
<pre><code>select count(distinct(ip)) from hosts; // result: 900000
select count(distinct(host_name)) from hosts; // result: 890000
</code></pre>
<p>I can improve the sql but I'm puzzled as to why the two applications of <code>FORCE INDEX</code> provide different results.</p>
<p>Question:</p>
<ol>
<li>Why doesn't MySQL use the index, when I use <code>FORCE INDEX (idx_host)</code>?</li>
<li>Why is scanning the entire table(<code>FORCE INDEX (idx_host)</code>) faster than using index(<code>FORCE INDEX (idx_ip_host)</code>)?</li>
</ol>",,2,2,,2021. 11. 24 오전 7:00:51,,2021. 11. 25 오전 6:16:52,2021. 11. 25 오전 6:04:42,,1766831,,6760995,,1,0,mysql,75
70294227,Converting hours:minutes:seconds to hours:minutes in PostgreSQL,"<p>I have a column <code>cr.crash_time</code> with the data type <code>time</code> in Postgres. It appears as 24hours:minutes:seconds. I don't need the seconds, because they're all :00. I'm seeking to truncate the seconds and return results that just appear as 24hours:minutes.</p>
<p>I've tried the following, none of which worked:</p>
<pre><code>date_trunc('minute', cr.crash_time)
TO_CHAR(cr.crash_time, hh24:mi),
TO_CHAR(cr.crash_time, hh:mi),
cr.crash_time::TIME(hh:mi),
</code></pre>
<p>Any ideas?</p>",,0,2,,2021. 12. 9 오후 5:32:31,,2021. 12. 9 오후 5:32:31,,,,,17302887,,1,0,postgresql,75
70156441,"Unexpected ""division by zero: 0 / 0"" error on BigQuery","<p>I'm working with a Google Ads dataset that is updated daily on BQ. The query was working fine last week, however, when I tried to run it today, I got an error:</p>
<blockquote>
<p>division by zero: 0/0</p>
</blockquote>
<p><a href=""https://i.stack.imgur.com/h4Qpn.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/h4Qpn.png"" alt=""enter image description here"" /></a></p>
<p>Really not sure what I did wrong to get the error because I haven't touched this query since last week. I've already tried <code>SAFE_DIVIDE</code>, but still the same result. Any ideas?</p>",,1,2,,2021. 11. 29 오후 2:36:19,,2021. 11. 29 오후 3:56:40,2021. 11. 29 오후 3:21:13,,4420967,,14463082,,1,-3,google-bigquery,335
70079594,How to extract only rows that contain fields in a given list?,"<p>Consider I have 2 tables One <code>User</code></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>userId</th>
<th>userName</th>
</tr>
</thead>
<tbody>
<tr>
<td>123</td>
<td>user1</td>
</tr>
<tr>
<td>124</td>
<td>user2</td>
</tr>
</tbody>
</table>
</div>
<p>and the other <code>Items</code></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>userId</th>
<th>itemName</th>
</tr>
</thead>
<tbody>
<tr>
<td>123</td>
<td>&quot;item1&quot;</td>
</tr>
<tr>
<td>123</td>
<td>&quot;item2&quot;</td>
</tr>
<tr>
<td>124</td>
<td>&quot;item1&quot;</td>
</tr>
</tbody>
</table>
</div>
<p>Is there a way to get a list of all users who have all the items in a given list <code>(say [&quot;item1&quot;,&quot;item2&quot;])</code> i.e in this case only user - 123 is a valid response. the below would be the expected response in this case</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>userId</th>
<th>userName</th>
</tr>
</thead>
<tbody>
<tr>
<td>123</td>
<td>user1</td>
</tr>
</tbody>
</table>
</div>
<p>Right now I am thinking of pulling in data using <code>in (&quot;item1&quot;,&quot;item2&quot;)</code>  and then processing it in memory.
I am looking for a way to accomplish this using a query.</p>",,5,2,,2021. 11. 23 오전 10:54:08,,2021. 11. 23 오전 11:50:57,2021. 11. 23 오전 11:24:39,,5148933,,5148933,,1,0,sql|postgresql,80
70377902,Create a BigQuery view to get the latest rows from a partitioned (and clustered) table,"<h1>The issue</h1>
<p>I'm trying to create a view to get the latest rows from a partitioned table, filtered on the date partition <code>_LOCALDATETIME</code> and zero or more cluster fields.  I can create a view which uses a partition and I can create a view which handles some filters, but I can't work out the syntax to achieve both.</p>
<h2>An example query requirement</h2>
<pre><code>SELECT fieldA, fieldB, fieldC FROM theView
WHERE date between '2021-01-01' and '2021-12-31' AND
  _CLUSTERFIELD1 = 'foo'
GROUPBY _CLUSTERFIELD2
ORDERBY _CLUSTERFIELD3
</code></pre>
<h1>Table schema</h1>
<pre><code>_LOCALDATETIME
_id
_CLUSTERFIELD1
_CLUSTERFIELD2
_CLUSTERFIELD3
_CLUSTERFIELD4
...other fields
</code></pre>",,1,2,,2021. 12. 16 오전 11:05:00,,2021. 12. 22 오후 7:01:27,2021. 12. 16 오후 12:37:35,,3351176,,3351176,,1,-1,google-bigquery,80
70357373,Select all dates after a certain date,"<p>I'm trying to get all dates after a given date in MySQL, but the results are the exact opposite of what I want.</p>
<pre><code>$sql = &quot;SELECT DISTINCT(DRFDate) FROM tblDRF WHERE DRFDate &gt; $DepartureDate&quot;;
</code></pre>
<p>But this is giving me all the dates <em>before</em> $DepartureDate</p>",,1,2,,2021. 12. 15 오전 1:06:13,,2021. 12. 15 오전 1:10:29,,,,,9655225,,1,0,mysql,81
70331396,pg_wal directory is full in postgres db,"<p>I have postgres 10 where pg_wal is getting full. I have files pg_wal directory from Dec'2020. I have enabled &quot;archive&quot; but I was getting archiver error and my application stopped working. Since this issue is on Production, I have disabled the archive.</p>
<p>Is it safe to remove old files from pg_wal which is dated on Dec'2020 and Jan'2021?</p>
<p>I can see this:</p>
<pre><code>postgres=# SELECT * FROM pg_replication_slots;

 slot_name | plugin | slot_type | datoid | database | temporary | active | active_pid | xmin | catalog_xmin | restart_lsn  | c onfirmed_flush_lsn
-----------+--------+-----------+--------+----------+-----------+--------+------------+------+--------------+--------------+---------------------
  m9t0179g |        |  physical |        |          |         f |      f |            |      |              |   50/B780000 |
       m9t |        |  physical |        |          |         f |      f |            |      |              | 3B0/EB000920 | 
</code></pre>",,1,2,,2021. 12. 13 오전 7:51:32,,2021. 12. 15 오전 5:21:33,2021. 12. 15 오전 5:19:22,,6464308,,17663395,,1,0,postgresql,1107
70099898,PGSQL query to get a list of sequential dates from today,"<p>I am having an calendar table where I have added the list of dates on which no action should be performed.
The table is as follows and the date format is <code>YYYY-MM-DD</code></p>
<pre><code>date        
2021-01-01  
2021-04-05
2021-04-06
2021-04-07  
2021-08-10
2021-11-22
2021-11-23
2021-11-24
2021-12-25
2021-12-31
</code></pre>
<p>Considering today is <code>2021-11-24</code>.
The expected output is</p>
<pre><code>date
2021-11-24
2021-11-23
2021-11-22
</code></pre>
<p>And Considering today is <code>2021-12-25</code>
then the expected output is</p>
<pre><code>date
2021-12-25
</code></pre>
<p>And Considering today is <code>2021-12-27</code>
then the output should contain no data.</p>
<pre><code>date
</code></pre>
<p>It should get me the sequence with today's date in descending order without a break of sequence.
I searched on various posts I did find some of the posts related to my question but the query was little complex with nested subqueries. Is there a way to achieve the output in a more optimized way. I am new to pgsql.</p>",,3,2,,2021. 11. 24 오후 4:48:00,,2021. 11. 24 오후 9:46:54,2021. 11. 24 오후 5:01:31,,12759719,,12759719,,1,1,sql|postgresql,85
70243228,Select max date in two columns with group by in postgresql,"<p>I am trying to select all columns form extract table where I need to select the values which are with latest Upload_Date and latest date_modification among ID column. Basically I want to select max dated values in each ID.</p>
<p>Tried with below qeuiry but getting error as &quot;more than one row returned by a subquery used as an expression&quot;</p>
<pre><code>SELECT *
   FROM public.extract
  WHERE extract.&quot;Upload_Date&quot; = (( SELECT max(extract.&quot;Upload_Date&quot;)
           FROM public.extract))  
           AND extract.&quot;date_modification&quot; = (( 
               SELECT max(extract.&quot;date_modification&quot;)
                FROM public.extract
            group by extract.&quot;ID&quot; ));
</code></pre>
<p>I am new to postgresql. It will be helpful can someone suggest where I am making mistake.</p>
<p>Sample Data looks like</p>
<p><a href=""https://i.stack.imgur.com/6Fkoz.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6Fkoz.png"" alt=""enter image description here"" /></a></p>
<p>Expected output is like this</p>
<p><a href=""https://i.stack.imgur.com/zDd2W.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zDd2W.png"" alt=""enter image description here"" /></a></p>",70243254,1,2,,2021. 12. 6 오전 9:21:23,,2021. 12. 6 오전 11:39:22,2021. 12. 6 오전 9:39:14,,14475827,,14475827,,1,-1,postgresql,86
70188388,Big query Date time in PST,"<p>I have an issue in bigquery. I have a raw table which holds the created_date(date data type) and created_time(datetime data type) . From the raw table i have created an aggregate table which has a column created_date_pst (timestamp datatype) .the created_date_pst is created from the conversion as-TIMESTAMP(created_date,&quot;America/Los_Angeles&quot;) as created_date_pst.</p>
<p>Now the problem is when ever data is inserted from raw table to aggregate table i dont get the correct values or summary of the values (for example sum(calls) ) . i wanted to input the data correctly in aggregate table based on pst timezone. please advise. thank you</p>",,0,2,,2021. 12. 1 오후 5:07:01,,2021. 12. 1 오후 5:07:01,,,,,17321886,,1,0,google-bigquery,87
70108338,how to access one key inside jsonb field?,"<p>Suppose I have a table like this</p>
<pre><code>     Column      │         Type         │                             Modifiers
─────────────────┼──────────────────────┼────────────────────────────────────────────────────────────────────
 id              │ integer              │ not null default
 practice_id     │ character varying(6) │ not null
 date            │ date                 │ not null
 pct_id          │ character varying(3) │
 astro_pu_items  │ double precision     │ not null
 astro_pu_cost   │ double precision     │ not null
 total           │ jsonb                │
</code></pre>
<p>I need to access total field and find the particular key. So if the key name is sub_total how can I find through query. I'm using Postgres 14.1.</p>
<p>I'm not able to find postgres function which can do that. So guide me here</p>",70108506,1,2,,2021. 11. 25 오전 9:02:29,,2021. 11. 25 오전 10:25:17,,,,,16770310,,1,0,postgresql,92
70258541,Why MYSQL return 0 for compare string with Boolean?,"<p>In PHP when I check a string like &quot;Hello&quot; with True/False if string not empty or not equal to zero PHP return True Boolean type , but in MYSQL when I check a string with IS comparison operator , MYSQL return zero for a string like this &quot;Hello&quot;.
Why MYSQL return zero ? &quot;Hello&quot; is a True Boolean Value.</p>
<pre><code>SELECT 'Hello' IS FALSE; -&gt; 1
</code></pre>",,1,2,,2021. 12. 7 오전 10:30:57,,2021. 12. 7 오전 10:50:57,,,,,11802185,,1,-1,mysql,95
70272233,How to use JSON array in JOIN?,"<p>I have got follow data base schema:</p>
<pre><code>CREATE TABLE &quot;public&quot;.&quot;regions&quot; ( 
    &quot;id&quot; Integer DEFAULT nextval('regions_id_seq'::regclass) NOT NULL,
    &quot;ru_name&quot; Character Varying( 100 ),
    &quot;translite_name&quot; Character Varying( 100 ),
    PRIMARY KEY ( &quot;id&quot; ) );
 ;


CREATE TABLE &quot;public&quot;.&quot;tokens&quot; ( 
    &quot;user_id&quot; BigInt NOT NULL,
    &quot;token_start_date&quot; Timestamp Without Time Zone NOT NULL,
    &quot;token_end_date&quot; Timestamp Without Time Zone NOT NULL,
    &quot;regions&quot; JSON,
    &quot;id&quot; Character( 1 ) NOT NULL,
    &quot;access_token&quot; Character Varying( 50 ) NOT NULL,
    PRIMARY KEY ( &quot;id&quot; ) );
 ;

CREATE TABLE &quot;public&quot;.&quot;users&quot; ( 
    &quot;id&quot; BigInt DEFAULT nextval('user_id_sequence'::regclass) NOT NULL,
    &quot;registration_date&quot; Timestamp Without Time Zone NOT NULL,
    &quot;name&quot; Character Varying( 50 ) NOT NULL,
    &quot;lastname&quot; Character Varying NOT NULL,
    &quot;email&quot; Character Varying NOT NULL,
    PRIMARY KEY ( &quot;id&quot; ),
    CONSTRAINT &quot;unique_users_email&quot; UNIQUE( &quot;email&quot; ) );
 ;

</code></pre>
<p>I need to display for every user date of expiring token and regions names for this token.
Something like:</p>
<pre><code>user_id token_end_date region_as_json_object
5 &quot;2021-12-27&quot; [{id: 1, ru_name:&quot;Region1&quot;}, {id: 2, ru_name:&quot;Region2&quot;}]

</code></pre>
<p>I wrote next code:</p>
<pre><code>SELECT 
  ru_name 
FROM &quot;tokens&quot; 
JOIN regions ON regions.id = ANY (json_array_elements_text(regions) )
WHERE user_id = 5 ;
</code></pre>
<p>But it does not work.</p>
<p><a href=""https://i.stack.imgur.com/CB0Aj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/CB0Aj.png"" alt=""enter image description here"" /></a></p>
<p>sample data:</p>
<pre><code>--
-- PostgreSQL database dump
--

-- Dumped from database version 13.1
-- Dumped by pg_dump version 13.1

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: regions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.regions (
    id integer NOT NULL,
    ru_name character varying(100),
    fz223_name character varying(100),
    fz44_name character varying(100),
    translite_name character varying(100)
);


ALTER TABLE public.regions OWNER TO postgres;

--
-- Name: regions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.regions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.regions_id_seq OWNER TO postgres;

--
-- Name: regions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.regions_id_seq OWNED BY public.regions.id;


--
-- Name: tokens; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tokens (
    id character(1) NOT NULL,
    user_id bigint NOT NULL,
    token_start_date timestamp without time zone NOT NULL,
    token_end_date timestamp without time zone NOT NULL,
    access_token character varying(50) NOT NULL,
    regions json
);


ALTER TABLE public.tokens OWNER TO postgres;

--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id bigint DEFAULT nextval('public.user_id_sequence'::regclass) NOT NULL,
    name character varying(50) NOT NULL,
    lastname character varying NOT NULL,
    email character varying NOT NULL,
    registration_date timestamp without time zone NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: regions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.regions ALTER COLUMN id SET DEFAULT nextval('public.regions_id_seq'::regclass);


--
-- Data for Name: regions; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.regions VALUES
    (1, 'Адыгейская республика', 'Adygeya_Resp', 'Adygeja_Resp', 'Adygejskaya_respublika'),
    (2, 'Алтайский край', 'Altayskii__krai', 'Altajskij_kraj', 'Altajskij_kraj'),
    (3, 'Алтайская республика', 'Altay_Resp', 'Altaj_Resp', 'Altajskaya_respublika'),
    (4, 'Амурская область', 'Amurskaya_obl', 'Amurskaja_obl', 'Amurskaya_oblast'),
    (5, 'Архангельская область', 'Arhangelskaya_obl', 'Arkhangelskaja_obl', 'Arhangelskaya_oblast'),
    (6, 'Астраханская область', 'Astrahanskaya_obl', 'Astrakhanskaja_obl', 'Astrahanskaya_oblast'),
    (7, 'Байконур', 'Baikonur_g', 'Bajkonur_g', 'Bajkonur'),
    (8, 'Башкортостан', 'Bashkortostan_Resp', 'Bashkortostan_Resp', 'Bashkortostan'),
    (9, 'Белгородская область', 'Belgorodskaya_obl', 'Belgorodskaja_obl', 'Belgorodskaya_oblast'),
    (10, 'Брянская область', 'Brianskaya_obl', 'Brjanskaja_obl', 'Bryanskaya_oblast'),
    (11, 'Бурятская область', 'Buryatiya_Resp', 'Burjatija_Resp', 'Buryatskaya_oblast');


--
-- Data for Name: tokens; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.tokens VALUES
    ('1', 3, '2020-03-05 00:00:00', '2020-03-08 00:00:00', 'sdfa78saaf4', NULL),
    ('2', 3, '2020-04-08 00:00:00', '2020-04-18 00:00:00', 'asasdfgkfaf4', NULL),
    ('3', 3, '2020-05-15 00:00:00', '2020-09-25 00:00:00', '934rfeasfsad', '[1,2,4]'),
    ('4', 3, '2020-05-15 00:00:00', '2020-09-25 00:00:00', '934rfeasfsad', '[4,5,7]'),
    ('5', 5, '2021-05-15 00:00:00', '2021-12-25 00:00:00', '934rfeasfsad', '[1,4,6,8]'),
    ('6', 5, '2021-06-15 00:00:00', '2022-01-25 00:00:00', '934rfeasfsad', '[12]');


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.users VALUES
    (3, 'Mike', 'Klinton', 'mike@gmail.com', '2010-01-02 00:00:00'),
    (5, 'Piter', 'Miklson', 'piter@gmail.com', '2011-01-02 00:00:00');


--
-- Name: regions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.regions_id_seq', 1, false);


--
-- Name: regions regions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.regions
    ADD CONSTRAINT regions_pkey PRIMARY KEY (id);


--
-- Name: tokens tokens_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tokens
    ADD CONSTRAINT tokens_pkey PRIMARY KEY (id);


--
-- Name: users unique_users_email; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT unique_users_email UNIQUE (email);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: tokens userr_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tokens
    ADD CONSTRAINT userr_id_fk FOREIGN KEY (user_id) REFERENCES public.users(id) MATCH FULL ON UPDATE CASCADE ON DELETE CASCADE;


--
-- PostgreSQL database dump complete
--

</code></pre>",70272908,3,2,,2021. 12. 8 오전 8:52:33,,2021. 12. 8 오전 9:48:41,2021. 12. 8 오전 9:20:45,,1432751,,1432751,,1,1,postgresql,96
70313967,MySQL service not starting on XAMPP,"<p>So I'm trying to start my XAMPP services. My Apache and ProFTPD are starting perfectly fine, however my MySQL service isn't starting. When I check the log, it says this:</p>
<pre><code>ERROR: Failed to restart &quot;mysql&quot;: cannot start service: /opt/lampp/bin/mysql.server: 264: kill: No such process
</code></pre>
<p>Then, after that, when I go to my browser, and go to my local server's PHPMyAdmin, it shows this there:</p>
<p><a href=""https://i.stack.imgur.com/s2LEm.png"" rel=""nofollow noreferrer"">Image</a></p>
<p>What should I do? Please help!</p>",,0,2,,2021. 12. 11 오전 9:24:31,,2021. 12. 11 오전 9:24:31,,,,user17350002,,,1,0,mysql,101
70245795,best way to export bigquery table with nested columns into csv file,"<p>Friends,</p>
<p>I am trying to export BigQuery table with nested columns (Array, Struct) into CSV file by flattening the rows.</p>
<p>I have tried <code>bq export</code> and Python BQ API (<code>from google.cloud import bigquery</code>), both options.</p>
<p>Which approach would be better with respect to network performance and job scheduling ?</p>
<p>I was thinking of scheduling a job either on Scheduler or on Composer, which will run the export script to write csv file on cloud storage.</p>
<p>I know that <code>bq export</code> requires cloud sdk, whereas Python BQ API is suitable with Cloud Function. But trying to understand which approach is best w.r.t to performance. Is there any recommendation ?</p>
<p>Also any link related to them would be helpful.</p>
<p>Regards,
Sant</p>",70300520,1,2,,2021. 12. 6 오후 12:50:42,,2021. 12. 10 오전 6:23:53,2021. 12. 8 오전 5:09:51,,8178073,,8178073,,1,0,google-bigquery,360
70319816,"Using dbeaver 'SQL Error [42830]: ERROR: there is no unique constraint matching given keys for referenced table ""Clinic""'","<p>Really struggling with the below SQL syntax. I keep getting the error:</p>
<blockquote>
<p>SQL Error [42830]: ERROR: there is no unique constraint matching given keys for referenced table &quot;Clinic&quot;</p>
</blockquote>
<p>I've tried using unique and can't seem to work out the issue. Appreciate any help. Thanks</p>
<pre><code>CREATE TABLE &quot;Clinic&quot; 
(
    &quot;Clinic ID&quot; Int unique,
    &quot;Location&quot; Varchar,
    &quot;Geolocation&quot; Geometry,
    &quot;Catchment&quot; Geometry,
    &quot;Doctor ID&quot; Int,
    &quot;Patient ID&quot; Int 
        FOREIGN KEY REFERENCES &quot;patient&quot;(&quot;Patient ID&quot;),

    PRIMARY KEY (&quot;Clinic ID&quot;)
);

CREATE TABLE &quot;Doctor&quot; 
(
    &quot;Doctor ID&quot; Int unique,
    &quot;Name&quot; Varchar,
    &quot;Date of birth&quot; Date,
    &quot;Specialism&quot; Varchar,
    &quot;Clinic ID&quot; Int,

    PRIMARY KEY (&quot;Doctor ID&quot;)
);

CREATE TABLE &quot;Patient&quot; 
(
    &quot;Patient ID&quot; Int unique,
    &quot;Clinic ID&quot; Int,
    &quot;Name&quot; Varchar,
    &quot;Date of birth&quot; Date,
    &quot;Date of death&quot; Date,
    &quot;Gender&quot; Varchar,
    &quot;Address&quot; Varchar,
    &quot;Geolocation of address&quot; Geometry,
    &quot;Disease&quot; Varchar,
    &quot;Start of Disease&quot; Date,
    &quot;End of Disease&quot; Date,
    &quot;Lethal&quot; Boolean,

    PRIMARY KEY (&quot;Patient ID&quot;),
    CONSTRAINT &quot;FK_Patient.Patient ID&quot;
        FOREIGN KEY (&quot;Patient ID&quot;) REFERENCES &quot;Clinic&quot;(&quot;Patient ID&quot;)
);

CREATE TABLE &quot;Disease&quot; 
(
    &quot;Severity&quot; Varchar,
    &quot;Name&quot; Varchar,
    &quot;Type of Disease&quot; Varchar,

    PRIMARY KEY (&quot;Name&quot;),
    CONSTRAINT &quot;FK_Disease.Name&quot;
        FOREIGN KEY (&quot;Name&quot;) REFERENCES &quot;Patient&quot;(&quot;Disease&quot;)
);

CREATE TABLE &quot;Agency&quot; 
(
    &quot;Clinic ID&quot; Int,
    &quot;Doctor ID&quot; Int,
    &quot;Agency ID&quot; Varchar,

    PRIMARY KEY (&quot;Agency ID&quot;),
    CONSTRAINT &quot;FK_Agency.Clinic ID&quot;
        FOREIGN KEY (&quot;Clinic ID&quot;) REFERENCES &quot;Clinic&quot;(&quot;Clinic ID&quot;),
    CONSTRAINT &quot;FK_Agency.Doctor ID&quot;
        FOREIGN KEY (&quot;Doctor ID&quot;) REFERENCES &quot;Doctor&quot;(&quot;Doctor ID&quot;)
);
</code></pre>",,0,2,,2021. 12. 11 오후 11:31:26,,2021. 12. 12 오전 7:13:28,2021. 12. 12 오전 7:13:28,,13302,,17654813,,1,0,sql|postgresql,367
70112264,How to populate an array of ids in a select?,"<p>Suppose I have the following two tables:</p>
<pre><code>-- table_1

|   id    |  name  |
|   1000  |  name1 |
|   1001  |  name2 |
|   1002  |  name3 |
|   1003  |  name4 |

-- table_2
_______________________________
|  id  |   table_1_fk_list    |
|  101 |       [1003]         |
</code></pre>
<p>My query returns the following:</p>
<pre><code>[
    {
        &quot;id&quot;: &quot;101&quot;,
        &quot;table_1_elements_list&quot;: [ &quot;1003&quot; ],
    },
]
</code></pre>
<p>But I would like to return this instead:</p>
<pre><code>[
    {
        &quot;id&quot;: &quot;101&quot;,
        &quot;table1ElementsList&quot;: [
            {
                &quot;id&quot;: &quot;1003&quot;,
                &quot;name&quot;: &quot;name4&quot;
            }
        ],
    },
]
</code></pre>
<p>Is it possible to do this? Here is my query:</p>
<pre><code>SELECT
     id,
     table_1_fk_list as &quot;table1ElementsList&quot;
FROM table_2
</code></pre>
<p>I've tried joining these two tables, like so, but it didn't work:</p>
<pre><code>SELECT
     id,
     table_1_fk as &quot;table1ElementsList&quot;
FROM table_2 t2
JOIN table_1 t1
ON (t1.id = ANY(t2.table_1_fk_list))
</code></pre>
<p>With MongoDB, I can use <code>$unwind</code> with aggregation or just a simple <code>populate</code> will do, but I'm a little new to Postgres.</p>",70112451,1,2,,2021. 11. 25 오후 1:51:11,,2021. 11. 25 오후 2:03:51,,,,,2891356,,1,0,postgresql,114
70161596,Incorporate tuples of information in JSON format stored in array in postresql,"<p>I have the following postgresql function that allows me to obtain a table with information from two parameters that are indicated. However, now I want to modify this code so that it allows me to incorporate each tuple of information in JSON format and store all of them in an array and I can not find a way to do it successfully. Thank you in advance for your interest and help.</p>
<pre><code>
CREATE OR REPLACE FUNCTION function_name ( date DATE, name text)
RETURNS json language plpgsql AS $$
BEGIN 
    PERFORM json_agg(row_to_json(row(name, age, address, locality, ID)))
    FROM people, addresses
    RETURN;
END;
$$

</code></pre>",70162064,2,2,,2021. 11. 29 오후 9:35:55,,2021. 12. 3 오후 5:01:46,2021. 12. 3 오후 4:35:49,,17510972,,17510972,,1,-1,postgresql,115
70253133,Convert oracle pivot to Postgres query,"<p>I have a query in Oracle that creates a pivot table and I'm trying to convert it over to postgres.</p>
<p>In Oracle I had the following:</p>
<pre><code>CREATE OR REPLACE VIEW PROGRAM_EXPENDITURES AS (
SELECT ROWNUM AS ID, a.*
FROM (
SELECT * FROM (
    SELECT 8400000 AS PROGRAM_TOTAL, PROGRAM_INCOME, INCENTIVE_AMT_NUM, APP_STATUS FROM HB357
    )
PIVOT (
    SUM(INCENTIVE_AMT_NUM) as incentive, sum(program_income) as income for app_status in ('approved' approved, 'pending' pending, 'void' void)
    )

)a)
</code></pre>
<p>Which gives an output of:</p>
<pre><code>ID | PROGRAM_TOTAL | APPROVED_INCENTIVE | PENDING_INCENTIVE | VOID_INCENTIVE | APPROVED_INCOME | PENDING_INCOME | VOID_INCOME
------------------------------------------------------------------------------------------------------------------------------
1   84000000         3386600               2108.75            1500             2000000           5000000             100
</code></pre>
<p>I read <a href=""https://stackoverflow.com/questions/20618323/create-a-pivot-table-with-postgresql"">this post</a> about using <code>CASE STATEMENTS</code> in PG and have done the following:</p>
<pre><code> SELECT 
    8400000 AS PROGRAM_TOTAL,
    CASE WHEN hb357.app_status = 'Approved' THEN SUM(hb357.incentive_amt_num) END as approved_incentive,
    CASE WHEN hb357.app_status = 'Pending' THEN SUM(hb357.incentive_amt_num) END as pending_incentive,
    CASE WHEN hb357.app_status = 'Void' THEN SUM(hb357.incentive_amt_num) END as void_incentive,
    CASE WHEN hb357.app_status = 'Approved' THEN SUM(hb357.program_income) END as approved_income,
    CASE WHEN hb357.app_status = 'Pending' THEN SUM(hb357.program_income) END as pending_income,
    CASE WHEN hb357.app_status = 'Void' THEN SUM(hb357.program_income) END as void_income
FROM WOODBURN.HB357
GROUP BY hb357.app_status
</code></pre>
<p>But this splits the results by app status into separate rows because of the <code>GROUP BY</code> statement.</p>
<p><a href=""https://i.stack.imgur.com/zUAGW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zUAGW.png"" alt=""PG results"" /></a></p>
<p>But I need the all on the same row. So that results look like this:</p>
<p><a href=""https://i.stack.imgur.com/MzUHy.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/MzUHy.png"" alt=""Desired results in PG"" /></a>
How can achieve this in PG?</p>",,1,2,,2021. 12. 6 오후 11:18:08,,2021. 12. 7 오후 4:47:10,2021. 12. 7 오후 3:43:22,,6477047,,6477047,,1,0,postgresql,117
70078860,SQL Query to represent employee check-in and check-out,"<p>I made the table record as</p>
<pre><code>id              | int
employee_code   | varchar
status          | enum('check_in','check_out')
created         | datetime
</code></pre>
<p>With the following sets of data..which is Check-in and Check-out by employee (4 in a day)</p>
<pre><code>id  employee_code   status          created

1   EMP0001         check_in        2021-11-22 08:00:00
2   EMP0002         check_in        2021-11-22 08:00:50
3   EMP0001         check_out       2021-11-22 13:00:00
4   EMP0002         check_out       2021-11-22 13:01:00
5   EMP0001         check_in        2021-11-22 13:31:00
6   EMP0002         check_in        2021-11-22 13:33:50
7   EMP0001         check_out       2021-11-22 18:03:00
8   EMP0002         check_out       2021-11-22 18:04:00
</code></pre>
<p>Normally 1 employee makes 4 punches...</p>
<p>I want to print fetch record as</p>
<pre><code>employee_code   check_in_at            check_out_at           total_time

EMP0001         2021-11-22 08:00:00    2021-11-22 18:03:00    10:03:00
EMP0002         2021-11-22 08:00:50    2021-11-22 18:04:00    10:04:00
</code></pre>
<p>I used the code</p>
<pre><code>SELECT 
  A1.badge_id,
  A1.timestamp AS check_in_at,
  A2.timestamp AS check_out_at,
  TIMEDIFF(A2.timestamp, A1.timestamp) AS total_time 
FROM
  attendance AS A1 
  INNER JOIN attendance AS A2 
    ON A1.badge_id = A2.badge_id
    AND DATE(A1.timestamp) = DATE(A2.timestamp) 
WHERE 1 = 1 
  AND A1.timestamp = 'check_in' 
  AND A2.timestamp = 'check_out'
  AND DATE(A1.created) = '2021-11-22'
</code></pre>
<p>But its not good as expected..  Any Suggestion.... ?? or code for quick fix</p>",70079050,2,2,,2021. 11. 23 오전 10:03:23,,2022. 6. 23 오전 3:32:55,2022. 6. 23 오전 3:32:55,,9701885,,9701885,,1,0,mysql,376
70109202,Query to get metadata of partitions table is taking a lot of time in bigquery,"<p>Query to get partition metadata for all the tables in a dataset took 40 seconds and sometimes this query run very slow Attaching is the screenshot.<a href=""https://i.stack.imgur.com/uFsAJ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/uFsAJ.png"" alt=""enter image description here"" /></a></p>",,0,2,,2021. 11. 25 오전 10:07:54,,2021. 11. 25 오전 10:07:54,,,,,1298454,,1,0,google-bigquery,129
70222740,How to set 2 user variables in importing csv to mysql? (LOAD DATA INFILE),"<p>I'm trying to import csv file to mysql. But I do not know how to set 2 user variables. I've searched everywhere and only 1 SET user variables are there.</p>
<pre><code>LOAD DATA INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/ks-projects-201612.csv' 
INTO TABLE ks_projects_201612
CHARACTER SET latin1
FIELDS TERMINATED BY ',' 
ENCLOSED BY '&quot;'
LINES TERMINATED BY '\n'
IGNORE 1 ROWS
(id,project_name,sub_category,main_category,currency,@deadline,target,launched,pledge,state,backers,country,usd_pledged,dummy1,dummy2,dummy3,dummy4) 
SET deadline = date_format(str_to_date(@deadline, '%d/%m/%Y %H:%i'), '%Y-%m-%d %h:%i')
SET launched= date_format(str_to_date(@launched, '%d/%m/%Y %H:%i'), '%Y-%m-%d %h:%i');
</code></pre>",72518090,1,2,,2021. 12. 4 오전 3:03:55,,2022. 6. 6 오후 1:01:34,2021. 12. 4 오전 8:30:53,,6152400,,17584830,,1,0,mysql,131
70377321,How to query the first word of a comma separated string starting with square brackets in SQL?,"<p>When I fetch a field using Sql query, I get a string - [test1, test2, test3, test4]. I want the first word of the string i.e. test1. How should i write my query for the same using sql?</p>",,1,2,,2021. 12. 16 오전 10:21:30,,2021. 12. 16 오후 3:54:23,2021. 12. 16 오후 3:54:23,,5390341,,5390341,,1,-2,mysql,132
70201928,SQL Error (1235): This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery',"<p>I am getting the</p>
<pre><code> /* SQL Error (1235): This version of MySQL doesn't yet support 'LIMIT 
&amp; IN/ALL/ANY/SOME subquery' */
</code></pre>
<p>The update query I writing is this</p>
<pre><code>update id_card 
set division_category='678' 
where CODE  IN ( SELECT code  
                 FROM id_card 
                 WHERE CODE LIKE '%922846%' 
                 ORDER BY version DESC LIMIT 1
                 );
</code></pre>
<p>How to re-write this  ?</p>",70202725,2,2,,2021. 12. 2 오후 3:11:29,,2021. 12. 2 오후 4:37:06,2021. 12. 2 오후 4:37:06,,16461952,,2320808,,1,-1,mysql,422
70204864,Handle more than 5000 connections without PGBouncer in PostgreSQL,"<p>We are using, PostgreSQL Version 14.
Our PC configuration at production</p>
<ul>
<li>Windows 2016 Server</li>
<li>32 GB RAM</li>
<li>8 TB Hard disk</li>
<li>8 Core CPU</li>
</ul>
<p>In my PostgreSQL.conf file</p>
<ul>
<li>Shared_buffer 8 GB</li>
<li>Work_MEM 1 GB</li>
<li>Maintenance_work_mem 1 GB</li>
<li>Max_Connections 1000</li>
</ul>
<p>I wish to handle 5000 connection at a time. Somebody suggest me to go with PGBouncer.</p>
<p>But we initially starts with PostgreSQL without PGBouncer.</p>
<p>I need to know, is my configuration is OK with the 5000 connection or we need to increase RAM or any other...
This is our first, PostgreSQL implementation. So Please suggest me to start with PostgreSQL with out PGBouncer.</p>
<p>Thank you</p>
<p>Note:
In SQL if we set -1, it will handle more number of connections. Like this is there any configuration is available in PostgreSQL</p>",,0,2,,2021. 12. 2 오후 6:41:41,,2021. 12. 2 오후 6:41:41,,,,,17574093,,1,0,postgresql,189
70024832,MySQL event or trigger to automatically update a value 30 minutes after last modify,"<p>I have in my DB (<code>db_test</code>) a table (<code>tb_test</code>) with 3 columns (<code>id</code>, <code>test_field</code>, <code>timestamp_ins</code>, <code>timestamp_mod</code>).</p>
<p><code>id</code> is the 'primary key' with auto-increment attribute;</p>
<p><code>test_field</code> is a char(1) that can contains only 2 values ('N' or 'S');</p>
<p><code>timestamp_ins</code> is a datetime with current timestamp (not updating);</p>
<p><code>timestamp_mod</code> is a datetime with current timestamp set to ON UPDATE CURRENT_TIMESTAMP().</p>
<p>I would like <code>test_field</code> automatically returns to default value ('N') 30 minutes after last modify of record indicated in <code>timestamp_mod</code> value.</p>
<p>I'm not expert in mysql, so I need help about this.
Is it possible using phpMyAdmin on a XAMPP virtual server?</p>
<p>--UPDATE--
Solved with this syntax:</p>
<pre><code>CREATE EVENT IF NOT EXISTS test_event
ON SCHEDULE EVERY 1 MINUTE
DO
UPDATE ni0y2__test
SET test_field = DEFAULT
WHERE test_field &lt; NOW() - INTERVAL 30 MINUTE
</code></pre>
<p>Only one doubt:
can this event make my DB performances worse?</p>",,1,2,,2021. 11. 18 오후 6:19:16,,2021. 11. 19 오후 7:48:58,2021. 11. 19 오전 10:43:50,,17449968,,17449968,,1,0,mysql,211
70084545,Performance of INSERT vs INSERT-only clause in INSERT ... ON CONFLICT DO UPDATE with no CONFLICT,"<p>This question concerns PostgreSQL 13.0</p>
<p>Is there a performance difference between an INSERT statement vs. an INSERT... ON CONFLICT DO UPDATE statement if the CONFLICT is never triggered?</p>
<p>I have a weekly bulk data load task where we COPY vendor data into a staging table, perform various exercises with it, and then merge it into our larger historical tables. When this process was first developing, the data volume was relatively low and the vendor did not always send non-overlapping data sets week by week, so we set up an INSERT... ON CONFLICT DO UPDATE statement to handle scenarios where the data in one week overlapped data in the prior week's delivery.</p>
<p>The process has now scaled to include much larger volumes of data and better partitioning by the vendor such that we rarely have any overlap between one week to the next. I'm curious if there's a negative performance impact by putting a larger volume of records through the &quot;upsert&quot; transaction  where the UPDATE is not needed, vs. some process by which I explicitly identify rows to INSERT versus rows to UPDATE and load the data in two separate transactions.</p>",,0,2,,2021. 11. 23 오후 4:38:45,,2021. 11. 23 오후 4:38:45,,,,,7873322,,1,0,postgresql,219
70332770,How to truncate seconds from timestamp in postgres?,"<p>I have the following field in my table:</p>
<pre><code>VISIT_DATE TIMESTAMP(0)
</code></pre>
<p>And it is holding time like that:</p>
<pre><code>2022-01-13 11:04:15
</code></pre>
<p>Could someone tell me is it possible to cut off that seconds? I really don't need them.
I want to hold time in the following format:</p>
<pre><code>2022-01-13 11:04
</code></pre>",70333011,1,2,,2021. 12. 13 오전 9:55:57,,2021. 12. 13 오전 10:20:28,,,,,17316454,,1,1,sql|postgresql,476
70040923,Unnesting repeated records to a single row in Big Query,"<p>I have a dataset that includes repeated records. When I unnest them I get 2 rows. 1 per nested record.</p>
<p>Before unnest raw data:</p>
<p><a href=""https://i.stack.imgur.com/M2yKT.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/M2yKT.png"" alt=""![enter image description here"" /></a></p>
<p>After unnest using this query:</p>
<pre><code>SELECT
  eventTime
  participant.id
FROM
 `public.table`,
UNNEST(people) AS participant
WHERE
verb = 'event'
</code></pre>
<p><a href=""https://i.stack.imgur.com/RZyI5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/RZyI5.png"" alt=""enter image description here"" /></a></p>
<p>These are actually 2 rows that are expanded to 4. I've been trying to unnest into a single row so I have 3 columns,</p>
<p>eventTime, buyer.Id, seller.Id.</p>
<p>I've been trying to use REPLACE to build a struct of the unnested content but I cannot figure out how to do it. Any pointer , documentation or steps that could help me out?</p>",70041482,1,2,,2021. 11. 19 오후 9:07:09,,2021. 11. 22 오후 6:55:24,2021. 11. 22 오후 6:55:24,,395146,,395146,,1,0,google-bigquery,231
70332810,PostgreSQL problem: System has not been booted with systemd as init system (PID 1),"<pre><code>psql: error: connection to server on socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot; failed: No such file or directory
        Is the server running locally and accepting connections on that socket?
</code></pre>
<p>I tried to follow <a href=""https://stackoverflow.com/questions/31645550/postgresql-why-psql-cant-connect-to-server"">PostgreSQL: Why psql can&#39;t connect to server?</a> but after typing</p>
<pre><code>sudo service postgresql start
</code></pre>
<p>I get:</p>
<pre><code> * Starting PostgreSQL 14 database server                                                                                * Error: /usr/lib/postgresql/14/bin/pg_ctl /usr/lib/postgresql/14/bin/pg_ctl start -D /var/lib/postgresql/14/main -l /var/log/postgresql/postgresql-14-main.log -s -o  -c config_file=&quot;/etc/postgresql/14/main/postgresql.conf&quot;  exited with status 1:
2021-12-13 10:54:29.791 CET [180] LOG:  starting PostgreSQL 14.1 (Ubuntu 14.1-2.pgdg20.04+1) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0, 64-bit
2021-12-13 10:54:29.797 CET [180] LOG:  could not bind IPv4 address &quot;127.0.0.1&quot;: Permission denied
2021-12-13 10:54:29.798 CET [180] WARNING:  could not create listen socket for &quot;localhost&quot;
2021-12-13 10:54:29.798 CET [180] FATAL:  could not create any TCP/IP sockets
2021-12-13 10:54:30.039 CET [180] LOG:  database system is shut down
pg_ctl: could not start server
Examine the log output.
</code></pre>
<p>After: sudo find /tmp/ -name .s.PGSQL.5432 -&gt; nothing
After: sudo systemctl status postgresql -&gt; System has not been booted with systemd as init system (PID 1). Can't operate. Failed to connect to bus: Host is down</p>
<p>How to fix it? I am trying to install chirpstack LoraWAN server</p>",,1,2,,2021. 12. 13 오전 9:59:47,,2022. 3. 31 오후 3:26:59,2021. 12. 22 오후 3:58:47,,319826,,17439499,,1,0,postgresql,1003
70033390,to write case when to another case when in one select Google Big Query,"<p>I'm a new user in Google Big Query and I want to write two &quot;Case when....&quot; in one select, and they should be connected to each other</p>
<p>For example:</p>
<p><code>Case when number = 1 then 'one' when number=2 then 'two' else 'other' end as mark</code></p>
<p><code>Case when mark = 'one' then 'red' when mark='two' then 'orange' else 'other' end as color</code></p>
<p>But I have mistake like 'Unrecognized name: mark at [8:14]'</p>
<p>I used all the options with apostrophe but still have the same result.</p>
<p>I also try to find answer in BigQuery Documentation but it was unsuccessfully.</p>
<p>Is it even possible to do this?</p>",70033469,2,3,,2021. 11. 19 오전 10:31:24,,2021. 11. 19 오후 8:20:05,,,,,16016201,,1,1,google-bigquery,266
70188457,How can i use select to make custom value to compare ON DUPLICATE UPDATE,"<p>I have 2 unique columns. and I want to put another value if I find a duplicate.</p>
<p>can i make it by adding select like this?</p>
<pre class=""lang-sql prettyprint-override""><code>INSERT INTO `invoices` (`id_invoice`, `inv_code`, `inv_date`, `customer_id`, `outlet_id`, `marketing_source_id`, `consultant_id`, `therapist_id`, `staff_id`, `agent_id`, `expired_date`, `total`, `remaining`, `remarks`, `inv_remarks`, `status_inv`, `void_invoice`, `customer_sign`, `created_at`, `updated_at`)

 VALUES
(4, 'HD-I-202002-0002', '2020-02-08', 2, 1, 3, 1, 3, 3, 0, '2021-02-08', 440000, 0, NULL, NULL, 1, 0, NULL, '2020-02-08 04:54:09', '2020-02-08 04:54:09'),
....
....
....
SELECT CONCAT(LEFT(`inv_code`, 12), LPAD(RIGHT(`inv_code`, 4)+1, 4 ,'0')) as inv_codes from invoices where id_invoice = id_invoice;
ON DUPLICATE KEY UPDATE 
  id_invoice=VALUES(id_invoice+1),
  inv_code = VALUES(inv_codes)
;
</code></pre>",,0,3,,2021. 12. 1 오후 5:12:01,,2021. 12. 1 오후 5:12:01,,,,,13641961,,1,0,mysql,12
70104487,How to select second max value for each rows (MySQL),"<p>Table looks like below.</p>
<pre><code>+-------+------+------+-----+---------+-------+
| Field | Type | Null | Key | Default | Extra |
+-------+------+------+-----+---------+-------+
| id    | int  | YES  |     | NULL    |       |
| count | int  | YES  |     | NULL    |       |
+-------+------+------+-----+---------+-------+
</code></pre>
<p>id value can be duplicated.
I want to select second max value for each id.</p>
<p>For example,</p>
<pre><code>+------+-------+
| id   | count |
+------+-------+
|    1 |    10 |
|    1 |     6 |
|    1 |     3 |
|    5 |    11 |
|    5 |    15 |
|    2 |     4 |
|    2 |     8 |
+------+-------+
</code></pre>
<p>In this case, I want to select like below.</p>
<pre><code>+------+-------+
| id   | count |
+------+-------+
|    1 |     6 |
|    5 |    11 |
|    2 |     4 |
+------+-------+
</code></pre>
<p>How can i select it?</p>",,0,3,,2021. 11. 25 오전 12:21:10,,2021. 11. 25 오전 12:21:10,,,,,10794086,,1,0,mysql,13
70031964,mysql column data type - which datatype to use that accepts special letters or chars?,"<p>I have entered in my form this data to test &quot;Do Goldenen Schlüssel&quot; and successfully saved to table,. However, when output in another page it is now &quot;DoGoldenen SchlÃ¼ssel&quot;.
My datatype is only Varchar. Could you help me to specify which solution to be adjusted on my table in order to correctly accepts these kind of strings.</p>
<p>Thanks in advance</p>",,0,3,,2021. 11. 19 오전 8:37:30,,2021. 11. 19 오전 8:37:30,,,,,17138725,,1,0,mysql,14
70185821,MySQL KeyColumn doesn't exist on Foreign Key,"<p>I currently have the following MySQL database structure:</p>
<p>WebsiteUsers:</p>
<pre><code>WS_UsersID (INT(10) UNSIGNED PRIMARY KEY)
WS_Username (VARCHAR(255) NOT NULL)
WS_Password (VARCHAR(255) NOT NULL)
WS_Email (VARCHAR(255) NOT NULL)
WS_UserActive (TINYINT(1) UNSIGNED DEFAULT '1')
WS_UserCreated (DATETIME)
WS_UserModified (DATETIME)
</code></pre>
<p>WebsiteTaskTypes:</p>
<pre><code>WS_TaskTypeID (INT(10) UNSIGNED PRIMARY KEY)
WS_TaskTypeName (VARCHAR(255)) NOT NULL
</code></pre>
<p>Only indexes set up in the InnoDB tables are the 2 primary keys respectively, both being named of course &quot;PRIMARY&quot;, pointing to the columns listed above.</p>
<p>In PHPMyAdmin I would like to run the following MySQL command:</p>
<pre><code>CREATE TABLE WebsiteTasks (
    WS_TaskID INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    FOREIGN KEY WS_UserID (WS_UserID) REFERENCES WebsiteUsers (WS_UsersID),
    FOREIGN KEY WS_TaskTypeID (WS_TaskTypeID) REFERENCES WebsiteTaskTypes(WS_TaskTypeID),
    WS_TaskActive BOOLEAN NOT NULL DEFAULT '1',
    WS_TaskCompletedBy INT(10) UNSIGNED COMMENT 'User who completed task',
    WS_TaskCreated DATETIME,
    WS_TaskModified DATETIME
) CHARSET=utf8mb4;
</code></pre>
<p>However, this gives the following error message: <code>#1072 - 'WS_UserID' Key Column doesn't exist in table.</code></p>
<p>What am I doing wrong here? Could someone please explain it to me, and give me a fix? :D</p>",70185974,1,3,,2021. 12. 1 오후 2:16:42,,2021. 12. 1 오후 2:32:11,2021. 12. 1 오후 2:20:38,,2310830,,15813625,,1,0,mysql,17
70272470,Mysql 8.0: Query becomes intractable if requesting JSON column from a LEFT JOINed table,"<p>I have a problem regarding a query I built on my database, and I am at a loss on why this happens:</p>
<p>I have tables A and B, where A contains its id and a datetime column, while B has a foreign key linked to <code>A.id</code>, one text and one JSON column containing arrays.</p>
<p>My query looks like this</p>
<pre><code>SELECT A.datetime,
 B.text_col,
 B.json_col
FROM A
LEFT JOIN B ON B.a_id = A.id
WHERE A.datetime BETWEEN &quot;2021-12-07 09:55:14&quot; AND &quot;2021-12-08 09:55:14&quot;
</code></pre>
<p>This query takes forever (I haven't yet managed to see it completed).</p>
<p>But simply removing the <code>B.json_col</code> from <code>SELECT</code> makes the query super fast, so does using an <code>INNER JOIN</code> rather than a <code>LEFT JOIN</code>.</p>
<p>Given the characteristics of the tables, the quantity of data returned by each query should not be really different: only ~5% of rows from A should not have at least one corresponding B row, and the JSON field is relatively small (2 or 3 elements of 100 characters each).</p>
<p>It almost seems like a bug to me, but I wanted to check if I wasn't missing something obvious (or not so obvious) regarding JSON fields in Mysql that would prevent me from getting a JSON field from a LEFT JOIN.</p>",,0,3,,2021. 12. 8 오전 9:13:14,0,2021. 12. 8 오전 9:13:14,,,,,7505228,,1,0,mysql,18
70048407,"how can I create several databases and some schemas as a SQL statement, with postgres","<p>how can I achieve this:</p>
<pre><code>CREATE DATABASE test0;
CREATE SCHEMA s0; &lt;- in test0

CREATE DATABASE test1;
CREATE SCHEMA  s1; &lt;- in test1
</code></pre>
<p>without using pgsql, so no /connect in between.</p>
<p>do I have to log as admin, create the dbs, then connect under each db and then create the schemas? or can I do all at once when logged as admin?</p>",,0,3,,2021. 11. 20 오후 5:45:48,,2021. 11. 20 오후 5:45:48,,,,,695498,,1,0,postgresql,21
70349402,Is there a way to store multiple data in one field in MySql?,"<p>I have a field(Vehicle Brand Specialty) that stores the brand which mechanics are proficient in, but there could be more than one brand. I know it goes against 1NF to store multiple entries in one field but I could also store the data but separated by commas. What is the best option here?</p>",70349860,1,3,,2021. 12. 14 오후 1:09:15,,2021. 12. 14 오후 1:42:23,2021. 12. 14 오후 1:36:40,,9661424,,16960882,,1,0,mysql,21
70120939,MySQL select query issue when showing row values as columns,"<p>Is there a way to show row values as column values.
Lets say I have a table called A and which contains 5 records with 3 columns. Below image show the data set. Rows always 5.</p>
<p><a href=""https://i.stack.imgur.com/x0p5D.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/x0p5D.png"" alt=""enter image description here"" /></a></p>
<p>In Here I need to show value column values in a line with temporary column names
If I use simple select query as
Select row1.value as col1, row2.value as col2, row3.value as col3, row4.value as col4, row5.value as col5</p>
<p>so my expected result need to show as below</p>
<p><a href=""https://i.stack.imgur.com/8GXZF.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/8GXZF.png"" alt=""enter image description here"" /></a></p>
<p>Please tell me how to use select query to get this result in MySQL</p>",,0,3,,2021. 11. 26 오전 7:38:35,,2021. 11. 26 오전 7:47:50,2021. 11. 26 오전 7:47:50,,4122324,,4122324,,1,0,mysql,22
70062662,Distinguishing which value is obtained from COALESCE by concatenating the value to a different prefix,"<pre><code>SELECT COALESCE(grouped_wells.groupforecasting_id,wells.id) as the_id,  string_agg(wells.name,', ') as well_name, sum(gas_cd) as gas_cd, date 
FROM productions
INNER JOIN completions on completions.id = productions.completion_id 
INNER JOIN wellbores on wellbores.id = completions.wellbore_id 
INNER JOIN wells on wells.id = wellbores.well_id 
INNER JOIN fields on fields.id = wells.field_id 
INNER JOIN clusters on clusters.id = fields.cluster_id
     
     
LEFT JOIN grouped_wells on grouped_wells.wells_id = wells.id
LEFT JOIN groupforecasting on groupforecasting.id = grouped_wells.groupforecasting_id and groupforecasting.workspace_id = 3
     
     
GROUP BY the_id, productions.date
ORDER BY the_id, productions.date
</code></pre>
<p>In the above SQL, I am grouping by <code>the_id</code> that results from <code>COALESCE</code>. I want to avoid grouping <code>grouped_wells.groupforecasting_id</code> of equal value to <code>wells.id</code>.<br />
One possible way is to add a prefix depending on which of the two value I got from <code>COALESCE</code>, either add &quot;group_&quot; or &quot;well_&quot;.</p>
<p>How to add this conditional prefix to <code>the_id</code>?</p>
<p>If <code>grouped_wells.groupforecasting_id</code> is Null then concatenate &quot;well_&quot; to the result of <code>COALESCE</code>.<br />
Else concatenate &quot;group_&quot; to the result of <code>COALESCE</code>.</p>",70063373,1,3,,2021. 11. 22 오전 8:08:57,,2021. 11. 22 오전 9:18:37,2021. 11. 22 오전 8:16:57,,947473,,947473,,1,1,sql|postgresql,23
70212945,Storing articles with separate chapters,"<p>I'm in the process of building a simple blog-ish website, and I'm unsure about how to structure storage of articles/blogs in a database. I have a very simple editor, which separates input into individual chapters before submitting them, like (retrieved from php print_r):</p>
<pre><code>Array
(
    [entry_title] =&gt; ENTRY_TITLE
    [chapter_header] =&gt; Array
    (
        [0] =&gt; CHAPTER_1
        [1] =&gt; CHAPTER_2
    )

    [chapter_content] =&gt; Array
    (
        [0] =&gt; Lorem Ipsum...
        [1] =&gt; Lorem Ipsum...
    )
)
</code></pre>
<p>Should I create a new table for storing chapters individually, or concatenate all chapters into one long string and store as a single TEXT field?</p>
<p>Imagined database structure would be something like:</p>
<pre><code>TABLE posts:
id
title
chapters (references unique table with chapters for this specific entry)

TABLE chapters (unique identifier per post):
chapter_header
chapter_content
</code></pre>
<p>vs. this, storing article as one long string</p>
<pre><code>TABLE posts:
id
title
content (with html tags to separate titles and chapters)
</code></pre>
<p>I imagine the first structure will make it easier to identify unique chapters, for styling purposes (without having to parse the input to add unique identifiers in the form of HTML classes or IDs). However, I'm not sure if creating a new table for each entry is &quot;correct procedure&quot; or considered bad practice.</p>",,0,3,,2021. 12. 3 오전 10:37:09,,2021. 12. 3 오전 10:37:09,,,,,14192680,,1,0,mysql,23
70193135,How can I add a connection to a node that might not exist?,"<p>I'm excited about the new <code>connectOrCreate</code> but I'm stumped on how to use it. Hoping I could get some help.</p>
<p>I have this structure:</p>
<p><code>(t:Topic)-[:VOTE_HAS_THING]-(v:Vote)-[:VOTE_HAS_FACT]-(d:Detail)</code></p>
<p>Which essentially allows users to vote for specific Detail/Topic combinations. User votes look like this:</p>
<p><code>(u:User)-[:VOTED]-(v:Vote)</code></p>
<p>And I'd like to leverage MERGE queries like this:</p>
<p>Where thing.id = X and detail.id = Y, find and connect the relevant Vote node or create it if one does not exist.</p>
<p>I don't plan to create Vote nodes until they're needed, so I think MERGE statements would make sense here, any ideas? Am I supposed to use a <code>createVotes</code> as my top-level mutation?</p>
<p>Essentially my question is: can I add relationships between <code>User</code> and <code>Vote</code> and if <code>Vote</code> doesn't exist, then create it and then connect User.</p>
<p>Should I make the ID for the <code>Vote</code> node something that I can &quot;guess&quot; which would just be Topic.id + Detail.id? So I can just check to see if that ID exists, if not then create it?</p>",,0,3,,2021. 12. 2 오전 1:14:19,,2021. 12. 2 오전 1:14:19,,,,,1604072,,1,0,neo4j,24
70375593,PostgreSQL: how to simulate long running query,"<p>I need to simulate a long-running Connection to PostgreSQL (f.e. 60 seconds) to verify my application can handle it.
I believe that by adding a few millions rows to a Table would work, however I'd need a more deterministic approach, such as a PostgreSQL Procedure with a function or a loop. That would not require to fill tables at first and empty them at the end of the test.
Can you recommend anything that would work for my case?
Thanks</p>",,0,3,,2021. 12. 16 오전 7:56:47,,2021. 12. 16 오전 7:56:47,,,,,5929425,,1,0,postgresql,24
70104162,How to know which column flagged up in MySQL,"<p>Here's a tricky one (I think...)</p>
<p>Let say I have four columns : SKU, UPC, Product_Description and Product_ID</p>
<p>I have this kind of query:</p>
<pre><code>SELECT UPC, SKU, Product_Description, Product_ID
FROM tblProducts 
WHERE UPC LIKE '%$q%' OR SKU LIKE '%$q%' OR Product_Description LIKE '%$q%' 
</code></pre>
<p>I need all information to be retrieved (product_ID, SKU, UPC and so on...) and must importantly, I must know which column fitted the LIKE (is it UPC or SKU or Product_Description???)</p>
<p>I was thinking about making the ~ same query 3 times (one for the SKU, another one for the UPC, etc) to know which one fitted the like. But I guess there's a better way to do that.</p>",,1,3,,2021. 11. 24 오후 11:31:41,,2021. 11. 24 오후 11:41:19,2021. 11. 24 오후 11:41:19,,2571021,,8603821,,1,0,mysql,29
70042290,MySQL query with condition from 2 tables,"<p>I'm new to programming and MySQL and I think this is simple but not for me. So, I have two tables, Tickets and Ticket_user, and I need to get all the fields from the Table Ticket where user_id =15 and ticket_id &gt;8.</p>
<p>Table 1 : Ticket</p>
<pre><code>id             name          ...... other fields
7              Tickte1            
8              Tickte2  
9              ticket3
10             ticket4
11             Tickte5
</code></pre>
<p>Table 2 : Ticket_users</p>
<pre><code>   id   ticket_id     User_id
   1     7             15           
   2     8             16
   3     9             15
   4     10            15
   5     11            8
</code></pre>
<p>Result:</p>
<pre><code>  ticket_id     name          ...... other fields
  9             Tickte3             
  10             ticket4
</code></pre>
<p>How can I achieve this?</p>",70042336,2,3,,2021. 11. 20 오전 12:27:51,,2021. 11. 20 오후 5:06:09,2021. 11. 20 오후 5:06:09,,10871073,,17417476,,1,0,mysql,30
70116664,PostgreSQL: how do I find all possible object types for pg_event_trigger_dropped_objects,"<p>Can someone tell me where or how to find all possible <strong>object types</strong> for the  pg_event_trigger_dropped_objects
Official <a href=""https://www.postgresql.org/docs/10/functions-event-triggers.html"" rel=""nofollow noreferrer"">documentation </a>about this function doesn't have a list of objects,
I know there is</p>
<pre><code>object_type = 'table' 
</code></pre>
<p>But what is the rest of the object types?</p>",,1,3,,2021. 11. 25 오후 8:01:58,,2021. 11. 26 오전 7:29:54,,,,,1824969,,1,0,sql|postgresql,30
70309329,Values inserted to bigint column comes out as date,"<p>My table looks like this;</p>
<pre><code>CREATE TABLE `runlog` (
  `id` int NOT NULL AUTO_INCREMENT,
  `contentid` int DEFAULT NULL,
  `contentType` int DEFAULT NULL,
  `overlay` varchar(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  `option` varchar(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  `trt` int DEFAULT NULL,
  `contentaltid` int DEFAULT '0',
  `channelName` varchar(45) DEFAULT NULL,
  `datetime` bigint NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=225129 DEFAULT CHARSET=utf8;
</code></pre>
<p>In the datetime column the intent is to store a unix timestamp. I previously had a colum that kept a &quot;timestamp&quot; datatype. I ran <code>update runlog set 'datetime' unix_timestamp(timestamp) * 1000</code> when I made the change and the previously created records are correct. But from this point on, if I do</p>
<p><code>insert into runlog  (contentid, contenttype, overlay, datetime, trt) values (3107, 0, 'None', 1639161815692, 185.75 )</code></p>
<p>in the table, the record inserted says;</p>
<pre><code>'225126', '3107', '0', 'LATE', NULL, NULL, '0', 'East', '20211209230329'
</code></pre>
<p>Why would it take 1639161815692 and return 20211209230329?</p>",,0,3,,2021. 12. 10 오후 7:08:13,,2021. 12. 10 오후 7:08:13,,,,,3579495,,1,0,mysql,30
70045353,How to add random numbers to mysql row php,"<p>I have a table like this. I want to add random numbers 1 to 40 to the table. But not just one numbers. for example for video id 1, i want to add 3 numbers. and others are random 2 or 3.</p>
<p><a href=""https://i.stack.imgur.com/klATE.png"" rel=""nofollow noreferrer"">SEE THE IMG</a></p>",,1,3,,2021. 11. 20 오전 11:12:19,,2021. 11. 22 오전 8:51:26,,,,,14747821,,1,0,mysql,32
70089170,How to define an array as a data type and push an integer value in MySql?,"<p>Actually I'm using MySql as a db in Node.js. My app is basically allows users to like the post that others share, so I want to store users IDs that liked the post into an array as a data type, but I'm finding trouble defining the right data type and then push the new user id into that array in mysql query.
I almost spent the whole day looking for my answer but unfortunately i always come across PHP code ! Hopefully someone could give the correct answer.</p>
<p>This is a part of my code :</p>
<pre><code>db.query('CREATE TABLE post_likes (
id INT PRIMARY KEY AUTO INCREMENT,
likes INT,
post_id INT,
users_liked JSON'));


// All the values of these variables are numerical values
const { like, post_id, user_id } = req.body;

db.query('UPDATE post_likes SET likes = likes + ?, users_liked = users_liked + ?  WHERE post_id = ?',like, user_id, post_id, (err, result)=&gt;{
                    if (err) {
                        return res.status(500).send(err);
                    }
                    res.status(200).json({ message: &quot;Added a like!&quot; });
</code></pre>",,0,3,,2021. 11. 23 오후 11:44:51,,2021. 11. 24 오전 8:36:34,2021. 11. 24 오전 8:36:34,,16662362,,16662362,,1,0,mysql,33
70160379,how to insert value and use subquery to insert the last value?,"<p>I have two tables <code>customer</code> and <code>shipping_details</code>,</p>
<pre><code>customer

first_name
last_name
phone
shipping_detail_id


shipping_details

shipping_detail_id
address
</code></pre>
<p>where the shipping id that I need to insert has an address of 'fakeadressstreet'</p>
<p>The values I want to insert are 'Jackson,' mike',12345,(shipping detail id where address is = fakeadressstreet).
the last value I need to insert depends on another column which is my second table no sure how to insert that value but  I hope it makes sense.</p>",,1,3,,2021. 11. 29 오후 7:36:06,,2021. 11. 29 오후 8:03:08,2021. 11. 29 오후 8:00:02,,16549922,,16549922,,1,1,mysql,33
70231710,Cannot Add or Update Child Row,"<p>I have code written for a MySQL database containing 5 tables. The code I've written is as follows.</p>
<pre><code>```create database BLUE_OX_DISTRIBUTION;```

```use BLUE_OX_DISTRIBUTION;```

```create table CUSTOMERS(CUSTOMER_NUM int(5), CUSTOMER_NAME varchar(35), STREET varchar(25), CITY char(15), STATE char(2), ZIP_CODE int(5), BALANCE dec(15,15), CREDIT_LIMIT dec(15,15), REP_NUM int(2), primary key(CUSTOMER_NUM));```
</code></pre>
<pre><code>Query OK, 0 rows affected, 2 warnings (0.05 sec)```

```create table REPS(REP_NUM int(2), LAST_NAME char(15), FIRST_NAME char(15), street VARCHAR(15), CITY char(15), STATE char(2), ZIP_CODE int(5), COMM_RATE dec(15,15), primary key (REP_NUM));```

```create table ORDERS(ORDER_NUM int(5), ORDER_DATE date, CUSTOMER_NUM int(3), foreign key(CUSTOMER_NUM) references CUSTOMERS(CUSTOMER_NUM));```

```create index ORDER_LINES_TO_ORDERS_INDEX on ORDERS(ORDER_NUM);```

```create table ORDER_LINES(ORDER_NUM int(5), ITEM_NUM varchar(4), NUM_ORDERED int(3), QUOTED_PRICE varchar(10), foreign key(ORDER_NUM) references ORDERS(ORDER_NUM), foreign key(ITEM_NUM) references ITEMS(ITEM_NUM), primary key(ORDER_NUM,ITEM_NUM));```

When I try to enter data into the table, I keep getting an error back that says &quot;cannot add or update a child row&quot; and I'm not sure why. What is the problem here? How can I rewrite the code to accept data?


    insert into ORDERS VALUES ('51608','2015-10-12','126'), ('51610','2015-10-12','334'), ('51613','2015-10-13','386'), ('51614','2015-10-13','260'), ('51617','2015-10-15','586'), ('51619','2015-10-15','126'), ('51623','2015-10-15','586'); Insert into REPS VALUES  ('15','Campos','Rafael','724 Vinca Dr','Grove','CA','90092','0.06'), ('30','Gradey','Megan','632 Liatris St','Fullton','CA','90085','0.08'), ('45','Tian','Hui','1785 Tyler Ave','Northfield','CA','90098','0.06'), ('60','Sefton','Janet','267 Oakley St','Congaree','CA','90097','0.06');
</code></pre>",,0,3,,2021. 12. 5 오전 5:28:17,,2021. 12. 5 오전 8:35:41,2021. 12. 5 오전 8:35:41,,3522312,,12140275,,1,0,mysql,34
70345933,I can get the correct results after deleting the index. But after adding the index the result becomes strange in Postgresql,"<p>I am searching for a long time on net. But no use. Please help or try to give some ideas how to achieve this. name='chen5915' is not found, database also has such a record and execution plan also be found, I think no other characters after 'chen5915' because I can query after deleting the index and name='chen5915' is true.</p>
<pre><code>select 
(select name = '不改名字不加会班'  from table_name where name = '不改名字不加会班' ) as  a,
(select name = '不改名字不加会班'   from table_name where name like '%不改名字不加会班' ) as  b,
(select name = 'chen5915'  from table_name where   name = 'chen5915' ) as  c,
(select name  = 'chen5915'   from table_name where   name like '%chen5915' ) as  d
</code></pre>
<p>the result is:</p>
<pre><code>a,b,c,d
&quot;t&quot;,&quot;t&quot;,null,&quot;t&quot; 
</code></pre>
<p>Execution plan result:</p>
<pre><code>Result  (cost=2735.99..2736.00 rows=1 width=4)
  InitPlan 1 (returns $0)
    -&gt;  Index Only Scan using table_name_name_idx on table_name  (cost=0.43..2.65 rows=1 width=1)
          Index Cond: (name = '不改名字不加会班'::text)
  InitPlan 2 (returns $1)
    -&gt;  Bitmap Heap Scan on table_name table_name_1  (cost=475.90..1365.34 rows=800 width=1)
          Recheck Cond: ((name)::text ~~ '%不改名字不加会班'::text)
          -&gt;  Bitmap Index Scan on table_name_name_gin_idx  (cost=0.00..475.70 rows=800 width=0)
                Index Cond: ((name)::text ~~ '%不改名字不加会班'::text)
  InitPlan 3 (returns $2)
    -&gt;  Index Only Scan using table_name_name_idx on table_name table_name_2  (cost=0.43..2.65 rows=1 width=1)
          Index Cond: (name = 'chen5915'::text)
  InitPlan 4 (returns $3)
    -&gt;  Bitmap Heap Scan on table_name table_name_3  (cost=475.90..1365.34 rows=800 width=1)
          Recheck Cond: ((name)::text ~~ '%chen5915'::text)
          -&gt;  Bitmap Index Scan on table_name_name_gin_idx  (cost=0.00..475.70 rows=800 width=0)
                Index Cond: ((name)::text ~~ '%chen5915'::text)
</code></pre>
<pre><code>pg_encoding_to_char,datcollate,datctype
&quot;UTF8&quot;,&quot;zh_CN.utf8&quot;,&quot;zh_CN.utf8&quot;
</code></pre>",,0,3,,2021. 12. 14 오전 8:38:02,,2021. 12. 15 오전 9:26:07,2021. 12. 15 오전 9:26:07,,17671705,,17671705,,1,0,postgresql,34
70378584,PostgreSQL match on jsonb property value,"<p>I have a PostgreSQL database with a where one of the columns is a jsonb object with a similar structure as this:</p>
<pre><code>{
  &quot;SomeObject&quot;: {
      &quot;DoNotCheckMe&quot;: 111,
      &quot;OrMe&quot;: 222
  },
  &quot;MatchObject&quot;:{
      &quot;MatchOnMe&quot;: 333,
      &quot;OtherProperty&quot;: &quot;Hello&quot;
  }
}
</code></pre>
<p>I need a query which returns all rows where <code>MatchObject.MatchOnMe</code> has a specific value
With my current knowledge, I am able to get all rows from the table, that has that object and property on it with the given query:</p>
<pre><code>SELECT id, value, info FROM table WHERE (info -&gt; 'MatchObject')::jsonb ? 'MatchOnMe'
</code></pre>
<p>But I do not know how to get only those that matches a specific value of <code>MatchOnMe</code>, i.e. <code>123</code></p>
<p>Am I close with the current check, or do I need to do something else?</p>",,0,3,,2021. 12. 16 오전 11:54:47,,2021. 12. 16 오전 11:54:47,,,,,2344995,,1,0,postgresql,36
70262346,Unable to create a table and import the data from excel using SQL query in PostgreSQL,"<p>I'm using the below SQL query to create a table and copy the values from an excel:</p>
<pre><code>CREATE TABLE teacher (
DAILY_ALLOWANCE INTEGER
,DATE_OF_BIRTH DATE
,EMAIL VARCHAR(35)
,FIRST_NAME VARCHAR(35)
,FULL_NAME VARCHAR(35)
,ID VARCHAR(35)
,NAME VARCHAR(35)
,NUMBER_OF_STUDENTS INTEGER
,OWNERID VARCHAR(35)
,SALARY INTEGER
,TEACHER_UNIQUE_ID VARCHAR(15)
,YEARS_OF_EXPERIENCE INTEGER
) copy teacher (
DAILY_ALLOWANCE
,DATE_OF_BIRTH
,EMAIL
,FIRST_NAME
,FULL_NAME
,ID
,NAME
,NUMBER_OF_STUDENTS
,OWNERID
,SALARY
,TEACHER_UNIQUE_ID
,YEARS_OF_EXPERIENCE
)
FROM 'C:\Users\Surendra Anand R\Desktop\Note!\Files\Teacher.csv' csv header;
</code></pre>
<p>But I'm getting an error:</p>
<pre><code>ERROR:  syntax error at or near &quot;copy&quot;
LINE 14: ) copy teacher ( 
</code></pre>
<p>Could anyone please explain what I'm missing?.</p>",70272654,1,3,,2021. 12. 7 오후 2:56:12,,2021. 12. 8 오전 9:29:49,2021. 12. 7 오후 3:17:34,,17166413,,17166413,,1,1,postgresql,37
70082019,"How to fix "" You can't specify target table 'project' for update in FROM clause""","<p>I am getting the error</p>
<pre><code>&quot;You can't specify target table 'project' for update in FROM clause&quot;
</code></pre>
<p>My query</p>
<pre><code>UPDATE project, id_card 
SET project.family_id = id_card.family_new 
WHERE project.PROJECT_ID = id_card.project 
AND  id_card.code IN( select distinct code from id_card ic
inner join  project p on p.PROJECT_ID = ic.project 
AND  p.current_id_card_version = ic.version 
where ic.id_card_status ='ARCHIVED');
</code></pre>",70082189,1,3,,2021. 11. 23 오후 1:44:30,,2021. 11. 23 오후 1:55:35,,,,,2320808,,1,0,mysql,39